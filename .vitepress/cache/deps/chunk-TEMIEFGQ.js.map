{
  "version": 3,
  "sources": ["../../../node_modules/ui/utils/helper/create-increase.ts", "../../../node_modules/ui/utils/dom/z-index.ts", "../../../node_modules/ui/compositions/use-config/index.ts", "../../../node_modules/ui/compositions/use-fallback-props/index.ts", "../../../node_modules/ui/components/loading/loading.vue", "../../../node_modules/ui/components/loading/directive.ts"],
  "sourcesContent": ["/**\r\n * 创建一个自增函数\r\n * @param initial 初始值\r\n * @returns\r\n */\r\nexport function createIncrease(initial = 1000): () => number {\r\n  let value = initial\r\n\r\n  const increase = () => {\r\n    return value++\r\n  }\r\n\r\n  return increase\r\n}\r\n", "import { createIncrease } from '../helper/create-increase'\r\n\r\n/**\r\n * z轴层级\r\n * 保证每个新打开的弹框的位置都处于上层\r\n */\r\nexport const zIndex = createIncrease(1000)\r\n", "import { reactive, readonly, watch } from 'vue'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\nimport { isObj } from 'cat-kit/fe'\r\n\r\ninterface State {\r\n  /** 是否开启动画，机器老可以关闭动画来获得性能 */\r\n  animation: boolean\r\n  /** 组件尺寸大小 */\r\n  size: ComponentSize\r\n  /** 表单 */\r\n  form: {\r\n    /** 标签宽度 */\r\n    labelWidth?: number | number\r\n  }\r\n  paginator: {\r\n    pageSize: number\r\n    pageSizeOptions: number[]\r\n  }\r\n}\r\n\r\nconst state = reactive<State>({\r\n  animation: true,\r\n  size: 'default',\r\n  form: {\r\n    labelWidth: 80\r\n  },\r\n  paginator: {\r\n    pageSize: 40,\r\n    pageSizeOptions: [40, 100, 200, 500, 1000]\r\n  }\r\n})\r\n\r\nwatch(\r\n  () => state.size,\r\n  (size, oldSize) => {\r\n    oldSize && document.documentElement.classList.remove(oldSize)\r\n    document.documentElement.classList.add(size)\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nfunction deepSet(original: Record<string, any>, extend: Record<string, any>) {\r\n  Object.keys(extend).forEach(key => {\r\n    const val = original[key]\r\n    const targetVal = extend[key]\r\n    if (isObj(val)) {\r\n      if (isObj(targetVal)) {\r\n        deepSet(val, targetVal)\r\n      } else {\r\n        console.warn(`extend['${key}']应该是一个对象`)\r\n      }\r\n    } else {\r\n      original[key] = targetVal\r\n    }\r\n  })\r\n}\r\n\r\nexport function useConfig() {\r\n  return {\r\n    /** 全局配置 */\r\n    config: readonly(state),\r\n    /**\r\n     * 设置全局配置项\r\n     * @param conf\r\n     */\r\n    setConfig(conf: Partial<State>) {\r\n      deepSet(state, conf)\r\n    }\r\n  }\r\n}\r\n", "import { computed, type ComputedRef } from 'vue'\r\nimport { useConfig } from '../use-config'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\n\r\n/**\r\n * 使用回滚属性，用于控制多级属性的使用优先级，如果多级属性中不存在该值，则使用全局配置中的属性，如再不存在则为undefined\r\n * @param propsList 属性列表，最右边的属性优先级最高\r\n * @param fallbackProps 要回滚的属性和默认值\r\n */\r\nexport function useFallbackProps<\r\n  F extends Record<string, any>,\r\n  R extends {\r\n    [key in keyof F]: ComputedRef<F[key]>\r\n  }\r\n>(propsList: Record<string, any>[], fallbackProps: F): R {\r\n  const { config } = useConfig()\r\n\r\n  let result = {} as R\r\n\r\n  for (const key in fallbackProps) {\r\n    if (fallbackProps.hasOwnProperty(key)) {\r\n      const defaultValue = fallbackProps[key]\r\n      const ref = computed<any>(() => {\r\n        for (let i = propsList.length - 1; i > -1; --i) {\r\n          const props = propsList[i]!\r\n\r\n          if (props[key] !== undefined) {\r\n            return props[key]\r\n          }\r\n        }\r\n\r\n        return config[key as string] ?? defaultValue\r\n      })\r\n\r\n      result[key as keyof F] = ref as R[keyof F]\r\n    }\r\n  }\r\n\r\n  return result\r\n}\r\n\r\ntype FormFallbackProps = {\r\n  size: ComponentSize\r\n  disabled: boolean\r\n  readonly: boolean\r\n}\r\n\r\n/**\r\n * 表单组件的回滚属性\r\n * @param propsList props列表\r\n * @returns\r\n */\r\nexport function useFormFallbackProps(propsList: Record<string, any>[]): {\r\n  [key in keyof FormFallbackProps]: ComputedRef<FormFallbackProps[key]>\r\n}\r\n\r\n/**\r\n * 表单组件的回滚属性\r\n * @param propsList props列表\r\n * @param fallbackProps 回滚属性，可以只指定部分表单属性\r\n * @returns\r\n */\r\nexport function useFormFallbackProps<F extends Partial<FormFallbackProps>>(\r\n  propsList: Record<string, any>[],\r\n  fallbackProps: F\r\n): {\r\n  [key in keyof F]: key extends keyof FormFallbackProps\r\n    ? ComputedRef<FormFallbackProps[key]>\r\n    : never\r\n}\r\nexport function useFormFallbackProps(\r\n  propsList: Record<string, any>[],\r\n  fallbackProps?: Record<string, any>\r\n): any {\r\n  if (!fallbackProps) {\r\n    fallbackProps = {\r\n      size: 'default',\r\n      disabled: false,\r\n      readonly: false\r\n    }\r\n  }\r\n  return useFallbackProps(propsList, fallbackProps)\r\n}\r\n", "<template>\r\n  <transition name=\"fade\" appear>\r\n    <div :class=\"className\" :style=\"{ zIndex: zIndex() }\">\r\n      <div :class=\"cls.e('loader')\"></div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { LoadingProps } from '@ui/types/components/loading'\r\nimport { bem, zIndex } from '@ui/utils'\r\nimport { computed } from 'vue'\r\nimport { useFallbackProps } from '@ui/compositions'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\n\r\ndefineOptions({\r\n  name: 'Loading'\r\n})\r\n\r\nconst props = withDefaults(defineProps<LoadingProps>(), {\r\n  type: 'spinner'\r\n})\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst cls = bem('loading')\r\n\r\nconst className = computed(() => {\r\n  return [cls.b, cls.m(size.value), cls.e(props.type)]\r\n})\r\n</script>\r\n", "import {\r\n  createVNode,\r\n  render,\r\n  type DirectiveBinding,\r\n  type ObjectDirective\r\n} from 'vue'\r\nimport LoadingComponent from './loading.vue'\r\nimport { bem } from '@ui/utils'\r\nimport type { LoadingType } from '@ui/types/components/loading'\r\n\r\nconst loadingCls = bem('loading')\r\nconst loadingContainerCls = loadingCls.e('container')\r\n\r\nfunction renderLoading(el: HTMLElement, binding: DirectiveBinding) {\r\n  el.classList.add(loadingContainerCls)\r\n\r\n  const node = createVNode(LoadingComponent, {\r\n    type: binding.arg as LoadingType\r\n  })\r\n\r\n  render(node, el)\r\n}\r\n\r\nfunction removeLoading(el: HTMLElement) {\r\n  render(null, el)\r\n  el.classList.remove(loadingContainerCls)\r\n}\r\nexport const vLoading: ObjectDirective<HTMLElement> = {\r\n  mounted(el, binding) {\r\n    binding.value && renderLoading(el, binding)\r\n  },\r\n\r\n  updated(el, binding) {\r\n    binding.value ? renderLoading(el, binding) : removeLoading(el)\r\n  },\r\n\r\n  unmounted(el) {\r\n    removeLoading(el)\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": ["createIncrease", "initial", "value", "zIndex", "createIncrease", "state", "reactive", "watch", "size", "oldSize", "deepSet", "original", "extend", "key", "val", "targetVal", "isObj", "useConfig", "readonly", "conf", "useFallbackProps", "propsList", "fallbackProps", "config", "useConfig", "result", "key", "defaultValue", "ref", "computed", "i", "props", "useFormFallbackProps", "props", "__props", "size", "useFallbackProps", "cls", "bem", "className", "computed", "loadingCls", "bem", "loadingContainerCls", "renderLoading", "el", "binding", "node", "createVNode", "LoadingComponent", "render", "removeLoading", "vLoading"]
}
