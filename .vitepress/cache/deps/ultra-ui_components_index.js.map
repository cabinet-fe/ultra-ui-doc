{
  "version": 3,
  "sources": ["../../../node_modules/ui/shared/constants.ts", "../../../node_modules/ui/utils/helper/make-bem.ts", "../../../node_modules/ui/utils/dom/class-name.ts", "../../../node_modules/ui/utils/dom/position.ts", "../../../node_modules/packages/common/data/data-type.ts", "../../../node_modules/packages/common/data/string.ts", "../../../node_modules/packages/common/data/number.ts", "../../../node_modules/packages/common/date/date.ts", "../../../node_modules/packages/common/data-structure/tree/helper.ts", "../../../node_modules/packages/common/data-structure/tree.ts", "../../../node_modules/packages/common/codec/base64.ts", "../../../node_modules/packages/common/anime/tween.ts", "../../../node_modules/packages/common/data/array.ts", "../../../node_modules/packages/common/data-structure/stack.ts", "../../../node_modules/packages/common/data-structure/tree/tree-node.ts", "../../../node_modules/packages/common/env/env.ts", "../../../node_modules/packages/common/optimize/concurrence.ts", "../../../node_modules/packages/common/optimize/safe.ts", "../../../node_modules/packages/common/optimize/timer.ts", "../../../node_modules/packages/common/path/path.ts", "../../../node_modules/packages/common/data/object.ts", "../../../node_modules/packages/common/data/common.ts", "../../../node_modules/packages/fe/cache/cache.ts", "../../../node_modules/packages/fe/worker/worker.ts", "../../../node_modules/ui/utils/dom/style.ts", "../../../node_modules/ui/components/icon/icon.vue", "../../../node_modules/ui/utils/helper/create-increase.ts", "../../../node_modules/ui/directives/click-outside/index.ts", "../../../node_modules/ui/utils/helper/frame.ts", "../../../node_modules/ui/directives/ripple/index.ts", "../../../node_modules/ui/compositions/use-config/index.ts", "../../../node_modules/ui/compositions/use-fallback-props/index.ts", "../../../node_modules/ui/components/button/button.vue", "../../../node_modules/ui/components/action/di.ts", "../../../node_modules/ui/utils/dom/z-index.ts", "../../../node_modules/ui/utils/helper/vue.ts", "../../../node_modules/node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs", "../../../node_modules/node_modules/@floating-ui/core/dist/floating-ui.core.mjs", "../../../node_modules/node_modules/@floating-ui/utils/dist/floating-ui.utils.dom.mjs", "../../../node_modules/node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs", "../../../node_modules/ui/compositions/use-pop/index.ts", "../../../node_modules/ui/components/tip/di.ts", "../../../node_modules/ui/components/node-render/node-render.ts", "../../../node_modules/ui/components/tip/tip.vue", "../../../node_modules/ui/compositions/use-form-component/index.ts", "../../../node_modules/ui/components/pop-confirm/pop-confirm.vue", "../../../node_modules/ui/components/action/action.vue", "../../../node_modules/ui/components/action/action-group.vue", "../../../node_modules/ui/components/dropdown/dropdown.vue", "../../../node_modules/ui/compositions/use-drag/index.ts", "../../../node_modules/ui/components/scroll/di.ts", "../../../node_modules/ui/components/scroll/scroll-bar.vue", "../../../node_modules/ui/compositions/use-resize-observer/index.ts", "../../../node_modules/ui/components/scroll/scroll.vue", "../../../node_modules/ui/compositions/use-focus/index.ts", "../../../node_modules/ui/components/input/input.vue", "../../../node_modules/ui/components/auto-complete/use-suggestions.ts", "../../../node_modules/ui/components/auto-complete/auto-complete.vue", "../../../node_modules/ui/components/badge/badge.vue", "../../../node_modules/ui/components/layout/di.ts", "../../../node_modules/ui/components/layout/layout-resizer.vue", "../../../node_modules/ui/components/layout/layout.vue", "../../../node_modules/ui/components/dialog/di.ts", "../../../node_modules/ui/components/batch-edit/use-edit.ts", "../../../node_modules/ui/components/batch-edit/di.ts", "../../../node_modules/ui/compositions/use-component-props/index.ts", "../../../node_modules/ui/components/card/di.ts", "../../../node_modules/ui/components/card/card.vue", "../../../node_modules/ui/components/card/card-header.vue", "../../../node_modules/ui/components/table/di.ts", "../../../node_modules/ui/compositions/use-model/index.ts", "../../../node_modules/ui/components/table/row-node.ts", "../../../node_modules/ui/components/table/use-rows.ts", "../../../node_modules/ui/components/table/use-columns.ts", "../../../node_modules/ui/components/table/table-head.tsx", "../../../node_modules/ui/components/table/table-cell.vue", "../../../node_modules/ui/components/table/table-row.tsx", "../../../node_modules/ui/components/empty/empty.vue", "../../../node_modules/ui/components/table/table-body.vue", "../../../node_modules/ui/components/table/table-foot.vue", "../../../node_modules/node_modules/@tanstack/virtual-core/dist/esm/utils.js", "../../../node_modules/node_modules/@tanstack/virtual-core/dist/esm/index.js", "../../../node_modules/ui/compositions/use-virtual/index.ts", "../../../node_modules/ui/components/tag/tag.vue", "../../../node_modules/ui/components/checkbox/checkbox.vue", "../../../node_modules/ui/components/table/use-check.ts", "../../../node_modules/ui/components/table/use-table.ts", "../../../node_modules/ui/components/table/table.vue", "../../../node_modules/ui/components/batch-edit/batch-edit-list.vue", "../../../node_modules/ui/components/grid/di.ts", "../../../node_modules/ui/components/grid/breakpoint.ts", "../../../node_modules/ui/components/grid/use-responsive.ts", "../../../node_modules/ui/components/grid/grid.vue", "../../../node_modules/ui/components/form/use-node-interceptor.ts", "../../../node_modules/ui/components/grid/grid-item.vue", "../../../node_modules/ui/components/form-item/form-item.vue", "../../../node_modules/ui/components/form/form.vue", "../../../node_modules/ui/components/card/card-action.vue", "../../../node_modules/ui/components/batch-edit/batch-edit-form.vue", "../../../node_modules/ui/components/batch-edit/batch-edit.vue", "../../../node_modules/ui/components/batch-edit/helper.ts", "../../../node_modules/ui/components/button/button-group.vue", "../../../node_modules/ui/components/calendar/utils.ts", "../../../node_modules/ui/components/calendar/calendar.vue", "../../../node_modules/ui/components/card/card-cover.vue", "../../../node_modules/ui/components/card/card-content.vue", "../../../node_modules/ui/components/cascade/di.ts", "../../../node_modules/ui/components/cascade/use-select.ts", "../../../node_modules/ui/components/cascade/use-check.ts", "../../../node_modules/ui/components/cascade/cascade-node.vue", "../../../node_modules/ui/components/cascade/cascade-multi.vue", "../../../node_modules/ui/components/cascade/cascade-filter.vue", "../../../node_modules/ui/components/cascade/cascade-node.ts", "../../../node_modules/ui/components/cascade/cascade.vue", "../../../node_modules/ui/components/check-tag/check-tag.vue", "../../../node_modules/ui/components/checkbox-group/checkbox-group.vue", "../../../node_modules/ui/components/context-menu/di.ts", "../../../node_modules/ui/components/context-menu/context-menu-item.vue", "../../../node_modules/ui/components/context-menu/context-menu.vue", "../../../node_modules/ui/components/context-menu/api.ts", "../../../node_modules/ui/components/date-picker/use-date.ts", "../../../node_modules/ui/components/date-picker/panels/day.vue", "../../../node_modules/ui/components/date-picker/panels/month.vue", "../../../node_modules/ui/components/date-picker/panels/year.vue", "../../../node_modules/ui/components/loading/loading.vue", "../../../node_modules/ui/components/loading/directive.ts", "../../../node_modules/ui/components/message/helper.ts", "../../../node_modules/ui/components/message/message.vue", "../../../node_modules/ui/components/message/message-box.vue", "../../../node_modules/ui/components/message/message.ts", "../../../node_modules/ui/components/message-confirm/message-confirm.vue", "../../../node_modules/ui/components/message-confirm/message-confirm.ts", "../../../node_modules/ui/components/notification/notification.vue", "../../../node_modules/ui/components/notification/index.ts", "../../../node_modules/node_modules/lodash-es/_freeGlobal.js", "../../../node_modules/node_modules/lodash-es/_root.js", "../../../node_modules/node_modules/lodash-es/_Symbol.js", "../../../node_modules/node_modules/lodash-es/_getRawTag.js", "../../../node_modules/node_modules/lodash-es/_objectToString.js", "../../../node_modules/node_modules/lodash-es/_baseGetTag.js", "../../../node_modules/node_modules/lodash-es/isObjectLike.js", "../../../node_modules/node_modules/lodash-es/isArray.js", "../../../node_modules/node_modules/lodash-es/isObject.js", "../../../node_modules/node_modules/lodash-es/identity.js", "../../../node_modules/node_modules/lodash-es/isFunction.js", "../../../node_modules/node_modules/lodash-es/_coreJsData.js", "../../../node_modules/node_modules/lodash-es/_isMasked.js", "../../../node_modules/node_modules/lodash-es/_toSource.js", "../../../node_modules/node_modules/lodash-es/_baseIsNative.js", "../../../node_modules/node_modules/lodash-es/_getValue.js", "../../../node_modules/node_modules/lodash-es/_getNative.js", "../../../node_modules/node_modules/lodash-es/_WeakMap.js", "../../../node_modules/node_modules/lodash-es/_baseCreate.js", "../../../node_modules/node_modules/lodash-es/_apply.js", "../../../node_modules/node_modules/lodash-es/_copyArray.js", "../../../node_modules/node_modules/lodash-es/_shortOut.js", "../../../node_modules/node_modules/lodash-es/constant.js", "../../../node_modules/node_modules/lodash-es/_defineProperty.js", "../../../node_modules/node_modules/lodash-es/_baseSetToString.js", "../../../node_modules/node_modules/lodash-es/_setToString.js", "../../../node_modules/node_modules/lodash-es/_arrayEach.js", "../../../node_modules/node_modules/lodash-es/_isIndex.js", "../../../node_modules/node_modules/lodash-es/_baseAssignValue.js", "../../../node_modules/node_modules/lodash-es/eq.js", "../../../node_modules/node_modules/lodash-es/_assignValue.js", "../../../node_modules/node_modules/lodash-es/_copyObject.js", "../../../node_modules/node_modules/lodash-es/_overRest.js", "../../../node_modules/node_modules/lodash-es/_baseRest.js", "../../../node_modules/node_modules/lodash-es/isLength.js", "../../../node_modules/node_modules/lodash-es/isArrayLike.js", "../../../node_modules/node_modules/lodash-es/_isIterateeCall.js", "../../../node_modules/node_modules/lodash-es/_createAssigner.js", "../../../node_modules/node_modules/lodash-es/_isPrototype.js", "../../../node_modules/node_modules/lodash-es/_baseTimes.js", "../../../node_modules/node_modules/lodash-es/_baseIsArguments.js", "../../../node_modules/node_modules/lodash-es/isArguments.js", "../../../node_modules/node_modules/lodash-es/stubFalse.js", "../../../node_modules/node_modules/lodash-es/isBuffer.js", "../../../node_modules/node_modules/lodash-es/_baseIsTypedArray.js", "../../../node_modules/node_modules/lodash-es/_baseUnary.js", "../../../node_modules/node_modules/lodash-es/_nodeUtil.js", "../../../node_modules/node_modules/lodash-es/isTypedArray.js", "../../../node_modules/node_modules/lodash-es/_arrayLikeKeys.js", "../../../node_modules/node_modules/lodash-es/_overArg.js", "../../../node_modules/node_modules/lodash-es/_nativeKeys.js", "../../../node_modules/node_modules/lodash-es/_baseKeys.js", "../../../node_modules/node_modules/lodash-es/keys.js", "../../../node_modules/node_modules/lodash-es/_nativeKeysIn.js", "../../../node_modules/node_modules/lodash-es/_baseKeysIn.js", "../../../node_modules/node_modules/lodash-es/keysIn.js", "../../../node_modules/node_modules/lodash-es/_nativeCreate.js", "../../../node_modules/node_modules/lodash-es/_hashClear.js", "../../../node_modules/node_modules/lodash-es/_hashDelete.js", "../../../node_modules/node_modules/lodash-es/_hashGet.js", "../../../node_modules/node_modules/lodash-es/_hashHas.js", "../../../node_modules/node_modules/lodash-es/_hashSet.js", "../../../node_modules/node_modules/lodash-es/_Hash.js", "../../../node_modules/node_modules/lodash-es/_listCacheClear.js", "../../../node_modules/node_modules/lodash-es/_assocIndexOf.js", "../../../node_modules/node_modules/lodash-es/_listCacheDelete.js", "../../../node_modules/node_modules/lodash-es/_listCacheGet.js", "../../../node_modules/node_modules/lodash-es/_listCacheHas.js", "../../../node_modules/node_modules/lodash-es/_listCacheSet.js", "../../../node_modules/node_modules/lodash-es/_ListCache.js", "../../../node_modules/node_modules/lodash-es/_Map.js", "../../../node_modules/node_modules/lodash-es/_mapCacheClear.js", "../../../node_modules/node_modules/lodash-es/_isKeyable.js", "../../../node_modules/node_modules/lodash-es/_getMapData.js", "../../../node_modules/node_modules/lodash-es/_mapCacheDelete.js", "../../../node_modules/node_modules/lodash-es/_mapCacheGet.js", "../../../node_modules/node_modules/lodash-es/_mapCacheHas.js", "../../../node_modules/node_modules/lodash-es/_mapCacheSet.js", "../../../node_modules/node_modules/lodash-es/_MapCache.js", "../../../node_modules/node_modules/lodash-es/_arrayPush.js", "../../../node_modules/node_modules/lodash-es/_getPrototype.js", "../../../node_modules/node_modules/lodash-es/isPlainObject.js", "../../../node_modules/node_modules/lodash-es/_stackClear.js", "../../../node_modules/node_modules/lodash-es/_stackDelete.js", "../../../node_modules/node_modules/lodash-es/_stackGet.js", "../../../node_modules/node_modules/lodash-es/_stackHas.js", "../../../node_modules/node_modules/lodash-es/_stackSet.js", "../../../node_modules/node_modules/lodash-es/_Stack.js", "../../../node_modules/node_modules/lodash-es/_baseAssign.js", "../../../node_modules/node_modules/lodash-es/_baseAssignIn.js", "../../../node_modules/node_modules/lodash-es/_cloneBuffer.js", "../../../node_modules/node_modules/lodash-es/_arrayFilter.js", "../../../node_modules/node_modules/lodash-es/stubArray.js", "../../../node_modules/node_modules/lodash-es/_getSymbols.js", "../../../node_modules/node_modules/lodash-es/_copySymbols.js", "../../../node_modules/node_modules/lodash-es/_getSymbolsIn.js", "../../../node_modules/node_modules/lodash-es/_copySymbolsIn.js", "../../../node_modules/node_modules/lodash-es/_baseGetAllKeys.js", "../../../node_modules/node_modules/lodash-es/_getAllKeys.js", "../../../node_modules/node_modules/lodash-es/_getAllKeysIn.js", "../../../node_modules/node_modules/lodash-es/_DataView.js", "../../../node_modules/node_modules/lodash-es/_Promise.js", "../../../node_modules/node_modules/lodash-es/_Set.js", "../../../node_modules/node_modules/lodash-es/_getTag.js", "../../../node_modules/node_modules/lodash-es/_initCloneArray.js", "../../../node_modules/node_modules/lodash-es/_Uint8Array.js", "../../../node_modules/node_modules/lodash-es/_cloneArrayBuffer.js", "../../../node_modules/node_modules/lodash-es/_cloneDataView.js", "../../../node_modules/node_modules/lodash-es/_cloneRegExp.js", "../../../node_modules/node_modules/lodash-es/_cloneSymbol.js", "../../../node_modules/node_modules/lodash-es/_cloneTypedArray.js", "../../../node_modules/node_modules/lodash-es/_initCloneByTag.js", "../../../node_modules/node_modules/lodash-es/_initCloneObject.js", "../../../node_modules/node_modules/lodash-es/_baseIsMap.js", "../../../node_modules/node_modules/lodash-es/isMap.js", "../../../node_modules/node_modules/lodash-es/_baseIsSet.js", "../../../node_modules/node_modules/lodash-es/isSet.js", "../../../node_modules/node_modules/lodash-es/_baseClone.js", "../../../node_modules/node_modules/lodash-es/cloneDeep.js", "../../../node_modules/node_modules/lodash-es/_setCacheAdd.js", "../../../node_modules/node_modules/lodash-es/_setCacheHas.js", "../../../node_modules/node_modules/lodash-es/_SetCache.js", "../../../node_modules/node_modules/lodash-es/_arraySome.js", "../../../node_modules/node_modules/lodash-es/_cacheHas.js", "../../../node_modules/node_modules/lodash-es/_equalArrays.js", "../../../node_modules/node_modules/lodash-es/_mapToArray.js", "../../../node_modules/node_modules/lodash-es/_setToArray.js", "../../../node_modules/node_modules/lodash-es/_equalByTag.js", "../../../node_modules/node_modules/lodash-es/_equalObjects.js", "../../../node_modules/node_modules/lodash-es/_baseIsEqualDeep.js", "../../../node_modules/node_modules/lodash-es/_baseIsEqual.js", "../../../node_modules/node_modules/lodash-es/_createBaseFor.js", "../../../node_modules/node_modules/lodash-es/_baseFor.js", "../../../node_modules/node_modules/lodash-es/_assignMergeValue.js", "../../../node_modules/node_modules/lodash-es/isArrayLikeObject.js", "../../../node_modules/node_modules/lodash-es/_safeGet.js", "../../../node_modules/node_modules/lodash-es/toPlainObject.js", "../../../node_modules/node_modules/lodash-es/_baseMergeDeep.js", "../../../node_modules/node_modules/lodash-es/_baseMerge.js", "../../../node_modules/node_modules/lodash-es/isEqual.js", "../../../node_modules/node_modules/lodash-es/merge.js", "../../../node_modules/node_modules/parchment/dist/parchment.js", "../../../node_modules/node_modules/fast-diff/diff.js", "../../../node_modules/node_modules/lodash.clonedeep/index.js", "../../../node_modules/node_modules/lodash.isequal/index.js", "../../../node_modules/node_modules/quill-delta/dist/AttributeMap.js", "../../../node_modules/node_modules/quill-delta/dist/Op.js", "../../../node_modules/node_modules/quill-delta/dist/OpIterator.js", "../../../node_modules/node_modules/quill-delta/dist/Delta.js", "../../../node_modules/node_modules/quill/blots/break.js", "../../../node_modules/node_modules/quill/blots/text.js", "../../../node_modules/node_modules/quill/blots/inline.js", "../../../node_modules/node_modules/quill/blots/block.js", "../../../node_modules/node_modules/quill/blots/cursor.js", "../../../node_modules/node_modules/eventemitter3/index.js", "../../../node_modules/node_modules/quill/core/instances.js", "../../../node_modules/node_modules/quill/core/logger.js", "../../../node_modules/node_modules/quill/core/emitter.js", "../../../node_modules/node_modules/quill/core/selection.js", "../../../node_modules/node_modules/quill/core/editor.js", "../../../node_modules/node_modules/quill/core/module.js", "../../../node_modules/node_modules/quill/blots/embed.js", "../../../node_modules/node_modules/quill/core/composition.js", "../../../node_modules/node_modules/quill/core/theme.js", "../../../node_modules/node_modules/quill/core/utils/scrollRectIntoView.js", "../../../node_modules/node_modules/quill/core/utils/createRegistryWithFormats.js", "../../../node_modules/node_modules/quill/core/quill.js", "../../../node_modules/node_modules/quill/blots/container.js", "../../../node_modules/node_modules/quill/blots/scroll.js", "../../../node_modules/node_modules/quill/formats/align.js", "../../../node_modules/node_modules/quill/formats/color.js", "../../../node_modules/node_modules/quill/formats/background.js", "../../../node_modules/node_modules/quill/formats/code.js", "../../../node_modules/node_modules/quill/formats/direction.js", "../../../node_modules/node_modules/quill/formats/font.js", "../../../node_modules/node_modules/quill/formats/size.js", "../../../node_modules/node_modules/quill/modules/keyboard.js", "../../../node_modules/node_modules/quill/modules/normalizeExternalHTML/normalizers/googleDocs.js", "../../../node_modules/node_modules/quill/modules/normalizeExternalHTML/normalizers/msWord.js", "../../../node_modules/node_modules/quill/modules/normalizeExternalHTML/index.js", "../../../node_modules/node_modules/quill/modules/clipboard.js", "../../../node_modules/node_modules/quill/modules/history.js", "../../../node_modules/node_modules/quill/modules/uploader.js", "../../../node_modules/node_modules/quill/modules/input.js", "../../../node_modules/node_modules/quill/modules/uiNode.js", "../../../node_modules/node_modules/quill/core.js", "../../../node_modules/node_modules/quill/formats/indent.js", "../../../node_modules/node_modules/quill/formats/blockquote.js", "../../../node_modules/node_modules/quill/formats/header.js", "../../../node_modules/node_modules/quill/formats/list.js", "../../../node_modules/node_modules/quill/formats/bold.js", "../../../node_modules/node_modules/quill/formats/italic.js", "../../../node_modules/node_modules/quill/formats/link.js", "../../../node_modules/node_modules/quill/formats/script.js", "../../../node_modules/node_modules/quill/formats/strike.js", "../../../node_modules/node_modules/quill/formats/underline.js", "../../../node_modules/node_modules/quill/formats/formula.js", "../../../node_modules/node_modules/quill/formats/image.js", "../../../node_modules/node_modules/quill/formats/video.js", "../../../node_modules/node_modules/quill/modules/syntax.js", "../../../node_modules/node_modules/quill/formats/table.js", "../../../node_modules/node_modules/quill/modules/table.js", "../../../node_modules/node_modules/quill/modules/toolbar.js", "../../../node_modules/node_modules/quill/ui/icons.js", "../../../node_modules/node_modules/quill/ui/picker.js", "../../../node_modules/node_modules/quill/ui/color-picker.js", "../../../node_modules/node_modules/quill/ui/icon-picker.js", "../../../node_modules/node_modules/quill/ui/tooltip.js", "../../../node_modules/node_modules/quill/themes/base.js", "../../../node_modules/node_modules/quill/themes/bubble.js", "../../../node_modules/node_modules/quill/themes/snow.js", "../../../node_modules/node_modules/quill/quill.js", "../../../node_modules/ui/styles/helper.ts", "../../../node_modules/ui/styles/theme.ts", "../../../node_modules/ui/components/date-picker/headers/day.vue", "../../../node_modules/ui/components/date-picker/headers/month.vue", "../../../node_modules/ui/components/date-picker/headers/year.vue", "../../../node_modules/ui/components/date-picker/date-picker-panel.vue", "../../../node_modules/ui/components/date-picker/date-picker.vue", "../../../node_modules/ui/utils/helper/create-toggle.ts", "../../../node_modules/ui/compositions/use-transition/use-css-transition.ts", "../../../node_modules/ui/compositions/use-transition/utils.ts", "../../../node_modules/ui/compositions/use-transition/use-style-transition.ts", "../../../node_modules/ui/compositions/use-transition/index.ts", "../../../node_modules/ui/components/dialog/use-maximum.ts", "../../../node_modules/ui/components/dialog/dialog.vue", "../../../node_modules/ui/components/file-picker/file-picker.vue", "../../../node_modules/ui/components/float-button/float-button.vue", "../../../node_modules/ui/components/form/helper.ts", "../../../node_modules/ui/utils/form/validate.ts", "../../../node_modules/ui/utils/reactive/proxy.ts", "../../../node_modules/ui/components/form/form-model.ts", "../../../node_modules/ui/components/form/dynamic-form-model.ts", "../../../node_modules/ui/components/gantt-chart/gantt-chart.vue", "../../../node_modules/ui/components/group-input/use-group-items.ts", "../../../node_modules/ui/components/group-input/group-input.vue", "../../../node_modules/ui/components/grid-input/grid-input.vue", "../../../node_modules/ui/components/list/list.vue", "../../../node_modules/ui/components/list/list-item.vue", "../../../node_modules/ui/components/menu/di.ts", "../../../node_modules/ui/components/menu/menu-item.vue", "../../../node_modules/ui/components/menu/helper.ts", "../../../node_modules/ui/components/menu/use-menu-transition.ts", "../../../node_modules/ui/components/menu/menu-sub.vue", "../../../node_modules/ui/components/menu/menu-item-collapsed.vue", "../../../node_modules/ui/components/menu/menu-sub-collapsed.vue", "../../../node_modules/ui/components/menu/menu.vue", "../../../node_modules/ui/components/multi-auto-complete/multi-auto-complete.vue", "../../../node_modules/ui/components/multi-select/di.ts", "../../../node_modules/ui/components/multi-select/multi-select-option.vue", "../../../node_modules/ui/components/select/use-options.ts", "../../../node_modules/ui/components/multi-select/multi-select.vue", "../../../node_modules/ui/components/tree/di.ts", "../../../node_modules/ui/components/tree/tree-node.vue", "../../../node_modules/ui/components/tree/use-select.ts", "../../../node_modules/ui/components/tree/use-check.ts", "../../../node_modules/ui/components/tree/tree-node.ts", "../../../node_modules/ui/components/tree/tree.vue", "../../../node_modules/ui/components/multi-tree-select/multi-tree-select.vue", "../../../node_modules/ui/components/number/number.vue", "../../../node_modules/ui/components/number-input/number-input.vue", "../../../node_modules/ui/components/select/select.vue", "../../../node_modules/ui/components/paginator/paginator.vue", "../../../node_modules/ui/components/password-input/password-input.vue", "../../../node_modules/ui/components/progress/progress.vue", "../../../node_modules/ui/components/radio/radio.vue", "../../../node_modules/ui/components/radio-group/radio-group.vue", "../../../node_modules/ui/components/slider/di.ts", "../../../node_modules/ui/components/slider/use-stops.ts", "../../../node_modules/ui/components/slider/button.vue", "../../../node_modules/ui/components/slider/use-slide.ts", "../../../node_modules/ui/components/slider/slider.vue", "../../../node_modules/ui/components/steps/steps.vue", "../../../node_modules/ui/components/steps/index.ts", "../../../node_modules/ui/components/tabs/tabs.vue", "../../../node_modules/ui/utils/dom/highlight.ts", "../../../node_modules/ui/components/text/text.vue", "../../../node_modules/ui/components/text-editor/di.ts", "../../../node_modules/ui/components/text-editor/bar.vue", "../../../node_modules/ui/components/text-editor/text-editor.vue", "../../../node_modules/ui/components/textarea/utils.ts", "../../../node_modules/ui/components/textarea/textarea.vue", "../../../node_modules/ui/components/theme/di.ts", "../../../node_modules/ui/components/theme/group.vue", "../../../node_modules/ui/components/theme/group-item.vue", "../../../node_modules/ui/components/theme/theme.vue", "../../../node_modules/ui/components/tree-select/tree-select.vue", "../../../node_modules/ui/components/watermark/watermark.vue"],
  "sourcesContent": ["/** 命名前缀 */\r\nexport const NAME_SPACE = 'U'\r\n\r\n/** 类前缀 */\r\nexport const CLS_PREFIX = `${NAME_SPACE.toLowerCase()}-` as 'u-'\r\n\r\n/** 表单空内容 */\r\nexport const FORM_EMPTY_CONTENT = '-'\r\n", "/** BEM实例 */\r\nexport type BEM<\r\n  N extends string,\r\n  P extends string = string,\r\n  B extends string = `${P}${N}`\r\n> = {\r\n  /** BEM中的块 */\r\n  b: B\r\n\r\n  /**\r\n   * BEM中的元素(E)\r\n   * @param name 元素名称\r\n   * @returns\r\n   */\r\n  e<const E extends string>(name: E): `${B}__${E}`\r\n\r\n  /**\r\n   * 块和元素组合(B-E)\r\n   * @param block\r\n   * @param e\r\n   * @returns\r\n   */\r\n  be<const Block extends string, const E extends string>(\r\n    b: Block,\r\n    e: E\r\n  ): `${B}-${Block}__${E}`\r\n\r\n  /**\r\n   * BEM中的修饰符(M)\r\n   * @param m 修饰符名\r\n   * @returns 修饰符\r\n   */\r\n  m<const M extends string>(m: M): `${B}--${M}`\r\n\r\n  /**\r\n   * BEM中的元素与修饰符(E--M)\r\n   * @param e 元素名\r\n   * @param m 修饰符名\r\n   * @returns\r\n   */\r\n  em<const E extends string, const M extends string>(\r\n    e: E,\r\n    m: M\r\n  ): `${B}__${E}--${M}`\r\n}\r\n\r\n/** BEM工厂 */\r\nexport interface BEMFactory<Prefix extends string> {\r\n  <N extends string>(name: N): BEM<N, Prefix>\r\n  /**\r\n   * 生成is辅助类\r\n   * @param name 辅助类名称\r\n   */\r\n  is<const N extends string>(name: N): `is-${N}`\r\n  /**\r\n   * 生成is辅助类\r\n   * @param name 辅助类名称\r\n   * @param condition 辅助类显示条件\r\n   */\r\n  is<const N extends string, C extends boolean | undefined>(\r\n    name: N,\r\n    condition: C\r\n  ): C extends true ? `is-${N}` : ''\r\n}\r\n\r\n/**\r\n * 创建一个bem函数\r\n * @param prefix 前缀\r\n */\r\nexport function makeBEM<Prefix extends '' | `${string}-`>(\r\n  prefix: Prefix\r\n): BEMFactory<Prefix> {\r\n  /**\r\n   * css类命名辅助\r\n   * @param name 类block名称\r\n   */\r\n  function bem<N extends string>(name: N): BEM<N, Prefix> {\r\n    const b = `${prefix}${name}` as BEM<N, Prefix>['b']\r\n    return {\r\n      b,\r\n\r\n      e(name) {\r\n        return `${b}__${name}`\r\n      },\r\n\r\n      be(block, e) {\r\n        return `${b}-${block}__${e}`\r\n      },\r\n\r\n      m(m) {\r\n        return `${b}--${m}`\r\n      },\r\n\r\n      em(e, m) {\r\n        return `${b}__${e}--${m}`\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 生成is辅助类\r\n   * @param name 辅助类名称\r\n   */\r\n  function is<const N extends string>(name: N): `is-${N}`\r\n  /**\r\n   * 生成is辅助类\r\n   * @param name 辅助类名称\r\n   * @param condition 辅助类显示条件\r\n   */\r\n  function is<const N extends string, C extends boolean | undefined>(\r\n    name: N,\r\n    condition: C\r\n  ): C extends true ? `is-${N}` : ''\r\n\r\n  function is<N extends string>(name: N, condition?: boolean) {\r\n    if (arguments.length < 2) return `is-${name}`\r\n    return condition !== true ? '' : (`is-${name}` as const)\r\n  }\r\n\r\n  bem.is = is\r\n\r\n  return bem\r\n}\r\n", "import { CLS_PREFIX } from '@ui/shared'\r\nimport { makeBEM } from '../helper/make-bem'\r\n\r\nexport const bem = makeBEM(CLS_PREFIX)\r\n", "interface Options {\r\n  /** 触发元素 */\r\n  triggerEl: HTMLElement\r\n  /** 弹出元素 */\r\n  popupEl: HTMLElement\r\n  /** 间距 */\r\n  gap?: number\r\n}\r\n\r\nfunction getWindowScrollTop() {\r\n  let doc = document.documentElement\r\n  return (window.scrollY || doc.scrollTop) - (doc.clientTop || 0)\r\n}\r\n\r\nfunction getWindowScrollLeft() {\r\n  let doc = document.documentElement\r\n  return (window.scrollX || doc.scrollLeft) - (doc.clientLeft || 0)\r\n}\r\n\r\nfunction getViewport() {\r\n  let win = window,\r\n    d = document,\r\n    e = d.documentElement,\r\n    g = document.body,\r\n    w = win.innerWidth || e.clientWidth || g.clientWidth,\r\n    h = win.innerHeight || e.clientHeight || g.clientHeight\r\n\r\n  return { width: w, height: h }\r\n}\r\n\r\ninterface DropdownPosition {\r\n  top: string\r\n  left: string\r\n  width: string\r\n  transformOrigin: string\r\n}\r\n\r\n/**\r\n * 计算下拉框位置\r\n * @param options 选项\r\n * @returns\r\n */\r\nexport function computeDropdownPosition(options: Options): DropdownPosition {\r\n  const { triggerEl, popupEl, gap = 6 } = options\r\n\r\n  const triggerRect = triggerEl.getBoundingClientRect()\r\n\r\n  const windowScrollLeft = getWindowScrollLeft()\r\n  const windowScrollTop = getWindowScrollTop()\r\n  const viewport = getViewport()\r\n\r\n  let top = triggerRect.top + triggerEl.offsetHeight + windowScrollTop + gap\r\n  let left = triggerRect.left + windowScrollLeft\r\n\r\n  let transformOrigin: 'top' | 'bottom' = 'top'\r\n\r\n  if (top + popupEl.offsetHeight > window.innerHeight) {\r\n    top = triggerRect.top + windowScrollTop - popupEl.offsetHeight - gap\r\n    transformOrigin = 'bottom'\r\n  }\r\n\r\n  // 最小left为0\r\n  if (triggerRect.left + popupEl.offsetWidth > viewport.width) {\r\n    left = Math.max(\r\n      0,\r\n      triggerRect.left +\r\n        windowScrollLeft +\r\n        triggerEl.offsetWidth -\r\n        popupEl.offsetWidth\r\n    )\r\n  }\r\n\r\n  return {\r\n    top: top + 'px',\r\n    left: left + 'px',\r\n    width: triggerEl.offsetWidth + 'px',\r\n    transformOrigin\r\n  }\r\n}\r\n\r\n/**\r\n * 获取可滚动的父级\r\n * @param el 元素\r\n * @returns\r\n */\r\nexport function getScrollParents(el: HTMLElement): HTMLElement[] {\r\n  const parents: HTMLElement[] = []\r\n  let parent = el.parentElement\r\n  while (parent) {\r\n    if (parent.scrollHeight > parent.clientHeight) {\r\n      parents.push(parent)\r\n    }\r\n\r\n    parent = parent.parentElement\r\n  }\r\n  return parents\r\n}\r\n\r\nconst observerElMap = new Map<HTMLElement, Function>()\r\nconst observer = new ResizeObserver(entry => {\r\n  observerElMap.forEach(fn => fn())\r\n})\r\n\r\n/**\r\n * 监听元素尺寸\r\n * @param el 元素\r\n * @param cb 回调\r\n */\r\nexport function observeEl(el: HTMLElement, cb: () => void) {\r\n  observer.observe(el)\r\n  observerElMap.set(el, cb)\r\n}\r\n\r\n/**\r\n * 取消监听元素尺寸\r\n * @param el 元素\r\n */\r\nexport function unobserveEl(el: HTMLElement) {\r\n  observer.unobserve(el)\r\n  observerElMap.delete(el)\r\n}\r\n", "type DataType =\n  | 'object'\n  | 'array'\n  | 'string'\n  | 'number'\n  | 'blob'\n  | 'date'\n  | 'undefined'\n  | 'function'\n  | 'boolean'\n  | 'file'\n  | 'formdata'\n  | 'symbol'\n  | 'promise'\n  | 'null'\n  | 'arraybuffer'\n\n/**\n * 获取值对应的类型字符串\n * @param value 值\n */\nexport function getDataType(value: any) {\n  return Object.prototype.toString\n    .call(value)\n    .slice(8, -1)\n    .toLowerCase() as DataType\n}\n\n/**\n * 是否是对象\n * @param value 值\n */\nexport function isObj(value: any): value is Record<string, any> {\n  return getDataType(value) === 'object'\n}\n\n/**\n * 是否是数组\n * @param value 值\n */\nexport function isArray(value: any): value is Array<any> {\n  return getDataType(value) === 'array'\n}\n\n/**\n * 是否是字符串\n * @param value 值\n */\nexport function isString(value: any): value is string {\n  return getDataType(value) === 'string'\n}\n\n/**\n * 是否是数字\n * @param value 值\n */\nexport function isNumber(value: any): value is number {\n  return getDataType(value) === 'number'\n}\n\n/**\n * 是否是Blob流\n * @param value 值\n */\nexport function isBlob(value: any): value is Blob {\n  return getDataType(value) === 'blob'\n}\n\n/**\n * 是否是\n * @param value 值\n */\nexport function isDate(value: any): value is Date {\n  return getDataType(value) === 'date'\n}\n\n/**\n * 是否是未定义\n * @param value 值\n */\nexport function isUndef(value: any): value is undefined {\n  return value === undefined\n}\n\n/**\n * 是否是函数\n * @param value 值\n */\nexport function isFunction(value: any): value is Function {\n  return getDataType(value) === 'function'\n}\n\n/**\n * 是否是布尔值\n * @param value 值\n */\nexport function isBol(value: any): value is boolean {\n  return getDataType(value) === 'boolean'\n}\n\n/**\n * 是否是文件\n * @param value 值\n */\nexport function isFile(value: any): value is File {\n  return getDataType(value) === 'file'\n}\n\n/**\n * 是否是表单数据\n * @param value 值\n */\nexport function isFormData(value: any): value is FormData {\n  return getDataType(value) === 'formdata'\n}\n\n/**\n * 是否是Symbol\n * @param value 值\n */\nexport function isSymbol(value: any): value is symbol {\n  return getDataType(value) === 'symbol'\n}\n\n/**\n * 是否是Promise\n * @param value 值\n */\nexport function isPromise(value: any): value is Promise<any> {\n  return getDataType(value) === 'promise'\n}\n\n/**\n * 是否是ArrayBuffer\n * @param value 值\n */\nexport function isArrayBuffer(value: any): value is ArrayBuffer {\n  return value instanceof ArrayBuffer\n}\n\n/**\n * 是否是Uint8Array\n * @param value 值\n */\nexport function isUint8Array(value: any): value is Uint8Array {\n  return value instanceof Uint8Array\n}\n\n/**\n * 是否是Uint16Array\n * @param value 值\n */\nexport function isUint16Array(value: any): value is Uint16Array {\n  return value instanceof Uint16Array\n}\n\n/**\n * 是否是Uint32Array\n * @param value 值\n */\nexport function isUint32Array(value: any): value is Uint32Array {\n  return value instanceof Uint32Array\n}\n\n/**\n * 是否是Int8Array\n * @param value 值\n */\nexport function isInt8Array(value: any): value is Int8Array {\n  return value instanceof Int8Array\n}\n\n/**\n * 是否是Int16Array\n * @param value 值\n */\nexport function isInt16Array(value: any): value is Int16Array {\n  return value instanceof Int16Array\n}\n\n/**\n * 是否是Int32Array\n * @param value 值\n */\nexport function isInt32Array(value: any): value is Int32Array {\n  return value instanceof Int32Array\n}\n\n/**\n * 是否是null\n * @param value 值\n */\nexport function isNull(value: any): value is null {\n  return value === null\n}\n", "/**\n * 中划线字符串转驼峰\n * @param str 原字符串\n * @param type 驼峰类型lower小驼峰, upper大驼峰, 默认lower\n * @returns\n */\nexport function camelCase(\n  str: string,\n  type: 'lower' | 'upper' = 'lower'\n): string {\n  if (str.length === 0) return str\n  let firstChar = str[0]!\n  if (type === 'upper') {\n    firstChar = firstChar.toUpperCase()\n  }\n  return (\n    firstChar +\n    str.substring(1).replace(/-[a-z]/g, s => s.substring(1).toUpperCase())\n  )\n}\n\n/**\n * 将驼峰格式的字符串转化为中划线连接的字符串\n * @param str 原字符串\n */\nexport function kebabCase(str: string): string {\n  if (str.startsWith('-')) {\n    console.error('字符串不是驼峰格式的!')\n    return str\n  }\n  const ret = str.replace(/[A-Z]/g, s => '-' + s.toLowerCase())\n  return ret.startsWith('-') ? ret.substring(1) : ret\n}\n\nclass Str {\n  #str: string\n\n  constructor(s: string) {\n    this.#str = s\n  }\n\n  /**\n   * 中划线字符串转驼峰\n   * @param type 驼峰类型lower小驼峰, upper大驼峰, 默认lower\n   * @returns\n   */\n  camelCase(type: 'upper' | 'lower' = 'lower'): string {\n    return camelCase(this.#str, type)\n  }\n\n  /**\n   * 将驼峰格式的字符串转化为中划线连接的字符串\n   * @returns\n   */\n  kebabCase(): string {\n    return kebabCase(this.#str)\n  }\n}\n\nexport function str(str: string): Str {\n  return new Str(str)\n}\n\n/**\n * 拼接路径字符串，通常用于防止拼接的路径出现重复的'/'\n * @param firstPath 路径字符串, 也可以是一个有效的URL地址\n * @param paths 待拼接的其他路径字符串\n * @returns 拼接后的路径\n *\n * @example\n * ```ts\n * str.joinPath('/a/', '/b', '/c') // '/a/b/c'\n * str.joinPath('/a/', '/b', '/c/') // '/a/b/c/'\n * str.joinPath('a/', '/b', '/c/') // '/a/b/c/'\n * ```\n */\nstr.joinPath = function joinPath(\n  firstPath: string,\n  ...paths: string[]\n): string {\n  let secondPath = paths\n    .filter(p => !!p)\n    .join('/')\n    .replace(/\\/{2,}/g, '/')\n    .replace(/^\\//, '')\n\n  if (secondPath) {\n    secondPath = `/${secondPath}`\n  }\n  // URL协议需要验证URL的合法性\n  if (/^(https?|ftp|file):\\/\\//.test(firstPath)) {\n    const origin = firstPath.replace(/:\\/*$/, '://')\n    if (origin.endsWith('//') || !origin.includes('.')) {\n      throw new Error(`无效的URL:${origin}`)\n    }\n    return `${origin.replace(/\\/+$/, '')}${secondPath}`\n  }\n\n  return `${firstPath.replace(/\\/+$/, '')}${secondPath}`\n}\n", "type CurrencyType = 'CNY' | 'CNY_HAN'\n\ntype CurrencyConfig = {\n  /** 保留小数位数 */\n  precision?: number\n  /** 最小小数位数 */\n  minPrecision?: number\n  /** 最大小数位数 */\n  maxPrecision?: number\n}\n\nfunction int(numbers: number[]) {\n  const numberStrings = numbers.map(n => String(n))\n  const numStringsLen = numberStrings.map(ns => ns.split('.')[1]?.length ?? 0)\n\n  const factor = Math.pow(10, Math.max(...numStringsLen))\n\n  return {\n    /** 整数 */\n    ints: numbers.map(n => Math.round(n * factor)),\n    /** 让所有数值成为整数的最小系数 */\n    factor\n  }\n}\n\n/**\n * 将浮点数小数部分的字符串转换为目标精度的长度并遵循四舍五入\n * @param decimalPart 浮点数的小数部分\n * @param precision 保留的小数位数\n * @param carry 进位方法\n * @returns\n */\nfunction decimalPrecision(\n  decimalPart: string,\n  precision: number,\n  carry: () => void\n) {\n  if (decimalPart.length <= precision) {\n    return decimalPart.padEnd(precision, '0')\n  }\n  // 使用小数点移位来避免精度丢失\n  // 首先在字符串中插入小数点并转化为数字, 随后进行四舍五入, 最后再转化为字符串\n  const decimalNum = Math.round(\n    +(decimalPart.slice(0, precision) + '.' + decimalPart.slice(precision))\n  )\n  const decimalRet = decimalNum ? String(decimalNum) : ''\n\n  if (decimalRet.length === precision) return decimalRet\n\n  // eg. 0.009保留2为小数 decimalRet此时为1, 所以需要再前面补0\n  if (decimalRet.length < precision) {\n    return decimalRet.padStart(precision, '0')\n  }\n  // 需要进位\n  carry()\n  return '0'.repeat(precision)\n}\n\nfunction toFixed(\n  v: number,\n  precision: number | { maxPrecision?: number; minPrecision?: number }\n) {\n  let [int, decimal = ''] = String(v).split('.') as [string, string | undefined]\n\n  let targetPrecision: undefined | number = undefined\n  if (typeof precision === 'number') {\n    targetPrecision = precision\n  } else {\n    const { maxPrecision, minPrecision } = precision\n    if (maxPrecision !== undefined && decimal.length > maxPrecision) {\n      targetPrecision = maxPrecision\n    } else if (minPrecision !== undefined && decimal.length < minPrecision) {\n      targetPrecision = minPrecision\n    }\n  }\n  if (\n    targetPrecision !== undefined &&\n    Number.isInteger(targetPrecision) &&\n    targetPrecision >= 0\n  ) {\n    decimal = decimalPrecision(\n      decimal,\n      targetPrecision,\n      () => (int = String(+int + 1))\n    )\n  }\n\n  return decimal ? int + '.' + decimal : int\n}\n\nconst CN_UPPER_NUM = '零壹贰叁肆伍陆柒捌玖'\nconst CN_INT_RADICE = ['', '拾', '佰', '仟']\nconst CN_INT_UNITS = ['', '万', '亿', '兆']\nconst CN_DEC_UNITS = ['角', '分', '毫', '厘']\n\nconst CurrencyFormatters: Record<\n  CurrencyType,\n  (num: number, config?: CurrencyConfig) => string\n> = {\n  CNY(num, config) {\n    const { precision, minPrecision, maxPrecision } = config || {}\n\n    const isNegative = num < 0\n    num = Math.abs(num)\n\n    let [intPart, decimalPart = ''] = String(num).split('.') as [\n      string,\n      string | undefined\n    ]\n\n    let targetPrecision: number | undefined = undefined\n    if (precision !== undefined) {\n      targetPrecision = precision\n    } else if (\n      maxPrecision !== undefined &&\n      decimalPart.length > maxPrecision\n    ) {\n      targetPrecision = maxPrecision\n    } else if (\n      minPrecision !== undefined &&\n      decimalPart.length < minPrecision\n    ) {\n      targetPrecision = minPrecision\n    }\n\n    if (\n      targetPrecision !== undefined &&\n      Number.isInteger(targetPrecision) &&\n      targetPrecision >= 0\n    ) {\n      decimalPart = decimalPrecision(decimalPart, targetPrecision, () => {\n        intPart = String(+intPart + 1)\n      })\n    }\n\n    let result = ''\n\n    for (let i = intPart.length; i > 0; i -= 3) {\n      result = ',' + intPart.slice(i - 3 < 0 ? 0 : i - 3, i) + result\n    }\n\n    result = result.slice(1)\n\n    if (isNegative) {\n      result = '-' + result\n    }\n\n    if (decimalPart) {\n      result = result + '.' + decimalPart\n    }\n\n    return result\n  },\n  CNY_HAN(num, config) {\n    if (!num) return '零元整'\n    let result = ''\n    if (num >= 999999999999999.9999) return result\n\n    // 是否为负数\n    const isNegative = num < 0\n\n    let [intPart, decPart] = toFixed(\n      num,\n      config?.precision !== undefined\n        ? config.precision > 4\n          ? 4\n          : config.precision\n        : 4\n    ).split('.') as [string, string | undefined]\n\n    if (isNegative) {\n      intPart = intPart.slice(1)\n    }\n\n    let count = 0\n    const IntLen = intPart!.length\n    for (let i = 0; i < IntLen; i++) {\n      let n = intPart!.substring(i, i + 1)\n      let p = IntLen - i - 1\n      let q = p / 4\n      let m = p % 4\n      if (n === '0') {\n        count++\n      } else {\n        if (count > 0) {\n          result += CN_UPPER_NUM[0]\n        }\n        count = 0\n        result += CN_UPPER_NUM[parseInt(n)]! + CN_INT_RADICE[m]\n      }\n      if (m === 0 && count < 4) {\n        result += CN_INT_UNITS[q]\n      }\n    }\n    result = `${result}元`\n    if (isNegative) {\n      result = `负${result}`\n    }\n\n    if (decPart) {\n      const decLen = decPart.length\n      for (let i = 0; i < decLen; i++) {\n        let n = decPart.substring(i, i + 1)\n        if (n !== '0') result += CN_UPPER_NUM[Number(n)]! + CN_DEC_UNITS[i]\n      }\n    } else {\n      result = `${result}整`\n    }\n    return result\n  }\n}\n\nclass Num {\n  private v!: number\n\n  constructor(n: number) {\n    this.v = n\n  }\n\n  /**\n   * 数字转货币\n   * @param currencyType 货币类型 CNY人民币 CNY_HAN 人民币中文大写\n   * @param config 其他配置, 仅precision对CNY_HAN生效\n   * @returns\n   */\n  currency(currencyType: CurrencyType, config: CurrencyConfig): string\n  /**\n   * 数字转货币\n   * @param currencyType 货币类型 CNY人民币 CNY_HAN 人民币中文大写\n   * @param precision 精度, 为CNY_HAN时最大和默认只能支持到小数点后四位(厘)\n   * @returns\n   */\n  currency(currencyType: CurrencyType, precision?: number): string\n  currency(\n    currencyType: CurrencyType,\n    config?: CurrencyConfig | number\n  ): string {\n    if (typeof config === 'number') {\n      config = {\n        precision: config\n      }\n    }\n    return CurrencyFormatters[currencyType](this.v, config)\n  }\n\n  /**\n   * 指定数字最大保留几位小数点\n   * @param precision 位数\n   */\n  fixed(\n    precision:\n      | number\n      | {\n          /** 最小精度 */\n          minPrecision?: number\n          /** 最大精度 */\n          maxPrecision?: number\n        }\n  ) {\n    return toFixed(this.v, precision)\n  }\n\n  /**\n   * 遍历数字\n   */\n  each(fn: (n: number) => void) {\n    const { v } = this\n    for (let i = 1; i <= v; i++) {\n      fn(i)\n    }\n  }\n  /**\n   * 大小区间\n   * @param min 最小值\n   * @param max 最大值\n   * @returns 一个在指定范围内的值\n   */\n  range(min: number, max: number): number {\n    if (min > max) {\n      ;[min, max] = [max, min]\n    }\n    if (this.v < min) return min\n    if (this.v > max) return max\n    return this.v\n  }\n\n  /**\n   * 限制最大值\n   * @param val 最大值\n   * @returns 一个不超过最大值的值\n   */\n  max(val: number) {\n    if (this.v > val) return val\n    return this.v\n  }\n\n  /**\n   * 限制最小值\n   * @param val 最小值\n   * @returns  一个不小于最小值的值\n   */\n  min(val: number) {\n    if (this.v < val) return val\n    return this.v\n  }\n}\n\n/**\n * 包裹一个数字以方便\n * @param n 数字\n */\nconst n = function n(n: number) {\n  return new Num(n)\n}\n\n/**\n * 求和\n * @param numbers 需要求和的数字\n * @returns\n */\nn.sum = function (...numbers: number[]) {\n  return n.plus(...numbers)\n}\n\ninterface NumberFormatterOptions {\n  /** 数字格式的样式 decimal:十进制, currency货币, percent百分比 */\n  style?: 'decimal' | 'currency' | 'percent'\n  /** 货币符号, 如果style为currency则默认CNY人民币 */\n  currency?: 'CNY' | 'USD' | 'JPY' | 'EUR'\n  /** 小数精度(小数点位数) */\n  precision?: number\n  /** 最大小数位数, 默认3 */\n  maximumFractionDigits?: number\n  /** 最小小数位数 */\n  minimumFractionDigits?: number\n  /** 表现方法, standard: 标准, scientific: 科学计数法, engineering: 引擎, compact: 简洁计数   */\n  notation?: Intl.NumberFormatOptions['notation']\n}\nn.formatter = function (options: NumberFormatterOptions) {\n  const formatter = new Intl.NumberFormat('zh-CN', {\n    notation: options.notation,\n    style: options.style,\n    maximumFractionDigits: options.maximumFractionDigits ?? options.precision,\n    minimumFractionDigits: options.minimumFractionDigits ?? options.precision,\n    currency:\n      options.style === 'currency'\n        ? options.currency ?? 'CNY'\n        : options.currency\n  })\n\n  return formatter\n}\n\n/**\n * 依次相加\n * @param numbers 数字\n * @returns\n */\nn.plus = function plus(...numbers: number[]) {\n  let i = 0\n  let result = 0\n  const { ints, factor } = int(numbers)\n  while (i < ints.length) {\n    result += ints[i]!\n    i++\n  }\n  return result / factor\n}\n\n/**\n * 依次相减\n * @param numbers 数字\n * @returns\n */\nn.minus = function minus(...numbers: number[]) {\n  let i = 0\n  let { ints, factor } = int(numbers)\n\n  let result = ints[0]!\n  ints = ints.slice(1)\n  while (i < ints.length) {\n    result -= ints[i]!\n    i++\n  }\n  return result / factor\n}\n\n/**\n * 两数相乘\n * @param num1 数字1\n * @param num2 数字2\n * @returns\n */\nn.mul = function mul(num1: number, num2: number) {\n  let {\n    ints: [int1, int2],\n    factor\n  } = int([num1, num2])\n  let result = int1! * int2!\n\n  return result / (factor * factor)\n}\n\n/**\n * 两数相除\n * @param num1 数字1\n * @param num2 数字2\n * @returns\n */\nn.div = function div(num1: number, num2: number) {\n  const { ints } = int([num1, num2])\n  return ints[0]! / ints[1]!\n}\n\nexport { n }\n", "import { isDate } from '../data/data-type'\n\ntype DateCompareReducer<R> = (year: number, month: number, day: number) => R\n\nclass Dater {\n  constructor(date: number | string | Date | Dater) {\n    if (date instanceof Dater) {\n      this.date = date.date\n    } else if (isDate(date)) {\n      this.date = date\n    } else {\n      this.date = new Date(date)\n    }\n  }\n\n  private date!: Date\n\n  /** 原始日期对象 */\n  get raw() {\n    return this.date\n  }\n\n  private static matchers: Record<\n    string,\n    (date: Dater, len: number) => string\n  > = {\n    yyyy: date => `${date.year}`,\n    YYYY: date => `${date.year}`,\n    'M+': (date, len: number) => {\n      let month = date.month + ''\n      return len === 1 ? month : `0${month}`.slice(-2)\n    },\n    'd+': (date, len: number) => {\n      let day = date.day + ''\n      return len === 1 ? day : `0${day}`.slice(-2)\n    },\n    'D+': (date, len: number) => {\n      let day = date.day + ''\n      return len === 1 ? day : `0${day}`.slice(-2)\n    },\n    'h+': (date, len: number) => {\n      let hour = date.hour\n      let strHour = (hour > 12 ? hour - 12 : hour) + ''\n      return len === 1 ? strHour : `0${strHour}`.slice(-2)\n    },\n    'H+': (date, len: number) => {\n      let Hour = `${date.hour}`\n      return len === 1 ? Hour : `0${Hour}`.slice(-2)\n    },\n    'm+': (date, len: number) => {\n      let mih = `${date.minute}`\n      return len === 1 ? mih : `0${mih}`.slice(-2)\n    },\n    's+': (date, len: number) => {\n      let sec = `${date.second}`\n      return len === 1 ? sec : `0${sec}`.slice(-2)\n    }\n  }\n\n  /** 时间戳 */\n  get timestamp() {\n    return this.date.getTime()\n  }\n\n  setTime(timestamp: number) {\n    this.date.setTime(timestamp)\n    return this\n  }\n\n  /** 年 */\n  get year() {\n    return this.date.getFullYear()\n  }\n\n  /**\n   * 设置年份\n   * @param year 年份\n   * @returns\n   */\n  setYear(year: number) {\n    this.date.setFullYear(year)\n    return this\n  }\n\n  /** 月 */\n  get month() {\n    return this.date.getMonth() + 1\n  }\n\n  /**\n   * 设置月份\n   * @param month 月份，从1开始\n   * @returns\n   */\n  setMonth(month: number) {\n    this.date.setMonth(month - 1)\n    return this\n  }\n\n  /** 周 */\n  get weekDay() {\n    return this.date.getDay()\n  }\n\n  /** 日 */\n  get day() {\n    return this.date.getDate()\n  }\n\n  setDay(day: number) {\n    this.date.setDate(day)\n    return this\n  }\n\n  /** 时 */\n  get hour(): number {\n    return this.date.getHours()\n  }\n  /** 时 */\n  get hours(): number {\n    return this.date.getHours()\n  }\n\n  /**\n   * 设置小时\n   * @param hours 时\n   * @returns\n   */\n  setHours(hours: number) {\n    this.date.setHours(hours)\n    return this\n  }\n\n  /** 分 */\n  get minute() {\n    return this.date.getMinutes()\n  }\n\n  /** 分 */\n  get minutes() {\n    return this.date.getMinutes()\n  }\n\n  /**\n   * 设置分\n   * @param minutes 分\n   */\n  setMinutes(minutes: number) {\n    this.date.setMinutes(minutes)\n  }\n\n  /** 秒 */\n  get second() {\n    return this.date.getSeconds()\n  }\n  /** 秒 */\n  get seconds() {\n    return this.date.getSeconds()\n  }\n\n  /**\n   * 设置秒\n   * @param sec 秒\n   */\n  setSeconds(sec: number) {\n    this.date.setSeconds(sec)\n  }\n\n  static setMatcher(\n    reg: string,\n    matcher: (date: Dater, len: number) => string\n  ) {\n    Dater.matchers[reg] = matcher\n  }\n\n  static use(plugin: (dater: typeof Dater) => void) {\n    plugin(Dater)\n  }\n\n  /** 获取所有的匹配器 */\n  static getMatchers() {\n    return Dater.matchers\n  }\n\n  /** 格式化日期 */\n  format(formatter = 'yyyy-MM-dd'): string {\n    Object.keys(Dater.matchers).forEach(reg => {\n      formatter = formatter.replace(new RegExp(`(${reg})`), str => {\n        return Dater.matchers[reg]!(this, str.length)\n      })\n    })\n    return formatter\n  }\n\n  /**\n   * 计算相对此刻的日期\n   * @param timeStep 计算的日期, 负数表示之前的日期, 正数表示之后的日期\n   * @param type 时间步长类别, 默认以天为单位\n   */\n  calc(timeStep: number, type?: 'days' | 'weeks' | 'months' | 'years'): Dater {\n    let { date } = this\n    if (type === 'days') {\n      return new Dater(this.timestamp + timeStep * 86400000)\n    } else if (type === 'weeks') {\n      return new Dater(this.timestamp + timeStep * 604800000)\n    } else if (type === 'months') {\n      date = new Date(date.getTime())\n      date.setMonth(timeStep + date.getMonth())\n      return new Dater(date)\n    } else {\n      date = new Date(date.getTime())\n      date.setFullYear(timeStep + date.getFullYear())\n      return new Dater(date)\n    }\n  }\n\n  /**\n   *\n   * @param date 日期\n   * @param reducer 处理器\n   * @returns\n   */\n  compare(date: string | Date | number | Dater): number\n  compare<R>(\n    date: string | Date | number | Dater,\n    reducer: DateCompareReducer<R>\n  ): R\n  compare(\n    date: string | Date | number | Dater,\n    reducer?: DateCompareReducer<any>\n  ) {\n    let dater = new Dater(date)\n\n    if (!reducer) {\n      return Math.ceil(Math.abs(this.timestamp - dater.timestamp) / 86400000)\n    }\n\n    const year = Math.abs(this.year - dater.year)\n    const month = Math.abs(this.month - dater.month)\n    const day = Math.abs(this.day - dater.day)\n\n    return reducer(year, month, day)\n  }\n\n  /**\n   * 跳转至月尾\n   * @param offsetMonth 月份偏移量，默认为0，即当月\n   */\n  toEndOfMonth(offsetMonth = 0) {\n    this.date.setMonth(this.month + offsetMonth)\n    this.date.setDate(0)\n\n    return this\n  }\n\n  /**\n   * 获取这个月的天数\n   */\n  getDays() {\n    const { timestamp } = this\n    const days = this.toEndOfMonth().day\n    this.setTime(timestamp)\n    return days\n  }\n}\n\ninterface DateFactory {\n  (date?: number | string | Date): Dater\n  /**\n   * 虽然可以直接操作Dater的api，但可以使用插件机制来更好的组织你的代码\n   * @param plugin 插件\n   */\n  use: (plugin: (dater: typeof Dater) => void) => void\n  /** 获取所有的匹配器 */\n  getMatchers: () => Record<string, (date: Dater, len: number) => string>\n  /**\n   * 设置匹配器，你可以新增或者覆盖原本的配器\n   * @param reg 匹配器名称\n   * @param matcher 匹配器\n   */\n  setMatcher: (\n    reg: string,\n    matcher: (date: Dater, len: number) => string\n  ) => void\n\n  /**\n   * 根据格式化日期字符串得到日期\n   * @param dateStr 格式化后的日期字符串\n   * @param formatter 格式化字符串\n   * @returns\n   */\n  from: (dateStr: string, formatter?: string) => Dater\n}\n\nexport const date = <DateFactory>function (date) {\n  return new Dater(date ?? new Date())\n}\n\ndate.use = Dater.use\n\ndate.getMatchers = Dater.getMatchers\n\ndate.setMatcher = Dater.setMatcher\n\nconst getDateTypeStr = (str: string, formatter: string, re: RegExp): string => {\n  let matched = formatter.match(re)\n\n  if (matched) {\n    return str.slice(matched.index!, matched.index! + matched[0].length)\n  }\n  return ''\n}\n\ndate.from = function (dateStr: string, formatter = 'yyyy-MM-dd') {\n  if (dateStr.length !== formatter.length) {\n    console.warn('dateStr与formatter的格式不一致')\n    return new Dater(dateStr)\n  }\n\n  // 年月日\n  const YMD = [/(y|Y)+/, /M+/, /d+/]\n    .map(re => getDateTypeStr(dateStr, formatter, re))\n    .filter(item => !!item)\n    .join('-')\n\n  // 时分秒\n  const HMS = [/(h|H)+/, /m+/, /s+/]\n    .map(re => getDateTypeStr(dateStr, formatter, re))\n    .filter(item => !!item)\n    .join(':')\n\n  dateStr = YMD + (HMS ? ` ${HMS}` : '')\n\n  return new Dater(dateStr)\n}\n\nexport type { Dater }\n", "/**\n * 深度优先遍历树结构，并对每个节点执行回调函数。\n * @param data - 树结构的根节点。\n * @param cb - 回调函数，接收当前节点作为参数，返回值为布尔值或无返回值, 当返回值为false时停止遍历。\n * @param childrenKey - 子节点的键名。\n * @returns 返回布尔值，表示是否遇到了回调函数返回 `false` 的节点。\n */\nexport function dft<T extends Record<string, any>>(\n  data: T,\n  cb: (item: T) => boolean | void,\n  childrenKey = 'children'\n): false | undefined {\n  if (cb(data) === false) return false\n\n  let children = data[childrenKey]\n  if (children) {\n    let i = 0\n    while (i < children.length) {\n      if (dft(children[i], cb, childrenKey) === false) break\n      i++\n    }\n  }\n}\n\n/**\n * 广度优先遍历树结构\n * @param root - 根节点\n * @param cb - 遍历回调函数，返回值为false时中断遍历\n * @param childrenKey - 子节点属性名，默认为'children'\n */\nexport function bft<T extends Record<string, any>>(\n  root: T,\n  cb: (item: T) => void | boolean,\n  childrenKey = 'children'\n): void {\n  let queue: T[] = []\n\n  queue.push(root)\n\n  while (queue.length > 0) {\n    const node = queue.shift()!\n    if (cb(node) === false) break\n\n    let children = node[childrenKey]\n    if (!!children) {\n      queue = queue.concat(children)\n    }\n  }\n}\n\n/**\n * 完全碾平\n * @param nodes 节点\n * @param childrenKey 子节点字段\n * @param result 一个用于递归传递的结果，99.9999%的情况不需要你去调用它\n * @returns\n */\nexport function flat<T extends Record<string, any>>(\n  nodes: T[],\n  childrenKey = 'children',\n  result: T[] = []\n): T[] {\n  nodes.forEach(node => {\n    result.push(node)\n    const children = node[childrenKey]\n    if (children) {\n      result.push(...flat(children, childrenKey, result))\n    }\n  })\n  return result\n}\n", "import { TreeNode } from './tree/tree-node'\nimport { bft, dft } from './tree/helper'\n\nexport interface TreeCreateByClassConfig<Node extends TreeNode> {\n  /**\n   * 子节点的键名\n   * @default 'children'\n   */\n  childrenKey?: string\n\n  /** 节点创建后的回调 */\n  onNodeCreated?: (node: Node) => void\n}\n\nexport interface TreeCreateByFunctionConfig<\n  Data extends any,\n  Node extends TreeNode\n> extends TreeCreateByClassConfig<Node> {\n  /** 节点创建方法 */\n  createNode: (data: Data, index: number) => Node\n}\n\nexport class Tree<Node extends TreeNode> {\n  readonly root: Node\n\n  /** 节点数量 */\n  get size(): number {\n    return this.root.size\n  }\n\n  constructor(root: Node) {\n    this.root = root\n  }\n\n  /**\n   * 生成树形结构数据\n   *\n   * @param data - 原始数据\n   * @param config - 配置项\n   * @returns 生成的树形结构数据\n   */\n  static create<Data extends Record<string, any>, Node extends TreeNode<Data>>(\n    data: Data,\n    config: TreeCreateByFunctionConfig<Data, Node>\n  ): Tree<Node>\n\n  /**\n   * 生成树形结构数据\n   *\n   * @param data - 原始数据\n   * @param Node - 节点类\n   * @param config - 配置项\n   * @returns 生成的树形结构数据\n   */\n  static create<Data extends Record<string, any>, Node extends TreeNode<Data>>(\n    data: Data,\n    Node: {\n      new (data: Data, index: number): Node\n    },\n    config: TreeCreateByClassConfig<Node>\n  ): Tree<Node>\n  static create<Data extends Record<string, any>, Node extends TreeNode<Data>>(\n    data: Data,\n    Node:\n      | {\n          new (data: Data, index: number): Node\n        }\n      | TreeCreateByFunctionConfig<Data, Node>,\n    config?: TreeCreateByClassConfig<Node>\n  ): Tree<Node> {\n    const { childrenKey = 'children', onNodeCreated } =\n      typeof Node === 'function' ? config || {} : Node\n\n    let createNode: (data: Data, index: number) => Node\n    if (typeof Node === 'function') {\n      createNode = (data, index) => new Node(data, index)\n    } else if (typeof Node === 'object') {\n      createNode = Node.createNode\n    }\n\n    function generate(data: any, index: number, parent?: any) {\n      const node = createNode(data, index)\n      onNodeCreated?.(node)\n      if (parent) {\n        node.parent = parent\n      }\n      const children = data[childrenKey]\n\n      if (children === undefined || Array.isArray(children)) {\n        node.children = children?.map((item, index) =>\n          generate(item, index, node)\n        )\n      }\n\n      return node\n    }\n\n    return new Tree(generate(data, 0))\n  }\n\n  /**\n   * 深度优先遍历树结构，并对每个节点执行回调函数。\n   * @param data - 树结构的根节点。\n   * @param cb - 回调函数，接收当前节点作为参数，返回值为布尔值或无返回值, 当返回值为false时停止遍历。\n   * @param childrenKey - 子节点的键名。\n   * @returns 返回布尔值，表示是否遇到了回调函数返回 `false` 的节点。\n   */\n  static dft = dft\n\n  /**\n   * 广度优先遍历树结构\n   * @param root - 根节点\n   * @param cb - 遍历回调函数，返回值为false时中断遍历\n   * @param childrenKey - 子节点属性名，默认为'children'\n   */\n  static bft = bft\n\n  /**\n   * 获取节点的子节点\n   * @param node 节点\n   * @param matcher 匹配函数，用于判断节点是否符合条件\n   * @param childrenKey 子节点键名，默认为'children'\n   * @returns 符合条件的子节点数组\n   */\n  static getChildren<Node extends Record<string, any>>(\n    node: Node,\n    matcher: (node: Node) => boolean,\n    childrenKey = 'children'\n  ): Node[] {\n    let ret: Node[] = []\n    Tree.dft(\n      node,\n      node => {\n        matcher(node) && ret.push(node)\n      },\n      childrenKey\n    )\n    return ret\n  }\n\n  /**\n   * 获取满足条件的第一个子节点。\n   *\n   * @param node - 父节点。\n   * @param matcher - 匹配子节点的条件。\n   * @param childrenKey - 访问父节点中子节点的键。\n   * @returns 第一个满足条件的子节点，如果没有匹配项则返回 null。\n   */\n  static getChild<Node extends Record<string, any>>(\n    node: Node,\n    matcher: (node: Node) => boolean,\n    childrenKey = 'children'\n  ): Node | null {\n    let ret: Node | null = null\n\n    Tree.bft(\n      node,\n      node => {\n        if (matcher(node)) {\n          ret = node\n          return false\n        }\n\n        return true\n      },\n      childrenKey\n    )\n    return ret\n  }\n\n  /**\n   * 通过索引路径访问子节点节点\n   * @param node 树形节点\n   * @param indexPath 索引路径。\n   * @param childrenKey 子节点key名\n   */\n  static visit(\n    node: Record<string, any>,\n    indexPath: number[],\n    childrenKey = 'children'\n  ) {\n    let result = node\n    for (let i = 0; i < indexPath.length; i++) {\n      const index = indexPath[i]!\n      if (!result) {\n        console.warn('访问的路径内容不存在')\n        return undefined\n      }\n      result = result[childrenKey]?.[index]\n    }\n    return result\n  }\n\n  /** 追加节点 */\n  append(data: Node['data']): void {\n    return this.root.append(data)\n  }\n\n  /**\n   * 广度优先遍历树结构，并对每个节点执行回调函数。\n   * @param cb - 回调函数，接收当前节点作为参数，返回值为布尔值或无返回值, 当返回值为false时停止遍历。\n   * @param childrenKey - 子节点的键名。\n   * @returns 返回布尔值，表示是否遇到了回调函数返回 `false` 的节点。\n   */\n  bft(cb: (item: Node) => boolean | void, childrenKey?: string): void {\n    return Tree.bft(this.root, cb, childrenKey)\n  }\n\n  /**\n   * 深度优先遍历树结构，并对每个节点执行回调函数。\n   * @param cb - 回调函数，接收当前节点作为参数，返回值为布尔值或无返回值, 当返回值为false时停止遍历。\n   * @param childrenKey - 子节点的键名。\n   * @returns 返回布尔值，表示是否遇到了回调函数返回 `false` 的节点。\n   */\n  dft(\n    cb: (node: Node) => boolean | void,\n    childrenKey?: string\n  ): false | undefined {\n    return Tree.dft(this.root, cb, childrenKey)\n  }\n}\n\nexport class Forest<Node extends TreeNode> {\n  private virtualRoot!: Node\n\n  get nodes(): Node[] {\n    return this.virtualRoot.children! as Node[]\n  }\n\n  /** 节点数量 */\n  get size(): number {\n    let sum = 0\n    this.nodes?.forEach(node => {\n      sum += node.size\n    })\n    return sum\n  }\n\n  constructor(node: Node) {\n    this.virtualRoot = node\n  }\n\n  /**\n   * 生成树形结构数据\n   *\n   * @param data - 原始数据\n   * @param config - 配置项\n   * @returns 生成的树形结构数据\n   */\n  static create<\n    Data extends Record<string, any>[],\n    Node extends TreeNode<Data[number]>\n  >(\n    data: Data,\n    config: TreeCreateByFunctionConfig<Data[number], Node>\n  ): Forest<Node>\n  /**\n   * 生成树形结构数据\n   *\n   * @param data - 原始数据\n   * @param Node - 节点类\n   * @param config - 配置项\n   * @returns 生成的树形结构数据\n   */\n  static create<\n    Data extends Record<string, any>[],\n    Node extends TreeNode<Data[number]>\n  >(\n    data: Data,\n    Node: {\n      new (data: Data[number], index: number): Node\n    },\n    config?: TreeCreateByClassConfig<Node>\n  ): Forest<Node>\n  static create<Data extends any[], Node extends TreeNode<Data[number]>>(\n    data: Data,\n    Node:\n      | {\n          new (data: Data[number], index: number): Node\n        }\n      | TreeCreateByFunctionConfig<Data[number], Node>,\n    config?: TreeCreateByClassConfig<Node>\n  ): Forest<Node> {\n    const { childrenKey = 'children', onNodeCreated } =\n      typeof Node === 'function' ? config || {} : Node\n\n    let createNode: (data: Data[number], index: number) => Node\n    if (typeof Node === 'function') {\n      createNode = (data, index) => new Node(data, index)\n    } else {\n      createNode = Node.createNode\n    }\n\n    function generate(data: any, index: number, parent?: any) {\n      const node = createNode(data, index)\n      onNodeCreated?.(node)\n      if (parent) {\n        node.parent = parent\n      }\n      const children = data[childrenKey]\n      if (Array.isArray(children) || children === undefined) {\n        node.children = children?.map((item, index) =>\n          generate(item, index, node)\n        )\n      }\n\n      return node\n    }\n\n    const virtualRoot = createNode(undefined, 0)\n    const nodes = data.map((item, index) => generate(item, index, virtualRoot))\n    virtualRoot.children = nodes\n    return new Forest(virtualRoot)\n  }\n\n  /**\n   * 通过索引路径访问子节点节点\n   * @param nodes 森林节点\n   * @param indexPath 索引路径。\n   * @param childrenKey 子节点key名\n   */\n  static visit(\n    nodes: Record<string, any>,\n    indexPath: number[],\n    childrenKey = 'children'\n  ) {\n    let currentNodes = nodes\n    let result: Record<string, any> | undefined\n    for (let i = 0; i < indexPath.length; i++) {\n      const index = indexPath[i]!\n      if (!currentNodes) {\n        return undefined\n      }\n      result = currentNodes[index]\n      currentNodes = result?.[childrenKey]\n    }\n    return result\n  }\n\n  /** 追加节点 */\n  append(data: Node['data']): void {\n    return this.virtualRoot.append(data)\n  }\n\n  /**\n   * 广度优先遍历树结构，并对每个节点执行回调函数。\n   * @param cb - 回调函数，接收当前节点作为参数，返回值为布尔值或无返回值, 当返回值为false时停止遍历。\n   * @param childrenKey - 子节点的键名。\n   * @returns 返回布尔值，表示是否遇到了回调函数返回 `false` 的节点。\n   */\n  bft(cb: (item: Node) => boolean | void, childrenKey = 'children'): void {\n    let queue = [...this.nodes]\n    while (queue.length) {\n      const node = queue.shift()!\n      const result = cb(node)\n      if (result === false) return\n      const children = node[childrenKey]\n      if (!!children) {\n        queue = queue.concat(children)\n      }\n    }\n  }\n\n  /**\n   * 深度优先遍历树结构，并对每个节点执行回调函数。\n   * @param cb - 回调函数，接收当前节点作为参数，返回值为布尔值或无返回值, 当返回值为false时停止遍历。\n   * @param childrenKey - 子节点的键名。\n   * @returns 返回布尔值，表示是否遇到了回调函数返回 `false` 的节点。\n   */\n  dft(\n    cb: (item: Node) => boolean | void,\n    childrenKey?: string\n  ): false | undefined {\n    let failed = false\n    this.nodes.forEach(node => {\n      const result = dft(node, cb, childrenKey)\n      if (result === false) {\n        failed = true\n      }\n    })\n    return failed ? false : undefined\n  }\n}\n\nexport { TreeNode }\n", "import { getDataType } from '../data/data-type'\n\nconst te = new TextEncoder()\nconst td = new TextDecoder()\n\nfunction encodeU8A(u8a: Uint8Array) {\n  const s = Array.prototype.slice\n    .call(u8a)\n    .map(code => String.fromCharCode(code))\n    .join('')\n  return btoa(s)\n}\n\nfunction encodeString(s: string) {\n  return encodeU8A(te.encode(s))\n}\n\n/**\n * base64编码\n * @param data 字符串或者数字类型数据\n */\nfunction encode(data: string | number): string\n/**\n * base64编码\n * @param data 文件类型数据\n */\nfunction encode(data: Blob): Promise<string>\nfunction encode(data: string | number | Blob): string | Promise<string> {\n  let type = getDataType(data)\n\n  if (type === 'string') {\n    return encodeString(data as string)\n  }\n  if (type === 'number') {\n    return encodeString(String(data))\n  }\n  if (data instanceof Blob) {\n    return data.arrayBuffer().then(buf => {\n      return encodeU8A(new Uint8Array(buf))\n    })\n  }\n  throw new Error('data类型错误')\n}\n\n/**\n * 解码\n * @param str base64字符串\n */\nfunction decode(str: string) {\n  const u8a = new Uint8Array(\n    atob(str)\n      .split('')\n      .map(s => s.charCodeAt(0))\n  )\n\n  return td.decode(u8a)\n}\n\nexport const base64 = {\n  /**\n   * base64编码\n   * @param data 输入数据\n   */\n  encode,\n\n  /**\n   * base64解码\n   * @param data 待解码base64字符串\n   */\n  decode\n}\n", "export interface AnimeConfig<State> {\n  /** 动画持续时间, 单位毫秒 */\n  duration?: number\n  /** 缓动函数 */\n  easingFunction?: (progress: number) => number\n  /** 动画完成后的回调 */\n  onComplete?(state: State): void\n}\n\nexport interface TweenConfig<State> {\n  /** 动画持续时间, 单位毫秒 */\n  duration?: number\n  /** 每一帧状态更新时的回调 */\n  onUpdate?(state: State): void\n  /** 动画完成后的回调 */\n  onComplete?(state: State): void\n  /** 缓动函数 */\n  easingFunction?: (progress: number) => number\n}\n\nexport class Tween<\n  State extends Record<string, number> = Record<string, number>\n> {\n  readonly state: State\n\n  protected duration = 300\n\n  protected onUpdate?: (state: State) => void\n  protected onComplete?: (state: State) => void\n\n  protected frameId?: number\n\n  protected easingFunction!: (progress: number) => number\n\n  // private elapsed = 0\n\n  private defaultState: State\n\n  constructor(state: State, config?: TweenConfig<State>) {\n    this.state = state\n    this.defaultState = { ...state }\n    const { duration, onUpdate, onComplete, easingFunction } = config || {}\n\n    if (duration !== undefined) {\n      this.duration = duration\n    }\n    if (onUpdate !== undefined) {\n      this.onUpdate = onUpdate\n    }\n    if (onComplete !== undefined) {\n      this.onComplete = onComplete\n    }\n    this.easingFunction = easingFunction || Tween.easing.linear\n  }\n\n  /** 请求动画帧 */\n  protected raf(options: {\n    onComplete: () => void\n    duration: number\n    tick: (p: number) => void\n  }) {\n    const start = performance.now()\n    const { onComplete, tick, duration } = options\n\n    const update = (timestamp: number) => {\n      // 经历的时间\n      const elapsed = timestamp - start\n\n      // 进度 = 时间 / 动画持续时间 且小于1\n      const progress = Math.min(elapsed / duration, 1)\n      tick(progress)\n      if (progress < 1) {\n        this.frameId = requestAnimationFrame(update)\n      } else {\n        tick(progress)\n        this.stop()\n        onComplete()\n      }\n    }\n\n    this.frameId = requestAnimationFrame(update)\n  }\n\n  /**\n   * 使用动画将组件状态转换为新状态。\n   * @param state 新的状态\n   * @param config 动画配置, 优先级高于Tween中的配置\n   */\n  to(state: State, config?: AnimeConfig<State>): void {\n    this.stop()\n\n    // 此前状态\n    const prevState = { ...this.state }\n\n    // 目标距离\n    const stateDistance = Object.keys(state).reduce(\n      (acc, key) => {\n        if (\n          (state[key] || state[key] === 0) &&\n          (prevState[key] || prevState[key] === 0)\n        ) {\n          acc[key] = state[key]! - prevState[key]!\n        }\n\n        return acc\n      },\n      {} as Record<string, number>\n    )\n\n    const duration = config?.duration || this.duration\n    const easingFunction = config?.easingFunction || this.easingFunction\n    const onComplete = config?.onComplete || this.onComplete\n\n    this.raf({\n      duration,\n      onComplete: () => {\n        for (const key in state) {\n          if (key in this.state) {\n            this.state[key] = state[key]\n          }\n        }\n        this.onUpdate?.(this.state)\n        onComplete?.(this.state)\n      },\n      tick: progress => {\n        for (const key in stateDistance) {\n          const target =\n            prevState[key]! + easingFunction(progress) * stateDistance[key]!\n          // @ts-ignore\n          this.state[key] = target\n        }\n\n        this.onUpdate?.(this.state)\n      }\n    })\n  }\n\n  back(config?: AnimeConfig<State>) {\n    this.to(this.defaultState, config)\n  }\n\n  /** 停止动画 */\n  private stop(): boolean {\n    if (!this.frameId) return false\n    cancelAnimationFrame(this.frameId)\n    this.frameId = undefined\n    return true\n  }\n\n  /** 暂停动画 */\n  // pause() {\n  //   this.stop()\n  // }\n\n  /** 继续 */\n  // resume() {}\n\n  static readonly easing = {\n    /** 匀速缓动 */\n    linear: (p: number) => p,\n    /** 先慢后快 */\n    easeInQuad: (p: number) => p * p,\n    /** 先快后慢 */\n    easeOutQuad: (p: number) => p * (2 - p),\n    /** 先慢后快再慢 */\n    easeInOutQuad: (p: number) => (p < 0.5 ? 2 * p * p : -1 + (4 - 2 * p) * p),\n    /** 先回弹再运动 */\n    easeInBack: (p: number) => p * p * ((2.70158 + 1) * p - 1),\n    /** 先运动再回弹 */\n    easeOutBack: (p: number) => {\n      return 1 + 2.70158 * Math.pow(p - 1, 3) + 1.70158 * Math.pow(p - 1, 2)\n    },\n    /** 先回弹再运动再回弹 */\n    easeInOutBack: (p: number) => {\n      const c1 = 1.70158\n      const c2 = c1 * 1.525\n\n      return p < 0.5\n        ? (Math.pow(2 * p, 2) * ((c2 + 1) * 2 * p - c2)) / 2\n        : (Math.pow(2 * p - 2, 2) * ((c2 + 1) * (p * 2 - 2) + c2) + 2) / 2\n    }\n  }\n}\n", "import { isObj } from './data-type'\n\ntype Last<T> = T extends [...any, infer L]\n  ? L\n  : T extends (infer P)[]\n    ? P\n    : undefined\n\n/**\n * 获取数组最后一位\n * @param arr 数组\n */\nexport function last<T extends any[]>(arr: [...T]): Last<T>\nexport function last<T extends any[]>(arr: readonly [...T]): Last<T>\nexport function last<T extends any[]>(arr: T): Last<T> {\n  return arr[arr.length - 1]\n}\n\n/**\n * 合并多个数组并去重\n * @param arrList 任意多个数组\n */\nexport function union<T>(...arrList: T[][]): T[] {\n  return Array.from(new Set<T>(arrList.flat()))\n}\n\n/**\n * 合并多个对象数组，并指定去重字段\n * @param key 按照这个字段进行去重\n * @param arrList 任意多个数组\n */\nexport function unionBy<T extends Record<string, any>>(\n  key: string,\n  ...arrList: T[][]\n): T[] {\n  let s = new Set<T>()\n\n  const ret = arrList.flat().filter(item => {\n    if (!isObj(item)) return true\n\n    let v = item[key]\n\n    if (s.has(v)) {\n      return false\n    } else {\n      s.add(v)\n      return true\n    }\n  })\n\n  s.clear()\n\n  return ret\n}\n\n/**\n * 数组从右到左的回调\n * @param arr 数组\n * @param cb 回调\n */\nexport function eachRight<T>(\n  arr: T[],\n  cb: (v: T, i: number, arr: T[]) => void\n) {\n  let len = arr.length\n\n  while (--len > -1) {\n    cb(arr[len]!, len, arr)\n  }\n}\n\n/**\n * 丢弃数组中指定的索引的元素\n * @param arr 数组\n * @param indexes 索引或者索引列表\n */\nexport function omitArr<T>(arr: T[], indexes: number | number[]): T[] {\n  if (Array.isArray(indexes)) {\n    if (indexes.length > 10) {\n      const s = new Set(indexes)\n      return arr.filter((_, index) => !s.has(index))\n    }\n\n    return arr.filter((_, index) => !indexes.includes(index))\n  }\n\n  if (typeof indexes === 'number') {\n    return [...arr.slice(0, indexes), ...arr.slice(indexes + 1)]\n  }\n\n  throw new Error('索引类型错误')\n}\n\nclass Arr<T> {\n  private _source: T[]\n  constructor(arr: T[]) {\n    this._source = arr\n  }\n\n  /**\n   * 从右往左遍历\n   * @param cb 回调\n   */\n  eachRight(cb: (v: T, i: number, arr: T[]) => void): void {\n    eachRight(this._source, cb)\n  }\n\n  /**\n   * 丢弃元素\n   * @param index 索引\n   * @returns\n   */\n  omit(index: number | number[]): T[] {\n    return omitArr(this._source, index)\n  }\n\n  /**\n   * 查询\n   * @param condition 查询条件\n   * @returns\n   */\n  find(condition: Record<string, any>): T | undefined {\n    return this._source.find(item =>\n      Object.keys(condition).every(key => item[key] === condition[key])\n    )\n  }\n\n  /** 最后一个元素 */\n  get last(): T | undefined {\n    return last(this._source)\n  }\n\n  /**\n   * 移动元素至某个新的位置\n   * @param from 原索引\n   * @param to 目标索引\n   * @returns\n   */\n  move(from: number, to: number): T[] {\n    const { _source } = this\n    let newItems: T[]\n    // 从前往后\n    if (to > from) {\n      newItems = [\n        ..._source.slice(0, from),\n        ..._source.slice(from + 1, to + 1),\n        _source[from]!,\n        ..._source.slice(to + 1)\n      ]\n    }\n    // 从后往前排\n    else {\n      newItems = [\n        ..._source.slice(0, to),\n        _source[from]!,\n        ..._source.slice(to, from),\n        ..._source.slice(from + 1)\n      ]\n    }\n    return newItems\n  }\n\n  /**\n   * 分组，返回一个对象，key为分组的值，value为分组的元素\n   * @param cb 分组回调, 返回值为分组的值\n   * @returns 分组后的对象\n   */\n  groupBy<K extends string | number>(cb: (item: T) => K) {\n    const result: Record<K, T[]> = {} as Record<K, T[]>\n    this._source.forEach(item => {\n      const key = cb(item)\n      if (!result[key]) {\n        result[key] = []\n      }\n      result[key]!.push(item)\n    })\n    return result\n  }\n}\n\nexport function arr<T>(arr: T[]) {\n  return new Arr(arr)\n}\n", "/**\n * 栈\n */\nexport class Stack<T> {\n  private items: T[]\n\n  private changeEvent?: (stack: Stack<T>) => void\n\n  constructor(initial?: T[]) {\n    this.items = initial || []\n  }\n\n  /**\n   * 入栈\n   * @param item 元素\n   */\n  push(item: T): void {\n    this.items.push(item)\n    this.emit()\n  }\n\n  /**\n   * 出栈\n   * @returns\n   */\n  pop(): T | undefined {\n    const item = this.items.pop()\n    this.emit()\n    return item\n  }\n\n  /**\n   * 栈顶\n   * @returns\n   */\n  peek(): T | undefined {\n    return this.items[this.items.length - 1]\n  }\n\n  /**\n   * 检查栈是否为空\n   * @returns\n   */\n  isEmpty(): boolean {\n    return this.items.length === 0\n  }\n\n  /**\n   * 栈的大小\n   * @returns\n   */\n\n  get size(): number {\n    return this.items.length\n  }\n\n  /**\n   * 清空栈\n   */\n  clear(): void {\n    this.items = []\n    this.emit()\n  }\n\n  private emit() {\n    this.changeEvent?.(this)\n  }\n\n  onChange(cb: (stack: Stack<T>) => void): void {\n    this.changeEvent = cb\n  }\n}\n", "import { omitArr } from '../../data/array'\nimport { bft, dft } from './helper'\n\ninterface TreeNodeCtor<Data> {\n  new (data: Data, index: number): any\n}\n\n/**\n * 树节点\n * @example 继承 TreeNode 示例\n * ```\n * class CustomTreeNode<Data extends Record<string, any>> extends TreeNode<Data> {\n *    override children?: CustomTreeNode<Data>[] = undefined\n *\n *    override parent: CustomTreeNode<Data> | null = null\n *\n *    expanded = true\n *\n *    constructor(data: Data, index: number, parent?: CustomTreeNode<Data>) {\n *      super(data, index)\n *\n *      if (parent) {\n *        this.parent = parent\n *      }\n *    }\n *  }\n * ```\n */\nexport abstract class TreeNode<\n  Data extends Record<string, any> = Record<string, any>\n> {\n  /** 节点数据 */\n  data: Data\n\n  /** 父节点 */\n  abstract parent: any\n\n  /** 子节点 */\n  abstract children?: any[]\n\n  /** 当前节点的索引 */\n  index: number\n\n  /** 树深 */\n  get depth(): number {\n    let depth = 0\n    let node: TreeNode<Data> = this\n    while (node?.parent) {\n      depth++\n      node = node.parent\n    }\n\n    return depth\n  }\n\n  /** 节点数量 */\n  get size(): number {\n    let s = 0\n    this.dft(() => {\n      s++\n    })\n    return s\n  }\n\n  /** 是否是叶子节点 */\n  get isLeaf(): boolean {\n    return !this.children || this.children.length === 0\n  }\n\n  constructor(data: Data, index: number) {\n    if (index < 0 || !Number.isInteger(index)) {\n      throw new Error(`节点的索引应当是正整数, 传入的索引为${index}`)\n    }\n    this.data = data\n    this.index = index\n  }\n\n  /**\n   * 从给定的起始索引开始，减小数组中元素的索引属性。\n   * @param arr - 需要重新排序的元素数组。\n   * @param startIndex - 开始重新排序的索引。\n   */\n  private static resort<Item extends { index: number }>(\n    arr: Item[],\n    startIndex: number\n  ) {\n    let i = 0\n    while (i < arr.length) {\n      arr[i]!.index = i + startIndex\n      i++\n    }\n  }\n\n  /**\n   * 深度优先遍历\n   * @param cb 递归回调\n   * @param childrenKey 子节点key\n   * @returns\n   */\n  dft(\n    cb: (item: this) => boolean | void,\n    childrenKey = 'children'\n  ): false | undefined {\n    return dft(this, cb, childrenKey)\n  }\n\n  /**\n   * 广度优先遍历\n   * @param cb 递归回调\n   * @param childrenKey 子节点key\n   * @returns\n   */\n  bft(cb: (item: this) => boolean | void, childrenKey = 'children') {\n    return bft(this, cb, childrenKey)\n  }\n\n  /**\n   * 从父节点中移除当前节点\n   * @returns 移除成功返回true，否则返回false\n   */\n  remove(): boolean {\n    if (!this.parent) {\n      return false\n    }\n    this.parent.removeChild(this)\n\n    return true\n  }\n\n  /**\n   * 从当前节点中移除子节点\n   * @param childNode 要移除的子节点\n   */\n  removeChild<Node extends TreeNode<any>>(childNode: Node) {\n    if (childNode.parent !== this || !this.children?.length) {\n      throw new Error('要移除的子节点不存在于当前节点中')\n    }\n\n    if (this.children?.[childNode.index] !== childNode) {\n      return\n    }\n\n    const result = omitArr(this.children!, childNode.index)\n\n    if (!result.length) {\n      this.children = undefined\n    } else {\n      TreeNode.resort(result.slice(childNode.index), childNode.index)\n      this.children = result\n    }\n  }\n\n  /**\n   * 在当前节点的子节点最后添加一个子节点。\n   * @param data 节点数据\n   */\n  append(data: Data): void {\n    const len = this.children?.length ?? 0\n    const node = new (this.constructor as TreeNodeCtor<Data>)(data, len)\n    node.parent = this\n    this.children = [...(this.children || []), node]\n  }\n\n  /**\n   * 插入节点到当前节点的子节点列表中。\n   * 如果节点的索引大于当前节点子节点的长度，抛出错误。\n   * 如果当前节点没有子节点，则将节点作为唯一子节点。\n   * 如果当前节点有子节点，则将节点插入到指定索引的位置，并重新排序子节点列表。\n   *\n   * @param data 要插入的节点的数据\n   * @param index 插入索引\n   */\n  insert(data: Data, index: number): void {\n    const { children } = this\n    const len = children?.length ?? 0\n    // 检查节点的索引是否有效\n    if (index > len) {\n      throw new Error(`节点的索引不能大于当前节点子节点的长度${len}`)\n    }\n\n    const node = new (this.constructor as TreeNodeCtor<Data>)(data, index)\n\n    // 指定父级\n    node.parent = this\n    if (!children) {\n      this.children = [node]\n    } else {\n      const pre = children!.slice(0, node.index)\n      const post = children!.slice(node.index)\n      TreeNode.resort(post, node.index + 1)\n\n      this.children = [...pre, node, ...post]\n    }\n  }\n\n  /**\n   * 在当前节点的下一个位置添加一个新节点。\n   * @param data 节点数据\n   */\n  addToNext(data: Data): void {\n    this.parent?.insert(data, this.index + 1)\n  }\n\n  /**\n   * 在当前节点的上一个位置添加一个新节点。\n   * @param data 节点数据\n   */\n  addToPrev(data: Data): void {\n    this.parent?.insert(data, this.index)\n  }\n}\n", "/**\n * 获取JS运行环境\n * @return 运行环境，如果 `window` 对象被定义（表示在浏览器中运行），则返回字符串字面量 `'web'`，\n * 否则返回字符串字面量 `'node'`（表示在 Node.js 环境中运行）。\n */\nexport function getRuntime(): 'web' | 'node' {\n  return typeof window !== 'undefined' ? 'web' : 'node'\n}\n\n/**\n * 获取设备类型\n * @returns 设备类型，可能为 'mobile' 或 'desktop'\n */\nexport function getDeviceType(): 'mobile' | 'desktop' {\n  const userAgent = navigator.userAgent.toLowerCase()\n  const mobileKeywords = [\n    'android',\n    'iphone',\n    'ipad',\n    'mobile',\n    'ipod',\n    'blackberry',\n    'windows phone'\n  ]\n\n  for (const keyword of mobileKeywords) {\n    if (userAgent.includes(keyword)) {\n      return 'mobile'\n    }\n  }\n\n  return 'desktop'\n}\n\ntype OSType = 'Windows' | 'Mac OS' | 'Linux' | 'Android' | 'iOS'\n\n/**\n * 获取操作系统类型\n * @returns 操作系统类型\n */\nexport function getOSType(): OSType | 'Unknown' {\n  const platform = navigator.platform\n\n  if (platform.includes('Win')) return 'Windows'\n  if (platform.includes('Mac')) return 'Mac OS'\n  if (platform.includes('Linux')) return 'Linux'\n  if (platform.includes('Android')) return 'Android'\n  if (platform.includes('iOS')) return 'iOS'\n  return 'Unknown'\n}\n", "/** 并发状态 */\nexport type ConcurrenceStatus =\n  | 'ready'\n  | 'running'\n  | 'success'\n  | 'failed'\n  | 'paused'\n\ntype SuccessCallback<Result> = (e: { result: Result[] }) => void\ntype CompleteCallback<Result> = (e: { result: Result[]; errors: any[] }) => void\ntype FailedCallback<Result> = (e: { result: Result[]; errors: any[] }) => void\ntype PauseCallback<Result> = (e: { result: Result[]; errors: any[] }) => void\ntype ContinueCallback<Result> = (e: { result: Result[]; errors: any[] }) => void\n\ntype EventsCallbacks<Result> = {\n  success?: SuccessCallback<Result>\n  complete?: CompleteCallback<Result>\n  failed?: FailedCallback<Result>\n  pause?: PauseCallback<Result>\n  continue?: ContinueCallback<Result>\n}\n\n/** 并发事件 */\nexport type ConcurrenceEvent = keyof EventsCallbacks<any>\n\ninterface ConcurrenceConfig<T, R> {\n  /**\n   * 并发模式。\n   * continue: 并发任务中有部分失败继续执行剩余任务;\n   * end: 并发任务中有1个失败立马结束所有并发\n   *\n   * @default 'end'\n   */\n  mode?: 'continue' | 'end'\n  /** 最大并发数量, 最小且默认为1 */\n  max?: number\n  /** 一个队列, 它的每一项会被传入action中执行组成并发操作 */\n  queue: T[]\n  /** 队列中每一项执行的异步方法 */\n  action: (item: T) => Promise<R>\n}\n\n/** 并发控制器 */\nexport class ConcurrenceController<Item = any, Result = any> {\n  /** 并发模式 */\n  private mode: 'continue' | 'end' = 'end'\n\n  /** 最大并发数量 */\n  private max = 1\n\n  /** 并发池, 异步action执行时进入, 执行完毕或者错误时退出 */\n  private pool = new Set<Promise<Result>>()\n\n  /** 所有队列 */\n  private queue: Item[] = []\n\n  /** 失败项 */\n  private failedItems: Item[] = []\n\n  /** 错误 */\n  private errors: any[] = []\n\n  /** 状态 */\n  protected status: ConcurrenceStatus = 'ready'\n\n  /** 事件回调 */\n  private eventsCallbacks: EventsCallbacks<Result> = {}\n\n  /** 结果 */\n  protected result: Result[] = []\n\n  /** 并发操作 */\n  private action!: (item: Item) => Promise<Result>\n\n  constructor(conf: ConcurrenceConfig<Item, Result>) {\n    const { mode, max, queue, action } = conf\n\n    if (mode) {\n      this.mode = mode\n    }\n    if (max) {\n      if (max < 1 || !Number.isInteger(max)) {\n        throw new Error('max参数应该是一个正整数')\n      }\n      this.max = max\n    }\n    this.queue = [...queue]\n    this.action = action\n  }\n\n  private ready() {\n    this.status = 'ready'\n  }\n\n  /**\n   * 是否完成, 并发池为空且队列为空或者状态已经为失败视为完成\n   */\n  private get finished() {\n    const { queue, pool, status } = this\n    return !pool.size && (!queue.length || status === 'failed')\n  }\n\n  /** 是否可新增 */\n  private get addable() {\n    const { status, queue } = this\n    return queue.length && status !== 'paused' && status !== 'failed'\n  }\n\n  private processingError(err: any, item: Item) {\n    const { errors, eventsCallbacks, mode, result, failedItems, pool } = this\n    errors.push(err)\n    failedItems.push(item)\n    if (mode === 'end') {\n      // 先标记失败\n      this.status = 'failed'\n\n      // 并发池中还有任务则返回\n      if (pool.size) return\n\n      eventsCallbacks.failed?.({\n        errors,\n        result\n      })\n      eventsCallbacks.complete?.({\n        errors,\n        result\n      })\n\n      return\n    }\n    if (mode === 'continue') {\n      this.add()\n      return\n    }\n  }\n\n  /** 完成此次并发 */\n  private finish() {\n    const { errors, result, eventsCallbacks } = this\n    if (errors.length) {\n      this.status = 'failed'\n      eventsCallbacks.failed?.({\n        result,\n        errors\n      })\n    } else {\n      this.status = 'success'\n      eventsCallbacks.success?.({\n        result\n      })\n    }\n\n    eventsCallbacks.complete?.({\n      result,\n      errors\n    })\n  }\n\n  /** 将操作加入并发池 */\n  private add() {\n    const { queue, action, pool, result, finished, addable } = this\n\n    // 操作都完成则退出\n    if (finished) {\n      return this.finish()\n    }\n\n    if (!addable) return\n\n    const item = queue.shift()!\n    const p = action!(item)\n\n    pool.add(p)\n\n    p.then(ret => {\n      pool.delete(p)\n      result.push(ret)\n      this.add()\n    }).catch(err => {\n      pool.delete(p)\n      this.processingError(err, item)\n    })\n  }\n\n  /**\n   * 监听并发成功事件\n   * @param event 成功事件\n   * @param successCallback 成功后的回调\n   */\n  on(event: 'success', successCallback: SuccessCallback<Result>): void\n  /**\n   * 监听并发失败事件\n   * @param event 失败事件\n   * @param failedCallback 失败后的回调\n   */\n  on(event: 'failed', failedCallback: FailedCallback<Result>): void\n  /**\n   * 监听并发完成事件, 完成事件无论失败还是成功都会触发\n   * @param event 完成事件\n   * @param completeCallback 完成后的回调\n   */\n  on(event: 'complete', completeCallback: CompleteCallback<Result>): void\n  /**\n   * 监听并发暂停事件\n   * @param event 暂停事件\n   * @param pauseCallback 暂停后的回调\n   */\n  on(event: 'pause', pauseCallback: PauseCallback<Result>): void\n  /**\n   * 监听并发继续事件\n   * @param event 继续事件\n   * @param continueCallback 继续后的回调\n   */\n  on(event: 'continue', continueCallback: ContinueCallback<Result>): void\n  on(event: ConcurrenceEvent, callback: (...args: any[]) => void): void {\n    this.eventsCallbacks[event] = callback\n  }\n\n  /** 开始并发 */\n  start() {\n    if (this.status !== 'ready') {\n      return console.warn(\n        `执行ConcurrenceController.start失败, 因为当前并发状态为${this.status}, 只有ready状态才能执行该方法`\n      )\n    }\n    this.status = 'running'\n    const { max, queue } = this\n    let i = -1\n    const len = Math.min(queue.length, max)\n\n    if (len) {\n      while (++i < len) this.add()\n    } else {\n      this.finish()\n    }\n  }\n\n  /** 暂停该并发中的任务 */\n  pause() {\n    this.status = 'paused'\n    const { eventsCallbacks, errors, result } = this\n    eventsCallbacks.pause?.({\n      errors,\n      result\n    })\n  }\n\n  /** 继续一个被暂停的并发 */\n  continue() {\n    // 设置ready状态以便于可以继续执行剩下的任务\n    this.ready()\n    const { eventsCallbacks, errors, result } = this\n    eventsCallbacks.continue?.({\n      errors,\n      result\n    })\n    this.start()\n  }\n\n  /** 重新尝试失败的任务 */\n  retry() {\n    if (!this.failedItems.length) {\n      return console.log(\n        `无法执行ConcurrenceController.retry方法, 因为没有失败的任务`\n      )\n    }\n\n    // 剩余队列加上失败项\n    this.queue = [...this.failedItems, ...this.queue]\n    this.errors = []\n    this.failedItems = []\n\n    this.ready()\n    this.start()\n  }\n}\n", "/**\n * 安全运行\n * @param task 待执行的任务\n */\nexport function safeRun<T>(task: () => T): T | undefined\n/**\n * 安全运行并提供默认返回值\n * @param task 待执行的任务\n * @param dft 指定的默认值\n */\nexport function safeRun<T>(task: () => T, dft: T): T\nexport function safeRun<T>(task: () => T, dft?: T): T | undefined {\n  try {\n    return task()\n  } catch {\n    return dft\n  }\n}", "/**\n * 防抖\n * @param fn 要调用的目标函数\n * @param delay 延迟时间\n * @param immediate 是否立即调用一次, 默认true\n * @returns\n */\nexport function debounce<T extends any[]>(\n  fn: (...args: T) => void,\n  delay = 300,\n  immediate = true\n) {\n  let timer: NodeJS.Timeout | undefined = undefined\n\n  return function (this: any, ...args: T) {\n    timer !== undefined && clearTimeout(timer)\n\n    if (immediate) {\n      // 空闲中\n      let isFree = timer === undefined\n      // 如果在开头已经调用则定时器中不再触发调用\n      let hasCall = false\n      if (isFree) {\n        fn.call(this, ...args)\n        hasCall = true\n      }\n      timer = setTimeout(() => {\n        timer = undefined\n        !hasCall && fn.call(this, ...args)\n      }, delay)\n    } else {\n      timer = setTimeout(() => {\n        fn.call(this, ...args)\n      }, delay)\n    }\n  }\n}\n\n/**\n * 节流\n * @param fn 要调用的目标函数\n * @param delay 间隔时间\n * @param cb 结果回调\n * @returns\n */\nexport function throttle<T extends any[], R>(\n  fn: (...args: T) => R,\n  delay = 300,\n  cb?: (v: R) => void\n) {\n  let start = Date.now()\n  let result: R\n  return function (this: any, ...args: T): R {\n    let current = Date.now()\n    if (current - start >= delay) {\n      start = current\n      result = fn.call(this, ...args)\n      cb?.(result)\n    }\n    return result\n  }\n}\n\n/**\n * 睡眠一定时间\n * @param ms 毫秒数\n * @returns\n */\nexport function sleep(ms: number) {\n  return new Promise(resolve => setTimeout(resolve, ms))\n}\n", "export default {\n\n  /**\n   * 拼接路径\n   * @deprecated 这个方法已过时，请使用str.joinPath替代\n   * @param firstPath\n   * @param args\n   * @returns\n   */\n  join(firstPath: string, ...args: string[]) {\n    let left = /^\\/*/\n    let right = /\\/*$/\n    let protocolRE = /^(https?|ftp|file):/\n\n    let isProtocal = protocolRE.test(firstPath)\n\n    let prefix = isProtocal ? firstPath : ''\n    args = isProtocal ? args : [firstPath, ...args]\n    const joined = args.map((arg) => arg.replace(left, '').replace(right, '')).join('/')\n    return prefix.replace(right, '') + (joined.startsWith('/') ? joined : '/' + joined)\n  }\n}\n", "/**\n * 排除一个对象的某些键和值\n * @param target 目标对象\n * @param omitKeys 排除的对象的键的数组\n */\nexport function omit<T extends Record<string, any>, K extends keyof T>(\n  target: T,\n  omitKeys: K[]\n): Omit<T, K> {\n  let ret = {} as T\n  let s = new Set(omitKeys)\n  for (const key in target) {\n    if (!s.has(key as unknown as K)) {\n      ret[key] = target[key]\n    }\n  }\n  omitKeys.forEach(key => {\n    delete ret[key]\n  })\n  return ret\n}\n\n/**\n * 从目标对象获取某些属性的值\n * @param target 目标对象\n * @param pickKeys 选择的对象的键的数组\n */\nexport function pick<T extends Record<string, any>, K extends keyof T>(\n  target: T,\n  pickKeys: K[]\n): Pick<T, K> {\n  let ret = {} as T\n\n  pickKeys.forEach(key => (ret[key] = target[key]))\n  return ret\n}\n\n/**\n * 将对象的key设为数组\n * @param obj 对象\n * @returns\n */\nexport function objKeys<T extends Record<string, any>>(obj: T) {\n  let keys: Array<keyof T> = []\n  for (const key in obj) {\n    keys.push(key)\n  }\n  return keys\n}\n\n/**\n * 对象映射\n * @param obj 目标对象\n * @param mapper 映射函数\n * @returns\n */\nexport function objMap<O extends Record<string, any>, K extends keyof O, R>(\n  obj: O,\n  mapper: (val: O[K], key: K) => R\n) {\n  const ret: any = {}\n\n  Object.keys(obj).forEach(key => {\n    ret[key] = mapper(obj[key as K], key as K)\n  })\n  return ret as Record<K, R>\n}\n\n/**\n * 对象继承\n * @param source 源对象\n * @param targets 被继承的目标对象\n */\nexport function extend<S extends Record<string, any>>(\n  source: S,\n  ...targets: Record<string, any>[]\n) {\n  for (const key in source) {\n    let i = targets.length\n    while (--i >= 0) {\n      let v = targets[i]![key]\n      if (v !== undefined && v !== null) {\n        source[key] = v\n        break\n      }\n    }\n  }\n  return source\n}\n\n/**\n * 对象循环\n * @param obj 目标对象\n * @param fn 循环中调用的函数\n * @returns\n */\nexport function objEach<O extends Record<string, any>, K extends keyof O>(\n  obj: O,\n  fn: (val: O[K], key: K) => void\n) {\n  Object.keys(obj).forEach(key => {\n    fn(obj[key as K], key as K)\n  })\n}\n\nclass Obj<O extends Record<string, any>, K extends keyof O = keyof O> {\n  constructor(private _source: O) {}\n\n  /**\n   * 获取对象的key\n   * @returns\n   */\n  keys() {\n    return objKeys(this._source)\n  }\n\n  /**\n   * 获取某些属性的值\n   * @param pickKeys 选择的对象的键的数组\n   * @returns\n   */\n  pick<KK extends K>(pickKeys: KK[]): Pick<O, KK> {\n    return pick(this._source, pickKeys)\n  }\n\n  /**\n   * 循环\n   * @param fn 循环中调用的函数\n   * @returns\n   */\n  each(fn: (val: O[K], key: K) => void) {\n    objEach(this._source, fn)\n    return this\n  }\n\n  /**\n   * 排除一个对象的某些键和值\n   * @param omitKeys 排除的对象的键的数组\n   * @returns\n   */\n  omit<KK extends K>(omitKeys: KK[]): Omit<O, KK> {\n    return omit(this._source, omitKeys)\n  }\n\n  /**\n   * 对象映射\n   * @param mapper 映射函数\n   * @returns\n   */\n  map<R>(mapper: (val: O[K], key: K) => R) {\n    return objMap(this._source, mapper)\n  }\n\n  /**\n   * 对象继承\n   * @param targets 被继承的目标对象\n   * @returns\n   */\n  extend(...targets: Record<string, any>[]) {\n    extend(this._source, ...targets)\n    return this\n  }\n}\n\nexport function obj<O extends Record<string, any>>(o: O) {\n  return new Obj(o)\n}\n", "import { getDataType, isArray, isDate, isFunction, isObj } from './data-type'\nimport { objMap } from './object'\n\n/**\n * 返回一个值的空状态\n * @param val 任意值\n */\nexport function isEmpty(val: any) {\n  const type = getDataType(val)\n\n  switch (type) {\n    case 'array':\n      return val.length === 0\n    case 'object':\n      for (const _ in val) {\n        return false\n      }\n      return true\n  }\n  return !val\n}\n\n/**\n * 获取链式值\n * @param o 目标对象\n * @param prop 链式属性\n * @param targetProp 目标属性\n */\nexport function getChainValue(o: any, prop: string, targetProp?: string) {\n  let ret = o\n  if (targetProp) {\n    ret = o[targetProp]\n  }\n\n  prop &&\n    prop.split('.').some(p => {\n      if (p === '$last' && Array.isArray(ret)) {\n        ret = ret[ret.length - 1]\n      } else {\n        ret = ret[p]\n      }\n\n      if (!ret) {\n        return true\n      }\n    })\n  return ret\n}\n\n/**\n * 设置链式值\n * @param o 目标对象\n * @param prop 链式属性\n * @param value 值\n */\nexport function setChainValue(\n  o: Record<string, any>,\n  prop: string,\n  value: any\n) {\n  const props = prop.split('.')\n  let cur = o\n  let len = props.length - 1\n  for (let i = 0; i < len; i++) {\n    let p = props[i]\n    if (!cur[p]) {\n      cur[p] = {}\n    }\n    cur = cur[p]\n  }\n  cur[props[len]] = value\n  return o\n}\n\n/**\n * 是否为给定值中的一种\n * @param value 一个值\n * @param values 所有可能的值\n */\nexport function oneOf<K extends string | number>(value: K, values: K[]) {\n  return values.includes(value)\n}\n\n/**\n * 得到一个值的深拷贝版本\n * @param target 值\n */\nexport function deepCopy<T extends any>(this: any, target: T): any {\n  if (isArray(target)) {\n    return target.map(deepCopy)\n  }\n  if (isObj(target)) {\n    return objMap(target, deepCopy)\n  }\n  if (isFunction(target)) {\n    return new Function('return ' + (target as Function).toString()).call(this)\n  }\n  if (isDate(target)) {\n    return new Date((target as Date).valueOf()) as any\n  }\n  return target\n}\n\n/**\n * 判断两个值是否结构相等\n * @param v1 值1\n * @param v2 值2\n */\nexport function equal(v1: any, v2: any, byKey?: number | string) {\n  if (v1 === v2) return true\n  if (byKey !== undefined) {\n    return v1[byKey] === v2[byKey]\n  }\n  return JSON.stringify(v1) === JSON.stringify(v2)\n}\n\n/**\n * 合并对象并返回一个新的对象\n * @param args 参数列表\n */\nexport function merge(...args: Record<any, any>[]) {\n  if (args.length < 1) return undefined\n  if (args.length === 1) return deepCopy(args[0])\n\n  function mergeTwo(o1: any, o2: any) {\n    if (Array.isArray(o1)) {\n      // 先生成o1的映射表\n      return o1.concat(o2)\n    }\n\n    for (const key in o2) {\n      let v1 = o1[key]\n      let v2 = o2[key]\n      if (!v1) {\n        o1[key] = v2\n      } else {\n        let t1 = getDataType(v1)\n        let t2 = getDataType(v2)\n        if (t1 === t2) {\n          // 简单类型\n          if (oneOf(t1, ['string', 'number', 'null', 'boolean', 'undefined'])) {\n            o1[key] = v2\n          } else if (t1 === 'array' || t1 === 'object') {\n            o1[key] = mergeTwo(v1, v2)\n          }\n        } else {\n          o1[key] = v2\n        }\n      }\n    }\n\n    return o1\n  }\n\n  return args.reduce(\n    (acc, cur) => {\n      mergeTwo(acc, cur)\n      return acc\n    },\n    {} as Record<any, any>\n  )\n}\n\n/**\n * 序列化一个对象至 'key=value&key1=value1' 的形式\n * @param obj 被序列化的对象\n */\nexport function serialize(obj: Record<string, any>): string {\n  let ret = ''\n  try {\n    Object.keys(obj).forEach((key: string) => {\n      // 如果值为undefined或者null则在字符串中的表现形式就是空串\n      if ([undefined, null].includes(obj[key])) {\n        ret += `${key}=&`\n        return\n      }\n      ret += `${key}=${encodeURIComponent(JSON.stringify(obj[key]))}&`\n    })\n    return ret.slice(0, -1)\n  } catch {\n    console.warn(\n      `期望传入一个object格式数据, 此处传入了一个${getDataType(obj)}格式的数据`\n    )\n    return ''\n  }\n}\n\n/**\n * 反序列化一个 'key=value&key1=value1' 形式的字符串\n * 需要用 decodeURIComponent 解码\n * 需要过滤所有的非正常字段\n * @param str 被序列化的对象\n */\nexport function deserialize<T extends Record<string, any>>(str: string): T {\n  return decodeURIComponent(str)\n    .split('&')\n    .reduce(\n      (acc, cur) => {\n        let [key, val] = cur.split('=')\n        if (val) {\n          try {\n            acc[key!] = JSON.parse(val)\n          } catch {\n            acc[key!] = val\n          }\n        } else {\n          acc[key!] = val\n        }\n        return acc\n      },\n      {} as Record<string, any>\n    ) as T\n}\n", "import { getDataType } from '@cat-kit/common'\n\ntype Callback<T = any> = (\n  key: CacheKey<T>,\n  value?: T,\n  temp?: { value: T; exp: number }\n) => void\n\nexport interface CacheKey<T> extends String {}\n\nexport function cacheKey<T>(str: string): CacheKey<T> {\n  return str\n}\n\nexport type ExtractCacheKey<T> = T extends CacheKey<infer K> ? K : never\nclass WebStorage {\n  #store: Storage\n\n  static enabledType: Set<string> = new Set([\n    'string',\n    'number',\n    'object',\n    'boolean',\n    'bigint'\n  ])\n\n  callbacks: { [key: string]: Callback[] } = {}\n\n  constructor(storageType: 'local' | 'session') {\n    if (storageType === 'local') {\n      this.#store = localStorage\n    } else {\n      this.#store = sessionStorage\n    }\n  }\n\n  /**\n   * 往缓存里添加单条记录\n   * @param key 单个值的键\n   * @param value 单个值\n   * @param exp 单个值的过期时间, 单位秒\n   */\n  set<T>(key: CacheKey<T>, value: T, exp = 0): WebStorage {\n    if (value === null) return this\n\n    const valueType = typeof value\n    if (!WebStorage.enabledType.has(valueType)) return this\n\n    // exp如果为0则永不过期\n    const temp: { value: any; exp: number } = { value: null, exp: 0 }\n\n    // 如果是简单的数据则直接存入\n    temp.value = value\n    temp.exp = exp ? Date.now() + exp * 1000 : 0\n\n    // 如果有绑定回调则此处出发回调\n    const cb = this.callbacks[key as string]\n    cb?.forEach(fn => fn(key, value, temp))\n\n    this.#store.setItem(key as string, JSON.stringify(temp))\n\n    return this\n  }\n\n  // 获取对应的字段\n  get<T>(key: CacheKey<T>): T | null\n  get<T>(key: CacheKey<T>, defaultValue: T): T\n  get<T extends [...any[]]>(\n    keys: [...T]\n  ): { [I in keyof T]: ExtractCacheKey<T[I]> }\n  get(key: any, defaultValue: any = null) {\n    let type = getDataType(key)\n    if (type === 'string') {\n      let stringTmp = this.#store.getItem(key as string)\n\n      // 如果未查到此项\n      if (stringTmp === null) return defaultValue\n\n      let tmp = JSON.parse(stringTmp)\n\n      // 如果未过期\n      if (tmp.exp > Date.now() || tmp.exp === 0) return tmp.value\n\n      // 数据过期\n      this.remove(key)\n      return defaultValue\n    }\n\n    if (type === 'array') {\n      return key.map((v: string) => this.get(v))\n    }\n\n    throw Error(\n      `get第一个参数的类型应该是string或者array, 但传入的值是${type}类型`\n    )\n  }\n\n  /**\n   * 获取字段过期时间\n   * @param key 字段名\n   */\n  getExpire(key: CacheKey<any>): number {\n    let stringTmp = this.#store.getItem(key as string)\n    // 如果未查到此项\n    if (stringTmp === null) return 0\n    try {\n      return JSON.parse(stringTmp).exp\n    } catch {\n      return 0\n    }\n  }\n\n  /**\n   * 移除一个缓存值\n   * @param key 需要移除的值的键\n   */\n  remove<T>(key: CacheKey<any>): WebStorage\n  /**\n   * 移除多个缓存值\n   * @param keys 需要移除的值的键的数组\n   */\n  remove(keys: CacheKey<any>[]): WebStorage\n  /**\n   * 清空缓存\n   */\n  remove(): WebStorage\n  remove(item?: any) {\n    if (item === undefined) {\n      this.#store.clear()\n    } else if (typeof item === 'string') {\n      this.#store.removeItem(item)\n    } else if (Array.isArray(item)) {\n      item.forEach(key => this.remove(key))\n    }\n    return this\n  }\n\n  /**\n   * 添加一个值改动的回调\n   * @param key 键\n   * @param callback 回调函数\n   */\n  on(key: string, callback: Callback): void {\n    const cbs = this.callbacks[key]\n\n    if (cbs) {\n      cbs.push(callback)\n    } else {\n      this.callbacks[key] = [callback]\n    }\n  }\n\n  /**\n   * 移除多个回调\n   * @param keys 需要移除的回调的字符串数组\n   */\n  off(keys: string[]): void\n  /**\n   * 移除单个回调\n   * @param key 需要移除的记录的键\n   */\n  off(key: string): void\n  /**\n   * 移除所有回调\n   */\n  off(): void\n  off(key?: any) {\n    if (typeof key === 'string') {\n      delete this.callbacks[key]\n    } else if (key === undefined) {\n      this.callbacks = {}\n    } else if (Array.isArray(key)) {\n      key.forEach((item: string) => this.off(item))\n    }\n  }\n}\n\nexport class WebCache {\n  static #local: WebStorage | null = null\n  static #session: WebStorage | null = null\n\n  static get session() {\n    if (WebCache.#session) {\n      return WebCache.#session\n    }\n    WebCache.#session = new WebStorage('session')\n    return WebCache.#session\n  }\n\n  static get local() {\n    if (WebCache.#local) {\n      return WebCache.#local\n    }\n    WebCache.#local = new WebStorage('local')\n    return WebCache.#local\n  }\n\n  static create(type: 'session' | 'local') {\n    return WebCache[type]\n  }\n}\n", "export class EmbeddedWorker<Ctx extends Record<string, any>> {\n  #worker?: Worker\n\n  #fnString = ''\n\n  #ctx?: Ctx\n\n  #scriptURL?: string\n\n  /**\n   * 嵌入式工作线程\n   * @param deps 依赖\n   */\n  constructor(deps?: {\n    /** 普通变量上下文 */\n    ctx?: Ctx\n    /**  fns 函数集合 */\n    fns?: Record<string, Function>\n  }) {\n    if (!deps) return\n    const { ctx, fns } = deps\n    this.#ctx = ctx\n\n    if (fns) {\n      this.#fnString = Object.entries(fns).reduce((acc, cur) => {\n        const [name, fn] = cur\n        return acc + `const ${name} = ${fn.toString()};`\n      }, '')\n    }\n  }\n\n  async run<R>(fn: (ctx: Ctx) => R) {\n    return new Promise<R>(rs => {\n      const scriptString = `\n      ${this.#fnString}\n      // 在这里执行fn代码\n      onmessage = async function (e) {\n       const result = await (${fn})(e.data)\n       postMessage(result)\n      }\n      `\n\n      const blob = new Blob([scriptString], {\n        type: 'text/javascript'\n      })\n      this.#scriptURL = URL.createObjectURL(blob)\n      this.#worker = new Worker(this.#scriptURL, {\n        type: 'module'\n      })\n      this.#worker.addEventListener('message', e => {\n        rs(e.data)\n      })\n\n      this.#worker.postMessage(this.#ctx)\n    })\n  }\n\n  terminate() {\n    this.#worker?.terminate()\n    URL.revokeObjectURL(this.#scriptURL!)\n  }\n}\n", "import type { CSSProperties } from 'vue'\r\nimport { kebabCase } from 'cat-kit/fe'\r\n\r\n/**\r\n * 给数值加上单位\r\n * @param value 数值\r\n * @param unit 单位\r\n * @returns\r\n */\r\nexport function withUnit(value: number | string | undefined, unit: string) {\r\n  return value === undefined\r\n    ? undefined\r\n    : typeof value === 'number' || !isNaN(+value)\r\n      ? String(value) + unit\r\n      : value\r\n}\r\n\r\n/**\r\n * 设置元素样式，优先使用高性能的方式\r\n * @param el 元素\r\n * @param styles 样式\r\n */\r\nexport function setStyles(el: HTMLElement, styles: CSSProperties) {\r\n  if (el.attributeStyleMap) {\r\n    Object.keys(styles).forEach(key => {\r\n      const value = styles[key]\r\n      if (!value && value !== 0) {\r\n        el.attributeStyleMap.delete(kebabCase(key))\r\n      } else {\r\n        el.attributeStyleMap.set(kebabCase(key), value)\r\n      }\r\n    })\r\n  } else {\r\n    Object.keys(styles).forEach(key => {\r\n      el.style[key] = styles[key]\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * 移除样式\r\n * @param el dom元素\r\n * @param props 要移除的样式属性\r\n */\r\nexport function removeStyles(el: HTMLElement, props: string[]) {\r\n  if (el.attributeStyleMap) {\r\n    props.forEach(key => {\r\n      el.attributeStyleMap.delete(kebabCase(key))\r\n    })\r\n  } else {\r\n    props.forEach(key => {\r\n      el.style.removeProperty(key)\r\n    })\r\n  }\r\n}\r\n", "<template>\r\n  <i :class=\"cls.b\" :style=\"style\">\r\n    <slot></slot>\r\n  </i>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { bem } from '@ui/utils'\r\nimport type { IconProps } from '@ui/types/components/icon'\r\nimport { type CSSProperties, computed } from 'vue'\r\nimport { withUnit } from '@ui/utils'\r\n\r\ndefineOptions({\r\n  name: 'Icon'\r\n})\r\n\r\nconst props = defineProps<IconProps>()\r\n\r\nconst cls = bem('icon')\r\n\r\nconst style = computed<CSSProperties>(() => {\r\n  return {\r\n    fontSize: withUnit(props.size, 'px')\r\n  }\r\n})\r\n</script>\r\n", "/**\r\n * 创建一个自增函数\r\n * @param initial 初始值\r\n * @returns\r\n */\r\nexport function createIncrease(initial = 1000): () => number {\r\n  let value = initial\r\n\r\n  const increase = () => {\r\n    return value++\r\n  }\r\n\r\n  return increase\r\n}\r\n", "import { createIncrease } from '@ui/utils'\r\nimport { shallowReactive, watch, type ObjectDirective } from 'vue'\r\n\r\nconst uid = createIncrease(1000)\r\nconst targets = shallowReactive(\r\n  new Map<string, { handler: (e: MouseEvent) => void; el: HTMLElement }>()\r\n)\r\n\r\nconst documentClickHandler = (event: MouseEvent) => {\r\n  targets.forEach(({ el, handler }) => {\r\n    if (el.contains(event.target as Node)) return\r\n    handler(event)\r\n  })\r\n}\r\n\r\nlet eventAdded = false\r\n\r\nfunction addEvent() {\r\n  if (eventAdded) return\r\n  document.addEventListener('click', documentClickHandler, true)\r\n  eventAdded = true\r\n}\r\n\r\nfunction removeEvent() {\r\n  if (!eventAdded) return\r\n  document.removeEventListener('click', documentClickHandler, true)\r\n  eventAdded = false\r\n}\r\n\r\nwatch(targets, async targets => {\r\n  if (targets.size > 0) {\r\n    return addEvent()\r\n  }\r\n  removeEvent()\r\n})\r\n\r\nexport const vClickOutside: ObjectDirective<HTMLElement> = {\r\n  mounted(el, binding) {\r\n    if (!binding.value) return\r\n    const id = String(uid())\r\n    el.dataset.outsideId = id\r\n    // 等待点击事件冒泡完毕\r\n    targets.set(id, {\r\n      handler: binding.value,\r\n      el\r\n    })\r\n  },\r\n\r\n  updated(el, binding) {\r\n    if (!binding.value) {\r\n      if (!el.dataset.outsideId) return\r\n      targets.delete(el.dataset.outsideId)\r\n    } else {\r\n      if (!el.dataset.outsideId) {\r\n        el.dataset.outsideId = String(uid())\r\n      }\r\n\r\n      targets.set(el.dataset.outsideId!, {\r\n        handler: binding.value,\r\n        el\r\n      })\r\n    }\r\n  },\r\n\r\n  unmounted(el: HTMLElement) {\r\n    targets.delete(el.dataset.outsideId!)\r\n  }\r\n}\r\n", "/**\r\n * 下一帧运行\r\n * @param cb 回调\r\n */\r\nexport function nextFrame(cb: () => void) {\r\n  requestAnimationFrame(() => {\r\n    requestAnimationFrame(cb)\r\n  })\r\n}\r\n", "import { type DirectiveBinding, type ObjectDirective } from 'vue'\r\nimport { bem, nextFrame, setStyles } from '@ui/utils'\r\n\r\nconst cls = bem('ripple')\r\nconst clsWrap = cls.e('wrap')\r\n\r\nconst duration = 300\r\n\r\nconst transitionEndHandler = (e: TransitionEvent) => {\r\n  const rippleWrap = e.currentTarget as HTMLElement\r\n  if (e.propertyName !== 'transform') return\r\n  rippleWrap.removeEventListener('transitionend', transitionEndHandler)\r\n\r\n  const parentEl = rippleWrap.parentElement\r\n  if (!parentEl) return\r\n\r\n  parentEl.removeChild(rippleWrap)\r\n\r\n  // 所有的波纹被清除后移除波纹类\r\n  if (parentEl.getElementsByClassName(clsWrap).length === 0) {\r\n    parentEl.classList.remove(cls.b)\r\n    delete parentEl.dataset.class\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param el 显示波纹的父元素\r\n * @param position 波纹相对父元素的位置\r\n */\r\nexport function showRipple(\r\n  el: HTMLElement,\r\n  config?: {\r\n    /** 波纹圆心x轴坐标 */\r\n    centerX?: number\r\n    /** 波纹圆心y轴坐标 */\r\n    centerY?: number\r\n    /** dom的尺寸 */\r\n    domRect?: DOMRect\r\n    /** 波纹类 */\r\n    rippleClass?: string\r\n  }\r\n) {\r\n  // 添加波纹类\r\n  !el.classList.contains(cls.b) && el.classList.add(cls.b)\r\n  el.dataset.class = cls.b\r\n\r\n  const { domRect, centerX = 0, centerY = 0, rippleClass } = config || {}\r\n\r\n  const parentRect = domRect ?? el.getBoundingClientRect()\r\n\r\n  const edgeA =\r\n    centerX < parentRect.width / 2 ? parentRect.width - centerX : centerX\r\n  const edgeB =\r\n    centerY < parentRect.height / 2 ? parentRect.height - centerY : centerY\r\n\r\n  /** 半径 */\r\n  const radius = Math.ceil(Math.sqrt(edgeA ** 2 + edgeB ** 2))\r\n  const diameter = radius * 2\r\n\r\n  /** 波纹元素 */\r\n  const rippleEl = document.createElement('span')\r\n\r\n  rippleEl.classList.add(clsWrap)\r\n\r\n  const _duration = el.dataset.duration ? Number(el.dataset.duration) : duration\r\n\r\n  const _rippleClass = rippleClass ?? el.dataset.rippleClass\r\n  _rippleClass && rippleEl.classList.add(_rippleClass)\r\n\r\n  setStyles(rippleEl, {\r\n    width: `${diameter}px`,\r\n    height: `${diameter}px`,\r\n    left: `${centerX - radius}px`,\r\n    top: `${centerY - radius}px`,\r\n    transition: `transform ${_duration}ms cubic-bezier(.82,.84,.28,.92)`,\r\n    transform: `scale3d(0.2, 0.2, 1)`\r\n  })\r\n\r\n  el.appendChild(rippleEl)\r\n\r\n  rippleEl.addEventListener('transitionend', transitionEndHandler)\r\n\r\n  // 在下一帧添加动画, 放大到2倍，以便可以撑满整个元素\r\n  nextFrame(() => {\r\n    setStyles(rippleEl, {\r\n      transform: 'scale3d(1, 1, 1)'\r\n    })\r\n  })\r\n}\r\n\r\nfunction handleMousedown(e: MouseEvent) {\r\n  const el = e.currentTarget as HTMLElement\r\n  const domRect = el.getBoundingClientRect()\r\n  showRipple(el, {\r\n    centerX: e.pageX - domRect.left,\r\n    centerY: e.pageY - domRect.top,\r\n    domRect\r\n  })\r\n}\r\n\r\n/**\r\n * 注册按下事件\r\n * @param el\r\n * @param binding\r\n * @todo 如有必要将来可添加触摸事件\r\n */\r\nconst registerEvents = (el: HTMLElement, binding: DirectiveBinding<any>) => {\r\n  // 如果指令绑定的值为false则不应用该事件. eg: v-ripple=\"false\"\r\n  if (binding.value === false) return\r\n\r\n  // 如果指令绑定的值为字符串则为类名，将在波纹触发时应用于波纹上\r\n  if (typeof binding.value === 'string') {\r\n    el.dataset.rippleClass = binding.value\r\n  }\r\n\r\n  if (binding.arg) {\r\n    el.dataset.duration = binding.arg\r\n  }\r\n\r\n  el.addEventListener('mousedown', handleMousedown)\r\n}\r\n\r\n/**\r\n * 注销按下事件\r\n * @param el 元素\r\n */\r\nconst unregisterEvents = (el: HTMLElement) => {\r\n  delete el.dataset.rippleClass\r\n  delete el.dataset.duration\r\n  el.removeEventListener('mousedown', handleMousedown)\r\n}\r\n\r\nexport const vRipple: ObjectDirective<HTMLElement> = {\r\n  // 元素的dom挂载后注册按下事件\r\n  mounted: registerEvents,\r\n\r\n  // 元素卸载前注销事件\r\n  unmounted: unregisterEvents,\r\n\r\n  // 元素更新时移除旧有事件并重新添加事件\r\n  updated(el, binding) {\r\n    el.dataset.class && el.classList.add(el.dataset.class)\r\n\r\n    const registered = !!binding.oldValue\r\n    if (binding.value && !registered) {\r\n      registerEvents(el, binding)\r\n    } else if (!binding.value && registered) {\r\n      unregisterEvents(el)\r\n    }\r\n  }\r\n}\r\n", "import { reactive, readonly, watch } from 'vue'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\nimport { isObj } from 'cat-kit/fe'\r\n\r\ninterface State {\r\n  /** 是否开启动画，机器老可以关闭动画来获得性能 */\r\n  animation: boolean\r\n  /** 组件尺寸大小 */\r\n  size: ComponentSize\r\n  /** 表单 */\r\n  form: {\r\n    /** 标签宽度 */\r\n    labelWidth?: number | number\r\n  }\r\n  paginator: {\r\n    pageSize: number\r\n    pageSizeOptions: number[]\r\n  }\r\n}\r\n\r\nconst state = reactive<State>({\r\n  animation: true,\r\n  size: 'default',\r\n  form: {\r\n    labelWidth: 80\r\n  },\r\n  paginator: {\r\n    pageSize: 40,\r\n    pageSizeOptions: [40, 100, 200, 500, 1000]\r\n  }\r\n})\r\n\r\nwatch(\r\n  () => state.size,\r\n  (size, oldSize) => {\r\n    oldSize && document.documentElement.classList.remove(oldSize)\r\n    document.documentElement.classList.add(size)\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nfunction deepSet(original: Record<string, any>, extend: Record<string, any>) {\r\n  Object.keys(extend).forEach(key => {\r\n    const val = original[key]\r\n    const targetVal = extend[key]\r\n    if (isObj(val)) {\r\n      if (isObj(targetVal)) {\r\n        deepSet(val, targetVal)\r\n      } else {\r\n        console.warn(`extend['${key}']应该是一个对象`)\r\n      }\r\n    } else {\r\n      original[key] = targetVal\r\n    }\r\n  })\r\n}\r\n\r\nexport function useConfig() {\r\n  return {\r\n    /** 全局配置 */\r\n    config: readonly(state),\r\n    /**\r\n     * 设置全局配置项\r\n     * @param conf\r\n     */\r\n    setConfig(conf: Partial<State>) {\r\n      deepSet(state, conf)\r\n    }\r\n  }\r\n}\r\n", "import { computed, type ComputedRef } from 'vue'\r\nimport { useConfig } from '../use-config'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\n\r\n/**\r\n * 使用回滚属性，用于控制多级属性的使用优先级，如果多级属性中不存在该值，则使用全局配置中的属性，如再不存在则为undefined\r\n * @param propsList 属性列表，最右边的属性优先级最高\r\n * @param fallbackProps 要回滚的属性和默认值\r\n */\r\nexport function useFallbackProps<\r\n  F extends Record<string, any>,\r\n  R extends {\r\n    [key in keyof F]: ComputedRef<F[key]>\r\n  }\r\n>(propsList: Record<string, any>[], fallbackProps: F): R {\r\n  const { config } = useConfig()\r\n\r\n  let result = {} as R\r\n\r\n  for (const key in fallbackProps) {\r\n    if (fallbackProps.hasOwnProperty(key)) {\r\n      const defaultValue = fallbackProps[key]\r\n      const ref = computed<any>(() => {\r\n        for (let i = propsList.length - 1; i > -1; --i) {\r\n          const props = propsList[i]!\r\n\r\n          if (props[key] !== undefined) {\r\n            return props[key]\r\n          }\r\n        }\r\n\r\n        return config[key as string] ?? defaultValue\r\n      })\r\n\r\n      result[key as keyof F] = ref as R[keyof F]\r\n    }\r\n  }\r\n\r\n  return result\r\n}\r\n\r\ntype FormFallbackProps = {\r\n  size: ComponentSize\r\n  disabled: boolean\r\n  readonly: boolean\r\n}\r\n\r\n/**\r\n * 表单组件的回滚属性\r\n * @param propsList props列表\r\n * @returns\r\n */\r\nexport function useFormFallbackProps(propsList: Record<string, any>[]): {\r\n  [key in keyof FormFallbackProps]: ComputedRef<FormFallbackProps[key]>\r\n}\r\n\r\n/**\r\n * 表单组件的回滚属性\r\n * @param propsList props列表\r\n * @param fallbackProps 回滚属性，可以只指定部分表单属性\r\n * @returns\r\n */\r\nexport function useFormFallbackProps<F extends Partial<FormFallbackProps>>(\r\n  propsList: Record<string, any>[],\r\n  fallbackProps: F\r\n): {\r\n  [key in keyof F]: key extends keyof FormFallbackProps\r\n    ? ComputedRef<FormFallbackProps[key]>\r\n    : never\r\n}\r\nexport function useFormFallbackProps(\r\n  propsList: Record<string, any>[],\r\n  fallbackProps?: Record<string, any>\r\n): any {\r\n  if (!fallbackProps) {\r\n    fallbackProps = {\r\n      size: 'default',\r\n      disabled: false,\r\n      readonly: false\r\n    }\r\n  }\r\n  return useFallbackProps(propsList, fallbackProps)\r\n}\r\n", "<template>\r\n  <button\r\n    :class=\"classList\"\r\n    type=\"button\"\r\n    v-bind=\"$attrs\"\r\n    aria-label=\"button\"\r\n    @click=\"handleClick\"\r\n    ref=\"buttonRef\"\r\n    v-ripple=\"ripple\"\r\n  >\r\n    <!-- 加载图标 -->\r\n    <u-icon\r\n      v-if=\"loading\"\r\n      :class=\"[bem.is('loading'), $slots.default ? cls.e('icon-left') : null]\"\r\n      :size=\"iconSize\"\r\n    >\r\n      <component :is=\"loadingIcon\" />\r\n    </u-icon>\r\n\r\n    <!-- 左侧图标 -->\r\n    <u-icon\r\n      v-if=\"!!icon && iconPosition === 'left' && !loading\"\r\n      :class=\"$slots.default && cls.e('icon-left')\"\r\n      :size=\"iconSize\"\r\n    >\r\n      <component :is=\"icon\" />\r\n    </u-icon>\r\n\r\n    <slot />\r\n\r\n    <!-- 右侧图标 -->\r\n    <u-icon\r\n      v-if=\"!!icon && iconPosition === 'right'\"\r\n      :class=\"$slots.default && cls.e('icon-right')\"\r\n      :size=\"iconSize\"\r\n    >\r\n      <component :is=\"icon\" />\r\n    </u-icon>\r\n  </button>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { bem } from '@ui/utils'\r\nimport type {\r\n  ButtonEmits,\r\n  ButtonProps,\r\n  _ButtonExposed\r\n} from '@ui/types/components/button'\r\nimport { computed, shallowRef } from 'vue'\r\nimport { UIcon } from '../icon'\r\nimport { Loading } from 'icon-ultra'\r\nimport { vRipple } from '@ui/directives'\r\nimport { useFallbackProps } from '@ui/compositions'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\n\r\ndefineOptions({\r\n  name: 'Button'\r\n})\r\n\r\nconst props = withDefaults(defineProps<ButtonProps>(), {\r\n  iconPosition: 'left',\r\n  loadingIcon: () => Loading,\r\n  disabled: false\r\n})\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst emit = defineEmits<ButtonEmits>()\r\n\r\nconst cls = bem('button')\r\n\r\nconst classList = computed(() => {\r\n  return [\r\n    cls.b,\r\n    cls.m(size.value),\r\n    props.type && cls.m('color-' + props.type),\r\n    bem.is('circle', props.circle),\r\n    bem.is('disabled', props.disabled),\r\n    bem.is('loading', props.loading),\r\n    bem.is('plain', props.plain),\r\n    bem.is('text', props.text)\r\n  ]\r\n})\r\n\r\nconst ripple = computed(() => {\r\n  if (props.disabled || props.loading) return false\r\n  if ((props.plain || props.text) && props.type) {\r\n    return bem.is(`ripple-${props.type}`)\r\n  }\r\n  return true\r\n})\r\n\r\nconst handleClick = (e: MouseEvent) => {\r\n  if (props.disabled || props.loading) {\r\n    e.stopPropagation()\r\n    return\r\n  }\r\n  emit('click', e)\r\n}\r\n\r\nconst buttonRef = shallowRef<HTMLButtonElement>()\r\n\r\nconst exposed: _ButtonExposed = {\r\n  el: buttonRef\r\n}\r\n\r\ndefineExpose(exposed)\r\n</script>\r\n", "import type { InjectionKey } from 'vue'\r\n\r\nexport const ActionDIKey: InjectionKey<{\r\n  open(): void\r\n  close(): void\r\n  stopClose(): void\r\n}> = Symbol('ActionDIKey')\r\n", "import { createIncrease } from '../helper/create-increase'\r\n\r\n/**\r\n * z轴层级\r\n * 保证每个新打开的弹框的位置都处于上层\r\n */\r\nexport const zIndex = createIncrease(1000)\r\n", "import {\r\n  Text,\r\n  Fragment,\r\n  Comment,\r\n  type VNode,\r\n  isVNode,\r\n  createTextVNode,\r\n  type VNodeArrayChildren,\r\n  shallowRef,\r\n  watch\r\n} from 'vue'\r\n\r\ninterface TextVNode extends VNode {\r\n  children: string\r\n}\r\n\r\n/**\r\n * 是否为文本\r\n * @param node\r\n * @returns\r\n */\r\nexport function isTextNode(node: VNode): node is TextVNode {\r\n  return node.type === Text\r\n}\r\n\r\n/**\r\n * 是否为片段\r\n * @param node\r\n * @returns\r\n */\r\nexport function isFragment(node: any): node is VNode {\r\n  return node && node.type === Fragment\r\n}\r\n\r\ninterface CommentVNode extends VNode {\r\n  children: string\r\n}\r\n\r\n/**\r\n * 是否为注释\r\n * @param node\r\n * @returns\r\n */\r\nexport function isComment(node: VNode): node is CommentVNode {\r\n  return node.type === Comment\r\n}\r\n\r\n/**\r\n * 是否为模板\r\n * @param node\r\n * @returns\r\n */\r\nexport function isTemplate(node: unknown): node is VNode {\r\n  return isVNode(node) && node.type === 'template'\r\n}\r\n\r\n/**\r\n * 提取常规虚拟节点(移除type为fragment、template的节点)\r\n * @param nodes VNodeArrayChildren\r\n * @param results 虚拟节点\r\n * @returns\r\n */\r\nexport function extractNormalVNodes(\r\n  nodes: VNodeArrayChildren,\r\n  results: VNode[] = []\r\n) {\r\n  nodes.forEach(node => {\r\n    if (!isVNode(node)) {\r\n      console.log(node)\r\n      if (typeof node === 'string' || typeof node === 'number') {\r\n        results.push(createTextVNode(String(node)))\r\n      }\r\n      return\r\n    }\r\n    if (\r\n      (isFragment(node) || isTemplate(node)) &&\r\n      Array.isArray(node.children)\r\n    ) {\r\n      extractNormalVNodes(node.children, results)\r\n    } else {\r\n      results.push(node)\r\n    }\r\n  })\r\n  return results\r\n}\r\n\r\nexport function shallowComputed<T>(getter: () => T) {\r\n  const result = shallowRef<T>(getter())\r\n  watch(getter, value => {\r\n    result.value = value\r\n  })\r\n\r\n  return result\r\n}\r\n", "/**\n * Custom positioning reference element.\n * @see https://floating-ui.com/docs/virtual-elements\n */\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst alignments = ['start', 'end'];\nconst placements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-\" + alignments[0], side + \"-\" + alignments[1]), []);\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nfunction getSideAxis(placement) {\n  return ['top', 'bottom'].includes(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nfunction getSideList(side, isStart, rtl) {\n  const lr = ['left', 'right'];\n  const rl = ['right', 'left'];\n  const tb = ['top', 'bottom'];\n  const bt = ['bottom', 'top'];\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rl : lr;\n      return isStart ? lr : rl;\n    case 'left':\n    case 'right':\n      return isStart ? tb : bt;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = rect;\n  return {\n    width,\n    height,\n    top: y,\n    left: x,\n    right: x + width,\n    bottom: y + height,\n    x,\n    y\n  };\n}\n\nexport { alignments, clamp, createCoords, evaluate, expandPaddingObject, floor, getAlignment, getAlignmentAxis, getAlignmentSides, getAxisLength, getExpandedPlacements, getOppositeAlignmentPlacement, getOppositeAxis, getOppositeAxisPlacements, getOppositePlacement, getPaddingObject, getSide, getSideAxis, max, min, placements, rectToClientRect, round, sides };\n", "import { getSideAxis, getAlignmentAxis, getAxisLength, getSide, getAlignment, evaluate, getPaddingObject, rectToClientRect, min, clamp, placements, getAlignmentSides, getOppositeAlignmentPlacement, getOppositePlacement, getExpandedPlacements, getOppositeAxisPlacements, sides, max, getOppositeAxis } from '@floating-ui/utils';\nexport { rectToClientRect } from '@floating-ui/utils';\n\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const sideAxis = getSideAxis(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const alignLength = getAxisLength(alignmentAxis);\n  const side = getSide(placement);\n  const isVertical = sideAxis === 'y';\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const commonAlign = reference[alignLength] / 2 - floating[alignLength] / 2;\n  let coords;\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[alignmentAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case 'end':\n      coords[alignmentAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\nconst computePosition = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const validMiddleware = middleware.filter(Boolean);\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n  for (let i = 0; i < validMiddleware.length; i++) {\n    const {\n      name,\n      fn\n    } = validMiddleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = {\n      ...middlewareData,\n      [name]: {\n        ...middlewareData[name],\n        ...data\n      }\n    };\n    if (reset && resetCount <= 50) {\n      resetCount++;\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n      i = -1;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(state, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = state;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = evaluate(options, state);\n  const paddingObject = getPaddingObject(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const rect = elementContext === 'floating' ? {\n    x,\n    y,\n    width: rects.floating.width,\n    height: rects.floating.height\n  } : rects.reference;\n  const offsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating));\n  const offsetScale = (await (platform.isElement == null ? void 0 : platform.isElement(offsetParent))) ? (await (platform.getScale == null ? void 0 : platform.getScale(offsetParent))) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  };\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  }) : rect);\n  return {\n    top: (clippingClientRect.top - elementClientRect.top + paddingObject.top) / offsetScale.y,\n    bottom: (elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom) / offsetScale.y,\n    left: (clippingClientRect.left - elementClientRect.left + paddingObject.left) / offsetScale.x,\n    right: (elementClientRect.right - clippingClientRect.right + paddingObject.right) / offsetScale.x\n  };\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n  async fn(state) {\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform,\n      elements,\n      middlewareData\n    } = state;\n    // Since `element` is required, we don't Partial<> the type.\n    const {\n      element,\n      padding = 0\n    } = evaluate(options, state) || {};\n    if (element == null) {\n      return {};\n    }\n    const paddingObject = getPaddingObject(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getAlignmentAxis(placement);\n    const length = getAxisLength(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const isYAxis = axis === 'y';\n    const minProp = isYAxis ? 'top' : 'left';\n    const maxProp = isYAxis ? 'bottom' : 'right';\n    const clientProp = isYAxis ? 'clientHeight' : 'clientWidth';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? arrowOffsetParent[clientProp] : 0;\n\n    // DOM platform can return `window` as the `offsetParent`.\n    if (!clientSize || !(await (platform.isElement == null ? void 0 : platform.isElement(arrowOffsetParent)))) {\n      clientSize = elements.floating[clientProp] || rects.floating[length];\n    }\n    const centerToReference = endDiff / 2 - startDiff / 2;\n\n    // If the padding is large enough that it causes the arrow to no longer be\n    // centered, modify the padding so that it is centered.\n    const largestPossiblePadding = clientSize / 2 - arrowDimensions[length] / 2 - 1;\n    const minPadding = min(paddingObject[minProp], largestPossiblePadding);\n    const maxPadding = min(paddingObject[maxProp], largestPossiblePadding);\n\n    // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds.\n    const min$1 = minPadding;\n    const max = clientSize - arrowDimensions[length] - maxPadding;\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = clamp(min$1, center, max);\n\n    // If the reference is small enough that the arrow's padding causes it to\n    // to point to nothing for an aligned placement, adjust the offset of the\n    // floating element itself. To ensure `shift()` continues to take action,\n    // a single reset is performed when this is true.\n    const shouldAddOffset = !middlewareData.arrow && getAlignment(placement) != null && center !== offset && rects.reference[length] / 2 - (center < min$1 ? minPadding : maxPadding) - arrowDimensions[length] / 2 < 0;\n    const alignmentOffset = shouldAddOffset ? center < min$1 ? center - min$1 : center - max : 0;\n    return {\n      [axis]: coords[axis] + alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset - alignmentOffset,\n        ...(shouldAddOffset && {\n          alignmentOffset\n        })\n      },\n      reset: shouldAddOffset\n    };\n  }\n});\n\nfunction getPlacementList(alignment, autoAlignment, allowedPlacements) {\n  const allowedPlacementsSortedByAlignment = alignment ? [...allowedPlacements.filter(placement => getAlignment(placement) === alignment), ...allowedPlacements.filter(placement => getAlignment(placement) !== alignment)] : allowedPlacements.filter(placement => getSide(placement) === placement);\n  return allowedPlacementsSortedByAlignment.filter(placement => {\n    if (alignment) {\n      return getAlignment(placement) === alignment || (autoAlignment ? getOppositeAlignmentPlacement(placement) !== placement : false);\n    }\n    return true;\n  });\n}\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'autoPlacement',\n    options,\n    async fn(state) {\n      var _middlewareData$autoP, _middlewareData$autoP2, _placementsThatFitOnE;\n      const {\n        rects,\n        middlewareData,\n        placement,\n        platform,\n        elements\n      } = state;\n      const {\n        crossAxis = false,\n        alignment,\n        allowedPlacements = placements,\n        autoAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const placements$1 = alignment !== undefined || allowedPlacements === placements ? getPlacementList(alignment || null, autoAlignment, allowedPlacements) : allowedPlacements;\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const currentIndex = ((_middlewareData$autoP = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP.index) || 0;\n      const currentPlacement = placements$1[currentIndex];\n      if (currentPlacement == null) {\n        return {};\n      }\n      const alignmentSides = getAlignmentSides(currentPlacement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating)));\n\n      // Make `computeCoords` start from the right place.\n      if (placement !== currentPlacement) {\n        return {\n          reset: {\n            placement: placements$1[0]\n          }\n        };\n      }\n      const currentOverflows = [overflow[getSide(currentPlacement)], overflow[alignmentSides[0]], overflow[alignmentSides[1]]];\n      const allOverflows = [...(((_middlewareData$autoP2 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP2.overflows) || []), {\n        placement: currentPlacement,\n        overflows: currentOverflows\n      }];\n      const nextPlacement = placements$1[currentIndex + 1];\n\n      // There are more placements to check.\n      if (nextPlacement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: nextPlacement\n          }\n        };\n      }\n      const placementsSortedByMostSpace = allOverflows.map(d => {\n        const alignment = getAlignment(d.placement);\n        return [d.placement, alignment && crossAxis ?\n        // Check along the mainAxis and main crossAxis side.\n        d.overflows.slice(0, 2).reduce((acc, v) => acc + v, 0) :\n        // Check only the mainAxis.\n        d.overflows[0], d.overflows];\n      }).sort((a, b) => a[1] - b[1]);\n      const placementsThatFitOnEachSide = placementsSortedByMostSpace.filter(d => d[2].slice(0,\n      // Aligned placements should not check their opposite crossAxis\n      // side.\n      getAlignment(d[0]) ? 2 : 3).every(v => v <= 0));\n      const resetPlacement = ((_placementsThatFitOnE = placementsThatFitOnEachSide[0]) == null ? void 0 : _placementsThatFitOnE[0]) || placementsSortedByMostSpace[0][0];\n      if (resetPlacement !== placement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'flip',\n    options,\n    async fn(state) {\n      var _middlewareData$arrow, _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = 'bestFit',\n        fallbackAxisSideDirection = 'none',\n        flipAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n\n      // If a reset by the arrow was caused due to an alignment offset being\n      // added, we should skip any logic now since `flip()` has already done its\n      // work.\n      // https://github.com/floating-ui/floating-ui/issues/2549#issuecomment-1719601643\n      if ((_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      const side = getSide(placement);\n      const initialSideAxis = getSideAxis(initialPlacement);\n      const isBasePlacement = getSide(initialPlacement) === initialPlacement;\n      const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      const hasFallbackAxisSideDirection = fallbackAxisSideDirection !== 'none';\n      if (!specifiedFallbackPlacements && hasFallbackAxisSideDirection) {\n        fallbackPlacements.push(...getOppositeAxisPlacements(initialPlacement, flipAlignment, fallbackAxisSideDirection, rtl));\n      }\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const sides = getAlignmentSides(placement, rects, rtl);\n        overflows.push(overflow[sides[0]], overflow[sides[1]]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n\n      // One or more sides is overflowing.\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip2, _overflowsData$filter;\n        const nextIndex = (((_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) || 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          // Try next placement and re-run the lifecycle.\n          return {\n            data: {\n              index: nextIndex,\n              overflows: overflowsData\n            },\n            reset: {\n              placement: nextPlacement\n            }\n          };\n        }\n\n        // First, find the candidates that fit on the mainAxis side of overflow,\n        // then find the placement that fits the best on the main crossAxis side.\n        let resetPlacement = (_overflowsData$filter = overflowsData.filter(d => d.overflows[0] <= 0).sort((a, b) => a.overflows[1] - b.overflows[1])[0]) == null ? void 0 : _overflowsData$filter.placement;\n\n        // Otherwise fallback.\n        if (!resetPlacement) {\n          switch (fallbackStrategy) {\n            case 'bestFit':\n              {\n                var _overflowsData$filter2;\n                const placement = (_overflowsData$filter2 = overflowsData.filter(d => {\n                  if (hasFallbackAxisSideDirection) {\n                    const currentSideAxis = getSideAxis(d.placement);\n                    return currentSideAxis === initialSideAxis ||\n                    // Create a bias to the `y` side axis due to horizontal\n                    // reading directions favoring greater width.\n                    currentSideAxis === 'y';\n                  }\n                  return true;\n                }).map(d => [d.placement, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$filter2[0];\n                if (placement) {\n                  resetPlacement = placement;\n                }\n                break;\n              }\n            case 'initialPlacement':\n              resetPlacement = initialPlacement;\n              break;\n          }\n        }\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n      return {};\n    }\n  };\n};\n\nfunction getSideOffsets(overflow, rect) {\n  return {\n    top: overflow.top - rect.height,\n    right: overflow.right - rect.width,\n    bottom: overflow.bottom - rect.height,\n    left: overflow.left - rect.width\n  };\n}\nfunction isAnySideFullyClipped(overflow) {\n  return sides.some(side => overflow[side] >= 0);\n}\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'hide',\n    options,\n    async fn(state) {\n      const {\n        rects\n      } = state;\n      const {\n        strategy = 'referenceHidden',\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      switch (strategy) {\n        case 'referenceHidden':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              elementContext: 'reference'\n            });\n            const offsets = getSideOffsets(overflow, rects.reference);\n            return {\n              data: {\n                referenceHiddenOffsets: offsets,\n                referenceHidden: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        case 'escaped':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              altBoundary: true\n            });\n            const offsets = getSideOffsets(overflow, rects.floating);\n            return {\n              data: {\n                escapedOffsets: offsets,\n                escaped: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        default:\n          {\n            return {};\n          }\n      }\n    }\n  };\n};\n\nfunction getBoundingRect(rects) {\n  const minX = min(...rects.map(rect => rect.left));\n  const minY = min(...rects.map(rect => rect.top));\n  const maxX = max(...rects.map(rect => rect.right));\n  const maxY = max(...rects.map(rect => rect.bottom));\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getRectsByLine(rects) {\n  const sortedRects = rects.slice().sort((a, b) => a.y - b.y);\n  const groups = [];\n  let prevRect = null;\n  for (let i = 0; i < sortedRects.length; i++) {\n    const rect = sortedRects[i];\n    if (!prevRect || rect.y - prevRect.y > prevRect.height / 2) {\n      groups.push([rect]);\n    } else {\n      groups[groups.length - 1].push(rect);\n    }\n    prevRect = rect;\n  }\n  return groups.map(rect => rectToClientRect(getBoundingRect(rect)));\n}\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'inline',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        elements,\n        rects,\n        platform,\n        strategy\n      } = state;\n      // A MouseEvent's client{X,Y} coords can be up to 2 pixels off a\n      // ClientRect's bounds, despite the event listener being triggered. A\n      // padding of 2 seems to handle this issue.\n      const {\n        padding = 2,\n        x,\n        y\n      } = evaluate(options, state);\n      const nativeClientRects = Array.from((await (platform.getClientRects == null ? void 0 : platform.getClientRects(elements.reference))) || []);\n      const clientRects = getRectsByLine(nativeClientRects);\n      const fallback = rectToClientRect(getBoundingRect(nativeClientRects));\n      const paddingObject = getPaddingObject(padding);\n      function getBoundingClientRect() {\n        // There are two rects and they are disjoined.\n        if (clientRects.length === 2 && clientRects[0].left > clientRects[1].right && x != null && y != null) {\n          // Find the first rect in which the point is fully inside.\n          return clientRects.find(rect => x > rect.left - paddingObject.left && x < rect.right + paddingObject.right && y > rect.top - paddingObject.top && y < rect.bottom + paddingObject.bottom) || fallback;\n        }\n\n        // There are 2 or more connected rects.\n        if (clientRects.length >= 2) {\n          if (getSideAxis(placement) === 'y') {\n            const firstRect = clientRects[0];\n            const lastRect = clientRects[clientRects.length - 1];\n            const isTop = getSide(placement) === 'top';\n            const top = firstRect.top;\n            const bottom = lastRect.bottom;\n            const left = isTop ? firstRect.left : lastRect.left;\n            const right = isTop ? firstRect.right : lastRect.right;\n            const width = right - left;\n            const height = bottom - top;\n            return {\n              top,\n              bottom,\n              left,\n              right,\n              width,\n              height,\n              x: left,\n              y: top\n            };\n          }\n          const isLeftSide = getSide(placement) === 'left';\n          const maxRight = max(...clientRects.map(rect => rect.right));\n          const minLeft = min(...clientRects.map(rect => rect.left));\n          const measureRects = clientRects.filter(rect => isLeftSide ? rect.left === minLeft : rect.right === maxRight);\n          const top = measureRects[0].top;\n          const bottom = measureRects[measureRects.length - 1].bottom;\n          const left = minLeft;\n          const right = maxRight;\n          const width = right - left;\n          const height = bottom - top;\n          return {\n            top,\n            bottom,\n            left,\n            right,\n            width,\n            height,\n            x: left,\n            y: top\n          };\n        }\n        return fallback;\n      }\n      const resetRects = await platform.getElementRects({\n        reference: {\n          getBoundingClientRect\n        },\n        floating: elements.floating,\n        strategy\n      });\n      if (rects.reference.x !== resetRects.reference.x || rects.reference.y !== resetRects.reference.y || rects.reference.width !== resetRects.reference.width || rects.reference.height !== resetRects.reference.height) {\n        return {\n          reset: {\n            rects: resetRects\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n// For type backwards-compatibility, the `OffsetOptions` type was also\n// Derivable.\n\nasync function convertValueToCoords(state, options) {\n  const {\n    placement,\n    platform,\n    elements\n  } = state;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getSideAxis(placement) === 'y';\n  const mainAxisMulti = ['left', 'top'].includes(side) ? -1 : 1;\n  const crossAxisMulti = rtl && isVertical ? -1 : 1;\n  const rawValue = evaluate(options, state);\n\n  // eslint-disable-next-line prefer-const\n  let {\n    mainAxis,\n    crossAxis,\n    alignmentAxis\n  } = typeof rawValue === 'number' ? {\n    mainAxis: rawValue,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: rawValue.mainAxis || 0,\n    crossAxis: rawValue.crossAxis || 0,\n    alignmentAxis: rawValue.alignmentAxis\n  };\n  if (alignment && typeof alignmentAxis === 'number') {\n    crossAxis = alignment === 'end' ? alignmentAxis * -1 : alignmentAxis;\n  }\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = function (options) {\n  if (options === void 0) {\n    options = 0;\n  }\n  return {\n    name: 'offset',\n    options,\n    async fn(state) {\n      var _middlewareData$offse, _middlewareData$arrow;\n      const {\n        x,\n        y,\n        placement,\n        middlewareData\n      } = state;\n      const diffCoords = await convertValueToCoords(state, options);\n\n      // If the placement is the same and the arrow caused an alignment offset\n      // then we don't need to change the positioning coordinates.\n      if (placement === ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse.placement) && (_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: {\n          ...diffCoords,\n          placement\n        }\n      };\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'shift',\n    options,\n    async fn(state) {\n      const {\n        x,\n        y,\n        placement\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: _ref => {\n            let {\n              x,\n              y\n            } = _ref;\n            return {\n              x,\n              y\n            };\n          }\n        },\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const crossAxis = getSideAxis(getSide(placement));\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = clamp(min, mainAxisCoord, max);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = clamp(min, crossAxisCoord, max);\n      }\n      const limitedCoords = limiter.fn({\n        ...state,\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      });\n      return {\n        ...limitedCoords,\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y,\n          enabled: {\n            [mainAxis]: checkMainAxis,\n            [crossAxis]: checkCrossAxis\n          }\n        }\n      };\n    }\n  };\n};\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    options,\n    fn(state) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = state;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const crossAxis = getSideAxis(placement);\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = evaluate(offset, state);\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : {\n        mainAxis: 0,\n        crossAxis: 0,\n        ...rawOffset\n      };\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2;\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = ['top', 'left'].includes(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse[crossAxis]) || 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : ((_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) || 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n  };\n};\n\n/**\n * Provides data that allows you to change the size of the floating element —\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'size',\n    options,\n    async fn(state) {\n      var _state$middlewareData, _state$middlewareData2;\n      const {\n        placement,\n        rects,\n        platform,\n        elements\n      } = state;\n      const {\n        apply = () => {},\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      const isYAxis = getSideAxis(placement) === 'y';\n      const {\n        width,\n        height\n      } = rects.floating;\n      let heightSide;\n      let widthSide;\n      if (side === 'top' || side === 'bottom') {\n        heightSide = side;\n        widthSide = alignment === ((await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))) ? 'start' : 'end') ? 'left' : 'right';\n      } else {\n        widthSide = side;\n        heightSide = alignment === 'end' ? 'top' : 'bottom';\n      }\n      const maximumClippingHeight = height - overflow.top - overflow.bottom;\n      const maximumClippingWidth = width - overflow.left - overflow.right;\n      const overflowAvailableHeight = min(height - overflow[heightSide], maximumClippingHeight);\n      const overflowAvailableWidth = min(width - overflow[widthSide], maximumClippingWidth);\n      const noShift = !state.middlewareData.shift;\n      let availableHeight = overflowAvailableHeight;\n      let availableWidth = overflowAvailableWidth;\n      if ((_state$middlewareData = state.middlewareData.shift) != null && _state$middlewareData.enabled.x) {\n        availableWidth = maximumClippingWidth;\n      }\n      if ((_state$middlewareData2 = state.middlewareData.shift) != null && _state$middlewareData2.enabled.y) {\n        availableHeight = maximumClippingHeight;\n      }\n      if (noShift && !alignment) {\n        const xMin = max(overflow.left, 0);\n        const xMax = max(overflow.right, 0);\n        const yMin = max(overflow.top, 0);\n        const yMax = max(overflow.bottom, 0);\n        if (isYAxis) {\n          availableWidth = width - 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right));\n        } else {\n          availableHeight = height - 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom));\n        }\n      }\n      await apply({\n        ...state,\n        availableWidth,\n        availableHeight\n      });\n      const nextDimensions = await platform.getDimensions(elements.floating);\n      if (width !== nextDimensions.width || height !== nextDimensions.height) {\n        return {\n          reset: {\n            rects: true\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nexport { arrow, autoPlacement, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, shift, size };\n", "function hasWindow() {\n  return typeof window !== 'undefined';\n}\nfunction getNodeName(node) {\n  if (isNode(node)) {\n    return (node.nodeName || '').toLowerCase();\n  }\n  // Mocked nodes in testing environments may not be instances of Node. By\n  // returning `#document` an infinite loop won't occur.\n  // https://github.com/floating-ui/floating-ui/issues/2317\n  return '#document';\n}\nfunction getWindow(node) {\n  var _node$ownerDocument;\n  return (node == null || (_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.defaultView) || window;\n}\nfunction getDocumentElement(node) {\n  var _ref;\n  return (_ref = (isNode(node) ? node.ownerDocument : node.document) || window.document) == null ? void 0 : _ref.documentElement;\n}\nfunction isNode(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Node || value instanceof getWindow(value).Node;\n}\nfunction isElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Element || value instanceof getWindow(value).Element;\n}\nfunction isHTMLElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof HTMLElement || value instanceof getWindow(value).HTMLElement;\n}\nfunction isShadowRoot(value) {\n  if (!hasWindow() || typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n  return value instanceof ShadowRoot || value instanceof getWindow(value).ShadowRoot;\n}\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY,\n    display\n  } = getComputedStyle(element);\n  return /auto|scroll|overlay|hidden|clip/.test(overflow + overflowY + overflowX) && !['inline', 'contents'].includes(display);\n}\nfunction isTableElement(element) {\n  return ['table', 'td', 'th'].includes(getNodeName(element));\n}\nfunction isTopLayer(element) {\n  return [':popover-open', ':modal'].some(selector => {\n    try {\n      return element.matches(selector);\n    } catch (e) {\n      return false;\n    }\n  });\n}\nfunction isContainingBlock(elementOrCss) {\n  const webkit = isWebKit();\n  const css = isElement(elementOrCss) ? getComputedStyle(elementOrCss) : elementOrCss;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  return css.transform !== 'none' || css.perspective !== 'none' || (css.containerType ? css.containerType !== 'normal' : false) || !webkit && (css.backdropFilter ? css.backdropFilter !== 'none' : false) || !webkit && (css.filter ? css.filter !== 'none' : false) || ['transform', 'perspective', 'filter'].some(value => (css.willChange || '').includes(value)) || ['paint', 'layout', 'strict', 'content'].some(value => (css.contain || '').includes(value));\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  while (isHTMLElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else if (isTopLayer(currentNode)) {\n      return null;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  return null;\n}\nfunction isWebKit() {\n  if (typeof CSS === 'undefined' || !CSS.supports) return false;\n  return CSS.supports('-webkit-backdrop-filter', 'none');\n}\nfunction isLastTraversableNode(node) {\n  return ['html', 'body', '#document'].includes(getNodeName(node));\n}\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n  return {\n    scrollLeft: element.scrollX,\n    scrollTop: element.scrollY\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n  const result =\n  // Step into the shadow DOM of the parent of a slotted node.\n  node.assignedSlot ||\n  // DOM Element detected.\n  node.parentNode ||\n  // ShadowRoot detected.\n  isShadowRoot(node) && node.host ||\n  // Fallback.\n  getDocumentElement(node);\n  return isShadowRoot(result) ? result.host : result;\n}\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n  if (isLastTraversableNode(parentNode)) {\n    return node.ownerDocument ? node.ownerDocument.body : node.body;\n  }\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n  return getNearestOverflowAncestor(parentNode);\n}\nfunction getOverflowAncestors(node, list, traverseIframes) {\n  var _node$ownerDocument2;\n  if (list === void 0) {\n    list = [];\n  }\n  if (traverseIframes === void 0) {\n    traverseIframes = true;\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument2 = node.ownerDocument) == null ? void 0 : _node$ownerDocument2.body);\n  const win = getWindow(scrollableAncestor);\n  if (isBody) {\n    const frameElement = getFrameElement(win);\n    return list.concat(win, win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : [], frameElement && traverseIframes ? getOverflowAncestors(frameElement) : []);\n  }\n  return list.concat(scrollableAncestor, getOverflowAncestors(scrollableAncestor, [], traverseIframes));\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\n\nexport { getComputedStyle, getContainingBlock, getDocumentElement, getFrameElement, getNearestOverflowAncestor, getNodeName, getNodeScroll, getOverflowAncestors, getParentNode, getWindow, isContainingBlock, isElement, isHTMLElement, isLastTraversableNode, isNode, isOverflowElement, isShadowRoot, isTableElement, isTopLayer, isWebKit };\n", "import { rectToClientRect, detectOverflow as detectOverflow$1, offset as offset$1, autoPlacement as autoPlacement$1, shift as shift$1, flip as flip$1, size as size$1, hide as hide$1, arrow as arrow$1, inline as inline$1, limitShift as limitShift$1, computePosition as computePosition$1 } from '@floating-ui/core';\nimport { round, createCoords, max, min, floor } from '@floating-ui/utils';\nimport { getComputedStyle, isHTMLElement, isElement, getWindow, isWebKit, getFrameElement, getDocumentElement, isTopLayer, getNodeName, isOverflowElement, getNodeScroll, getOverflowAncestors, getParentNode, isLastTraversableNode, isContainingBlock, isTableElement, getContainingBlock } from '@floating-ui/utils/dom';\nexport { getOverflowAncestors } from '@floating-ui/utils/dom';\n\nfunction getCssDimensions(element) {\n  const css = getComputedStyle(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\n\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\n\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\n\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentWin = win;\n    let currentIFrame = getFrameElement(currentWin);\n    while (currentIFrame && offsetParent && offsetWin !== currentWin) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentWin = getWindow(currentIFrame);\n      currentIFrame = getFrameElement(currentWin);\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isFixed = strategy === 'fixed';\n  const documentElement = getDocumentElement(offsetParent);\n  const topLayer = elements ? isTopLayer(elements.floating) : false;\n  if (offsetParent === documentElement || topLayer && isFixed) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y\n  };\n}\n\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\n// If <html> has a CSS width greater than the viewport, then this will be\n// incorrect for RTL.\nfunction getWindowScrollBarX(element, rect) {\n  const leftScroll = getNodeScroll(element).scrollLeft;\n  if (!rect) {\n    return getBoundingClientRect(getDocumentElement(element)).left + leftScroll;\n  }\n  return rect.left + leftScroll;\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      ...clippingAncestor,\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y\n    };\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element, [], false).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && ['absolute', 'fixed'].includes(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? isTopLayer(element) ? [] : getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      // If the <body> scrollbar appears on the left (e.g. RTL systems). Use\n      // Firefox with layout.scrollbar.side = 3 in about:config to test this.\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n  let htmlX = 0;\n  let htmlY = 0;\n  if (documentElement && !isOffsetParentAnElement && !isFixed) {\n    const htmlRect = documentElement.getBoundingClientRect();\n    htmlY = htmlRect.top + scroll.scrollTop;\n    htmlX = htmlRect.left + scroll.scrollLeft -\n    // RTL <body> scrollbar.\n    getWindowScrollBarX(documentElement, htmlRect);\n  }\n  const x = rect.left + scroll.scrollLeft - offsets.x - htmlX;\n  const y = rect.top + scroll.scrollTop - offsets.y - htmlY;\n  return {\n    x,\n    y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction isStaticPositioned(element) {\n  return getComputedStyle(element).position === 'static';\n}\n\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  let rawOffsetParent = element.offsetParent;\n\n  // Firefox returns the <html> element as the offsetParent if it's non-static,\n  // while Chrome and Safari return the <body> element. The <body> element must\n  // be used to perform the correct calculations even if the <html> element is\n  // non-static.\n  if (getDocumentElement(element) === rawOffsetParent) {\n    rawOffsetParent = rawOffsetParent.ownerDocument.body;\n  }\n  return rawOffsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const win = getWindow(element);\n  if (isTopLayer(element)) {\n    return win;\n  }\n  if (!isHTMLElement(element)) {\n    let svgOffsetParent = getParentNode(element);\n    while (svgOffsetParent && !isLastTraversableNode(svgOffsetParent)) {\n      if (isElement(svgOffsetParent) && !isStaticPositioned(svgOffsetParent)) {\n        return svgOffsetParent;\n      }\n      svgOffsetParent = getParentNode(svgOffsetParent);\n    }\n    return win;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && isStaticPositioned(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && isLastTraversableNode(offsetParent) && isStaticPositioned(offsetParent) && !isContainingBlock(offsetParent)) {\n    return win;\n  }\n  return offsetParent || getContainingBlock(element) || win;\n}\n\nconst getElementRects = async function (data) {\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  const floatingDimensions = await getDimensionsFn(data.floating);\n  return {\n    reference: getRectRelativeToOffsetParent(data.reference, await getOffsetParentFn(data.floating), data.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: floatingDimensions.width,\n      height: floatingDimensions.height\n    }\n  };\n};\n\nfunction isRTL(element) {\n  return getComputedStyle(element).direction === 'rtl';\n}\n\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    var _io;\n    clearTimeout(timeoutId);\n    (_io = io) == null || _io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = element.getBoundingClientRect();\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          // If the reference is clipped, the ratio is 0. Throttle the refresh\n          // to prevent an infinite loop of updates.\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 1000);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          var _resizeObserver;\n          (_resizeObserver = resizeObserver) == null || _resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && (nextRefRect.x !== prevRefRect.x || nextRefRect.y !== prevRefRect.y || nextRefRect.width !== prevRefRect.width || nextRefRect.height !== prevRefRect.height)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    var _resizeObserver2;\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo == null || cleanupIo();\n    (_resizeObserver2 = resizeObserver) == null || _resizeObserver2.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nconst detectOverflow = detectOverflow$1;\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = offset$1;\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = autoPlacement$1;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = shift$1;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = flip$1;\n\n/**\n * Provides data that allows you to change the size of the floating element —\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = size$1;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = hide$1;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = arrow$1;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = inline$1;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = limitShift$1;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return computePosition$1(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\n\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, platform, shift, size };\n", "import {\r\n  computePosition,\r\n  flip,\r\n  shift,\r\n  arrow,\r\n  offset,\r\n  type ComputePositionReturn,\r\n  type Placement\r\n} from '@floating-ui/dom'\r\nimport type { TipAlign, TipDirection } from '@ui/types'\r\nimport { getScrollParents, observeEl, setStyles, unobserveEl } from '@ui/utils'\r\nimport { isRef, onBeforeUnmount, watch, type Ref, type ShallowRef } from 'vue'\r\n\r\ninterface Options {\r\n  /** 触发元素 */\r\n  triggerRef: ShallowRef<HTMLElement | undefined>\r\n  /** 内容元素 */\r\n  contentRef: ShallowRef<HTMLElement | undefined>\r\n  /** 箭头元素 */\r\n  arrowRef?: ShallowRef<HTMLElement | undefined>\r\n  /** 方向 */\r\n  direction?: ShallowRef<TipDirection> | TipDirection\r\n  /** 对齐方式 */\r\n  alignment?: ShallowRef<TipAlign> | TipAlign\r\n  /**\r\n   * 箭头大小\r\n   * @default 10\r\n   */\r\n  arrowSize?: number\r\n  /** 触发器元素位置变更时回调 */\r\n  onTriggerPositionChange?: () => void\r\n  /** 更新元素前回调 */\r\n  onBeforeUpdate?: (triggerEl: HTMLElement, contentEl: HTMLElement) => void\r\n  /** 更新元素后回调 */\r\n  onAfterUpdate?: (position: ComputePositionReturn) => void\r\n}\r\n\r\n/**\r\n * 浮框组合式函数\r\n * @param options 选项\r\n * @returns\r\n */\r\nexport function usePop(options: Options) {\r\n  const {\r\n    triggerRef,\r\n    contentRef,\r\n    arrowRef,\r\n    arrowSize = 10,\r\n    onTriggerPositionChange,\r\n    onAfterUpdate,\r\n    onBeforeUpdate,\r\n    direction,\r\n    alignment\r\n  } = options\r\n\r\n  /** 箭头位置 */\r\n  const arrowPlacementDict = {\r\n    top: 'bottom',\r\n    right: 'left',\r\n    bottom: 'top',\r\n    left: 'right'\r\n  }\r\n\r\n  function getMaybeRefValue<T>(value?: Ref<T> | T) {\r\n    return isRef(value) ? value.value : value\r\n  }\r\n\r\n  async function update() {\r\n    if (!triggerRef.value || !contentRef.value) return\r\n    const middleware = [\r\n      offset(arrowRef?.value ? arrowSize : 6),\r\n      flip(),\r\n      shift()\r\n    ]\r\n\r\n    if (arrowRef?.value) {\r\n      middleware.push(arrow({ element: arrowRef.value }))\r\n    }\r\n\r\n    onBeforeUpdate?.(triggerRef.value, contentRef.value)\r\n\r\n    const _direction = getMaybeRefValue(direction) ?? 'top'\r\n    const _alignment = getMaybeRefValue(alignment) ?? 'center'\r\n\r\n    const position = await computePosition(triggerRef.value, contentRef.value, {\r\n      middleware,\r\n      placement:\r\n        `${_direction}${_alignment === 'center' ? '' : `-${_alignment}`}` as Placement\r\n    })\r\n\r\n    onAfterUpdate?.(position)\r\n\r\n    const { x, y, middlewareData, placement } = position\r\n\r\n    setStyles(contentRef.value, {\r\n      left: `${x}px`,\r\n      top: `${y}px`\r\n    })\r\n\r\n    if (middlewareData.arrow) {\r\n      const { x: arrowX, y: arrowY } = middlewareData.arrow\r\n\r\n      const arrowPlacement = arrowPlacementDict[placement.split('-')[0]!]\r\n      const size = `${arrowSize}px`\r\n      const arrowRadius = arrowSize / 2\r\n\r\n      setStyles(arrowRef!.value!, {\r\n        width: size,\r\n        height: size,\r\n        left: arrowX && `${arrowX - arrowRadius}px`,\r\n        top: arrowY && `${arrowY - arrowRadius}px`,\r\n        [arrowPlacement]: `-${arrowRadius}px`\r\n      })\r\n    }\r\n  }\r\n\r\n  watch(triggerRef, () => {\r\n    update()\r\n  })\r\n\r\n  let scrollParents: HTMLElement[] = []\r\n\r\n  /** 为触发器元素的祖先元素添加滚动事件 */\r\n  function addScrollEvents() {\r\n    if (!onTriggerPositionChange || !triggerRef.value) return\r\n    scrollParents = getScrollParents(triggerRef.value)\r\n    scrollParents.forEach(el => {\r\n      el.addEventListener('scroll', onTriggerPositionChange)\r\n    })\r\n  }\r\n\r\n  /** 移除触发器元素祖先元素的滚动事件 */\r\n  function removeScrollEvents() {\r\n    if (!onTriggerPositionChange) return\r\n    scrollParents.forEach(el => {\r\n      el.removeEventListener('scroll', onTriggerPositionChange)\r\n    })\r\n\r\n    scrollParents = []\r\n  }\r\n\r\n  function addResizeEvents() {\r\n    onTriggerPositionChange &&\r\n      window.addEventListener('resize', onTriggerPositionChange)\r\n    triggerRef.value && observeEl(triggerRef.value, update)\r\n  }\r\n\r\n  function removeResizeEvents() {\r\n    triggerRef.value && unobserveEl(triggerRef.value)\r\n    onTriggerPositionChange &&\r\n      window.removeEventListener('resize', onTriggerPositionChange)\r\n  }\r\n\r\n  watch(\r\n    [\r\n      contentRef,\r\n      () => getMaybeRefValue(direction),\r\n      () => getMaybeRefValue(alignment)\r\n    ],\r\n    ([contentRef]) => {\r\n      if (contentRef) {\r\n        addScrollEvents()\r\n        addResizeEvents()\r\n        return\r\n      }\r\n      removeScrollEvents()\r\n      removeResizeEvents()\r\n    }\r\n  )\r\n\r\n  onBeforeUnmount(() => {\r\n    removeScrollEvents()\r\n    removeResizeEvents()\r\n  })\r\n\r\n  return {\r\n    update\r\n  }\r\n}\r\n", "import type { InjectionKey, ShallowRef } from 'vue'\r\n\r\nexport const TipNestDIKey: InjectionKey<{\r\n  addChild(visible: ShallowRef<boolean>): void\r\n  removeChild(visible: ShallowRef<boolean>): void\r\n}> = Symbol('TipNestDIKey')\r\n", "import {\r\n  type PropType,\r\n  type VNode,\r\n  type VNodeArrayChildren,\r\n  defineComponent,\r\n  isVNode,\r\n  mergeProps\r\n} from 'vue'\r\n\r\nexport default defineComponent({\r\n  name: 'NodeRender',\r\n\r\n  inheritAttrs: false,\r\n\r\n  props: {\r\n    /** 渲染内容 */\r\n    content: {\r\n      type: [Object, Array, String, Boolean, Number] as PropType<\r\n        | null\r\n        | undefined\r\n        | VNodeArrayChildren\r\n        | VNode\r\n        | string\r\n        | number\r\n        | boolean\r\n      >\r\n    }\r\n  },\r\n\r\n  render() {\r\n    const { content, $slots, $attrs, $props } = this\r\n\r\n    if (content === undefined) {\r\n      return $slots.default?.()\r\n    }\r\n\r\n    if (Array.isArray(content)) {\r\n      return content\r\n    }\r\n\r\n    if (isVNode(content)) {\r\n      content.props = $attrs ? mergeProps(content.props ?? {}, $attrs) : $props\r\n      return content\r\n    }\r\n\r\n    return content\r\n  }\r\n})\r\n", "<template>\r\n  <!-- 触发 -->\r\n  <UNodeRender\r\n    v-bind=\"{ ...eventsHandlers, ...$attrs }\"\r\n    :content=\"getTriggerNode()\"\r\n    :class=\"cls.b\"\r\n    ref=\"triggerRef\"\r\n  />\r\n\r\n  <!-- 弹出内容 -->\r\n  <teleport to=\"body\">\r\n    <transition name=\"tip\">\r\n      <component\r\n        v-if=\"visible || anyChildrenVisible\"\r\n        :is=\"contentTag\"\r\n        :class=\"contentClass\"\r\n        :style=\"[props.style, { zIndex: zIndex() }]\"\r\n        ref=\"contentRef\"\r\n        @mouseenter=\"eventsHandlers.onMouseenter\"\r\n        @mouseleave=\"eventsHandlers.onMouseleave\"\r\n        @click.stop\r\n        v-click-outside=\"handleClickOutside\"\r\n      >\r\n        <UNodeRender v-if=\"externalNode\" :content=\"externalNode\" />\r\n\r\n        <slot name=\"content\">{{ content }}</slot>\r\n\r\n        <div :class=\"cls.e('arrow')\" v-if=\"!hideArrow\" ref=\"arrowRef\"></div>\r\n      </component>\r\n    </transition>\r\n  </teleport>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport {\r\n  shallowRef,\r\n  computed,\r\n  useSlots,\r\n  onBeforeUnmount,\r\n  inject,\r\n  provide,\r\n  shallowReactive,\r\n  type ShallowRef,\r\n  toRef,\r\n  type VNode\r\n} from 'vue'\r\nimport { bem, extractNormalVNodes, shallowComputed, zIndex } from '@ui/utils'\r\nimport { vClickOutside } from '@ui/directives'\r\nimport type { TipProps } from '@ui/types/components/tip'\r\nimport { useFallbackProps, usePop } from '@ui/compositions'\r\nimport { TipNestDIKey } from './di'\r\nimport { UNodeRender } from '../node-render'\r\nimport type { ComponentSize } from '@ui/types'\r\n\r\ndefineOptions({ name: 'Tip' })\r\n\r\nconst props = withDefaults(defineProps<TipProps>(), {\r\n  content: '',\r\n  trigger: 'hover',\r\n  direction: 'top',\r\n  alignment: 'center',\r\n  contentTag: 'div'\r\n})\r\n\r\nconst cls = bem('tip')\r\nconst slots = useSlots()\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst contentClass = computed(() => {\r\n  const fixed = [cls.e('content'), cls.m(size.value)]\r\n  const className = props.class\r\n  if (!Array.isArray(className)) {\r\n    return [...fixed, className]\r\n  }\r\n  return [...fixed, ...className]\r\n})\r\n\r\nconst triggerRef = shallowRef<InstanceType<typeof UNodeRender>>()\r\nconst contentRef = shallowRef<HTMLElement>()\r\nconst arrowRef = shallowRef<HTMLElement>()\r\n\r\nconst visible = shallowRef(false)\r\n\r\nfunction getTriggerNode() {\r\n  const nodes = slots.default?.()\r\n  if (!nodes?.length) return null\r\n\r\n  const node = extractNormalVNodes(nodes)[0]\r\n  return node\r\n}\r\n\r\n/**\r\n * 是否是嵌套tip，即在tip组件中嵌套其他的tip\r\n */\r\nconst childrenTips = shallowReactive(new Set<ShallowRef<boolean>>())\r\n\r\nconst anyChildrenVisible = computed(() => {\r\n  return Array.from(childrenTips).some(tip => tip.value)\r\n})\r\n\r\nprovide(TipNestDIKey, {\r\n  addChild(visible) {\r\n    childrenTips.add(visible)\r\n  },\r\n  removeChild(visible) {\r\n    childrenTips.delete(visible)\r\n  }\r\n})\r\n\r\nconst { addChild, removeChild } = inject(TipNestDIKey, undefined) || {}\r\naddChild?.(visible)\r\n\r\nconst eventsHandlers = computed(() => {\r\n  const { trigger } = props\r\n\r\n  const handlers: Record<string, Function> = {}\r\n\r\n  if (trigger === 'click') {\r\n    handlers.onClick = open\r\n  } else if (trigger === 'hover') {\r\n    handlers.onMouseenter = open\r\n    handlers.onMouseleave = close\r\n  }\r\n\r\n  return handlers\r\n})\r\n\r\nconst handleClickOutside = (e: MouseEvent) => {\r\n  if (props.trigger === 'hover') return\r\n\r\n  if (\r\n    props.trigger === 'click' &&\r\n    triggerRef.value?.$el?.contains(e.target as Node)\r\n  ) {\r\n    return\r\n  }\r\n  close()\r\n}\r\n\r\nlet closeTimer: number | undefined = undefined\r\n\r\n/** 弹出 */\r\nconst open = () => {\r\n  closeTimer !== undefined && clearTimeout(closeTimer)\r\n  visible.value = true\r\n}\r\n/** 关闭 */\r\nconst close = () => {\r\n  if (props.trigger === 'hover') {\r\n    closeTimer = setTimeout(() => {\r\n      visible.value = false\r\n    }, 250)\r\n  } else {\r\n    visible.value = false\r\n  }\r\n}\r\n\r\nconst triggerDom = shallowComputed(() => triggerRef.value?.$el)\r\n\r\nusePop({\r\n  triggerRef: triggerDom,\r\n  contentRef,\r\n  arrowRef,\r\n  direction: toRef(() => props.direction),\r\n  alignment: toRef(() => props.alignment),\r\n  onTriggerPositionChange() {\r\n    close()\r\n  }\r\n})\r\n\r\nconst externalNode = shallowRef<any>()\r\n\r\nfunction trigger(config: {\r\n  triggerDom?: HTMLElement\r\n  content?: string | VNode | (string | VNode)[]\r\n}) {\r\n  triggerDom.value = config.triggerDom\r\n  externalNode.value = config.content\r\n  open()\r\n}\r\n\r\nonBeforeUnmount(() => {\r\n  clearTimeout(closeTimer)\r\n  removeChild?.(visible)\r\n})\r\n\r\ndefineExpose({\r\n  close,\r\n  trigger\r\n})\r\n</script>\r\n", "import { type InjectionKey, inject, provide } from 'vue'\r\nimport type { FormProps } from '@ui/types/components/form'\r\n\r\ntype DIContext = {\r\n  /** 表单属性 */\r\n  formProps: FormProps\r\n}\r\n\r\nconst FormComponentDIKey: InjectionKey<DIContext> = Symbol('FormComponentDIKey')\r\n\r\n/**\r\n * 表单组件本身的组合式方法\r\n * @param props 表单属性\r\n * @returns\r\n */\r\nexport function useFormComponent(props: FormProps): void\r\n/**\r\n * 表单内的组件的组合式方法\r\n * @returns 提供一个form的上下文\r\n */\r\nexport function useFormComponent(): {\r\n  /** 是否在表单中 */\r\n  inForm: boolean\r\n} & Partial<DIContext>\r\nexport function useFormComponent(props?: any): any {\r\n  if (props) {\r\n    return provide(FormComponentDIKey, {\r\n      formProps: props\r\n    })\r\n  }\r\n  const context = inject(FormComponentDIKey, undefined) || {}\r\n  return {\r\n    inForm: !!context,\r\n    ...context\r\n  }\r\n}\r\n", "<template>\r\n  <u-tip\r\n    ref=\"tipRef\"\r\n    :class=\"cls.b\"\r\n    :trigger=\"trigger\"\r\n    :direction=\"direction\"\r\n    :alignment=\"alignment\"\r\n    :content-tag=\"contentTag\"\r\n  >\r\n    <slot name=\"reference\" />\r\n\r\n    <template #content>\r\n      <div :class=\"[cls.m('main'), cls.m(size)]\">\r\n        <u-icon :size=\"16\" :class=\"cls.m('icon')\" :style=\"{ color: iconColor }\">\r\n          <component :is=\"icon\" />\r\n        </u-icon>\r\n        <span>\r\n          {{ title }}\r\n        </span>\r\n      </div>\r\n      <div :class=\"cls.m('action')\">\r\n        <u-button size=\"small\" @click=\"cancel\" type=\"primary\" text>\r\n          {{ cancelText }}\r\n        </u-button>\r\n        &nbsp;\r\n        <u-button size=\"small\" type=\"primary\" @click=\"confirm\">\r\n          {{ confirmText }}\r\n        </u-button>\r\n      </div>\r\n    </template>\r\n  </u-tip>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type {\r\n  PopConfirmProps,\r\n  PopConfirmEmits\r\n} from '@ui/types/components/pop-confirm'\r\nimport { bem } from '@ui/utils'\r\nimport { UTip, type TipExposed } from '../tip'\r\nimport { UButton } from '../button'\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\nimport { shallowRef } from 'vue'\r\nimport { UIcon } from '../icon'\r\nimport { HelpFilled } from 'icon-ultra'\r\n\r\ndefineOptions({\r\n  name: 'PopConfirm'\r\n})\r\n\r\nconst emit = defineEmits<PopConfirmEmits>()\r\n\r\nwithDefaults(defineProps<PopConfirmProps>(), {\r\n  trigger: 'click',\r\n  icon: HelpFilled,\r\n  direction: 'bottom',\r\n  iconColor: '#ffc107',\r\n  confirmText: '确认',\r\n  cancelText: '取消'\r\n})\r\n\r\nconst cls = bem('pop-confirm')\r\n\r\nconst tipRef = shallowRef<TipExposed>()\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size } = useFormFallbackProps([formProps ?? {}], {\r\n  size: 'default'\r\n})\r\n\r\nconst confirm = () => {\r\n  emit('confirm')\r\n  tipRef.value?.close()\r\n}\r\n\r\nconst cancel = () => {\r\n  emit('cancel')\r\n  tipRef.value?.close()\r\n}\r\n</script>\r\n", "<template>\r\n  <u-pop-confirm\r\n    v-if=\"needConfirm\"\r\n    title=\"确认执行此操作吗？\"\r\n    @confirm=\"handleConfirm\"\r\n    style=\"display: inline-block\"\r\n    direction=\"left\"\r\n  >\r\n    <template #reference>\r\n      <u-button :class=\"cls.b\" v-bind=\"props\"><slot /></u-button>\r\n    </template>\r\n  </u-pop-confirm>\r\n\r\n  <u-button v-else :class=\"cls.b\" v-bind=\"props\" @click=\"emit('run')\">\r\n    <slot />\r\n  </u-button>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { ActionEmits, ActionProps } from '@ui/types/components/action'\r\nimport { bem } from '@ui/utils'\r\nimport { UButton } from '../button'\r\nimport { inject } from 'vue'\r\nimport { ActionDIKey } from './di'\r\nimport { UPopConfirm } from '../pop-confirm'\r\n\r\ndefineOptions({\r\n  name: 'Action'\r\n})\r\n\r\nconst props = withDefaults(defineProps<ActionProps>(), {\r\n  size: 'small',\r\n  text: true,\r\n  type: 'primary',\r\n  inDropdown: false\r\n})\r\n\r\nconst emit = defineEmits<ActionEmits>()\r\n\r\nconst cls = bem('action')\r\n\r\nconst ctx = inject(ActionDIKey, undefined)\r\n\r\nfunction handleConfirm() {\r\n  emit('run')\r\n  ctx?.close()\r\n}\r\n</script>\r\n", "<template>\r\n  <component v-for=\"node of getSlotsNodes()\" :key=\"node.key\" :is=\"node\" />\r\n</template>\r\n\r\n<script lang=\"tsx\" setup>\r\nimport type { ActionGroupProps } from '@ui/types/components/action'\r\nimport { ArrowDown } from 'icon-ultra'\r\nimport { UIcon } from '../icon'\r\nimport { UButton } from '../button'\r\nimport type { VNode } from 'vue'\r\nimport { bem, extractNormalVNodes } from '@ui/utils'\r\nimport { UTip } from '../tip'\r\n\r\ndefineOptions({\r\n  name: 'ActionGroup',\r\n  inheritAttrs: false\r\n})\r\n\r\nconst props = withDefaults(defineProps<ActionGroupProps>(), {\r\n  max: 3\r\n})\r\n\r\nconst cls = bem('action-group')\r\n\r\nconst slots = defineSlots<{\r\n  default?: () => VNode[]\r\n}>()\r\n\r\nfunction getSlotsNodes() {\r\n  const nodes = slots.default?.()\r\n\r\n  if (!nodes) return []\r\n  const extractedNodes = extractNormalVNodes(nodes).filter(\r\n    // @ts-ignore\r\n    node => node.type?.name === 'Action'\r\n  )\r\n\r\n  const normalNodes = extractedNodes.slice(0, props.max - 1)\r\n  const hiddenNodes = extractedNodes.slice(props.max - 1)\r\n\r\n  const dropdown = hiddenNodes.length ? (\r\n    <UTip direction='bottom' class={cls.e('dropdown')}>\r\n      {{\r\n        content: () => hiddenNodes,\r\n        default: () => (\r\n          <UButton text size='small' type='primary'>\r\n            更多\r\n            <UIcon>\r\n              <ArrowDown />\r\n            </UIcon>\r\n          </UButton>\r\n        )\r\n      }}\r\n    </UTip>\r\n  ) : null\r\n\r\n  return dropdown ? [...normalNodes, dropdown] : normalNodes\r\n}\r\n</script>\r\n", "<template>\r\n  <div\r\n    v-if=\"slots.trigger\"\r\n    :class=\"cls.b\"\r\n    v-bind=\"{ ...eventsHandlers, ...$attrs }\"\r\n    ref=\"triggerRef\"\r\n  >\r\n    <slot name=\"trigger\" />\r\n  </div>\r\n\r\n  <Teleport to=\"body\">\r\n    <transition name=\"slide\">\r\n      <component\r\n        :is=\"contentTag\"\r\n        v-if=\"visible\"\r\n        :class=\"[cls.e('content'), contentClass]\"\r\n        ref=\"contentRef\"\r\n        :style=\"{\r\n          zIndex: zIndex()\r\n        }\"\r\n        @mouseenter=\"eventsHandlers.onMouseenter\"\r\n        @mouseleave=\"eventsHandlers.onMouseleave\"\r\n        v-click-outside=\"trigger === 'click' ? handleClickOutside : undefined\"\r\n      >\r\n        <slot name=\"content\" />\r\n      </component>\r\n    </transition>\r\n  </Teleport>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type {\r\n  DropdownProps,\r\n  DropdownExposed,\r\n  DropdownEmits\r\n} from '@ui/types/components/dropdown'\r\nimport { bem, setStyles, zIndex } from '@ui/utils'\r\nimport { shallowRef, computed } from 'vue'\r\nimport { vClickOutside } from '@ui/directives'\r\nimport { usePop } from '@ui/compositions'\r\n\r\ndefineOptions({\r\n  name: 'Dropdown',\r\n  inheritAttrs: false\r\n})\r\n\r\nconst props = withDefaults(defineProps<DropdownProps>(), {\r\n  trigger: 'hover',\r\n  contentTag: 'div',\r\n  clickWhetherHide: false\r\n})\r\n\r\ndefineEmits<DropdownEmits>()\r\n\r\nconst slots = defineSlots<{\r\n  /** 内容 */\r\n  content?: () => any\r\n  /** 触发器 */\r\n  trigger?: () => any\r\n}>()\r\n\r\nconst cls = bem('dropdown')\r\n\r\nconst triggerRef = shallowRef<HTMLElement>()\r\nconst contentRef = shallowRef<HTMLElement>()\r\nlet realTrigger: HTMLElement | undefined\r\n\r\n/**显示隐藏 */\r\nconst visible = defineModel<boolean>('visible')\r\n\r\nlet closeTimer: number | undefined\r\n\r\nfunction stopClose() {\r\n  closeTimer !== undefined && clearTimeout(closeTimer)\r\n}\r\n\r\n/** 打开下拉框 */\r\nfunction open(trigger?: { virtual?: HTMLElement; real?: HTMLElement }) {\r\n  stopClose()\r\n  const { virtual, real } = trigger || {}\r\n  if (virtual && virtual instanceof HTMLElement) {\r\n    triggerRef.value = virtual\r\n\r\n    realTrigger = real || virtual\r\n  }\r\n\r\n  visible.value = true\r\n}\r\n\r\nfunction close() {\r\n  realTrigger = undefined\r\n  if (props.trigger === 'hover') {\r\n    closeTimer = setTimeout(() => {\r\n      visible.value = false\r\n    }, 200)\r\n  } else {\r\n    visible.value = false\r\n  }\r\n}\r\n\r\n/** 点击外部 */\r\nfunction handleClickOutside(e: MouseEvent) {\r\n  if (props.clickWhetherHide) return\r\n  // 点击触发且点击元素属于触发元素内（包含触发元素本身）时不关闭\r\n  if (\r\n    props.trigger === 'click' &&\r\n    (triggerRef.value?.contains(e.target as Node) ||\r\n      realTrigger?.contains(e.target as Node))\r\n  ) {\r\n    return\r\n  }\r\n\r\n  close()\r\n}\r\n\r\nconst { update } = usePop({\r\n  triggerRef,\r\n  contentRef,\r\n  direction: 'bottom',\r\n  onTriggerPositionChange() {\r\n    close()\r\n  },\r\n  onBeforeUpdate(triggerEl, contentEl) {\r\n    setStyles(contentEl, {\r\n      width: props.width ?? `${triggerEl.offsetWidth}px`,\r\n      minWidth: props.minWidth && props.minWidth\r\n    })\r\n  }\r\n})\r\n\r\nconst eventsHandlers = computed(() => {\r\n  const { trigger, disabled } = props\r\n\r\n  const handlers: Record<string, Function> = {}\r\n  if (disabled || trigger === 'custom') return handlers\r\n\r\n  if (trigger === 'click') {\r\n    handlers.onClick = visible.value ? close : open\r\n  } else if (trigger === 'hover') {\r\n    handlers.onMouseenter = open\r\n    handlers.onMouseleave = close\r\n  }\r\n\r\n  return handlers\r\n})\r\n\r\ndefineExpose<DropdownExposed>({\r\n  open,\r\n  close,\r\n  /**暴露出更新dropdown内容位置方法 适用与级联选择器组件 */\r\n  updateDropdown: update\r\n})\r\n</script>\r\n", "import { type Ref, type ShallowRef, watch, onBeforeUnmount } from 'vue'\r\n\r\ninterface DragOptions {\r\n  /** 拖动目标 */\r\n  target: ShallowRef<HTMLElement | undefined> | Ref<HTMLElement | undefined>\r\n  /** 拖动开始 */\r\n  onDragStart?(e: MouseEvent): void\r\n  /** 拖动结束 */\r\n  onDragEnd?(x: number, y: number, e: MouseEvent): void\r\n  /** 拖动时 */\r\n  onDrag?(x: number, y: number, e: MouseEvent): void\r\n}\r\n\r\n/**\r\n * 拖动组合式方法\r\n * @param options 拖动选项\r\n */\r\nexport function useDrag(options: DragOptions) {\r\n  const { target, onDragStart, onDrag, onDragEnd } = options\r\n\r\n  // 鼠标拖拽前的坐标\r\n  let originX = 0\r\n  let originY = 0\r\n\r\n  let offsetX = 0\r\n  let offsetY = 0\r\n\r\n  // 先取\r\n  const onselectstart = document.onselectstart\r\n\r\n  const handleMousedown = (e: MouseEvent) => {\r\n    // 阻止事件冒泡\r\n    e.stopPropagation()\r\n    // 鼠标左键按下有效\r\n    if (e.button !== 0) return\r\n    // 放置拖拽时选择内容\r\n    window.getSelection()?.removeAllRanges()\r\n    // 阻止后续的事件监听器被执行\r\n    e.stopImmediatePropagation()\r\n\r\n    originX = e.x\r\n    originY = e.y\r\n\r\n    onDragStart?.(e)\r\n\r\n    // 禁止浏览器的选中事件, 直到mouseup事件触发时还原\r\n    document.onselectstart = () => false\r\n    document.addEventListener('mousemove', handleMousemove, {\r\n      passive: true\r\n    })\r\n    document.addEventListener('mouseup', handleMouseup)\r\n  }\r\n\r\n  const handleMousemove = (e: MouseEvent) => {\r\n    offsetX = e.x - originX\r\n    offsetY = e.y - originY\r\n\r\n    onDrag?.(offsetX, offsetY, e)\r\n  }\r\n\r\n  const handleMouseup = (e: MouseEvent) => {\r\n    document.removeEventListener('mousemove', handleMousemove)\r\n    document.removeEventListener('mouseup', handleMouseup)\r\n    onDragEnd?.(e.x - originX, e.y - originY, e)\r\n    document.onselectstart = onselectstart\r\n  }\r\n\r\n  watch(\r\n    target,\r\n    (dom, oldDom) => {\r\n      oldDom?.removeEventListener('mousedown', handleMousedown)\r\n      if (!dom) return\r\n      dom.addEventListener('mousedown', handleMousedown)\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  onBeforeUnmount(() => {\r\n    target.value?.removeEventListener('mousedown', handleMousedown)\r\n    document.removeEventListener('mousemove', handleMousemove)\r\n    document.removeEventListener('mouseup', handleMouseup)\r\n  })\r\n}\r\n", "import type { BEM } from '@ui/utils'\r\nimport type { InjectionKey } from 'vue'\r\n\r\n/** 滚动条依赖注入 */\r\nexport const ScrollDIKey: InjectionKey<{\r\n  cls: BEM<'scroll'>\r\n}> = Symbol()\r\n", "<template>\r\n  <div v-show=\"!!size\" ref=\"domRef\" :style=\"style\" :class=\"className\"></div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, inject, shallowRef } from 'vue'\r\nimport { useDrag } from '@ui/compositions'\r\nimport { ScrollDIKey } from './di'\r\nimport { bem } from '@ui/utils'\r\n\r\ndefineOptions({\r\n  name: 'ScrollBar'\r\n})\r\n\r\nconst props = defineProps<{\r\n  type: 'x' | 'y'\r\n}>()\r\n\r\nconst emit = defineEmits<{\r\n  drag: [offset: number, size: number]\r\n}>()\r\n\r\n/** 滚动条高度(type为x时为宽度) */\r\nconst size = shallowRef(0)\r\n/** 滚动条偏移量 */\r\nconst offset = shallowRef(0)\r\n/** 滚动条拖拽前偏移量 */\r\nlet currentOffset = 0\r\n/** 滚动条轨道尺寸 */\r\nlet trackSize = 0\r\n\r\nconst { cls } = inject(ScrollDIKey)!\r\n\r\nconst dragging = shallowRef(false)\r\n\r\nconst className = computed(() => {\r\n  return [cls.e(`bar-${props.type}`), bem.is('active', dragging.value)]\r\n})\r\n\r\nconst style =\r\n  props.type === 'x'\r\n    ? computed(() => {\r\n        return {\r\n          width: size.value + 'px',\r\n          transform: `translateX(${offset.value}px)`\r\n        }\r\n      })\r\n    : computed(() => {\r\n        return {\r\n          height: size.value + 'px',\r\n          transform: `translateY(${offset.value}px)`\r\n        }\r\n      })\r\n\r\nconst domRef = shallowRef<HTMLElement>()\r\n\r\n/** 获取拖拽偏移量 */\r\nconst getDragOffset =\r\n  props.type === 'x'\r\n    ? (x: number, y: number) => currentOffset + x\r\n    : (x: number, y: number) => currentOffset + y\r\n\r\n// 应用拖拽\r\nuseDrag({\r\n  target: domRef,\r\n  onDragStart() {\r\n    dragging.value = true\r\n    currentOffset = offset.value\r\n  },\r\n  onDragEnd() {\r\n    dragging.value = false\r\n  },\r\n  onDrag(x, y) {\r\n    const newOffset = getDragOffset(x, y)\r\n    const maxOffset = trackSize - size.value\r\n\r\n    if (newOffset < 0) {\r\n      offset.value = 0\r\n    } else if (newOffset > maxOffset) {\r\n      offset.value = maxOffset\r\n    } else {\r\n      offset.value = newOffset\r\n    }\r\n\r\n    emit('drag', offset.value, size.value)\r\n  }\r\n})\r\n\r\ndefineExpose({\r\n  /** 更新滚动条状态 */\r\n  update(_size: number, _offset: number) {\r\n    size.value = _size\r\n    offset.value = _offset\r\n  },\r\n\r\n  /** 设置轨道尺寸 */\r\n  setTrackSize(size: number) {\r\n    trackSize = size\r\n  }\r\n})\r\n</script>\r\n", "import { type Ref, type ShallowRef, onBeforeUnmount, watch } from 'vue'\r\n\r\nexport type RefElement =\r\n  | ShallowRef<HTMLElement | undefined>\r\n  | Ref<HTMLElement | undefined>\r\n\r\ninterface ResizeObserverOptions {\r\n  /** 目标节点 */\r\n  targets: RefElement | RefElement[]\r\n  /** resize事件 */\r\n  onResize: ResizeObserverCallback\r\n  /** 指定观察条件 */\r\n  when?: () => boolean\r\n}\r\n\r\n/** 监听器 */\r\nexport type ResizeObserverReturn = {\r\n  /** 终止监听 */\r\n  disconnect: () => void\r\n}\r\n\r\nfunction unobserve(\r\n  targets: RefElement | RefElement[],\r\n  observer: ResizeObserver\r\n) {\r\n  if (Array.isArray(targets)) {\r\n    return targets.forEach(target => unobserve(target, observer))\r\n  }\r\n  if (!targets.value) return\r\n  observer.unobserve(targets.value)\r\n}\r\n\r\n/**\r\n * 监听元素尺寸变更\r\n * @param options 选项\r\n */\r\nexport function useResizeObserver(\r\n  options: ResizeObserverOptions\r\n): ResizeObserverReturn {\r\n  const { targets, onResize } = options\r\n\r\n  let observer: ResizeObserver | undefined\r\n\r\n  if (Array.isArray(targets)) {\r\n    watch(\r\n      targets,\r\n      (val, oldVal) => {\r\n        if (!observer && !!val.length ) {\r\n          observer = new ResizeObserver(onResize)\r\n        }\r\n        oldVal.length &&\r\n          oldVal.forEach(target => {\r\n            target && observer?.unobserve(target)\r\n          })\r\n        val.length &&\r\n          val.forEach(target => {\r\n            target && observer?.observe(target)\r\n          })\r\n      },\r\n      { immediate: true }\r\n    )\r\n  } else {\r\n    watch(\r\n      targets,\r\n      (val, oldVal) => {\r\n        if (!observer && val) {\r\n          observer = new ResizeObserver(onResize)\r\n        }\r\n        oldVal && observer?.unobserve(oldVal)\r\n        val && observer?.observe(val)\r\n      },\r\n      { immediate: true }\r\n    )\r\n  }\r\n\r\n  onBeforeUnmount(() => {\r\n    observer && unobserve(targets, observer)\r\n    observer?.disconnect()\r\n    observer = undefined\r\n  })\r\n\r\n  return {\r\n    disconnect() {\r\n      observer && unobserve(targets, observer)\r\n      observer?.disconnect()\r\n    }\r\n  }\r\n}\r\n", "<template>\r\n  <div :class=\"className\" :style=\"style\" ref=\"scrollRef\">\r\n    <div\r\n      ref=\"containerRef\"\r\n      :class=\"[cls.e('container'), containerClass]\"\r\n      @scroll.passive=\"handleScroll\"\r\n      :style=\"containerStyle\"\r\n    >\r\n      <slot name=\"content\" />\r\n\r\n      <component\r\n        ref=\"contentRef\"\r\n        :style=\"contentStyle\"\r\n        :class=\"[cls.e('content'), contentClass]\"\r\n        :is=\"tag\"\r\n      >\r\n        <slot />\r\n      </component>\r\n    </div>\r\n\r\n    <u-scroll-bar\r\n      type=\"y\"\r\n      :class=\"cls.e('bar-y')\"\r\n      @drag=\"handleDragY\"\r\n      ref=\"barY\"\r\n    />\r\n    <u-scroll-bar\r\n      type=\"x\"\r\n      :class=\"cls.e('bar-x')\"\r\n      @drag=\"handleDragX\"\r\n      ref=\"barX\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { bem, withUnit } from '@ui/utils'\r\nimport type {\r\n  ScrollPosition,\r\n  _ScrollExposed,\r\n  ScrollProps,\r\n  ScrollEmits\r\n} from '@ui/types/components/scroll'\r\nimport { type CSSProperties, computed, provide, shallowRef } from 'vue'\r\nimport UScrollBar from './scroll-bar.vue'\r\nimport { useResizeObserver } from '@ui/compositions'\r\nimport { ScrollDIKey } from './di'\r\nimport { debounce } from 'cat-kit/fe'\r\n\r\ndefineOptions({\r\n  name: 'Scroll'\r\n})\r\n\r\nconst props = withDefaults(defineProps<ScrollProps>(), {\r\n  tag: 'div'\r\n})\r\n\r\nconst emit = defineEmits<ScrollEmits>()\r\n\r\ndefineSlots<{\r\n  /** 默认插槽 */\r\n  default(): any\r\n  /** 内容插槽 */\r\n  content(): any\r\n}>()\r\n\r\nconst cls = bem('scroll')\r\nconst className = computed(() => {\r\n  return [cls.b, bem.is('always', props.always)]\r\n})\r\n\r\n// 样式-------------------------------------------------------------\r\nconst style = computed<CSSProperties>(() => {\r\n  return {\r\n    height: withUnit(props.height, 'px')\r\n  }\r\n})\r\n\r\n// 模板引用------------------------------------------------\r\n/** 内容引用 */\r\nconst contentRef = shallowRef<HTMLElement>()\r\n/** 滚动根元素引用 */\r\nconst scrollRef = shallowRef<HTMLElement>()\r\n/** 容器引用 */\r\nconst containerRef = shallowRef<HTMLElement>()\r\nconst barX = shallowRef<InstanceType<typeof UScrollBar>>()\r\nconst barY = shallowRef<InstanceType<typeof UScrollBar>>()\r\nconst minSize = 20\r\n\r\nconst trackSize = {\r\n  width: 0,\r\n  height: 0\r\n}\r\n\r\nuseResizeObserver({\r\n  targets: [contentRef, scrollRef],\r\n  onResize: entries => {\r\n    if (entries.length && scrollRef.value) {\r\n      const { clientHeight, clientWidth } = scrollRef.value\r\n\r\n      trackSize.width = clientWidth\r\n      trackSize.height = clientHeight\r\n\r\n      barX.value?.setTrackSize(trackSize.width)\r\n      barY.value?.setTrackSize(trackSize.height)\r\n      updateBar()\r\n\r\n      emit(\r\n        'resize',\r\n        entries.map(entry => entry.target as HTMLElement)\r\n      )\r\n    }\r\n  }\r\n})\r\n\r\n// 更新滚动条\r\nconst updateBar = () => {\r\n  if (!containerRef.value) return\r\n\r\n  const {\r\n    scrollHeight,\r\n    clientHeight,\r\n    scrollTop,\r\n\r\n    scrollWidth,\r\n    clientWidth,\r\n    scrollLeft\r\n  } = containerRef.value\r\n\r\n  emit('scroll', { x: scrollLeft, y: scrollTop })\r\n\r\n  if (scrollHeight !== clientHeight) {\r\n    const barYHeight = Math.max(\r\n      (clientHeight / scrollHeight) * trackSize.height,\r\n      minSize\r\n    )\r\n\r\n    const barYTop =\r\n      (scrollTop / (scrollHeight - clientHeight)) *\r\n      (trackSize.height - barYHeight)\r\n\r\n    barY.value?.update(barYHeight, barYTop)\r\n  } else {\r\n    barY.value?.update(0, 0)\r\n  }\r\n\r\n  if (scrollWidth !== clientWidth) {\r\n    const barXWidth = Math.max(\r\n      (clientWidth / scrollWidth) * trackSize.width,\r\n      minSize\r\n    )\r\n\r\n    const barXLeft =\r\n      (scrollLeft / (scrollWidth - clientWidth)) * (trackSize.width - barXWidth)\r\n\r\n    barX.value?.update(barXWidth, barXLeft)\r\n  } else {\r\n    barX.value?.update(0, 0)\r\n  }\r\n}\r\n\r\n// 滚动条拖拽\r\nconst handleDragX = debounce(\r\n  (offset: number, size: number) => {\r\n    const container = containerRef.value!\r\n    const { clientWidth, scrollWidth } = container\r\n    container.scrollLeft =\r\n      (offset / (trackSize.width - size)) * (scrollWidth - clientWidth)\r\n  },\r\n  props.dragDebounce ?? 0,\r\n  false\r\n)\r\n\r\nconst handleDragY = debounce(\r\n  (offset: number, size: number) => {\r\n    const container = containerRef.value!\r\n    const { clientHeight, scrollHeight } = container\r\n    container.scrollTop =\r\n      (offset / (trackSize.height - size)) * (scrollHeight - clientHeight)\r\n  },\r\n  props.dragDebounce ?? 0,\r\n  false\r\n)\r\n\r\n// 滚动事件\r\nconst handleScroll = () => {\r\n  updateBar()\r\n}\r\n\r\n// 滚动至------------------------------------------------\r\nconst scrollToLeft = (left: number) => {\r\n  const container = containerRef.value\r\n  if (!container) return\r\n\r\n  container.scrollTo({\r\n    left,\r\n    behavior: 'smooth'\r\n  })\r\n}\r\n\r\nconst scrollToTop = (top: number) => {\r\n  const container = containerRef.value\r\n  if (!container) return\r\n  container.scrollTo({\r\n    top,\r\n    behavior: 'smooth'\r\n  })\r\n}\r\n\r\nconst scrollTo = (position: ScrollPosition) => {\r\n  if (position.x !== undefined) scrollToLeft(position.x)\r\n  if (position.y !== undefined) scrollToTop(position.y)\r\n}\r\n\r\nprovide(ScrollDIKey, {\r\n  cls\r\n})\r\n\r\nconst exposed: _ScrollExposed = {\r\n  el: scrollRef,\r\n  contentRef,\r\n  containerRef,\r\n  scrollTo,\r\n  update: updateBar\r\n}\r\n\r\ndefineExpose(exposed)\r\n</script>\r\n", "import { ref } from \"vue\"\r\n\r\n/**\r\n * 聚焦\r\n * @param cb 回调\r\n * @returns\r\n */\r\nexport function useFocus(cb?: (focused: boolean) => void) {\r\n  const focus = ref(false)\r\n\r\n  const handleFocus = () => {\r\n    focus.value = true\r\n    cb?.(focus.value)\r\n  }\r\n\r\n  const handleBlur = () => {\r\n    focus.value = false\r\n    cb?.(focus.value)\r\n  }\r\n\r\n  return {\r\n    focus,\r\n    handleBlur,\r\n    handleFocus\r\n  }\r\n}", "<template>\r\n  <div\r\n    :class=\"inputClass\"\r\n    @mouseenter=\"handleMouseEnter\"\r\n    @mouseleave=\"handleMouseLeave\"\r\n    v-if=\"!readonly\"\r\n  >\r\n    <span\r\n      v-if=\"$slots.prefix || prefix\"\r\n      :class=\"prefixClass\"\r\n      @click=\"handlePrefixClick\"\r\n    >\r\n      <slot name=\"prefix\">{{ prefix }}</slot>\r\n    </span>\r\n\r\n    <input\r\n      :class=\"cls.e('native')\"\r\n      :placeholder=\"props.placeholder\"\r\n      type=\"text\"\r\n      :value=\"model\"\r\n      @input=\"handleInput\"\r\n      @change=\"handleChange\"\r\n      @focus=\"handleFocus\"\r\n      @blur=\"handleBlur\"\r\n      @compositionstart=\"handleCompositionStart\"\r\n      @compositionend=\"handleCompositionEnd\"\r\n      autocomplete=\"off\"\r\n      ref=\"el\"\r\n      :disabled=\"disabled\"\r\n      :readonly=\"nativeReadonly\"\r\n    />\r\n\r\n    <Transition name=\"zoom-in\" mode=\"out-in\">\r\n      <UIcon\r\n        v-if=\"clearable && model && hovered && !disabled\"\r\n        :class=\"cls.e('clear')\"\r\n        @click.stop=\"clearModelValue\"\r\n      >\r\n        <Close />\r\n      </UIcon>\r\n    </Transition>\r\n\r\n    <span\r\n      v-if=\"$slots.suffix || suffix\"\r\n      :class=\"suffixClass\"\r\n      @click=\"handleSuffixClick\"\r\n    >\r\n      <slot name=\"suffix\">{{ suffix }}</slot>\r\n    </span>\r\n  </div>\r\n\r\n  <span v-else>\r\n    {{ generateModel || FORM_EMPTY_CONTENT }}\r\n  </span>\r\n</template>\r\n\r\n<script lang=\"tsx\" setup>\r\nimport type {\r\n  InputEmits,\r\n  InputProps,\r\n  _InputExposed\r\n} from '@ui/types/components/input'\r\nimport {\r\n  useFocus,\r\n  useFormComponent,\r\n  useFormFallbackProps\r\n} from '@ui/compositions'\r\nimport { bem } from '@ui/utils'\r\nimport { computed, getCurrentInstance, ref, shallowRef, nextTick } from 'vue'\r\nimport { Close } from 'icon-ultra'\r\nimport { UIcon } from '../icon'\r\nimport { FORM_EMPTY_CONTENT } from '@ui/shared'\r\n\r\ndefineOptions({\r\n  name: 'Input'\r\n})\r\n\r\nconst props = withDefaults(defineProps<InputProps>(), {\r\n  placeholder: '请输入',\r\n  clearable: true,\r\n  disabled: undefined,\r\n  readonly: undefined\r\n})\r\n\r\nconst emit = defineEmits<InputEmits>()\r\n\r\nconst model = defineModel<string>()\r\n\r\nconst inst = getCurrentInstance()\r\n\r\nconst cls = bem('input')\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled, readonly } = useFormFallbackProps([\r\n  formProps ?? {},\r\n  props\r\n])\r\n\r\nconst { focus, handleBlur, handleFocus } = useFocus(focused => {\r\n  focused ? emit('focus') : emit('blur')\r\n})\r\n\r\nconst inputClass = computed(() => {\r\n  return [\r\n    cls.b,\r\n    cls.m(size.value),\r\n    bem.is('disabled', disabled.value),\r\n    bem.is('readonly', readonly.value),\r\n    bem.is('focus', focus.value)\r\n  ]\r\n})\r\n\r\nconst prefixClass = [\r\n  cls.e('prefix'),\r\n  bem.is('clickable', !!inst?.vnode.props?.['onPrefix:click'])\r\n]\r\n\r\nconst suffixClass = [\r\n  cls.e('suffix'),\r\n  bem.is('clickable', !!inst?.vnode.props?.['onSuffix:click'])\r\n]\r\n\r\nlet isComposing = false\r\n\r\nfunction handleCompositionStart() {\r\n  isComposing = true\r\n}\r\n\r\nfunction handleCompositionEnd(e: Event) {\r\n  isComposing = false\r\n  handleInput(e)\r\n}\r\n\r\nconst handleInput = (e: Event) => {\r\n  if (isComposing) return\r\n  const inputVal = (e.target as HTMLInputElement).value\r\n  emit('native:input', e)\r\n  if (props.pattern) {\r\n    const valid = props.pattern.test(inputVal)\r\n    if (!valid) {\r\n      nextTick(() => {\r\n        ;(e.target as HTMLInputElement).value = model.value ?? ''\r\n      })\r\n      return\r\n    }\r\n  }\r\n  model.value = inputVal\r\n}\r\n\r\nconst handlePrefixClick = () => {\r\n  emit('prefix:click', model.value)\r\n}\r\n\r\nconst handleSuffixClick = () => {\r\n  emit('suffix:click', model.value)\r\n}\r\n\r\nconst clearModelValue = () => {\r\n  model.value = ''\r\n  emit('clear')\r\n}\r\n\r\nconst hovered = ref(false)\r\nconst handleMouseEnter = () => {\r\n  hovered.value = true\r\n}\r\n\r\nconst handleMouseLeave = () => {\r\n  hovered.value = false\r\n}\r\n\r\nconst handleChange = (e: Event) => {\r\n  emit('change', (e.target as HTMLInputElement).value)\r\n}\r\n\r\nconst el = shallowRef<HTMLInputElement>()\r\n\r\nconst generateModel = computed(() => {\r\n  return props.prefix ? `${props.prefix}${model.value}` : model.value\r\n})\r\n\r\ndefineExpose<_InputExposed>({\r\n  el\r\n})\r\n</script>\r\n", "import { debounce } from 'cat-kit/fe'\r\nimport { computed, shallowRef, watch, type ModelRef } from 'vue'\r\n\r\ninterface Options {\r\n  model: ModelRef<string | undefined>\r\n  props: {\r\n    suggestions?: string[] | ((qs?: string) => Promise<string[]> | string[])\r\n  }\r\n}\r\n\r\nexport function useSuggestions(options: Options) {\r\n  const { model, props } = options\r\n  const remoteSuggestions = shallowRef<string[]>([])\r\n  const filteredSuggestions = shallowRef<string[]>([])\r\n  // 追加的建议\r\n  const appendedSuggestions = shallowRef<string[]>([])\r\n\r\n  const suggestions = computed(() => {\r\n    const { suggestions } = props\r\n    if (!suggestions) return appendedSuggestions.value\r\n\r\n    if (typeof suggestions === 'function') {\r\n      return remoteSuggestions.value.concat(appendedSuggestions.value)\r\n    }\r\n\r\n    return filteredSuggestions.value\r\n  })\r\n\r\n  // 缓存的建议\r\n  const cachedSuggestion = computed(() => {\r\n    if (!model.value) return undefined\r\n    return suggestions.value.includes(model.value) ? undefined : model.value\r\n  })\r\n\r\n  watch(\r\n    [model, () => props.suggestions],\r\n    debounce(async ([v, propsSuggestions]) => {\r\n      if (typeof propsSuggestions === 'function') {\r\n        const suggestions = await propsSuggestions(v)\r\n        remoteSuggestions.value = suggestions ?? []\r\n      } else {\r\n        if (!v) {\r\n          filteredSuggestions.value = [\r\n            ...(propsSuggestions ?? []),\r\n            ...appendedSuggestions.value\r\n          ]\r\n          return\r\n        }\r\n        filteredSuggestions.value = [\r\n          ...(propsSuggestions?.filter(item => item.includes(v)) ?? []),\r\n          ...appendedSuggestions.value.filter(item => item.includes(v))\r\n        ]\r\n      }\r\n    }, 200),\r\n    {\r\n      immediate: true\r\n    }\r\n  )\r\n\r\n  return {\r\n    suggestions,\r\n    cachedSuggestion,\r\n    appendedSuggestions\r\n  }\r\n}\r\n", "<template>\r\n  <u-dropdown\r\n    v-if=\"!readonly\"\r\n    trigger=\"click\"\r\n    :class=\"[cls.b, cls.m(size), bem.is('disabled', disabled)]\"\r\n    ref=\"dropdownRef\"\r\n    v-model:visible=\"dropdownVisible\"\r\n    :content-class=\"[cls.e('panel'), cls.em('panel', size)]\"\r\n    :disabled=\"disabled\"\r\n  >\r\n    <!-- 触发 -->\r\n    <template #trigger>\r\n      <!-- 单选 -->\r\n      <u-input\r\n        :size=\"size\"\r\n        :disabled=\"disabled\"\r\n        :placeholder=\"placeholder\"\r\n        :clearable=\"clearable\"\r\n        v-model=\"model\"\r\n        @keyup.enter=\"\r\n          cachedSuggestion && handleSelectCachedOption(cachedSuggestion)\r\n        \"\r\n      >\r\n      </u-input>\r\n    </template>\r\n\r\n    <!-- 下拉内容 -->\r\n    <template #content>\r\n      <u-scroll tag=\"ul\" :class=\"cls.e('options')\" ref=\"scrollRef\">\r\n        <li\r\n          v-if=\"cachedSuggestion\"\r\n          :class=\"[optionClass]\"\r\n          @click=\"handleSelectCachedOption(cachedSuggestion)\"\r\n          v-ripple=\"cls.e('ripple')\"\r\n          :data-key=\"cachedSuggestion\"\r\n          :key=\"cachedSuggestion\"\r\n        >\r\n          <slot v-bind=\"{ option: cachedSuggestion, index: -1 }\">\r\n            {{ cachedSuggestion }}\r\n          </slot>\r\n        </li>\r\n\r\n        <li\r\n          v-for=\"(option, index) of suggestions\"\r\n          :class=\"[optionClass, bem.is('selected', option === model)]\"\r\n          @click=\"handleSelect(option)\"\r\n          v-ripple=\"cls.e('ripple')\"\r\n          :data-key=\"option\"\r\n          :key=\"option\"\r\n        >\r\n          <slot v-bind=\"{ option, index }\">\r\n            {{ option }}\r\n          </slot>\r\n        </li>\r\n      </u-scroll>\r\n    </template>\r\n  </u-dropdown>\r\n\r\n  <span v-else>{{ model || FORM_EMPTY_CONTENT }}</span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { shallowRef, watch } from 'vue'\r\nimport type {\r\n  AutoCompleteEmits,\r\n  AutoCompleteProps,\r\n  _AutoCompleteExposed\r\n} from '@ui/types/components/auto-complete'\r\nimport { bem } from '@ui/utils'\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\nimport { UDropdown, type DropdownExposed } from '../dropdown'\r\nimport { UScroll, type ScrollExposed } from '../scroll'\r\nimport { vRipple } from '@ui/directives'\r\nimport { UInput } from '../input'\r\nimport { useSuggestions } from './use-suggestions'\r\nimport { FORM_EMPTY_CONTENT } from '@ui/shared'\r\n\r\ndefineOptions({\r\n  name: 'AutoComplete',\r\n  inheritAttrs: false\r\n})\r\n\r\nconst props = withDefaults(defineProps<AutoCompleteProps>(), {\r\n  placeholder: '请输入',\r\n  clearable: true,\r\n  disabled: undefined,\r\n  readonly: undefined\r\n})\r\n\r\nconst emit = defineEmits<AutoCompleteEmits>()\r\n\r\ndefineSlots<{\r\n  default: (props: { option: string; index: number }) => any\r\n}>()\r\n\r\n// 当前输入框的值\r\nconst model = defineModel<string>()\r\n\r\nconst cls = bem('auto-complete')\r\n\r\nconst optionClass = cls.e('option')\r\n\r\nconst { formProps } = useFormComponent()\r\nconst { size, disabled, readonly } = useFormFallbackProps(\r\n  [formProps ?? {}, props],\r\n  {\r\n    size: 'default',\r\n    disabled: false,\r\n    readonly: false\r\n  }\r\n)\r\n\r\nconst dropdownRef = shallowRef<DropdownExposed>()\r\nconst scrollRef = shallowRef<ScrollExposed>()\r\n\r\nwatch(scrollRef, scroll => {\r\n  if (scroll && model.value !== undefined) {\r\n    const li = scroll.contentRef!.querySelector(`li[data-key=\"${model.value}\"]`)\r\n    li?.scrollIntoView({ block: 'nearest', inline: 'start' })\r\n  }\r\n})\r\n\r\nconst { suggestions, appendedSuggestions, cachedSuggestion } = useSuggestions({\r\n  props,\r\n  model\r\n})\r\n\r\n/** 选中选项 */\r\nconst handleSelect = (option: string) => {\r\n  model.value = option\r\n  dropdownRef.value?.close()\r\n  saveCache()\r\n  emit('select', option)\r\n}\r\n\r\nfunction saveCache() {\r\n  if (!model.value) return\r\n  appendedSuggestions.value = [...appendedSuggestions.value, model.value]\r\n}\r\n\r\nconst handleSelectCachedOption = (cachedOption: string) => {\r\n  appendedSuggestions.value = [...appendedSuggestions.value, cachedOption]\r\n  dropdownRef.value?.close()\r\n}\r\n\r\nconst dropdownVisible = shallowRef(false)\r\n</script>\r\n", "<template>\r\n  <div :class=\"cls.b\">\r\n    <slot />\r\n    <sup :class=\"classList\" ref=\"supRef\" v-if=\"!hidden\">{{ badgeValue }}</sup>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, nextTick, onMounted, shallowRef, watch } from 'vue'\r\nimport type { BadgeProps } from '@ui/types/components/badge'\r\nimport { bem, setStyles } from '@ui/utils'\r\nimport { useFallbackProps } from '@ui/compositions'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\n\r\ndefineOptions({\r\n  name: 'Badge'\r\n})\r\n\r\nconst cls = bem('badge')\r\n\r\nconst props = withDefaults(defineProps<BadgeProps>(), {\r\n  max: 99\r\n})\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst badgeValue = computed(() => {\r\n  if (props.dot) return ''\r\n  return props.value! > props.max ? `${props.max}+` : props.value\r\n})\r\n\r\nconst classList = computed(() => {\r\n  return [\r\n    cls.e('sup'),\r\n    props.type && cls.m('color-' + props.type),\r\n    cls.m(size.value),\r\n    bem.is('dot', props.dot)\r\n  ]\r\n})\r\n\r\nconst supRef = shallowRef<HTMLElement>()\r\n\r\nconst setPosition = () => {\r\n  if (supRef.value) {\r\n    const { width, height } = supRef.value.getBoundingClientRect()\r\n    setStyles(supRef.value, {\r\n      transform: `translate(-${width / 2}px, -${height / 2}px)`,\r\n      backgroundColor: props.color && props.color\r\n    })\r\n  }\r\n}\r\n\r\nwatch(\r\n  () => size.value,\r\n  () => {\r\n    nextTick(() => {\r\n      setPosition()\r\n    })\r\n  }\r\n)\r\n\r\nonMounted(() => {\r\n  setPosition()\r\n})\r\n</script>\r\n", "import type { BEM } from \"@ui/utils\"\r\nimport type { InjectionKey } from \"vue\"\r\n\r\ninterface LayoutContext {\r\n  cls: BEM<'layout'>\r\n\r\n}\r\n\r\nexport const LayoutDIKey: InjectionKey<LayoutContext> = Symbol('LayoutDIKey')", "<template>\r\n  <div\r\n    :class=\"className\"\r\n    :style=\"{\r\n      transform: `translate3d(${offsets.x}, ${offsets.y}, 0)`\r\n    }\"\r\n    ref=\"resizerRef\"\r\n  >\r\n    <u-icon :size=\"10\"> <Move /> </u-icon>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, inject, shallowReactive, shallowRef } from 'vue'\r\nimport { LayoutDIKey } from './di'\r\nimport { bem } from '@ui/utils'\r\nimport { useDrag } from '@ui/compositions'\r\nimport { Move } from 'icon-ultra'\r\nimport { UIcon } from '../icon'\r\n\r\ndefineOptions({\r\n  name: 'LayoutResizer'\r\n})\r\n\r\nconst props = defineProps<{\r\n  /** 是否横向 */\r\n  horizontal?: boolean\r\n  /** 默认偏移量 */\r\n  offset?: number\r\n}>()\r\n\r\nconst emit = defineEmits<{\r\n  (e: 'resize', offset: number): void\r\n  (e: 'resize-start'): void\r\n  (e: 'resize-end'): void\r\n}>()\r\n\r\nconst { cls } = inject(LayoutDIKey)!\r\n\r\nconst className = computed(() => {\r\n  return [cls.e('resizer'), bem.is('horizontal', props.horizontal)]\r\n})\r\n\r\nconst resizerRef = shallowRef<HTMLDivElement>()\r\n\r\nlet offset = props.offset ?? 0\r\nconst offsets = shallowReactive({\r\n  x: props.horizontal ? '0' : offset + 'px',\r\n  y: props.horizontal ? offset + 'px' : '0'\r\n})\r\nlet currentOffset = 0\r\nuseDrag({\r\n  target: resizerRef,\r\n  onDragStart() {\r\n    currentOffset = offset\r\n    emit('resize-start')\r\n  },\r\n  onDrag(x, y) {\r\n    if (!props.horizontal) {\r\n      offset = currentOffset + x\r\n      offsets.x = offset + 'px'\r\n      emit('resize', x)\r\n    } else {\r\n      offset = currentOffset + y\r\n      offsets.y = offset + 'px'\r\n      emit('resize', y)\r\n    }\r\n  },\r\n  onDragEnd() {\r\n    emit('resize-end')\r\n  }\r\n})\r\n\r\ndefineExpose({\r\n  update(_offset: number) {\r\n    offset = _offset\r\n    if (!props.horizontal) {\r\n      offsets.x = offset + 'px'\r\n    } else {\r\n      offsets.y = offset + 'px'\r\n    }\r\n  }\r\n})\r\n</script>\r\n", "<template>\r\n  <component :is=\"tag\" :class=\"cls.b\" :style=\"style\" ref=\"containerRef\">\r\n    <slot />\r\n\r\n    <!-- 竖向调节 -->\r\n    <ULayoutResizer\r\n      v-for=\"(offset, index) of resizerOffsets\"\r\n      :offset=\"offset\"\r\n      :key=\"index\"\r\n      ref=\"resizerRefs\"\r\n      direction=\"vertical\"\r\n      @resize=\"handleResize($event, index)\"\r\n      @resize-start=\"handleStartResize(index)\"\r\n    >\r\n    </ULayoutResizer>\r\n\r\n    <!-- 横向调节 -->\r\n    <!-- <ULayoutResizer\r\n      v-for=\"item in horizontalResizerList\"\r\n      :key=\"item\"\r\n      direction=\"horizontal\"\r\n    /> -->\r\n  </component>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { LayoutProps } from '@ui/types/components/layout'\r\nimport { bem, withUnit } from '@ui/utils'\r\nimport {\r\n  computed,\r\n  shallowRef,\r\n  type CSSProperties,\r\n  provide,\r\n  watchEffect,\r\n  ref,\r\n  watch,\r\n  nextTick\r\n} from 'vue'\r\nimport ULayoutResizer from './layout-resizer.vue'\r\nimport { LayoutDIKey } from './di'\r\nimport { useResizeObserver } from '@ui/compositions'\r\n\r\ndefineOptions({\r\n  name: 'Layout'\r\n})\r\n\r\nconst props = withDefaults(defineProps<LayoutProps>(), {\r\n  tag: 'div'\r\n})\r\n\r\nconst cls = bem('layout')\r\n\r\nconst templateCols = ref<string[]>([])\r\n\r\nwatchEffect(() => {\r\n  const { cols } = props\r\n  if (!cols) {\r\n    templateCols.value = []\r\n    return\r\n  }\r\n  templateCols.value = typeof cols === 'string' ? cols.split(' ') : cols\r\n})\r\n\r\nconst style = computed<CSSProperties>(() => {\r\n  const { rows, gap, resizable } = props\r\n  return {\r\n    gridTemplateColumns: templateCols.value.join(' '),\r\n    gridTemplateRows: rows\r\n      ? typeof rows === 'string'\r\n        ? rows\r\n        : rows.join(' ')\r\n      : '',\r\n    columnGap: resizable ? '10px' : withUnit(gap, 'px')\r\n  }\r\n})\r\n\r\nconst containerRef = shallowRef<HTMLElement>()\r\nconst resizerRefs = shallowRef<InstanceType<typeof ULayoutResizer>[]>([])\r\n\r\nconst resizerOffsets = ref<number[]>([])\r\n\r\nfunction getResizeOffsets() {\r\n  const container = containerRef.value\r\n  if (!props.resizable || !container || !props.cols) {\r\n    return (resizerOffsets.value = [])\r\n  }\r\n\r\n  resizerOffsets.value = templateCols.value.slice(0, -1).map((_, index) => {\r\n    const dom = container.children[index] as HTMLElement\r\n    if (!dom) return 0\r\n    return dom.offsetLeft + dom.offsetWidth\r\n  })\r\n}\r\n\r\nwatch([() => props.resizable, containerRef, () => props.cols], () => {\r\n  nextTick(() => {\r\n    getResizeOffsets()\r\n  })\r\n})\r\n\r\nuseResizeObserver({\r\n  targets: containerRef,\r\n  onResize() {\r\n    getResizeOffsets()\r\n    resizerRefs.value.forEach((r, i) => {\r\n      r.update(resizerOffsets.value![i]!)\r\n    })\r\n  }\r\n})\r\n\r\n// const horizontalResizerList = []\r\n\r\n// const resizing = shallowRef(false)\r\n\r\nlet prevSize = '0'\r\nlet nextSize = '0'\r\nconst handleStartResize = (index: number) => {\r\n  prevSize = templateCols.value[index]!\r\n  nextSize = templateCols.value[index + 1]!\r\n\r\n  if (!prevSize.endsWith('px') && !nextSize.endsWith('px')) {\r\n    const rect =\r\n      containerRef.value?.children[index + 1]?.getBoundingClientRect()\r\n    if (rect) {\r\n      nextSize = rect.width + 'px'\r\n    }\r\n  }\r\n  // resizing.value = true\r\n}\r\nconst handleResize = (offset: number, index: number) => {\r\n  if (prevSize?.endsWith('px')) {\r\n    templateCols.value[index] = `${parseInt(prevSize) + offset}px`\r\n  }\r\n  if (nextSize?.endsWith('px')) {\r\n    templateCols.value[index + 1] = `${parseInt(nextSize) - offset}px`\r\n  }\r\n}\r\n\r\nprovide(LayoutDIKey, {\r\n  cls\r\n})\r\n</script>\r\n", "import type { InjectionKey, ShallowRef } from 'vue'\r\n\r\nexport interface DialogContext {\r\n  visible: ShallowRef<boolean>\r\n}\r\n\r\nexport const DialogDIKey: InjectionKey<DialogContext> = Symbol('DialogDIKey')\r\n", "import {\r\n  computed,\r\n  isReactive,\r\n  nextTick,\r\n  shallowReactive,\r\n  shallowRef,\r\n  watch,\r\n  type ShallowRef\r\n} from 'vue'\r\nimport type { TableRow } from '../table'\r\nimport type { BatchEditEmits, BatchEditProps, TableExposed } from '@ui/types'\r\nimport { Forest, getChainValue, last, safeRun, setChainValue } from 'cat-kit/fe'\r\n\r\ninterface Options {\r\n  props: BatchEditProps\r\n  emit: BatchEditEmits\r\n  tableRef: ShallowRef<TableExposed | undefined>\r\n}\r\n\r\nexport interface BatchEditStates {\r\n  visible: boolean\r\n  type: 'create' | 'update'\r\n  loading: boolean\r\n  row?: TableRow\r\n  /** 父级，只在添加子级时会有值 */\r\n  parentRow?: TableRow\r\n  /** 数据是否已更新 */\r\n  dataUpdated: boolean\r\n}\r\n\r\nexport interface EditReturned {\r\n  state: BatchEditStates\r\n  insertIndexes: ShallowRef<number[]>\r\n  handleSave: () => Promise<void>\r\n  handleClose: () => void\r\n  handleCreate: () => void\r\n  handleDelete: (row: TableRow) => Promise<void>\r\n  handleInsertToNext: (row: TableRow) => void\r\n  handleInsertToPrev: (row: TableRow) => void\r\n  handleInsertChild: (row: TableRow) => void\r\n}\r\n\r\nexport function useEdit(options: Options): EditReturned {\r\n  const { props, emit, tableRef } = options\r\n\r\n  /** 组件状态 */\r\n  const state = shallowReactive<BatchEditStates>({\r\n    visible: false,\r\n    type: 'create',\r\n    loading: false,\r\n    dataUpdated: false\r\n  })\r\n\r\n  const insertIndexes = shallowRef<number[]>([])\r\n\r\n  watch(\r\n    () => state.visible,\r\n    v => {\r\n      if (!v) {\r\n        state.dataUpdated = false\r\n      }\r\n    }\r\n  )\r\n\r\n  /** 是否是用户输入产生的值变更 */\r\n  let changedByUserInput = true\r\n\r\n  watch(\r\n    () => state.row,\r\n    row => {\r\n      props.model?.resetData()\r\n      if (row) {\r\n        state.type = 'update'\r\n        state.visible = true\r\n        changedByUserInput = false\r\n        props.model?.setData(row.data)\r\n        nextTick(() => {\r\n          changedByUserInput = true\r\n        })\r\n      } else {\r\n        state.visible = false\r\n      }\r\n    }\r\n  )\r\n\r\n  const changeCb = (field: string, val: any) => {\r\n    // 检测到为用户变更时，为数据添加一个已更改状态从而显示修改按钮\r\n    if (changedByUserInput) {\r\n      state.dataUpdated = true\r\n    }\r\n\r\n    if (props.quickEdit) {\r\n      state.row && setChainValue(state.row.data, field, val)\r\n    }\r\n  }\r\n\r\n  watch(\r\n    () => props.model,\r\n    (model, oldModel) => {\r\n      if (oldModel) {\r\n        oldModel.offChange(changeCb)\r\n      }\r\n      if (model) {\r\n        model.onChange(changeCb)\r\n      }\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  watch(\r\n    () => props.quickEdit,\r\n    quickEdit => {\r\n      state.row = undefined\r\n      state.type = 'create'\r\n      state.visible = false\r\n      state.dataUpdated = false\r\n      props.model?.resetData()\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  const childrenKey = computed(() => {\r\n    return typeof props.tree === 'string' ? props.tree : 'children'\r\n  })\r\n\r\n  /**\r\n   * 插入数据\r\n   * @param item 数据\r\n   */\r\n  function insert(item: Record<string, any>) {\r\n    const data = [...(props.data ?? [])]\r\n\r\n    if (props.quickEdit) {\r\n      if (!isReactive(item)) {\r\n        item = shallowReactive(item)\r\n      }\r\n    }\r\n\r\n    const parent = Forest.visit(\r\n      data ?? [],\r\n      insertIndexes.value.slice(0, -1),\r\n      childrenKey.value\r\n    )\r\n\r\n    if (parent) {\r\n      const children = parent[childrenKey.value]\r\n      if (!children) {\r\n        parent[childrenKey.value] = [item]\r\n      } else {\r\n        children.splice(last(insertIndexes.value), 0, item)\r\n      }\r\n    } else {\r\n      data.splice(last(insertIndexes.value), 0, item)\r\n    }\r\n\r\n    emit('update:data', data)\r\n\r\n    return item\r\n  }\r\n\r\n  function getInsertData(): Record<string, any> {\r\n    return safeRun(\r\n      () => JSON.parse(JSON.stringify(props.model?.data ?? {})),\r\n      {}\r\n    )\r\n  }\r\n\r\n  async function runCreate(cb: () => void) {\r\n    state.parentRow = undefined\r\n    state.row = undefined\r\n    state.type = 'create'\r\n    props.model?.resetData()\r\n    cb()\r\n\r\n    let item: Record<string, any> | undefined = undefined\r\n    if (props.quickEdit) {\r\n      item = insert(getInsertData())\r\n    }\r\n\r\n    await nextTick()\r\n\r\n    state.visible = true\r\n\r\n    if (item) {\r\n      const row = tableRef.value?.getRowByData(item)\r\n      if (row) {\r\n        state.row = row\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 点击新增按钮\r\n   */\r\n  function handleCreate() {\r\n    const { data } = props\r\n    runCreate(() => {\r\n      insertIndexes.value = [data?.length ?? 0]\r\n    })\r\n  }\r\n\r\n  function handleInsertToPrev(row: TableRow) {\r\n    runCreate(() => {\r\n      insertIndexes.value = [...row.indexes]\r\n    })\r\n  }\r\n\r\n  function handleInsertToNext(row: TableRow) {\r\n    runCreate(() => {\r\n      insertIndexes.value = [...row.indexes.slice(0, -1), row.index + 1]\r\n    })\r\n  }\r\n\r\n  function handleInsertChild(row: TableRow) {\r\n    runCreate(() => {\r\n      state.parentRow = row\r\n      row.expanded = true\r\n\r\n      insertIndexes.value = [...row.indexes, row.children?.length ?? 0]\r\n    })\r\n  }\r\n\r\n  function runWithLoading<Arg extends any[]>(\r\n    fn: (...args: Arg) => Promise<void> | void\r\n  ) {\r\n    return async (...args: Arg) => {\r\n      state.loading = true\r\n      if (state.row) {\r\n        state.row.operating = true\r\n      }\r\n      try {\r\n        await fn.apply(null, args)\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n      state.loading = false\r\n      if (state.row) {\r\n        state.row.operating = false\r\n      }\r\n    }\r\n  }\r\n\r\n  /** 保存 */\r\n  const handleSave = runWithLoading(async () => {\r\n    const { model, saveMethod } = props\r\n\r\n    if (!model) return\r\n\r\n    model.clearValidate()\r\n    const valid = await model.validate()\r\n\r\n    if (!valid) return\r\n\r\n    let item = getInsertData()\r\n    if (saveMethod) {\r\n      const result = await saveMethod(item, state.type, state.parentRow)\r\n      if (result) {\r\n        item = result\r\n      }\r\n    }\r\n\r\n    state.dataUpdated = false\r\n\r\n    // 新增\r\n    if (state.type === 'create') {\r\n      insert(item)\r\n\r\n      return model?.resetData()\r\n    }\r\n    // 更新\r\n    if (state.type === 'update') {\r\n      const { row } = state\r\n      row &&\r\n        model.allKeys.forEach(key => {\r\n          setChainValue(row.data, key, getChainValue(item, key))\r\n        })\r\n    }\r\n  })\r\n\r\n  const handleDelete = runWithLoading(async (row: TableRow) => {\r\n    const { deleteMethod } = props\r\n\r\n    if (deleteMethod) {\r\n      await deleteMethod([row.data])\r\n    }\r\n\r\n    const data = [...(props.data ?? [])]\r\n\r\n    const parent = Forest.visit(\r\n      data,\r\n      row.indexes.slice(0, -1),\r\n      childrenKey.value\r\n    )\r\n\r\n    if (parent) {\r\n      const children = parent[childrenKey.value]\r\n      if (children) {\r\n        children.splice(row.index, 1)\r\n      } else {\r\n        console.error('行路径不正确')\r\n      }\r\n    } else {\r\n      data.splice(row.index, 1)\r\n    }\r\n\r\n    if (state.row === row) {\r\n      state.row = undefined\r\n    }\r\n\r\n    emit('update:data', data)\r\n  })\r\n\r\n  function handleClose() {\r\n    state.visible = false\r\n    state.row = undefined\r\n    state.parentRow = undefined\r\n    props.model?.resetData()\r\n    insertIndexes.value = []\r\n  }\r\n\r\n  return {\r\n    state,\r\n    insertIndexes,\r\n    handleDelete,\r\n    handleInsertChild,\r\n    handleInsertToNext,\r\n    handleInsertToPrev,\r\n    handleCreate,\r\n    handleClose,\r\n    handleSave\r\n  }\r\n}\r\n", "import type {\r\n  BatchEditEmits,\r\n  BatchEditFeature,\r\n  BatchEditProps,\r\n  TableExposed\r\n} from '@ui/types'\r\nimport type { BEM } from '@ui/utils'\r\nimport type { ComputedRef, InjectionKey, ShallowRef } from 'vue'\r\nimport type { EditReturned } from './use-edit'\r\nimport type { FormModel } from '../form'\r\nexport const BatchEditDIKey: InjectionKey<\r\n  {\r\n    cls: BEM<'batch-edit', 'u-'>\r\n    props: BatchEditProps<FormModel>\r\n    emit: BatchEditEmits\r\n    tableRef: ShallowRef<TableExposed | undefined>\r\n    featureSets: ComputedRef<Set<BatchEditFeature>>\r\n  } & EditReturned\r\n> = Symbol('BatchEditDIKey')\r\n", "import { extractNormalVNodes } from '@ui/utils'\r\nimport { defineComponent, isRef, type MaybeRef, createVNode } from 'vue'\r\n\r\n/**\r\n * 生成一个用于设置组件通用属性的组件\r\n * @param props 组件通用的属性\r\n * @returns\r\n */\r\nexport function useComponentProps<T extends Record<string, any>>(\r\n  props: MaybeRef<T & Record<string, any>>\r\n) {\r\n  return defineComponent({\r\n    name: 'ComponentCommonProps',\r\n    inheritAttrs: false,\r\n\r\n    props: {\r\n      /** 渲染一个标准html5标签 */\r\n      tag: {\r\n        type: String\r\n      }\r\n    },\r\n\r\n    setup(componentProps, { slots, attrs }) {\r\n      /**\r\n       * 合并VNode的属性\r\n       */\r\n      const mergeNodesProps = (props: Record<string, any>) => {\r\n        if (!props) {\r\n          console.error('mergeNodesProps期望有1个参数props, 此处为0个')\r\n          return undefined\r\n        }\r\n        const nodes = extractNormalVNodes(slots.default?.() ?? [])\r\n        if (!nodes?.length) return undefined\r\n\r\n        let i = 0\r\n        while (i < nodes.length) {\r\n          const node = nodes[i]!\r\n\r\n          if (!node.props) {\r\n            node.props = {}\r\n          }\r\n          Object.keys(props).forEach(key => {\r\n            // node中已定义\r\n            if (node.props![key] !== undefined) return\r\n            node.props![key] = props[key]\r\n            if (attrs[key] !== undefined) {\r\n              node.props![key] = attrs[key]\r\n            }\r\n          })\r\n          i++\r\n        }\r\n\r\n        return nodes\r\n      }\r\n\r\n      return () => {\r\n        const _props = isRef(props) ? props.value : props\r\n        const nodes = mergeNodesProps(_props)\r\n\r\n        // 如果渲染一个根元素将options中定义的props之外的属性合并到tag中\r\n        if (componentProps.tag) {\r\n          const tagProps = Object.keys(attrs).reduce((acc, cur) => {\r\n            if (!(cur in _props)) {\r\n              acc[cur] = attrs[cur]\r\n            }\r\n            return acc\r\n          }, {})\r\n          return createVNode(componentProps.tag, tagProps, nodes)\r\n        }\r\n        return nodes\r\n      }\r\n    }\r\n  })\r\n}\r\n", "import type { BEM } from '@ui/utils'\r\nimport type { InjectionKey } from 'vue'\r\nimport type { CardProps } from '@ui/types/components/card'\r\n\r\nexport interface CardContext {\r\n  cls: BEM<'card'>\r\n  cardProps: CardProps\r\n}\r\n\r\nexport const CardDIKey: InjectionKey<CardContext> = Symbol('CardDIKey')\r\n", "<template>\r\n  <div :class=\"classList\" :style=\"styles\">\r\n    <slot />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { bem, withUnit } from '@ui/utils'\r\nimport type { CardExposed, CardProps } from '@ui/types/components/card'\r\nimport { computed, provide } from 'vue'\r\nimport { CardDIKey } from './di'\r\nimport { useFormFallbackProps } from '@ui/compositions'\r\n\r\ndefineOptions({\r\n  name: 'Card'\r\n})\r\n\r\nconst props = defineProps<CardProps>()\r\n\r\nconst cls = bem('card')\r\n\r\nconst { size } = useFormFallbackProps([props], { size: 'default' })\r\n\r\nconst classList = computed(() => {\r\n  return [cls.b, cls.m(size.value), bem.is('integrate', props.integrate)]\r\n})\r\n\r\nconst styles = computed(() => {\r\n  return {\r\n    width: withUnit(props.width, 'px')\r\n  }\r\n})\r\n\r\nprovide(CardDIKey, { cls, cardProps: props })\r\n\r\ndefineExpose<CardExposed>({})\r\n</script>\r\n", "<template>\r\n  <div :class=\"classList\">\r\n    <slot> </slot>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, inject } from 'vue'\r\nimport { CardDIKey } from './di'\r\n\r\ndefineOptions({ name: 'CardHeader' })\r\n\r\nconst injected = inject(CardDIKey)\r\nconst { cls } = injected || {}\r\n\r\nconst classList = computed(() => {\r\n  const ret: string[] = []\r\n  if (cls) {\r\n    ret.push(cls.e('header'))\r\n  }\r\n\r\n  return ret\r\n})\r\n\r\nif (!injected) {\r\n  console.warn('CardHeader组件仅能在Card组件中使用')\r\n}\r\n</script>\r\n", "import type { InjectionKey, ShallowRef, Slots } from 'vue'\r\nimport type {\r\n  TableProps,\r\n  TableColumnSlotsScope,\r\n  TableColumnRenderContext,\r\n  TableRow\r\n} from '@ui/types/components/table'\r\nimport type { BEM } from '@ui/utils'\r\nimport type { ColumnConfig, ColumnNode } from './use-columns'\r\nimport type { RenderReturn } from '@ui/types/helper'\r\nimport type { VirtualReturned } from '@ui/compositions'\r\n\r\nexport const TableDIKey: InjectionKey<\r\n  {\r\n    /** 表格属性 */\r\n    tableProps: TableProps\r\n    /** 表格插槽 */\r\n    tableSlots: Slots\r\n    /** 类 */\r\n    cls: BEM<'table'>\r\n    /** 行 */\r\n    rows: ShallowRef<TableRow[]>\r\n    /** 结构化列 */\r\n    columnConfig: ColumnConfig\r\n    /** 事件处理方法 */\r\n    handleRowClick: (row: TableRow) => void\r\n    /** 表格列插槽node */\r\n    getColumnSlotsNode: (\r\n      ctx: TableColumnSlotsScope | TableColumnRenderContext\r\n    ) => RenderReturn\r\n    /** 表头插槽node */\r\n    getHeaderSlotsNode: (ctx: { column: ColumnNode }) => RenderReturn\r\n\r\n    /** 展开/隐藏子节点 */\r\n    toggleTreeRowExpand: (row: TableRow<Record<string, any>>) => void\r\n\r\n    /** 获取单元格的类 */\r\n    getCellClass: (column: ColumnNode) => string\r\n\r\n    /** 获取单元格上下文 */\r\n    getCellCtx: (\r\n      row: TableRow,\r\n      column: ColumnNode\r\n    ) => TableColumnSlotsScope | TableColumnRenderContext\r\n  } & VirtualReturned\r\n> = Symbol('TableDIKey')\r\n", "import { type Ref, ref, watch, shallowRef } from 'vue'\r\n\r\ninterface ModelOptions<\r\n  Props extends Record<string, unknown>,\r\n  Name extends keyof Props,\r\n  Local extends boolean = true\r\n> {\r\n  /** 组件定义的属性 */\r\n  props: Props\r\n  /** 属性名称 */\r\n  propName?: Name\r\n  /** 事件触发函数 */\r\n  emit: (...args: any[]) => void\r\n  /** 是否为本地模式, 默认为true, 本地模式允许组件不受控来触发视图更新 */\r\n  local?: Local\r\n  /** 默认值 */\r\n  defaultValue?: Props[Name]\r\n  /**\r\n   * 是否浅层响应\r\n   * @default false\r\n   */\r\n  shallow?: boolean\r\n}\r\n\r\n/**\r\n * 返回一个基于提供的选项的响应式模型值。\r\n * 该方法在将来可能会被替代, 目前使用是为了类型提示可用\r\n * 如果 local 选项为true, 模型值将是响应式的，并与属性值同步。\r\n * 如果 local 选项为 false，则模型值将是一个代理对象，具有 getter 和 setter。当值发生更改时，它会触发一个更新事件。\r\n * @param options - 选项\r\n * @returns - 一个模型值\r\n */\r\n\r\nexport function useModel<\r\n  Props extends Record<string, any>,\r\n  Name extends keyof Props = 'modelValue'\r\n>(options: ModelOptions<Props, Name, true>): Ref<Props[Name]>\r\nexport function useModel<\r\n  Props extends Record<string, any>,\r\n  Name extends keyof Props = 'modelValue'\r\n>(\r\n  options: ModelOptions<Props, Name, false>\r\n): {\r\n  __v_isRef: boolean\r\n  value: Props[Name]\r\n}\r\nexport function useModel<\r\n  Props extends Record<string, any>,\r\n  Name extends keyof Props = 'modelValue',\r\n  Local extends boolean = true\r\n>(options: ModelOptions<Props, Name, Local>): any {\r\n\r\n  const {\r\n    props,\r\n    propName = 'modelValue',\r\n    emit,\r\n    local = true,\r\n    defaultValue,\r\n    shallow = false\r\n  } = options\r\n\r\n  if (local) {\r\n    const _value = props[propName] ?? defaultValue\r\n    const r = shallow ? shallowRef : ref\r\n    // 创建一个响应式对象\r\n    const value: Ref<Props[Name] | undefined> =\r\n      _value !== undefined ? r(_value) : r()\r\n\r\n    // 监听属性的变更\r\n    watch(\r\n      () => props[propName],\r\n      v => {\r\n        value.value = v\r\n      }\r\n    )\r\n\r\n    watch(value, v => {\r\n      v !== props[propName] && emit(`update:${propName as string}`, v)\r\n    })\r\n\r\n    return value\r\n  }\r\n\r\n  // 创建一个拥有getter和setter的对象\r\n  const value = {\r\n    __v_isRef: true,\r\n\r\n    get value(): Props[Name] {\r\n      return props[propName] as Props[Name]\r\n    },\r\n\r\n    set value(v: Props[Name]) {\r\n      emit(`update:${propName as string}`, v)\r\n    }\r\n  }\r\n\r\n  return value\r\n}", "import { TreeNode } from 'cat-kit/fe'\r\nimport { isReactive, shallowReactive } from 'vue'\r\n\r\nexport class TableRowNode<\r\n  Data extends Record<string, any> = Record<string, any>\r\n> extends TreeNode<Data> {\r\n  /** 索引路径 */\r\n  get indexes(): number[] {\r\n    const isVirtualRoot = this.depth === 0 && !this.isLeaf\r\n    if (isVirtualRoot) return []\r\n    if (!this.parent) return [this.index]\r\n    if (this.depth === 1) return [this.index]\r\n    return this.parent.indexes.concat(this.index)\r\n  }\r\n\r\n  /** 是否操作中 */\r\n  operating = false\r\n\r\n  /** 是否展开 */\r\n  expanded = false\r\n\r\n  /** 是否为当前的点击行 */\r\n  isCurrent = false\r\n\r\n  /** 是否选中 */\r\n  checked = false\r\n\r\n  uid: number | string\r\n\r\n  override children?: TableRowNode<Data>[] = undefined\r\n\r\n  override parent: TableRowNode<Data> | null = null\r\n\r\n  /**\r\n   *\r\n   * @param data 一个普通对象或者一个响应式对象\r\n   * @param index 索引值\r\n   * @param rowKey 行唯一标识\r\n   * @returns\r\n   */\r\n  constructor(options: { data: Data; index: number; uid: number | string }) {\r\n    const { data, index, uid } = options\r\n\r\n    if (!data) {\r\n      super(data, index)\r\n    } else {\r\n      super(isReactive(data) ? data : shallowReactive(data), index)\r\n    }\r\n    this.uid = uid\r\n    return shallowReactive(this)\r\n  }\r\n}\r\n", "import { useModel } from '@ui/compositions'\r\nimport type {\r\n  TableEmits,\r\n  TableProps,\r\n  TableRow\r\n} from '@ui/types/components/table'\r\nimport { Forest, getChainValue } from 'cat-kit/fe'\r\nimport { shallowRef, watch } from 'vue'\r\nimport { TableRowNode } from './row-node'\r\n\r\ninterface Options {\r\n  props: TableProps\r\n  emit: TableEmits\r\n}\r\n\r\nexport function useRows(options: Options) {\r\n  const { props, emit } = options\r\n\r\n  /** 所有可见的行 */\r\n  const rows = shallowRef<TableRow[]>([])\r\n  /** 行树 */\r\n  const rowForest = shallowRef<Forest<TableRow>>()\r\n\r\n  let uid = 0\r\n\r\n  const currentRow = useModel({\r\n    props,\r\n    emit,\r\n    propName: 'currentRow',\r\n    shallow: true\r\n  })\r\n\r\n  watch(currentRow, (row, oldRow) => {\r\n    if (oldRow) {\r\n      oldRow.isCurrent = false\r\n    }\r\n    if (row) {\r\n      row.isCurrent = true\r\n    }\r\n  })\r\n\r\n  watch(rows, rows => emit('update:rows', rows))\r\n  watch(rowForest, forest => emit('update:forest', forest))\r\n\r\n  // 用于优化增删改时的性能\r\n  // 原理：vue的组件在属性发生改变时会重新渲染，这个就是为了让数据保持一致\r\n  let rowDicts = new WeakMap<Record<string, any>, TableRow>()\r\n  let tempRowDicts: null | WeakMap<Record<string, any>, TableRow> = null\r\n\r\n  const getRowUID = props.rowKey\r\n    ? (rowData: Record<string, any>) =>\r\n        rowData && getChainValue(rowData, props.rowKey!)\r\n    : () => uid++\r\n\r\n  const createRow = (data: Record<string, any>, index: number) => {\r\n    const existRow = data ? rowDicts.get(data) : undefined\r\n    if (existRow) {\r\n      existRow.index = index\r\n      return existRow\r\n    } else {\r\n      return new TableRowNode({\r\n        data,\r\n        index,\r\n        uid: getRowUID(data)\r\n      })\r\n    }\r\n  }\r\n\r\n  function getRows(data: Record<string, any>[]) {\r\n    let result: TableRow[] = []\r\n    let i = 0\r\n    tempRowDicts = new WeakMap()\r\n\r\n    while (i < data.length) {\r\n      const dataItem = data[i]!\r\n      const row = createRow(dataItem, i)\r\n      result.push(row)\r\n      tempRowDicts.set(dataItem, row)\r\n      i++\r\n    }\r\n\r\n    rowDicts = tempRowDicts\r\n    tempRowDicts = null\r\n    return result\r\n  }\r\n\r\n  function getRowForest(data: Record<string, any>[]) {\r\n    tempRowDicts = new WeakMap()\r\n    const ret = Forest.create(data, {\r\n      createNode(val, index) {\r\n        const row = createRow(val, index)\r\n        if (props.defaultExpandAll) {\r\n          row.expanded = true\r\n        }\r\n        val && tempRowDicts!.set(val, row)\r\n        return row\r\n      },\r\n      childrenKey: typeof props.tree === 'string' ? props.tree : 'children'\r\n    })\r\n\r\n    rowDicts = tempRowDicts\r\n    tempRowDicts = null\r\n\r\n    return ret\r\n  }\r\n\r\n  watch(\r\n    [() => props.data, () => props.tree, () => props.defaultExpandAll],\r\n    ([data, tree]) => {\r\n      if (!data?.length) {\r\n        rows.value = []\r\n        rowDicts = new WeakMap()\r\n        rowForest.value = undefined\r\n        return\r\n      }\r\n\r\n      if (!tree) {\r\n        rowForest.value = undefined\r\n        rows.value = getRows(data)\r\n      } else {\r\n        rowForest.value = getRowForest(data)\r\n        getFlattedRows()\r\n      }\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  function getFlattedRows() {\r\n    if (!rowForest.value) return\r\n    const result: TableRow[] = []\r\n\r\n    rowForest.value?.dft(node => {\r\n      if (node.parent?.expanded || node.depth === 1) {\r\n        result.push(node)\r\n        return true\r\n      }\r\n      return false\r\n    })\r\n\r\n    rows.value = result\r\n  }\r\n\r\n  function toggleTreeRowExpand(node: TableRow) {\r\n    node.expanded = !node.expanded\r\n    getFlattedRows()\r\n  }\r\n\r\n  const allExpanded = shallowRef(props.defaultExpandAll ?? false)\r\n  function toggleAllTreeRowExpand() {\r\n    allExpanded.value = !allExpanded.value\r\n    rowForest.value?.dft(node => {\r\n      node.expanded = allExpanded.value\r\n    })\r\n    getFlattedRows()\r\n  }\r\n\r\n  const handleRowClick = (row: TableRow) => {\r\n    emit('row-click', row)\r\n\r\n    if (row === currentRow.value) {\r\n      currentRow.value = undefined\r\n    } else {\r\n      currentRow.value = row\r\n    }\r\n  }\r\n\r\n  function getRowByData(data: Record<string, any>) {\r\n    return rowDicts.get(data)\r\n  }\r\n\r\n  return {\r\n    /** 数据树 */\r\n    rowForest,\r\n\r\n    /** 数据行 */\r\n    rows,\r\n    /**\r\n     * 切换节点的显示隐藏\r\n     * @param node 节点\r\n     */\r\n    toggleTreeRowExpand,\r\n\r\n    /** 所有树形节点是否展开 */\r\n    allExpanded,\r\n    /** 切换所有树形节点的显示隐藏 */\r\n    toggleAllTreeRowExpand,\r\n\r\n    /** 行点击 */\r\n    handleRowClick,\r\n\r\n    /** 通过数据获取表格行 */\r\n    getRowByData\r\n  }\r\n}\r\n", "import type {\r\n  TableColumn,\r\n  TableColumnAlign,\r\n  TableProps\r\n} from '@ui/types/components/table'\r\nimport { Forest, Tree, TreeNode, debounce, last } from 'cat-kit/fe'\r\nimport {\r\n  computed,\r\n  createVNode,\r\n  reactive,\r\n  shallowReactive,\r\n  shallowRef,\r\n  watch,\r\n  type ComputedRef,\r\n  type ShallowRef\r\n} from 'vue'\r\nimport { UButton } from '../button'\r\nimport { ArrowRight } from 'icon-ultra'\r\nimport { UIcon } from '../icon'\r\nimport { type BEM } from '@ui/utils'\r\n\r\n/**\r\n * 定义表格列\r\n * @param columns 表格列\r\n */\r\nexport function defineTableColumns(\r\n  columns: TableColumn[],\r\n  commonProps?: Partial<Pick<TableColumn, 'align' | 'minWidth'>>\r\n) {\r\n  columns.forEach(col => {\r\n    Tree.dft(col, node => {\r\n      for (const key in commonProps) {\r\n        if (node[key] !== undefined) continue\r\n        node[key] = commonProps[key]\r\n      }\r\n\r\n      // 当列没有定义任何宽度时给叶子节点一个最小宽度\r\n      if (\r\n        !node.children &&\r\n        node.width === undefined &&\r\n        node.minWidth === undefined\r\n      ) {\r\n        node.minWidth = 100\r\n      }\r\n    })\r\n  })\r\n  return columns\r\n}\r\n\r\nexport class ColumnNode extends TreeNode<TableColumn> {\r\n  children?: ColumnNode[] | undefined\r\n  parent: ColumnNode | null = null\r\n  /** 叶子节点数量 */\r\n  leafs?: number\r\n\r\n  get keySuffix(): string {\r\n    if (!this.parent) return ''\r\n    if (this.depth === 1) return `${this.index}`\r\n    return this.parent.keySuffix + `-${this.index}`\r\n  }\r\n\r\n  /** 列key */\r\n  get key(): string {\r\n    return this.data.key\r\n  }\r\n  set key(val) {\r\n    this.data.key = val\r\n  }\r\n  /** 列名 */\r\n  get name(): string {\r\n    return this.data.name\r\n  }\r\n  set name(val) {\r\n    this.data.name = val\r\n  }\r\n\r\n  /**\r\n   * 列对齐方式\r\n   * @default 'left'\r\n   */\r\n  get align(): TableColumnAlign {\r\n    return this.data.align ?? 'left'\r\n  }\r\n  set align(val) {\r\n    this.data.align = val\r\n  }\r\n\r\n  /** 宽度 */\r\n  get width(): number | undefined {\r\n    return this.data.width\r\n  }\r\n  set width(val) {\r\n    this.data.width = val\r\n  }\r\n  /** 最小宽度 */\r\n  get minWidth(): number | undefined {\r\n    return this.data.minWidth\r\n  }\r\n  set minWidth(val) {\r\n    this.data.minWidth = val\r\n  }\r\n\r\n  /** 列固定方向 */\r\n  get fixed(): 'left' | 'right' | undefined {\r\n    if (this.depth > 1) return\r\n    return this.data.fixed\r\n  }\r\n  set fixed(val) {\r\n    this.data.fixed = val\r\n  }\r\n\r\n  /** 是否是左侧的最后一个固定列 */\r\n  get isLastFixed(): boolean {\r\n    return this.data.isLastFixed ?? false\r\n  }\r\n\r\n  /** 是否是右侧的第一个固定列 */\r\n  get isFirstFixed(): boolean {\r\n    return this.data.isFirstFixed ?? false\r\n  }\r\n\r\n  style: Record<string, number> = reactive({})\r\n\r\n  constructor(val: TableColumn, index: number) {\r\n    super(val ? shallowReactive(val) : val, index)\r\n  }\r\n}\r\n\r\nexport interface ColumnConfig {\r\n  /** 表头 */\r\n  headers: ComputedRef<ColumnNode[][]>\r\n\r\n  /**\r\n   *  body列, 在body中使用\r\n   */\r\n  columns: ShallowRef<ColumnNode[]>\r\n\r\n  /** 所有列 */\r\n  allColumns: ShallowRef<ColumnNode[]>\r\n\r\n  /** 第一列 */\r\n  expandColumn: ShallowRef<ColumnNode | undefined>\r\n\r\n  /**\r\n   * 更新列的样式\r\n   * @description 在尺寸变更时重新计算固定列的宽度和偏移量\r\n   */\r\n  updateStylesOfColumns: () => void\r\n}\r\n\r\ninterface Options {\r\n  props: TableProps\r\n  cls: BEM<'table'>\r\n  colgroupRef: ShallowRef<HTMLElement | undefined>\r\n  /** 创建复选框 */\r\n  createCheckColumn: () => TableColumn\r\n  createSelectColumn: () => TableColumn\r\n  toggleAllTreeRowExpand: () => void\r\n}\r\n\r\nexport function useColumns(options: Options): ColumnConfig {\r\n  const {\r\n    props,\r\n    createCheckColumn,\r\n    createSelectColumn,\r\n    colgroupRef,\r\n    toggleAllTreeRowExpand,\r\n    cls\r\n  } = options\r\n\r\n  /** 前置列 */\r\n  const preColumns = computed<TableColumn[]>(() => {\r\n    const { selectable, checkable, showIndex } = props\r\n\r\n    const columns: TableColumn[] = []\r\n\r\n    if (selectable) {\r\n      columns.push(createSelectColumn())\r\n    } else if (checkable) {\r\n      columns.push(createCheckColumn())\r\n    }\r\n    if (showIndex) {\r\n      columns.push({\r\n        key: '__index__',\r\n        name: '#',\r\n        width: 60,\r\n        align: 'center',\r\n        fixed: 'left',\r\n        render({ row }) {\r\n          return row.index + 1\r\n        }\r\n      })\r\n    }\r\n\r\n    return columns\r\n  })\r\n\r\n  const columnForest = shallowRef<Forest<ColumnNode>>()\r\n\r\n  const renderExpandAll = () =>\r\n    createVNode(\r\n      UButton,\r\n      {\r\n        text: true,\r\n        title: '展开或收起全部',\r\n        class: cls.e('expand-all'),\r\n        type: 'primary',\r\n        size: 'small',\r\n        circle: true,\r\n        onClick: e => {\r\n          e.stopPropagation()\r\n          toggleAllTreeRowExpand()\r\n        }\r\n      },\r\n      () => [createVNode(UIcon, undefined, () => [createVNode(ArrowRight)])]\r\n    )\r\n\r\n  watch(\r\n    [preColumns, () => props.columns, () => props.tree],\r\n    ([preColumns, columns, tree]) => {\r\n      /** 固定到左侧的列 */\r\n      const fixedOnLeft: TableColumn[] = [...preColumns]\r\n\r\n      /** 未固定的列 */\r\n      const unfixed: TableColumn[] = []\r\n      /** 固定到右侧的列 */\r\n      const fixedOnRight: TableColumn[] = []\r\n\r\n      columns?.forEach(column => {\r\n        if (!column.fixed || column.children) {\r\n          column.fixed = undefined\r\n          return unfixed.push(column)\r\n        }\r\n        if (column.fixed === 'left') {\r\n          fixedOnLeft.push(column)\r\n        } else {\r\n          fixedOnRight.push(column)\r\n        }\r\n      })\r\n\r\n      if (last(fixedOnLeft)) {\r\n        last(fixedOnLeft)!.isLastFixed = true\r\n      }\r\n      if (fixedOnRight[0]) {\r\n        fixedOnRight[0].isFirstFixed = true\r\n      }\r\n\r\n      const sortedColumns = [...fixedOnLeft, ...unfixed, ...fixedOnRight]\r\n      const firstColumn = { ...sortedColumns[0] } as TableColumn\r\n      sortedColumns[0] = firstColumn\r\n\r\n      // 树形表格需要给第一列添加展开按钮\r\n      // 因此要重新设置第一列的宽度和对齐方式\r\n      if (!!tree && firstColumn) {\r\n        firstColumn.align = 'left'\r\n        firstColumn.width = firstColumn.width\r\n          ? firstColumn.width + 60\r\n          : undefined\r\n\r\n        const oldNameRender = firstColumn.nameRender\r\n\r\n        firstColumn.nameRender = oldNameRender\r\n          ? ctx => {\r\n              const oldNodes = oldNameRender!(ctx)\r\n              return [\r\n                renderExpandAll(),\r\n                ...(Array.isArray(oldNodes) ? oldNodes : [oldNodes])\r\n              ]\r\n            }\r\n          : ctx => {\r\n              return [renderExpandAll(), firstColumn.name]\r\n            }\r\n      }\r\n\r\n      const result = Forest.create(sortedColumns, {\r\n        createNode(data, index) {\r\n          return new ColumnNode(data, index)\r\n        }\r\n      })\r\n\r\n      // 计算定位位置\r\n      let leftAcc = 0\r\n      fixedOnLeft.some((_, i) => {\r\n        const colNode = result.nodes[i]!\r\n        colNode.style.left = leftAcc\r\n        if (colNode.width === undefined || colNode.width <= 0) {\r\n          return false\r\n        }\r\n        leftAcc += colNode.width\r\n      })\r\n\r\n      let rightAcc = 0\r\n      fixedOnRight.some((_, i) => {\r\n        const colNode = result.nodes[result.nodes.length - 1 - i]!\r\n        colNode.style.right = rightAcc\r\n        if (colNode.width === undefined || colNode.width <= 0) {\r\n          return false\r\n        }\r\n        rightAcc += colNode.width\r\n      })\r\n\r\n      columnForest.value = result\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  const headers = computed(() => {\r\n    const headers: ColumnNode[][] = []\r\n    let currentLayer: ColumnNode[] = []\r\n    let layerDepth = -1\r\n    columnForest.value?.bft(node => {\r\n      if (layerDepth !== node.depth) {\r\n        if (currentLayer.length) {\r\n          headers.push(currentLayer)\r\n        }\r\n        layerDepth = node.depth\r\n        currentLayer = [node]\r\n      } else {\r\n        currentLayer.push(node)\r\n      }\r\n    })\r\n    currentLayer.length && headers.push(currentLayer)\r\n    currentLayer = []\r\n\r\n    // 从叶子节点开始回溯计算每个节点的累计叶子节点数量，叶子节点数量代表表头的宽度\r\n    for (let i = headers.length - 1; i > 0; i--) {\r\n      const header = headers[i]!\r\n\r\n      header.forEach(node => {\r\n        const parent = node.parent!\r\n        if (parent.leafs !== undefined) return\r\n        parent.leafs = parent.children!.reduce((sum, node) => {\r\n          return sum + (node.leafs ?? 1)\r\n        }, 0)\r\n      })\r\n    }\r\n\r\n    return headers\r\n  })\r\n\r\n  /** 除展开按钮之外的列 */\r\n  const columns = shallowRef<ColumnNode[]>([])\r\n\r\n  /** 所有叶子节点 */\r\n  const allColumns = shallowRef<ColumnNode[]>([])\r\n\r\n  const expandColumn = shallowRef<ColumnNode>()\r\n\r\n  // 监听列的变化\r\n  watch(\r\n    [columnForest, () => props.tree],\r\n    ([forest]) => {\r\n      const _columns: ColumnNode[] = []\r\n\r\n      forest?.dft(node => {\r\n        if (node.isLeaf) {\r\n          _columns.push(node)\r\n        }\r\n      })\r\n\r\n      allColumns.value = _columns\r\n\r\n      if (props.tree) {\r\n        expandColumn.value = _columns[0]\r\n        columns.value = _columns.slice(1)\r\n      } else {\r\n        columns.value = _columns\r\n        expandColumn.value = undefined\r\n      }\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  /**\r\n   * 更新列的样式\r\n   * @description 在尺寸变更时重新计算固定列的宽度和偏移量\r\n   */\r\n  const updateStylesOfColumns = debounce(\r\n    () => {\r\n      const colgroup = colgroupRef.value\r\n\r\n      if (!colgroup) return\r\n\r\n      const fixedOnLeft = Array.from(\r\n        colgroup.getElementsByClassName('left')\r\n      ) as HTMLElement[]\r\n\r\n      const fixedOnRight = Array.from(\r\n        colgroup.getElementsByClassName('right')\r\n      ) as HTMLElement[]\r\n\r\n      fixedOnLeft.reduce((acc, col, colIndex) => {\r\n        const colNode = allColumns.value[colIndex]!\r\n        if (!colNode.width) {\r\n          colNode.width = col.offsetWidth\r\n        }\r\n\r\n        colNode.style.left = acc\r\n        return acc + col.offsetWidth\r\n      }, 0)\r\n\r\n      const rightColumns = allColumns.value.slice(-fixedOnRight.length)\r\n\r\n      fixedOnRight.reduceRight((acc, col, colIndex) => {\r\n        const colNode = rightColumns[colIndex]!\r\n\r\n        if (!colNode.width) {\r\n          colNode.width = col.offsetWidth\r\n        }\r\n        colNode.style.right = acc\r\n        return acc + col.offsetWidth\r\n      }, 0)\r\n    },\r\n    100,\r\n    true\r\n  )\r\n\r\n  return {\r\n    /** 第一列 */\r\n    expandColumn,\r\n\r\n    /** 所有列 */\r\n    allColumns,\r\n\r\n    /** 列 */\r\n    columns,\r\n\r\n    /** 表格头的分层展示 */\r\n    headers,\r\n\r\n    updateStylesOfColumns\r\n  }\r\n}\r\n", "import { defineComponent, inject } from 'vue'\r\nimport { TableDIKey } from './di'\r\nimport { bem, withUnit } from '@ui/utils'\r\n\r\nexport default defineComponent({\r\n  name: 'TableHead',\r\n  setup() {\r\n    const { cls, columnConfig, getHeaderSlotsNode, getCellClass } =\r\n      inject(TableDIKey)!\r\n    const { headers } = columnConfig\r\n\r\n    return () => (\r\n      <thead\r\n        class={[cls.e('head'), bem.is('multistage', headers.value.length > 1)]}\r\n      >\r\n        {headers.value.map((header, headerIndex) => (\r\n          <tr>\r\n            {header.map(column => (\r\n              <th\r\n                class={getCellClass(column)}\r\n                key={column.key + column.keySuffix}\r\n                colspan={column.leafs}\r\n                rowspan={\r\n                  column.children?.length\r\n                    ? undefined\r\n                    : headers.value.length - headerIndex\r\n                }\r\n                style={{\r\n                  left: withUnit(column.style.left, 'px'),\r\n                  right: withUnit(column.style.right, 'px')\r\n                }}\r\n              >\r\n                {getHeaderSlotsNode({\r\n                  column\r\n                })}\r\n              </th>\r\n            ))}\r\n          </tr>\r\n        ))}\r\n      </thead>\r\n    )\r\n  }\r\n})\r\n", "<template>\r\n  <td\r\n    :class=\"getCellClass(column)\"\r\n    :style=\"{\r\n      left: withUnit(left, 'px'),\r\n      right: withUnit(right, 'px')\r\n    }\"\r\n    :rowspan=\"rowspan\"\r\n    :colspan=\"colspan\"\r\n    v-if=\"rowspan !== 0 && colspan !== 0\"\r\n  >\r\n    <slot />\r\n  </td>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { inject } from 'vue'\r\nimport type { ColumnNode } from './use-columns'\r\nimport { TableDIKey } from './di'\r\nimport { withUnit } from '@ui/utils'\r\n\r\ndefineOptions({\r\n  name: 'TableCell'\r\n})\r\n\r\nconst { column } = defineProps<{\r\n  column: ColumnNode\r\n  left?: number\r\n  right?: number\r\n  rowspan?: number\r\n  colspan?: number\r\n}>()\r\n\r\nconst { getCellClass } = inject(TableDIKey)!\r\n</script>\r\n", "import { defineComponent, type PropType, type VNodeRef } from 'vue'\r\nimport { inject } from 'vue'\r\nimport { TableDIKey } from './di'\r\nimport UTabelCell from './table-cell.vue'\r\nimport { bem } from '@ui/utils'\r\nimport { ArrowRight } from 'icon-ultra'\r\nimport { UButton } from '../button'\r\nimport { UIcon } from '../icon'\r\nimport type { JSX } from 'vue/jsx-runtime'\r\nimport type { TableRow } from '@ui/types'\r\n\r\nexport default defineComponent({\r\n  name: 'TableRow',\r\n\r\n  props: {\r\n    row: {\r\n      type: Object as PropType<TableRow>,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  setup(props) {\r\n    const { row } = props\r\n\r\n    const {\r\n      cls,\r\n      columnConfig,\r\n      getColumnSlotsNode,\r\n      toggleTreeRowExpand,\r\n      getCellCtx,\r\n      handleRowClick,\r\n      tableProps,\r\n      measureElement\r\n    } = inject(TableDIKey)!\r\n\r\n    const { columns, expandColumn } = columnConfig\r\n\r\n    return () => {\r\n      const _expandColumn = expandColumn.value\r\n\r\n      let expandCell: JSX.Element | null = null\r\n      if (_expandColumn) {\r\n        const expandCtx = getCellCtx(row, _expandColumn)\r\n        const cellSpan = tableProps.mergeCell?.(expandCtx)\r\n\r\n        if (!cellSpan || (cellSpan.colspan && cellSpan.rowspan)) {\r\n          expandCell = (\r\n            <UTabelCell\r\n              column={_expandColumn}\r\n              left={_expandColumn.style.left}\r\n              right={_expandColumn.style.right}\r\n              key={_expandColumn.key + _expandColumn.keySuffix}\r\n              {...tableProps.mergeCell?.(expandCtx)}\r\n            >\r\n              {!row.isLeaf ? (\r\n                <UButton\r\n                  text\r\n                  class={cls.e('expand-toggle')}\r\n                  type='primary'\r\n                  size='small'\r\n                  circle\r\n                  onClick={e => {\r\n                    e.stopPropagation()\r\n                    toggleTreeRowExpand(row)\r\n                  }}\r\n                  style={`margin-left: ${(row.depth - 1) * 14}px`}\r\n                >\r\n                  <UIcon>\r\n                    <ArrowRight />\r\n                  </UIcon>\r\n                </UButton>\r\n              ) : (\r\n                <i\r\n                  class={cls.e('expand-space')}\r\n                  style={`margin-left: ${(row.depth - 1) * 14}px`}\r\n                ></i>\r\n              )}\r\n              {getColumnSlotsNode(expandCtx)}\r\n            </UTabelCell>\r\n          )\r\n        }\r\n      }\r\n\r\n      return (\r\n        <tr\r\n          class={[cls.e('row'), bem.is('expanded', row.expanded)]}\r\n          onClick={() => handleRowClick(row)}\r\n          ref={measureElement as VNodeRef}\r\n        >\r\n          {expandCell}\r\n\r\n          {columns.value.map(column => {\r\n            const cellCtx = getCellCtx(row, column)\r\n            const cellSpan = tableProps.mergeCell?.(cellCtx)\r\n            if (cellSpan && (!cellSpan.colspan || !cellSpan.rowspan)) {\r\n              return null\r\n            }\r\n\r\n            const cellNode = getColumnSlotsNode(cellCtx)\r\n\r\n            return (\r\n              <UTabelCell\r\n                column={column}\r\n                left={column.style.left}\r\n                right={column.style.right}\r\n                key={column.key + column.keySuffix}\r\n                {...cellSpan}\r\n                // onMouseenter={e => {\r\n                //   tipRef.value?.trigger({\r\n                //     triggerDom: e.target as HTMLElement,\r\n                //     content: cellNode\r\n                //   })\r\n                // }}\r\n                // onMouseleave={() => {\r\n                //   tipRef.value?.close()\r\n                // }}\r\n              >\r\n                {cellNode}\r\n              </UTabelCell>\r\n            )\r\n          })}\r\n        </tr>\r\n      )\r\n    }\r\n  }\r\n})\r\n", "<template>\r\n  <span :class=\"cls.b\">\r\n    <u-icon :size=\"size\"> <Empty /> </u-icon>\r\n    <div>{{ text }}</div>\r\n  </span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { EmptyProps } from '@ui/types/components/empty'\r\nimport { bem } from '@ui/utils'\r\nimport { Empty } from 'icon-ultra'\r\nimport { UIcon } from '../icon'\r\n\r\ndefineOptions({\r\n  name: 'Empty'\r\n})\r\n\r\nwithDefaults(defineProps<EmptyProps>(), {\r\n  size: 48,\r\n  text: '暂无数据'\r\n})\r\n\r\nconst cls = bem('empty')\r\n</script>\r\n", "<template>\r\n  <tbody :class=\"cls.e('body')\" ref=\"bodyRef\">\r\n    <UTableRow\r\n      v-for=\"{ row, index } of virtualRows\"\r\n      :row=\"row\"\r\n      :key=\"row.uid\"\r\n      :data-index=\"index\"\r\n      :class=\"[\r\n        bem.is('current', row.isCurrent && tableProps.highlightCurrent),\r\n        bem.is('even', index % 2 === 1)\r\n      ]\"\r\n    />\r\n\r\n    <!-- 空 -->\r\n    <tr v-if=\"!rows.length\" :class=\"cls.e('row')\">\r\n      <td :colspan=\"allColumns.length\">\r\n        <slot name=\"empty\"><UEmpty :class=\"cls.e('empty')\" /></slot>\r\n      </td>\r\n    </tr>\r\n\r\n    <slot></slot>\r\n  </tbody>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, inject, shallowRef, watch } from 'vue'\r\nimport { TableDIKey } from './di'\r\nimport UTableRow from './table-row'\r\nimport { UEmpty } from '../empty'\r\nimport { bem, setStyles } from '@ui/utils'\r\n\r\ndefineOptions({\r\n  name: 'TableBody'\r\n})\r\n\r\nconst { cls, rows, virtualList, columnConfig, tableProps } = inject(TableDIKey)!\r\nconst { allColumns } = columnConfig\r\n\r\nconst virtualRows = computed(() => {\r\n  return virtualList.value.map(item => {\r\n    return {\r\n      row: rows.value[item.index]!,\r\n      index: item.index\r\n    }\r\n  })\r\n})\r\n\r\nconst bodyRef = shallowRef<HTMLElement>()\r\n\r\nwatch(virtualList, list => {\r\n  bodyRef.value &&\r\n    setStyles(bodyRef.value, {\r\n      transform: `translate3d(0, ${list[0]?.start ?? 0}px, 0)`\r\n    })\r\n})\r\n</script>\r\n", "<template>\r\n  <tfoot v-if=\"tableSlots.foot || showSummary\" :class=\"cls.e('foot')\">\r\n    <tr v-if=\"showSummary\">\r\n      <td\r\n        v-if=\"allColumns[0]\"\r\n        :class=\"getCellClass(allColumns[0])\"\r\n        :style=\"{\r\n          right: withUnit(allColumns[0].style.right, 'px'),\r\n          left: withUnit(allColumns[0].style.left, 'px')\r\n        }\"\r\n      >\r\n        合计:\r\n      </td>\r\n      <td\r\n        v-for=\"column of allColumns.slice(1)\"\r\n        :class=\"getCellClass(column)\"\r\n        :key=\"column.key + column.keySuffix\"\r\n        :style=\"{\r\n          right: withUnit(column.style.right, 'px'),\r\n          left: withUnit(column.style.left, 'px')\r\n        }\"\r\n      >\r\n        <u-node-render :content=\"getColumnSummaryNode(column)\" />\r\n      </td>\r\n    </tr>\r\n    <slot />\r\n  </tfoot>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, inject } from 'vue'\r\nimport { TableDIKey } from './di'\r\nimport type { ColumnNode } from './use-columns'\r\nimport { n } from 'cat-kit/fe'\r\nimport { UNodeRender } from '../node-render'\r\nimport { withUnit } from '@ui/utils'\r\nimport type { RenderReturn } from '@ui/types/helper'\r\n\r\ndefineOptions({\r\n  name: 'TableFoot'\r\n})\r\n\r\nconst { cls, columnConfig, rows, tableSlots, getCellClass } =\r\n  inject(TableDIKey)!\r\n\r\nconst { allColumns } = columnConfig\r\n\r\nconst showSummary = computed(() => {\r\n  return allColumns.value.some(col => !!col.data.summary)\r\n})\r\n\r\nfunction computeSummary(key: string) {\r\n  let sum = 0\r\n  let i = 0\r\n\r\n  while (i < rows.value.length) {\r\n    sum = n.plus(sum, rows.value[i]!.data[key])\r\n    if (isNaN(sum)) return sum\r\n    i++\r\n  }\r\n\r\n  return sum\r\n}\r\n\r\nfunction getColumnSummaryNode(column: ColumnNode): RenderReturn {\r\n  const { summary } = column.data\r\n\r\n  if (!summary) return null\r\n\r\n  let total = computeSummary(column.key)\r\n\r\n  if (typeof summary === 'function') {\r\n    return summary({\r\n      total,\r\n      rows: rows.value,\r\n      column\r\n    })\r\n  }\r\n  return total\r\n}\r\n</script>\r\n", "function memo(getDeps, fn, opts) {\n  let deps = opts.initialDeps ?? [];\n  let result;\n  return () => {\n    var _a, _b, _c, _d;\n    let depTime;\n    if (opts.key && ((_a = opts.debug) == null ? void 0 : _a.call(opts))) depTime = Date.now();\n    const newDeps = getDeps();\n    const depsChanged = newDeps.length !== deps.length || newDeps.some((dep, index) => deps[index] !== dep);\n    if (!depsChanged) {\n      return result;\n    }\n    deps = newDeps;\n    let resultTime;\n    if (opts.key && ((_b = opts.debug) == null ? void 0 : _b.call(opts))) resultTime = Date.now();\n    result = fn(...newDeps);\n    if (opts.key && ((_c = opts.debug) == null ? void 0 : _c.call(opts))) {\n      const depEndTime = Math.round((Date.now() - depTime) * 100) / 100;\n      const resultEndTime = Math.round((Date.now() - resultTime) * 100) / 100;\n      const resultFpsPercentage = resultEndTime / 16;\n      const pad = (str, num) => {\n        str = String(str);\n        while (str.length < num) {\n          str = \" \" + str;\n        }\n        return str;\n      };\n      console.info(\n        `%c⏱ ${pad(resultEndTime, 5)} /${pad(depEndTime, 5)} ms`,\n        `\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(\n          0,\n          Math.min(120 - 120 * resultFpsPercentage, 120)\n        )}deg 100% 31%);`,\n        opts == null ? void 0 : opts.key\n      );\n    }\n    (_d = opts == null ? void 0 : opts.onChange) == null ? void 0 : _d.call(opts, result);\n    return result;\n  };\n}\nfunction notUndefined(value, msg) {\n  if (value === void 0) {\n    throw new Error(`Unexpected undefined${msg ? `: ${msg}` : \"\"}`);\n  } else {\n    return value;\n  }\n}\nconst approxEqual = (a, b) => Math.abs(a - b) < 1;\nconst debounce = (targetWindow, fn, ms) => {\n  let timeoutId;\n  return function(...args) {\n    targetWindow.clearTimeout(timeoutId);\n    timeoutId = targetWindow.setTimeout(() => fn.apply(this, args), ms);\n  };\n};\nexport {\n  approxEqual,\n  debounce,\n  memo,\n  notUndefined\n};\n//# sourceMappingURL=utils.js.map\n", "import { debounce, memo, notUndefined, approxEqual } from \"./utils.js\";\nconst defaultKeyExtractor = (index) => index;\nconst defaultRangeExtractor = (range) => {\n  const start = Math.max(range.startIndex - range.overscan, 0);\n  const end = Math.min(range.endIndex + range.overscan, range.count - 1);\n  const arr = [];\n  for (let i = start; i <= end; i++) {\n    arr.push(i);\n  }\n  return arr;\n};\nconst observeElementRect = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const targetWindow = instance.targetWindow;\n  if (!targetWindow) {\n    return;\n  }\n  const handler = (rect) => {\n    const { width, height } = rect;\n    cb({ width: Math.round(width), height: Math.round(height) });\n  };\n  handler(element.getBoundingClientRect());\n  if (!targetWindow.ResizeObserver) {\n    return () => {\n    };\n  }\n  const observer = new targetWindow.ResizeObserver((entries) => {\n    const entry = entries[0];\n    if (entry == null ? void 0 : entry.borderBoxSize) {\n      const box = entry.borderBoxSize[0];\n      if (box) {\n        handler({ width: box.inlineSize, height: box.blockSize });\n        return;\n      }\n    }\n    handler(element.getBoundingClientRect());\n  });\n  observer.observe(element, { box: \"border-box\" });\n  return () => {\n    observer.unobserve(element);\n  };\n};\nconst addEventListenerOptions = {\n  passive: true\n};\nconst observeWindowRect = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const handler = () => {\n    cb({ width: element.innerWidth, height: element.innerHeight });\n  };\n  handler();\n  element.addEventListener(\"resize\", handler, addEventListenerOptions);\n  return () => {\n    element.removeEventListener(\"resize\", handler);\n  };\n};\nconst supportsScrollend = typeof window == \"undefined\" ? true : \"onscrollend\" in window;\nconst observeElementOffset = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const targetWindow = instance.targetWindow;\n  if (!targetWindow) {\n    return;\n  }\n  let offset = 0;\n  const fallback = supportsScrollend ? () => void 0 : debounce(\n    targetWindow,\n    () => {\n      cb(offset, false);\n    },\n    instance.options.isScrollingResetDelay\n  );\n  const createHandler = (isScrolling) => () => {\n    const { horizontal, isRtl } = instance.options;\n    offset = horizontal ? element[\"scrollLeft\"] * (isRtl && -1 || 1) : element[\"scrollTop\"];\n    fallback();\n    cb(offset, isScrolling);\n  };\n  const handler = createHandler(true);\n  const endHandler = createHandler(false);\n  endHandler();\n  element.addEventListener(\"scroll\", handler, addEventListenerOptions);\n  element.addEventListener(\"scrollend\", endHandler, addEventListenerOptions);\n  return () => {\n    element.removeEventListener(\"scroll\", handler);\n    element.removeEventListener(\"scrollend\", endHandler);\n  };\n};\nconst observeWindowOffset = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const targetWindow = instance.targetWindow;\n  if (!targetWindow) {\n    return;\n  }\n  let offset = 0;\n  const fallback = supportsScrollend ? () => void 0 : debounce(\n    targetWindow,\n    () => {\n      cb(offset, false);\n    },\n    instance.options.isScrollingResetDelay\n  );\n  const createHandler = (isScrolling) => () => {\n    offset = element[instance.options.horizontal ? \"scrollX\" : \"scrollY\"];\n    fallback();\n    cb(offset, isScrolling);\n  };\n  const handler = createHandler(true);\n  const endHandler = createHandler(false);\n  endHandler();\n  element.addEventListener(\"scroll\", handler, addEventListenerOptions);\n  element.addEventListener(\"scrollend\", endHandler, addEventListenerOptions);\n  return () => {\n    element.removeEventListener(\"scroll\", handler);\n    element.removeEventListener(\"scrollend\", endHandler);\n  };\n};\nconst measureElement = (element, entry, instance) => {\n  if (entry == null ? void 0 : entry.borderBoxSize) {\n    const box = entry.borderBoxSize[0];\n    if (box) {\n      const size = Math.round(\n        box[instance.options.horizontal ? \"inlineSize\" : \"blockSize\"]\n      );\n      return size;\n    }\n  }\n  return Math.round(\n    element.getBoundingClientRect()[instance.options.horizontal ? \"width\" : \"height\"]\n  );\n};\nconst windowScroll = (offset, {\n  adjustments = 0,\n  behavior\n}, instance) => {\n  var _a, _b;\n  const toOffset = offset + adjustments;\n  (_b = (_a = instance.scrollElement) == null ? void 0 : _a.scrollTo) == null ? void 0 : _b.call(_a, {\n    [instance.options.horizontal ? \"left\" : \"top\"]: toOffset,\n    behavior\n  });\n};\nconst elementScroll = (offset, {\n  adjustments = 0,\n  behavior\n}, instance) => {\n  var _a, _b;\n  const toOffset = offset + adjustments;\n  (_b = (_a = instance.scrollElement) == null ? void 0 : _a.scrollTo) == null ? void 0 : _b.call(_a, {\n    [instance.options.horizontal ? \"left\" : \"top\"]: toOffset,\n    behavior\n  });\n};\nclass Virtualizer {\n  constructor(opts) {\n    this.unsubs = [];\n    this.scrollElement = null;\n    this.targetWindow = null;\n    this.isScrolling = false;\n    this.scrollToIndexTimeoutId = null;\n    this.measurementsCache = [];\n    this.itemSizeCache = /* @__PURE__ */ new Map();\n    this.pendingMeasuredCacheIndexes = [];\n    this.scrollRect = null;\n    this.scrollOffset = null;\n    this.scrollDirection = null;\n    this.scrollAdjustments = 0;\n    this.elementsCache = /* @__PURE__ */ new Map();\n    this.observer = /* @__PURE__ */ (() => {\n      let _ro = null;\n      const get = () => {\n        if (_ro) {\n          return _ro;\n        }\n        if (!this.targetWindow || !this.targetWindow.ResizeObserver) {\n          return null;\n        }\n        return _ro = new this.targetWindow.ResizeObserver((entries) => {\n          entries.forEach((entry) => {\n            this._measureElement(entry.target, entry);\n          });\n        });\n      };\n      return {\n        disconnect: () => {\n          var _a;\n          (_a = get()) == null ? void 0 : _a.disconnect();\n          _ro = null;\n        },\n        observe: (target) => {\n          var _a;\n          return (_a = get()) == null ? void 0 : _a.observe(target, { box: \"border-box\" });\n        },\n        unobserve: (target) => {\n          var _a;\n          return (_a = get()) == null ? void 0 : _a.unobserve(target);\n        }\n      };\n    })();\n    this.range = null;\n    this.setOptions = (opts2) => {\n      Object.entries(opts2).forEach(([key, value]) => {\n        if (typeof value === \"undefined\") delete opts2[key];\n      });\n      this.options = {\n        debug: false,\n        initialOffset: 0,\n        overscan: 1,\n        paddingStart: 0,\n        paddingEnd: 0,\n        scrollPaddingStart: 0,\n        scrollPaddingEnd: 0,\n        horizontal: false,\n        getItemKey: defaultKeyExtractor,\n        rangeExtractor: defaultRangeExtractor,\n        onChange: () => {\n        },\n        measureElement,\n        initialRect: { width: 0, height: 0 },\n        scrollMargin: 0,\n        gap: 0,\n        indexAttribute: \"data-index\",\n        initialMeasurementsCache: [],\n        lanes: 1,\n        isScrollingResetDelay: 150,\n        enabled: true,\n        isRtl: false,\n        ...opts2\n      };\n    };\n    this.notify = (sync) => {\n      var _a, _b;\n      (_b = (_a = this.options).onChange) == null ? void 0 : _b.call(_a, this, sync);\n    };\n    this.maybeNotify = memo(\n      () => {\n        this.calculateRange();\n        return [\n          this.isScrolling,\n          this.range ? this.range.startIndex : null,\n          this.range ? this.range.endIndex : null\n        ];\n      },\n      (isScrolling) => {\n        this.notify(isScrolling);\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"maybeNotify\",\n        debug: () => this.options.debug,\n        initialDeps: [\n          this.isScrolling,\n          this.range ? this.range.startIndex : null,\n          this.range ? this.range.endIndex : null\n        ]\n      }\n    );\n    this.cleanup = () => {\n      this.unsubs.filter(Boolean).forEach((d) => d());\n      this.unsubs = [];\n      this.observer.disconnect();\n      this.scrollElement = null;\n      this.targetWindow = null;\n    };\n    this._didMount = () => {\n      return () => {\n        this.cleanup();\n      };\n    };\n    this._willUpdate = () => {\n      var _a;\n      const scrollElement = this.options.enabled ? this.options.getScrollElement() : null;\n      if (this.scrollElement !== scrollElement) {\n        this.cleanup();\n        if (!scrollElement) {\n          this.maybeNotify();\n          return;\n        }\n        this.scrollElement = scrollElement;\n        if (this.scrollElement && \"ownerDocument\" in this.scrollElement) {\n          this.targetWindow = this.scrollElement.ownerDocument.defaultView;\n        } else {\n          this.targetWindow = ((_a = this.scrollElement) == null ? void 0 : _a.window) ?? null;\n        }\n        this.elementsCache.forEach((cached) => {\n          this.observer.observe(cached);\n        });\n        this._scrollToOffset(this.getScrollOffset(), {\n          adjustments: void 0,\n          behavior: void 0\n        });\n        this.unsubs.push(\n          this.options.observeElementRect(this, (rect) => {\n            this.scrollRect = rect;\n            this.maybeNotify();\n          })\n        );\n        this.unsubs.push(\n          this.options.observeElementOffset(this, (offset, isScrolling) => {\n            this.scrollAdjustments = 0;\n            this.scrollDirection = isScrolling ? this.getScrollOffset() < offset ? \"forward\" : \"backward\" : null;\n            this.scrollOffset = offset;\n            this.isScrolling = isScrolling;\n            this.maybeNotify();\n          })\n        );\n      }\n    };\n    this.getSize = () => {\n      if (!this.options.enabled) {\n        this.scrollRect = null;\n        return 0;\n      }\n      this.scrollRect = this.scrollRect ?? this.options.initialRect;\n      return this.scrollRect[this.options.horizontal ? \"width\" : \"height\"];\n    };\n    this.getScrollOffset = () => {\n      if (!this.options.enabled) {\n        this.scrollOffset = null;\n        return 0;\n      }\n      this.scrollOffset = this.scrollOffset ?? (typeof this.options.initialOffset === \"function\" ? this.options.initialOffset() : this.options.initialOffset);\n      return this.scrollOffset;\n    };\n    this.getFurthestMeasurement = (measurements, index) => {\n      const furthestMeasurementsFound = /* @__PURE__ */ new Map();\n      const furthestMeasurements = /* @__PURE__ */ new Map();\n      for (let m = index - 1; m >= 0; m--) {\n        const measurement = measurements[m];\n        if (furthestMeasurementsFound.has(measurement.lane)) {\n          continue;\n        }\n        const previousFurthestMeasurement = furthestMeasurements.get(\n          measurement.lane\n        );\n        if (previousFurthestMeasurement == null || measurement.end > previousFurthestMeasurement.end) {\n          furthestMeasurements.set(measurement.lane, measurement);\n        } else if (measurement.end < previousFurthestMeasurement.end) {\n          furthestMeasurementsFound.set(measurement.lane, true);\n        }\n        if (furthestMeasurementsFound.size === this.options.lanes) {\n          break;\n        }\n      }\n      return furthestMeasurements.size === this.options.lanes ? Array.from(furthestMeasurements.values()).sort((a, b) => {\n        if (a.end === b.end) {\n          return a.index - b.index;\n        }\n        return a.end - b.end;\n      })[0] : void 0;\n    };\n    this.getMeasurementOptions = memo(\n      () => [\n        this.options.count,\n        this.options.paddingStart,\n        this.options.scrollMargin,\n        this.options.getItemKey,\n        this.options.enabled\n      ],\n      (count, paddingStart, scrollMargin, getItemKey, enabled) => {\n        this.pendingMeasuredCacheIndexes = [];\n        return {\n          count,\n          paddingStart,\n          scrollMargin,\n          getItemKey,\n          enabled\n        };\n      },\n      {\n        key: false\n      }\n    );\n    this.getMeasurements = memo(\n      () => [this.getMeasurementOptions(), this.itemSizeCache],\n      ({ count, paddingStart, scrollMargin, getItemKey, enabled }, itemSizeCache) => {\n        if (!enabled) {\n          this.measurementsCache = [];\n          this.itemSizeCache.clear();\n          return [];\n        }\n        if (this.measurementsCache.length === 0) {\n          this.measurementsCache = this.options.initialMeasurementsCache;\n          this.measurementsCache.forEach((item) => {\n            this.itemSizeCache.set(item.key, item.size);\n          });\n        }\n        const min = this.pendingMeasuredCacheIndexes.length > 0 ? Math.min(...this.pendingMeasuredCacheIndexes) : 0;\n        this.pendingMeasuredCacheIndexes = [];\n        const measurements = this.measurementsCache.slice(0, min);\n        for (let i = min; i < count; i++) {\n          const key = getItemKey(i);\n          const furthestMeasurement = this.options.lanes === 1 ? measurements[i - 1] : this.getFurthestMeasurement(measurements, i);\n          const start = furthestMeasurement ? furthestMeasurement.end + this.options.gap : paddingStart + scrollMargin;\n          const measuredSize = itemSizeCache.get(key);\n          const size = typeof measuredSize === \"number\" ? measuredSize : this.options.estimateSize(i);\n          const end = start + size;\n          const lane = furthestMeasurement ? furthestMeasurement.lane : i % this.options.lanes;\n          measurements[i] = {\n            index: i,\n            start,\n            size,\n            end,\n            key,\n            lane\n          };\n        }\n        this.measurementsCache = measurements;\n        return measurements;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getMeasurements\",\n        debug: () => this.options.debug\n      }\n    );\n    this.calculateRange = memo(\n      () => [this.getMeasurements(), this.getSize(), this.getScrollOffset()],\n      (measurements, outerSize, scrollOffset) => {\n        return this.range = measurements.length > 0 && outerSize > 0 ? calculateRange({\n          measurements,\n          outerSize,\n          scrollOffset\n        }) : null;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"calculateRange\",\n        debug: () => this.options.debug\n      }\n    );\n    this.getIndexes = memo(\n      () => [\n        this.options.rangeExtractor,\n        this.calculateRange(),\n        this.options.overscan,\n        this.options.count\n      ],\n      (rangeExtractor, range, overscan, count) => {\n        return range === null ? [] : rangeExtractor({\n          startIndex: range.startIndex,\n          endIndex: range.endIndex,\n          overscan,\n          count\n        });\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getIndexes\",\n        debug: () => this.options.debug\n      }\n    );\n    this.indexFromElement = (node) => {\n      const attributeName = this.options.indexAttribute;\n      const indexStr = node.getAttribute(attributeName);\n      if (!indexStr) {\n        console.warn(\n          `Missing attribute name '${attributeName}={index}' on measured element.`\n        );\n        return -1;\n      }\n      return parseInt(indexStr, 10);\n    };\n    this._measureElement = (node, entry) => {\n      const index = this.indexFromElement(node);\n      const item = this.measurementsCache[index];\n      if (!item) {\n        return;\n      }\n      const key = item.key;\n      const prevNode = this.elementsCache.get(key);\n      if (prevNode !== node) {\n        if (prevNode) {\n          this.observer.unobserve(prevNode);\n        }\n        this.observer.observe(node);\n        this.elementsCache.set(key, node);\n      }\n      if (node.isConnected) {\n        this.resizeItem(index, this.options.measureElement(node, entry, this));\n      }\n    };\n    this.resizeItem = (index, size) => {\n      const item = this.measurementsCache[index];\n      if (!item) {\n        return;\n      }\n      const itemSize = this.itemSizeCache.get(item.key) ?? item.size;\n      const delta = size - itemSize;\n      if (delta !== 0) {\n        if (this.shouldAdjustScrollPositionOnItemSizeChange !== void 0 ? this.shouldAdjustScrollPositionOnItemSizeChange(item, delta, this) : item.start < this.getScrollOffset() + this.scrollAdjustments) {\n          if (process.env.NODE_ENV !== \"production\" && this.options.debug) {\n            console.info(\"correction\", delta);\n          }\n          this._scrollToOffset(this.getScrollOffset(), {\n            adjustments: this.scrollAdjustments += delta,\n            behavior: void 0\n          });\n        }\n        this.pendingMeasuredCacheIndexes.push(item.index);\n        this.itemSizeCache = new Map(this.itemSizeCache.set(item.key, size));\n        this.notify(false);\n      }\n    };\n    this.measureElement = (node) => {\n      if (!node) {\n        this.elementsCache.forEach((cached, key) => {\n          if (!cached.isConnected) {\n            this.observer.unobserve(cached);\n            this.elementsCache.delete(key);\n          }\n        });\n        return;\n      }\n      this._measureElement(node, void 0);\n    };\n    this.getVirtualItems = memo(\n      () => [this.getIndexes(), this.getMeasurements()],\n      (indexes, measurements) => {\n        const virtualItems = [];\n        for (let k = 0, len = indexes.length; k < len; k++) {\n          const i = indexes[k];\n          const measurement = measurements[i];\n          virtualItems.push(measurement);\n        }\n        return virtualItems;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getVirtualItems\",\n        debug: () => this.options.debug\n      }\n    );\n    this.getVirtualItemForOffset = (offset) => {\n      const measurements = this.getMeasurements();\n      if (measurements.length === 0) {\n        return void 0;\n      }\n      return notUndefined(\n        measurements[findNearestBinarySearch(\n          0,\n          measurements.length - 1,\n          (index) => notUndefined(measurements[index]).start,\n          offset\n        )]\n      );\n    };\n    this.getOffsetForAlignment = (toOffset, align) => {\n      const size = this.getSize();\n      const scrollOffset = this.getScrollOffset();\n      if (align === \"auto\") {\n        if (toOffset <= scrollOffset) {\n          align = \"start\";\n        } else if (toOffset >= scrollOffset + size) {\n          align = \"end\";\n        } else {\n          align = \"start\";\n        }\n      }\n      if (align === \"start\") {\n        toOffset = toOffset;\n      } else if (align === \"end\") {\n        toOffset = toOffset - size;\n      } else if (align === \"center\") {\n        toOffset = toOffset - size / 2;\n      }\n      const scrollSizeProp = this.options.horizontal ? \"scrollWidth\" : \"scrollHeight\";\n      const scrollSize = this.scrollElement ? \"document\" in this.scrollElement ? this.scrollElement.document.documentElement[scrollSizeProp] : this.scrollElement[scrollSizeProp] : 0;\n      const maxOffset = scrollSize - size;\n      return Math.max(Math.min(maxOffset, toOffset), 0);\n    };\n    this.getOffsetForIndex = (index, align = \"auto\") => {\n      index = Math.max(0, Math.min(index, this.options.count - 1));\n      const item = this.measurementsCache[index];\n      if (!item) {\n        return void 0;\n      }\n      const size = this.getSize();\n      const scrollOffset = this.getScrollOffset();\n      if (align === \"auto\") {\n        if (item.end >= scrollOffset + size - this.options.scrollPaddingEnd) {\n          align = \"end\";\n        } else if (item.start <= scrollOffset + this.options.scrollPaddingStart) {\n          align = \"start\";\n        } else {\n          return [scrollOffset, align];\n        }\n      }\n      const toOffset = align === \"end\" ? item.end + this.options.scrollPaddingEnd : item.start - this.options.scrollPaddingStart;\n      return [this.getOffsetForAlignment(toOffset, align), align];\n    };\n    this.isDynamicMode = () => this.elementsCache.size > 0;\n    this.cancelScrollToIndex = () => {\n      if (this.scrollToIndexTimeoutId !== null && this.targetWindow) {\n        this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId);\n        this.scrollToIndexTimeoutId = null;\n      }\n    };\n    this.scrollToOffset = (toOffset, { align = \"start\", behavior } = {}) => {\n      this.cancelScrollToIndex();\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      this._scrollToOffset(this.getOffsetForAlignment(toOffset, align), {\n        adjustments: void 0,\n        behavior\n      });\n    };\n    this.scrollToIndex = (index, { align: initialAlign = \"auto\", behavior } = {}) => {\n      index = Math.max(0, Math.min(index, this.options.count - 1));\n      this.cancelScrollToIndex();\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      const offsetAndAlign = this.getOffsetForIndex(index, initialAlign);\n      if (!offsetAndAlign) return;\n      const [offset, align] = offsetAndAlign;\n      this._scrollToOffset(offset, { adjustments: void 0, behavior });\n      if (behavior !== \"smooth\" && this.isDynamicMode() && this.targetWindow) {\n        this.scrollToIndexTimeoutId = this.targetWindow.setTimeout(() => {\n          this.scrollToIndexTimeoutId = null;\n          const elementInDOM = this.elementsCache.has(\n            this.options.getItemKey(index)\n          );\n          if (elementInDOM) {\n            const [latestOffset] = notUndefined(\n              this.getOffsetForIndex(index, align)\n            );\n            if (!approxEqual(latestOffset, this.getScrollOffset())) {\n              this.scrollToIndex(index, { align, behavior });\n            }\n          } else {\n            this.scrollToIndex(index, { align, behavior });\n          }\n        });\n      }\n    };\n    this.scrollBy = (delta, { behavior } = {}) => {\n      this.cancelScrollToIndex();\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      this._scrollToOffset(this.getScrollOffset() + delta, {\n        adjustments: void 0,\n        behavior\n      });\n    };\n    this.getTotalSize = () => {\n      var _a;\n      const measurements = this.getMeasurements();\n      let end;\n      if (measurements.length === 0) {\n        end = this.options.paddingStart;\n      } else {\n        end = this.options.lanes === 1 ? ((_a = measurements[measurements.length - 1]) == null ? void 0 : _a.end) ?? 0 : Math.max(\n          ...measurements.slice(-this.options.lanes).map((m) => m.end)\n        );\n      }\n      return Math.max(\n        end - this.options.scrollMargin + this.options.paddingEnd,\n        0\n      );\n    };\n    this._scrollToOffset = (offset, {\n      adjustments,\n      behavior\n    }) => {\n      this.options.scrollToFn(offset, { behavior, adjustments }, this);\n    };\n    this.measure = () => {\n      this.itemSizeCache = /* @__PURE__ */ new Map();\n      this.notify(false);\n    };\n    this.setOptions(opts);\n  }\n}\nconst findNearestBinarySearch = (low, high, getCurrentValue, value) => {\n  while (low <= high) {\n    const middle = (low + high) / 2 | 0;\n    const currentValue = getCurrentValue(middle);\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\nfunction calculateRange({\n  measurements,\n  outerSize,\n  scrollOffset\n}) {\n  const count = measurements.length - 1;\n  const getOffset = (index) => measurements[index].start;\n  const startIndex = findNearestBinarySearch(0, count, getOffset, scrollOffset);\n  let endIndex = startIndex;\n  while (endIndex < count && measurements[endIndex].end < scrollOffset + outerSize) {\n    endIndex++;\n  }\n  return { startIndex, endIndex };\n}\nexport {\n  Virtualizer,\n  approxEqual,\n  debounce,\n  defaultKeyExtractor,\n  defaultRangeExtractor,\n  elementScroll,\n  measureElement,\n  memo,\n  notUndefined,\n  observeElementOffset,\n  observeElementRect,\n  observeWindowOffset,\n  observeWindowRect,\n  windowScroll\n};\n//# sourceMappingURL=index.js.map\n", "import {\r\n  computed,\r\n  onScopeDispose,\r\n  shallowRef,\r\n  watch,\r\n  type ComputedRef,\r\n  type ShallowRef\r\n} from 'vue'\r\nimport {\r\n  elementScroll,\r\n  observeElementOffset,\r\n  observeElementRect,\r\n  type VirtualItem,\r\n  Virtualizer\r\n} from '@tanstack/vue-virtual'\r\n\r\ninterface Options {\r\n  /** 指定启用虚拟列表的阈值 */\r\n  virtualThreshold?: number\r\n  /** 数量 */\r\n  count: ShallowRef<number>\r\n  /** 滚动容器 */\r\n  scrollEl: ShallowRef<HTMLElement | null>\r\n  /** 估算高度(宽度) */\r\n  estimateSize?: (index: number) => number\r\n  /** 列表项之间的间距 */\r\n  gap?: number\r\n}\r\n\r\ntype CustomVirtualItem = Omit<VirtualItem, 'key'> & {\r\n  key: number | string\r\n}\r\n\r\nexport type VirtualReturned = {\r\n  /** 虚拟列表 */\r\n  virtualList: ShallowRef<CustomVirtualItem[]>\r\n  /** 总高度 */\r\n  totalHeight: ShallowRef<number>\r\n  /** 测量元素高度 */\r\n  measureElement: (el: any) => void\r\n  /** 滚动到指定索引 */\r\n  scrollTo: (index: number) => void\r\n  /** 是否启用虚拟列表 */\r\n  virtualEnabled: ComputedRef<boolean>\r\n}\r\n\r\nexport function useVirtual(options: Options): VirtualReturned {\r\n  const { count, scrollEl, estimateSize, virtualThreshold, gap } = options\r\n\r\n  const enabled = computed(() => {\r\n    return virtualThreshold ? count.value > virtualThreshold : true\r\n  })\r\n\r\n  const defaultEstimateSize = () => 34\r\n\r\n  const virtualList = shallowRef<CustomVirtualItem[]>([])\r\n\r\n  /** 总高度 */\r\n  const totalHeight = shallowRef(0)\r\n\r\n  const onChange = () => {\r\n    if (enabled.value) {\r\n      totalHeight.value = v.getTotalSize()\r\n      virtualList.value = v.getVirtualItems() as CustomVirtualItem[]\r\n    }\r\n  }\r\n\r\n  const virtualizerOptions = computed(() => {\r\n    return {\r\n      enabled: enabled.value,\r\n      count: count.value,\r\n      getScrollElement: () => scrollEl.value,\r\n      estimateSize: estimateSize ?? defaultEstimateSize,\r\n      overscan: 3,\r\n      gap,\r\n      observeElementRect: observeElementRect,\r\n      observeElementOffset: observeElementOffset,\r\n      scrollToFn: elementScroll,\r\n      onChange\r\n    }\r\n  })\r\n\r\n  const v = new Virtualizer(virtualizerOptions.value)\r\n\r\n  onChange()\r\n\r\n  const cleanup = v._didMount()\r\n\r\n  watch(\r\n    scrollEl,\r\n    el => {\r\n      el && v._willUpdate()\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  watch(\r\n    () => virtualizerOptions.value,\r\n    options => {\r\n      v.setOptions(options)\r\n\r\n      v._willUpdate()\r\n\r\n      onChange()\r\n    }\r\n  )\r\n\r\n  onScopeDispose(() => {\r\n    cleanup()\r\n  })\r\n\r\n  // const virtualizer = useVirtualizer(virtualizerOptions)\r\n\r\n  // const virtualList = computed(() => {\r\n  //   return virtualizer.value.getVirtualItems()\r\n  // })\r\n\r\n  function scrollTo(index: number) {\r\n    v.scrollToIndex(index)\r\n  }\r\n\r\n  /** 测量元素高度 */\r\n  function measureElement(el: Element) {\r\n    if (!el) return\r\n\r\n    v.measureElement(el)\r\n\r\n    return undefined\r\n  }\r\n\r\n  return {\r\n    virtualEnabled: enabled,\r\n    virtualList,\r\n    totalHeight,\r\n    measureElement,\r\n    scrollTo\r\n  }\r\n}\r\n", "<template>\r\n  <span :class=\"className\">\r\n    <span :class=\"cls.e('content')\">\r\n      <slot />\r\n    </span>\r\n\r\n    <u-icon\r\n      v-if=\"closable\"\r\n      @click.stop=\"handleClose\"\r\n      :class=\"cls.e('icon-close')\"\r\n    >\r\n      <Close />\r\n    </u-icon>\r\n  </span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { TagEmits, TagProps } from '@ui/types/components/tag'\r\nimport { bem } from '@ui/utils'\r\nimport { computed } from 'vue'\r\nimport { UIcon } from '../icon'\r\nimport { Close } from 'icon-ultra'\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\n\r\ndefineOptions({\r\n  name: 'Tag'\r\n})\r\n\r\nconst cls = bem('tag')\r\n\r\nconst props = withDefaults(defineProps<TagProps>(), {})\r\n\r\nconst emit = defineEmits<TagEmits>()\r\n\r\nconst { formProps } = useFormComponent()\r\nconst { size } = useFormFallbackProps([formProps ?? {}, props], {\r\n  size: 'default'\r\n})\r\n\r\nconst handleClose = () => {\r\n  emit('close')\r\n}\r\n\r\nconst className = computed(() => {\r\n  const { type } = props\r\n  return [\r\n    cls.b,\r\n    cls.m(size.value),\r\n    type && cls.m('color-' + type),\r\n    bem.is('round', props.round),\r\n    bem.is('dark', props.dark)\r\n  ]\r\n})\r\n\r\n// const classRound = computed(() => {\r\n//   return [bem.is('round', props.round)]\r\n// })\r\n</script>\r\n", "<template>\r\n  <label :class=\"className\" v-if=\"!readonly\">\r\n    <span :class=\"cls.e('wrap')\">\r\n      <transition name=\"zoom-in\" mode=\"out-in\">\r\n        <svg viewBox=\"0 0 64 64\" v-if=\"checked\" fill=\"currentColor\">\r\n          <path\r\n            d=\"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z\"\r\n          ></path>\r\n        </svg>\r\n        <span v-else-if=\"indeterminate\" :class=\"cls.m('indeterminate')\"></span>\r\n      </transition>\r\n    </span>\r\n\r\n    <input\r\n      type=\"checkbox\"\r\n      :checked=\"checked\"\r\n      :disabled=\"disabled\"\r\n      hidden\r\n      @input=\"handleInput\"\r\n    />\r\n\r\n    <span :class=\"cls.e('label')\"><slot /> </span>\r\n  </label>\r\n\r\n  <u-tag\r\n    v-else-if=\"model !== undefined\"\r\n    :type=\"trueVal === model ? 'success' : 'danger'\"\r\n  >\r\n    {{ trueVal === model ? '是' : '否' }}\r\n  </u-tag>\r\n\r\n  <span v-else>{{ FORM_EMPTY_CONTENT }}</span>\r\n</template>\r\n\r\n<script\r\n  lang=\"ts\"\r\n  setup\r\n  generic=\"Val extends string | number | boolean = boolean\"\r\n>\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\nimport type {\r\n  CheckboxProps,\r\n  CheckboxEmits\r\n} from '@ui/types/components/checkbox'\r\nimport { bem } from '@ui/utils'\r\nimport { computed } from 'vue'\r\nimport { UTag } from '../tag'\r\nimport { FORM_EMPTY_CONTENT } from '@ui/shared'\r\n\r\ndefineOptions({\r\n  name: 'Checkbox'\r\n})\r\nconst props = withDefaults(defineProps<CheckboxProps<Val>>(), {\r\n  disabled: undefined,\r\n  readonly: undefined\r\n})\r\n\r\nconst emit = defineEmits<CheckboxEmits<Val>>()\r\nconst cls = bem('checkbox')\r\n\r\nconst model = defineModel<Val>()\r\n\r\nconst trueVal = computed(() => {\r\n  return props.trueValue ?? (true as Val)\r\n})\r\n\r\nconst falseVal = computed(() => {\r\n  return props.falseValue ?? (false as Val)\r\n})\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled, readonly } = useFormFallbackProps(\r\n  [formProps ?? {}, props],\r\n  {\r\n    size: 'default',\r\n    disabled: false,\r\n    readonly: false\r\n  }\r\n)\r\n\r\nconst className = computed(() => {\r\n  return [\r\n    cls.b,\r\n    cls.m(size.value),\r\n    bem.is('disabled', disabled.value),\r\n    bem.is('checked', checked.value || props.indeterminate)\r\n  ]\r\n})\r\n\r\nconst checked = computed(() => {\r\n  return trueVal.value === model.value\r\n})\r\n\r\nconst handleInput = (e: Event) => {\r\n  const target = e.target as HTMLInputElement\r\n  model.value = target.checked ? trueVal.value : falseVal.value\r\n}\r\n</script>\r\n", "import {\r\n  computed,\r\n  createTextVNode,\r\n  createVNode,\r\n  nextTick,\r\n  shallowRef,\r\n  toRaw,\r\n  triggerRef,\r\n  watch,\r\n  type ComputedRef,\r\n  type ShallowRef\r\n} from 'vue'\r\nimport type { TableRow } from '@ui/types/components/table'\r\nimport { UCheckbox } from '../checkbox'\r\nimport type {\r\n  TableColumn,\r\n  TableEmits,\r\n  TableProps\r\n} from '@ui/types/components/table'\r\nimport { getChainValue, type Forest } from 'cat-kit/fe'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\nimport type { BEM } from '@ui/utils'\r\n\r\ninterface Options {\r\n  rows: ShallowRef<TableRow[] | undefined>\r\n  rowForest: ShallowRef<Forest<TableRow> | undefined>\r\n  props: TableProps\r\n  emit: TableEmits<any>\r\n  size: ComputedRef<ComponentSize>\r\n  cls: BEM<'table'>\r\n}\r\n\r\nexport function useCheck(options: Options) {\r\n  const { rows, rowForest, props, emit, size, cls } = options\r\n\r\n  const checkedRows = shallowRef(new Set<TableRow>())\r\n  const selectedRow = shallowRef<TableRow>()\r\n\r\n  function triggerCheckedRows() {\r\n    triggerRef(checkedRows)\r\n  }\r\n\r\n  function clearChecked() {\r\n    checkedRows.value.forEach(row => {\r\n      row.checked = false\r\n    })\r\n    checkedRows.value.clear()\r\n    triggerCheckedRows()\r\n  }\r\n\r\n  function clearSelected() {\r\n    if (selectedRow.value) {\r\n      selectedRow.value.checked = false\r\n      selectedRow.value = undefined\r\n    }\r\n  }\r\n\r\n  watch(\r\n    [() => props.checkable, () => props.selectable, () => rows.value],\r\n    () => {\r\n      clearChecked()\r\n      clearSelected()\r\n    }\r\n  )\r\n\r\n  watch(selectedRow, selectedRow => {\r\n    if (changedByModel) return\r\n    changedByEvent = true\r\n    emit(\r\n      'update:selected',\r\n      selectedRow?.data ? toRaw(selectedRow.data) : undefined\r\n    )\r\n    nextTick(() => {\r\n      changedByEvent = false\r\n    })\r\n  })\r\n\r\n  let changedByEvent = false\r\n  let changedByModel = false\r\n  watch(checkedRows, checkedRows => {\r\n    if (changedByModel) return\r\n    changedByEvent = true\r\n    emit(\r\n      'update:checked',\r\n      Array.from(checkedRows).map(row => toRaw(row.data))\r\n    )\r\n    nextTick(() => {\r\n      changedByEvent = false\r\n    })\r\n  })\r\n\r\n  let dicts: Map<string | number, TableRow> | undefined = undefined\r\n\r\n  // 设置uid -> row 字典，以便于数据重复使用\r\n  function setDicts() {\r\n    if (dicts || !rows.value || !props.rowKey) return\r\n\r\n    let mapEntries: [string | number, TableRow][] = []\r\n    let i = 0\r\n    while (i < rows.value.length) {\r\n      const row = rows.value[i]!\r\n\r\n      mapEntries.push([row.uid, row])\r\n      i++\r\n    }\r\n    dicts = new Map(mapEntries)\r\n  }\r\n\r\n  watch(rows, () => {\r\n    dicts = undefined\r\n  })\r\n\r\n  watch(\r\n    [() => props.checked, () => props.rowKey, () => props.checkable, rows],\r\n    ([checked, rowKey, checkable, rows], [_, __, ___, oRows]) => {\r\n      if (changedByEvent || !checkable || !rowKey) return\r\n\r\n      changedByModel = true\r\n\r\n      // 如果没有字典，先建立字典\r\n      rows !== oRows && setDicts()\r\n\r\n      clearChecked()\r\n\r\n      checked?.forEach(item => {\r\n        const row = dicts?.get(getChainValue(item, rowKey))\r\n        if (!row) return\r\n\r\n        row.checked = true\r\n        checkedRows.value.add(row)\r\n      })\r\n      triggerCheckedRows()\r\n\r\n      nextTick(() => {\r\n        changedByModel = false\r\n      })\r\n    },\r\n    {\r\n      immediate: true\r\n    }\r\n  )\r\n\r\n  watch(\r\n    [() => props.selected, () => props.rowKey, () => props.selectable, rows],\r\n    ([selected, rowKey, selectable, rows], [_, __, ___, oRows]) => {\r\n      if (changedByEvent || !selectable || !rowKey) return\r\n\r\n      changedByModel = true\r\n\r\n      // 如果没有字典，先建立字典(懒建立)\r\n      rows !== oRows && setDicts()\r\n\r\n      if (selected) {\r\n        const row = dicts?.get(getChainValue(selected, rowKey))\r\n        if (row) {\r\n          row.checked = true\r\n          selectedRow.value = row\r\n        }\r\n      } else {\r\n        clearSelected()\r\n      }\r\n\r\n      nextTick(() => {\r\n        changedByModel = false\r\n      })\r\n    },\r\n    {\r\n      immediate: true\r\n    }\r\n  )\r\n\r\n  const allChecked = computed(() => {\r\n    const rowSize = props.tree ? rowForest.value?.size : rows.value?.length\r\n    return rowSize && rowSize === checkedRows.value.size\r\n  })\r\n\r\n  function handleCheckAllTree(check: boolean) {\r\n    if (check) {\r\n      rowForest.value?.dft(row => {\r\n        row.checked = true\r\n        checkedRows.value.add(row)\r\n      })\r\n      triggerCheckedRows()\r\n    } else {\r\n      rowForest.value?.dft(row => {\r\n        row.checked = false\r\n      })\r\n      checkedRows.value.clear()\r\n      triggerCheckedRows()\r\n    }\r\n  }\r\n\r\n  function handleCheckAllRows(check: boolean) {\r\n    if (check) {\r\n      rows.value?.forEach(row => {\r\n        row.checked = true\r\n        checkedRows.value.add(row)\r\n      })\r\n      triggerCheckedRows()\r\n    } else {\r\n      rows.value?.forEach(row => {\r\n        row.checked = false\r\n      })\r\n      checkedRows.value.clear()\r\n      triggerCheckedRows()\r\n    }\r\n  }\r\n\r\n  function handleCheckAll(check: boolean) {\r\n    if (props.tree) {\r\n      handleCheckAllTree(check as boolean)\r\n    } else {\r\n      handleCheckAllRows(check as boolean)\r\n    }\r\n  }\r\n\r\n  function handleCheckRow(row: TableRow, check: boolean) {\r\n    // 减少判断的写法\r\n    if (check) {\r\n      row.dft(child => {\r\n        child.checked = check\r\n        checkedRows.value.add(child)\r\n      })\r\n      triggerCheckedRows()\r\n    } else {\r\n      row.dft(child => {\r\n        child.checked = check\r\n        checkedRows.value.delete(child)\r\n      })\r\n      triggerCheckedRows()\r\n    }\r\n  }\r\n\r\n  const getCheckboxColumnWidth = () => {\r\n    return size.value === 'large' ? 80 : 60\r\n  }\r\n\r\n  const checkboxClass = cls.e('checkbox')\r\n  const checkboxClick = (e: Event) => e.stopPropagation()\r\n\r\n  function createCheckColumn(): TableColumn {\r\n    const width = getCheckboxColumnWidth()\r\n    return {\r\n      key: '__is_check_column',\r\n      name: '',\r\n      width,\r\n      align: 'center',\r\n      fixed: 'left',\r\n      nameRender() {\r\n        // @ts-ignore\r\n        const checkboxNode = createVNode(UCheckbox, {\r\n          modelValue: allChecked.value,\r\n          'onUpdate:modelValue': handleCheckAll\r\n        })\r\n        if (!props.tree) {\r\n          return checkboxNode\r\n        }\r\n\r\n        const expandNode = createVNode('i', {\r\n          text: true,\r\n          class: cls.e('expand-space')\r\n        })\r\n        return [expandNode, checkboxNode]\r\n      },\r\n      render(ctx) {\r\n        const { row } = ctx\r\n\r\n        // @ts-ignore\r\n        return createVNode(UCheckbox, {\r\n          class: checkboxClass,\r\n          modelValue: row.checked,\r\n          'onUpdate:modelValue': (val: boolean) => {\r\n            handleCheckRow(row, val)\r\n          },\r\n          onClick: checkboxClick\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleSelect(row: TableRow, check: boolean) {\r\n    row.checked = check\r\n    if (check) {\r\n      if (selectedRow.value) {\r\n        selectedRow.value.checked = false\r\n      }\r\n      selectedRow.value = row\r\n    } else {\r\n      selectedRow.value = undefined\r\n    }\r\n  }\r\n\r\n  function createSelectColumn(): TableColumn {\r\n    const width = getCheckboxColumnWidth()\r\n    return {\r\n      key: '__is_select_column',\r\n      name: '单选',\r\n      minWidth: width,\r\n      width,\r\n      align: 'center',\r\n      fixed: 'left',\r\n      nameRender(ctx) {\r\n        if (!props.tree) {\r\n          return '单选'\r\n        }\r\n\r\n        const expandNode = createVNode('i', {\r\n          text: true,\r\n          class: cls.e('expand-space')\r\n        })\r\n        return [expandNode, createTextVNode('单选')]\r\n      },\r\n\r\n      render({ row }) {\r\n        // @ts-ignore\r\n        return createVNode(UCheckbox, {\r\n          class: checkboxClass,\r\n          modelValue: row.checked,\r\n          'onUpdate:modelValue': (val: boolean) => {\r\n            handleSelect(row, val)\r\n          },\r\n          onClick: checkboxClick\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    createCheckColumn,\r\n    createSelectColumn,\r\n    clearChecked,\r\n    clearSelected\r\n  }\r\n}\r\n", "import { useSlots } from 'vue'\r\nimport type {\r\n  TableColumnRenderContext,\r\n  TableColumnSlotsScope,\r\n  TableProps,\r\n  TableRow\r\n} from '@ui/types/components/table'\r\nimport type { ColumnNode } from './use-columns'\r\nimport { bem, type BEM } from '@ui/utils'\r\nimport { getChainValue } from 'cat-kit/fe'\r\nimport type { RenderReturn } from '@ui/types/helper'\r\n\r\ninterface Options<DataItem extends Record<string, any> = Record<string, any>> {\r\n  props: TableProps<DataItem>\r\n  cls: BEM<'table'>\r\n}\r\n\r\nexport function useTable(options: Options) {\r\n  const { props, cls } = options\r\n\r\n  const slots = useSlots()\r\n\r\n  const getColumnSlotsNode = (\r\n    ctx: TableColumnSlotsScope | TableColumnRenderContext\r\n  ): RenderReturn => {\r\n    const column = ctx.column.data\r\n\r\n    const { render, key } = column\r\n\r\n    if (render) return render(ctx)\r\n\r\n    const slotsRender = props.slots?.[`column:${key}`] ?? slots[`column:${key}`]\r\n\r\n    if (slotsRender) return slotsRender(ctx)\r\n\r\n    return ctx.val\r\n  }\r\n\r\n  const getHeaderSlotsNode = (ctx: { column: ColumnNode }): RenderReturn => {\r\n    const column = ctx.column.data\r\n    const { nameRender, key } = column\r\n\r\n    if (nameRender) return nameRender(ctx)\r\n\r\n    const slotsRender = props.slots?.[`header:${key}`] ?? slots[`header:${key}`]\r\n\r\n    if (slotsRender) return slotsRender(ctx)\r\n\r\n    return column.name\r\n  }\r\n\r\n  const getCellClass = (column: ColumnNode): string => {\r\n    const classList: string[] = [cls.e('cell'), bem.is(column.align)]\r\n\r\n    column.fixed && classList.push(bem.is('fixed-' + column.fixed))\r\n    column.isLastFixed && classList.push(bem.is('last-fixed'))\r\n    column.isFirstFixed && classList.push(bem.is('first-fixed'))\r\n    return classList.join(' ')\r\n  }\r\n\r\n  const getCellCtx = (\r\n    row: TableRow,\r\n    column: ColumnNode\r\n  ): TableColumnSlotsScope | TableColumnRenderContext => {\r\n    const rowData = row.data\r\n    const val = column.key ? getChainValue(rowData, column.key) : undefined\r\n\r\n    const ctx = {\r\n      row,\r\n      column,\r\n      rowData,\r\n      val,\r\n      model: {\r\n        modelValue: val,\r\n        'onUpdate:modelValue': (val: any) => {\r\n          rowData[column.key] = val\r\n        }\r\n      }\r\n    }\r\n\r\n    return ctx\r\n  }\r\n\r\n  return {\r\n    /**\r\n     * 获取列插槽VNode\r\n     * @param ctx 列渲染上下文\r\n     */\r\n    getColumnSlotsNode,\r\n    /**\r\n     * 获取表头插槽VNode\r\n     * @param ctx 表头渲染上下文\r\n     */\r\n    getHeaderSlotsNode,\r\n    /**\r\n     * 获取单元格类名\r\n     * @param column 列\r\n     */\r\n    getCellClass,\r\n    /**\r\n     * 获取单元格上下文\r\n     * @param row 行\r\n     * @param column 列\r\n     */\r\n    getCellCtx\r\n  }\r\n}\r\n", "<template>\r\n  <u-scroll\r\n    :class=\"[\r\n      cls.b,\r\n      cls.m(size),\r\n      bem.is('all-expanded', allExpanded),\r\n      bem.is('text-ellipsis', textEllipsis)\r\n    ]\"\r\n    ref=\"scrollRef\"\r\n    @resize=\"updateStylesOfColumns\"\r\n  >\r\n    <table :class=\"cls.e('wrap')\">\r\n      <colgroup ref=\"colgroupRef\">\r\n        <col\r\n          v-for=\"column of allColumns\"\r\n          :key=\"column.key\"\r\n          :class=\"column.fixed\"\r\n          :style=\"{\r\n            width: withUnit(column.width, 'px'),\r\n            minWidth: withUnit(column.minWidth, 'px')\r\n          }\"\r\n        />\r\n      </colgroup>\r\n      <UTableHead />\r\n      <UTableBody>\r\n        <slot name=\"body\" :columns=\"allColumns\" :rows=\"rows\" />\r\n\r\n        <template #empty v-if=\"slots.empty\">\r\n          <slot name=\"empty\" />\r\n        </template>\r\n      </UTableBody>\r\n\r\n      <!-- 占用空间，用来撑开表格高度 -->\r\n      <tbody\r\n        ref=\"spaceRef\"\r\n        :style=\"{\r\n          width: '1px'\r\n        }\"\r\n      ></tbody>\r\n      <UTableFoot>\r\n        <slot name=\"foot\" :columns=\"allColumns\" :rows=\"rows\" />\r\n      </UTableFoot>\r\n    </table>\r\n\r\n    <slot name=\"append\" />\r\n\r\n    <div :class=\"cls.e('resizer')\"></div>\r\n\r\n    <u-tip v-if=\"textEllipsis\" ref=\"tipRef\"> </u-tip>\r\n  </u-scroll>\r\n</template>\r\n\r\n<script lang=\"ts\" setup generic=\"DataItem extends Record<string, any>\">\r\nimport type {\r\n  TableProps,\r\n  TableEmits,\r\n  _TableExposed,\r\n  TableColumnSlotsScope\r\n} from '@ui/types/components/table'\r\nimport { bem, setStyles, withUnit } from '@ui/utils'\r\nimport { computed, provide, shallowRef, toRef, watch } from 'vue'\r\nimport { TableDIKey } from './di'\r\nimport { useRows } from './use-rows'\r\nimport { ColumnNode, useColumns } from './use-columns'\r\nimport { UTip } from '../tip'\r\nimport UTableHead from './table-head'\r\nimport UTableBody from './table-body.vue'\r\nimport UTableFoot from './table-foot.vue'\r\nimport { UScroll, type ScrollExposed } from '../scroll'\r\nimport { useFallbackProps, useVirtual } from '@ui/compositions'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\nimport { useCheck } from './use-check'\r\nimport { useTable } from './use-table'\r\nimport type { TableRowNode } from './row-node'\r\n\r\ndefineOptions({\r\n  name: 'Table'\r\n})\r\n\r\nconst props = withDefaults(defineProps<TableProps<DataItem>>(), {\r\n  tree: false,\r\n  textOverflow: 'line-break'\r\n})\r\nconst emit = defineEmits<TableEmits>()\r\n\r\nconst slots = defineSlots<{\r\n  [key: `column:${string}`]: (props: TableColumnSlotsScope) => any\r\n  [key: `header:${string}`]: (props: { column: ColumnNode }) => any\r\n  foot?: (props: { columns: ColumnNode[]; rows: TableRowNode[] }) => any\r\n  body?: (props: { columns: ColumnNode[]; rows: TableRowNode[] }) => any\r\n  empty?: () => any\r\n  append?: () => any\r\n}>()\r\n\r\nconst cls = bem('table')\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst colgroupRef = shallowRef<HTMLElement>()\r\n\r\n// 行\r\nconst {\r\n  rows,\r\n  toggleTreeRowExpand,\r\n  allExpanded,\r\n  toggleAllTreeRowExpand,\r\n  rowForest,\r\n  handleRowClick,\r\n  getRowByData\r\n} = useRows({\r\n  props,\r\n  emit\r\n})\r\n\r\n// 选中\r\nconst { createCheckColumn, createSelectColumn, clearChecked, clearSelected } =\r\n  useCheck({\r\n    size,\r\n    props,\r\n    rows,\r\n    rowForest,\r\n    emit,\r\n    cls\r\n  })\r\n\r\n// 列\r\nconst columnConfig = useColumns({\r\n  props,\r\n  createCheckColumn,\r\n  createSelectColumn,\r\n  colgroupRef,\r\n  toggleAllTreeRowExpand,\r\n  cls\r\n})\r\n\r\nconst { allColumns, updateStylesOfColumns } = columnConfig\r\n\r\n// 在表格中提供的通用方法和属性\r\nconst { getColumnSlotsNode, getHeaderSlotsNode, getCellClass, getCellCtx } =\r\n  useTable({\r\n    props,\r\n    cls\r\n  })\r\n\r\nconst scrollRef = shallowRef<ScrollExposed>()\r\n\r\nconst virtualCtx = useVirtual({\r\n  count: computed(() => rows.value.length),\r\n  scrollEl: computed(() => scrollRef.value?.containerRef ?? null),\r\n  estimateSize: () => 48\r\n})\r\n\r\nconst { virtualList, totalHeight } = virtualCtx\r\n\r\nconst spaceHeight = computed(() => {\r\n  if (virtualList.value.length) {\r\n    return (\r\n      totalHeight.value -\r\n      virtualList.value[virtualList.value.length - 1]!.end +\r\n      virtualList.value[0]!.start\r\n    )\r\n  }\r\n  return totalHeight.value\r\n})\r\n\r\nconst spaceRef = shallowRef<HTMLElement>()\r\n\r\nwatch(\r\n  spaceHeight,\r\n  spaceHeight => {\r\n    spaceRef.value &&\r\n      setStyles(spaceRef.value, {\r\n        height: `${spaceHeight}px`\r\n      })\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nconst tipRef = shallowRef()\r\n\r\nprovide(TableDIKey, {\r\n  tableProps: props,\r\n  tableSlots: slots,\r\n  cls,\r\n  rows,\r\n  columnConfig,\r\n  handleRowClick,\r\n  getColumnSlotsNode,\r\n  getHeaderSlotsNode,\r\n  getCellClass,\r\n  getCellCtx,\r\n  // tipRef,\r\n  toggleTreeRowExpand,\r\n  ...virtualCtx\r\n})\r\n\r\ndefineExpose<_TableExposed>({\r\n  el: toRef(() => scrollRef.value?.el),\r\n  clearChecked,\r\n  clearSelected,\r\n  getRowByData\r\n})\r\n</script>\r\n", "<template>\r\n  <u-card :class=\"cls.e('list')\">\r\n    <u-card-header v-if=\"!!slots.header || props.title\">\r\n      <slot> {{ props.title }} </slot>\r\n    </u-card-header>\r\n\r\n    <u-table\r\n      v-bind=\"tableProps\"\r\n      :slots=\"slots\"\r\n      :class=\"cls.e('table')\"\r\n      :columns=\"columns\"\r\n      highlight-current\r\n      :current-row=\"state.row\"\r\n      @update:current-row=\"handleUpdateCurrentRow\"\r\n      @update:checked=\"emit('update:checked', $event)\"\r\n      @update:selected=\"emit('update:selected', $event)\"\r\n      ref=\"tableRef\"\r\n    >\r\n      <template #column:__action__=\"{ row }\">\r\n        <ButtonWrap tag=\"div\" @click.stop :loading=\"row.operating\">\r\n          <template v-if=\"featureSets.has('create')\">\r\n            <u-button\r\n              @click=\"handleInsertToPrev(row)\"\r\n              :icon=\"InsertToPrev\"\r\n              title=\"插入到上一行\"\r\n            />\r\n            <u-button\r\n              @click=\"handleInsertToNext(row)\"\r\n              :icon=\"InsertToNext\"\r\n              title=\"插入到下一行\"\r\n            />\r\n\r\n            <u-button\r\n              v-if=\"props.tree\"\r\n              @click=\"handleInsertChild(row)\"\r\n              :icon=\"AddChild\"\r\n              title=\"添加子项\"\r\n            />\r\n          </template>\r\n\r\n          <u-button\r\n            v-if=\"featureSets.has('delete')\"\r\n            :icon=\"Delete\"\r\n            type=\"danger\"\r\n            title=\"删除\"\r\n            @click=\"handleDelete(row)\"\r\n          />\r\n        </ButtonWrap>\r\n      </template>\r\n\r\n      <template #empty v-if=\"!props.readonly\"> {{ null }} </template>\r\n\r\n      <template\r\n        #append\r\n        v-if=\"\r\n          !props.readonly &&\r\n          featureSets.has('create') &&\r\n          (props.quickEdit ||\r\n            (state.type === 'create' && !state.visible) ||\r\n            state.type === 'update')\r\n        \"\r\n      >\r\n        <div :class=\"cls.e('add')\">\r\n          <u-button\r\n            plain\r\n            type=\"primary\"\r\n            @click=\"handleCreate\"\r\n            :loading=\"state.loading\"\r\n          >\r\n            <span\r\n              style=\"position: sticky; left: 50%; transform: translateX(-50%)\"\r\n            >\r\n              新增\r\n            </span>\r\n          </u-button>\r\n        </div>\r\n        <!-- <tr>\r\n          <td :colspan=\"columns.length\" :class=\"cls.e('add')\">\r\n            <u-button\r\n              plain\r\n              type=\"primary\"\r\n              @click=\"handleCreate\"\r\n              :loading=\"state.loading\"\r\n            >\r\n              <span\r\n                style=\"position: sticky; left: 50%; transform: translateX(-50%)\"\r\n              >\r\n                新增\r\n              </span>\r\n            </u-button>\r\n          </td>\r\n        </tr> -->\r\n      </template>\r\n    </u-table>\r\n  </u-card>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, inject, type Slots } from 'vue'\r\nimport { omit } from 'cat-kit/fe'\r\nimport { Delete, InsertToPrev, InsertToNext, AddChild } from 'icon-ultra'\r\nimport { BatchEditDIKey } from './di'\r\nimport { useComponentProps } from '@ui/compositions'\r\nimport { UCard, UCardHeader } from '../card'\r\nimport { UTable } from '../table'\r\n// import { UCheckbox } from '../checkbox'\r\nimport { UButton } from '../button'\r\n// import { UTip } from '../tip'\r\nimport type { ButtonProps } from '../button'\r\nimport type { BatchEditFeature, TableRow } from '@ui/types'\r\n\r\ndefineOptions({\r\n  name: 'BatchEditList'\r\n})\r\n\r\ndefineProps<{\r\n  slots: Slots\r\n}>()\r\n\r\nconst {\r\n  cls,\r\n  state,\r\n  tableRef,\r\n  props,\r\n  emit,\r\n  featureSets,\r\n  handleCreate,\r\n  handleDelete,\r\n  handleInsertToNext,\r\n  handleInsertToPrev,\r\n  handleInsertChild\r\n} = inject(BatchEditDIKey)!\r\n\r\nconst tableProps = computed(() => {\r\n  return omit(props, [\r\n    'model',\r\n    'columns',\r\n    'cols',\r\n    'readonly',\r\n    'deleteMethod',\r\n    'saveMethod',\r\n    'features',\r\n    'resizable',\r\n    'quickEdit'\r\n  ])\r\n})\r\n\r\nconst hasNot = (value: BatchEditFeature[]) =>\r\n  value.every(v => !featureSets.value.has(v))\r\n\r\nconst columns = computed(() => {\r\n  if (props.readonly || hasNot(['create', 'delete'])) return props.columns\r\n\r\n  return (props.columns ?? []).concat({\r\n    name: '操作',\r\n    key: '__action__',\r\n    align: 'center',\r\n    width: 150,\r\n    fixed: 'right'\r\n  })\r\n})\r\n\r\nconst ButtonWrap = useComponentProps<ButtonProps>({\r\n  size: 'small',\r\n  circle: true,\r\n  text: true,\r\n  type: 'primary',\r\n  style: { fontSize: '16px', marginRight: '6px' },\r\n  loading: false\r\n})\r\n\r\nfunction handleUpdateCurrentRow(row?: TableRow) {\r\n  if (featureSets.value.has('update')) {\r\n    state.row = row\r\n  }\r\n}\r\n</script>\r\n", "import type { InjectionKey, ShallowReactive, ShallowRef } from 'vue'\r\nimport type { Breakpoint, GridItemProps } from '@ui/types/components/grid'\r\n\r\nexport interface GridContext {\r\n  /** 当前断点 */\r\n  currentBreakpoint: ShallowRef<Breakpoint | undefined>\r\n  /** 栅格项属性 */\r\n  gridItemsProps: ShallowReactive<Set<GridItemProps>>\r\n}\r\n\r\nexport const GridDIKey: InjectionKey<GridContext> = Symbol('GridDIKey')\r\n", "import type { BreakpointName } from '@ui/types/component-common'\r\nimport type { BreakCols, Breakpoint } from '@ui/types/components/grid'\r\n\r\nexport const DEFAULT_COLS = 24\r\n\r\nconst points: [number, BreakpointName][] = [\r\n  [578, 'xs'],\r\n  [960, 'sm'],\r\n  [1280, 'md'],\r\n  [1920, 'lg'],\r\n  [Infinity, 'xl']\r\n]\r\n\r\n/**\r\n * 获取容器断点\r\n * @param width\r\n */\r\nexport function getContainerBreakpoint(width: number): Breakpoint {\r\n  for (let i = 0; i < points.length; i++) {\r\n    const point = points[i]!\r\n    if (width < point[0]) {\r\n      return {\r\n        name: point[1],\r\n        level: i + 1\r\n      }\r\n    }\r\n  }\r\n  return {\r\n    name: 'xl',\r\n    level: 5\r\n  }\r\n}\r\n\r\n/**\r\n * 获取断点对应的列数\r\n * @param colConf 断点配置\r\n * @param breakpoint 断点\r\n */\r\nexport function getBreakpointCols(colConf: BreakCols, breakpoint?: Breakpoint) {\r\n  if (!breakpoint) return DEFAULT_COLS\r\n  const { name, level } = breakpoint\r\n  const cols = colConf[name]\r\n  if (cols !== undefined) return cols\r\n\r\n  if (level === 5) return colConf.default ?? DEFAULT_COLS\r\n\r\n  // 尝试寻找高级断点\r\n  const highLevelPoints = points.slice(level - 1)\r\n  for (let i = 0; i < highLevelPoints.length; i++) {\r\n    const pointName = highLevelPoints[i]![1]\r\n    if (colConf[pointName]) {\r\n      return colConf[pointName]\r\n    }\r\n  }\r\n  return DEFAULT_COLS\r\n}\r\n", "import {\r\n  computed,\r\n  shallowRef,\r\n  watch,\r\n  type ShallowRef,\r\n  shallowReactive,\r\n  onBeforeUnmount\r\n} from 'vue'\r\nimport type {\r\n  Breakpoint,\r\n  GridEmits,\r\n  GridItemProps,\r\n  GridProps\r\n} from '@ui/types/components/grid'\r\nimport { debounce, equal } from 'cat-kit/fe'\r\nimport { getContainerBreakpoint } from './breakpoint'\r\nimport type { Undef } from '@ui/types/helper'\r\n\r\ninterface ResponsiveOptions {\r\n  props: GridProps\r\n  emit: GridEmits\r\n  /** 栅格容器模板引用 */\r\n  gridRef: ShallowRef<HTMLElement | undefined>\r\n}\r\n\r\nexport function useResponsive(options: ResponsiveOptions) {\r\n  const { props, gridRef, emit } = options\r\n\r\n  const gridItemsProps = shallowReactive<Set<GridItemProps>>(new Set())\r\n\r\n  const responsive = computed(() => {\r\n    return (\r\n      (props.cols && typeof props.cols !== 'number') || !!gridItemsProps.size\r\n    )\r\n  })\r\n\r\n  const currentBreakpoint = shallowRef<Breakpoint>()\r\n\r\n  let observer: Undef<ResizeObserver>\r\n\r\n  watch(\r\n    [responsive, gridRef],\r\n    ([responsive, dom]) => {\r\n      if (!dom) return\r\n      if (responsive && !observer) {\r\n        observer = new ResizeObserver(\r\n          debounce(([entry]) => {\r\n            const target = entry!.target as HTMLElement\r\n            const rect = target.getBoundingClientRect()\r\n            emit('resize', rect)\r\n            const breakpoint = getContainerBreakpoint(target.offsetWidth)\r\n            if (equal(currentBreakpoint.value, breakpoint)) return\r\n            currentBreakpoint.value = breakpoint\r\n            emit('breakpoint-change', breakpoint)\r\n          }, 0)\r\n        )\r\n        observer.observe(dom)\r\n      } else {\r\n        observer?.unobserve(dom)\r\n        observer?.disconnect()\r\n        observer = undefined\r\n      }\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  onBeforeUnmount(() => {\r\n    gridRef.value && observer?.unobserve(gridRef.value)\r\n    observer?.disconnect()\r\n  })\r\n\r\n  return {\r\n    responsive,\r\n    gridItemsProps,\r\n    currentBreakpoint\r\n  }\r\n}\r\n", "<template>\r\n  <component :is=\"tag\" :class=\"cls.b\" ref=\"gridRef\">\r\n    <slot />\r\n  </component>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { bem, setStyles, withUnit } from '@ui/utils'\r\nimport type {\r\n  GridProps,\r\n  GridEmits,\r\n  _GridExposed\r\n} from '@ui/types/components/grid'\r\nimport { GridDIKey } from './di'\r\nimport { type CSSProperties, shallowRef, provide, watchEffect } from 'vue'\r\nimport { useResponsive } from './use-responsive'\r\nimport { getBreakpointCols } from './breakpoint'\r\n\r\ndefineOptions({\r\n  name: 'Grid'\r\n})\r\n\r\nconst props = withDefaults(defineProps<GridProps>(), {\r\n  tag: 'div'\r\n})\r\n\r\nconst emit = defineEmits<GridEmits>()\r\n\r\nconst cls = bem('grid')\r\n\r\nconst gridRef = shallowRef<HTMLElement>()\r\n\r\nconst { currentBreakpoint, gridItemsProps } = useResponsive({\r\n  props,\r\n  emit,\r\n  gridRef\r\n})\r\n\r\n// 不使用computed以减少重复渲染\r\nwatchEffect(() => {\r\n  const { gap, cols } = props\r\n  const breakpoint = currentBreakpoint.value\r\n\r\n  const style: CSSProperties = {}\r\n\r\n  if (typeof gap === 'number') {\r\n    if (gap > 0) {\r\n      style.columnGap = gap + 'px'\r\n    }\r\n  } else if (typeof gap === 'string') {\r\n    const [rowGap, columnGap] = gap.split(' ')\r\n    style.columnGap = withUnit(columnGap, 'px')\r\n    style.rowGap = rowGap\r\n  }\r\n\r\n  if (!cols) {\r\n    delete style.gridTemplateColumns\r\n  } else {\r\n    switch (typeof cols) {\r\n      case 'number':\r\n        style.gridTemplateColumns = `repeat(${cols}, minmax(0px, 1fr))`\r\n        break\r\n      case 'function':\r\n        style.gridTemplateColumns = `repeat(${cols(breakpoint)}, minmax(0px, 1fr))`\r\n        break\r\n      case 'object':\r\n        const amount = getBreakpointCols(cols, breakpoint)\r\n        style.gridTemplateColumns = `repeat(${amount}, minmax(0px, 1fr))`\r\n    }\r\n  }\r\n\r\n  gridRef.value && setStyles(gridRef.value, style)\r\n})\r\n\r\nprovide(GridDIKey, {\r\n  currentBreakpoint,\r\n  gridItemsProps\r\n})\r\n\r\ndefineExpose<_GridExposed>({\r\n  el: gridRef\r\n})\r\n</script>\r\n", "import type { FormProps } from '@ui/types/components/form'\r\nimport { onBeforeUnmount, useSlots, type VNode } from 'vue'\r\nimport { pick } from 'cat-kit/fe'\r\nimport { createIncrease, extractNormalVNodes } from '@ui/utils'\r\n\r\ninterface Options {\r\n  props: FormProps\r\n}\r\n\r\nconst FORM_ITEM_PROPS = ['label', 'field', 'span', 'tips', 'readonly']\r\n\r\nconst id = createIncrease(1)\r\n\r\n/**\r\n * 虚拟node拦截\r\n * @param options 选项\r\n * @returns\r\n */\r\nexport function useNodeInterceptor(options: Options) {\r\n  const { props } = options\r\n  const slots = useSlots()\r\n\r\n  const formId = id()\r\n\r\n  function getSlotsNodes() {\r\n    const { model } = props\r\n    const nodes = slots.default?.({\r\n      model,\r\n      data: model?.data\r\n    })\r\n    if (!nodes?.length) return null\r\n\r\n    const flattedNodes = extractNormalVNodes(nodes)\r\n\r\n    const results: Array<\r\n      | {\r\n          isFormItem: true\r\n          formItemProps: Record<string, any>\r\n          node: VNode\r\n          field: string\r\n          modelValue?: any\r\n        }\r\n      | {\r\n          isFormItem: false\r\n          formItemProps: Record<string, any>\r\n          node: VNode\r\n          field: undefined\r\n          modelValue?: any\r\n        }\r\n    > = []\r\n\r\n    // 渲染表单后得到的应当校验的字段\r\n    const fields: string[] = []\r\n\r\n    let i = 0\r\n    while (i < flattedNodes.length) {\r\n      const node = flattedNodes[i]!\r\n      i++\r\n\r\n      const { props, type } = node\r\n      const item = {\r\n        isFormItem: !!props?.field && (type as any)?.name !== 'FormItem',\r\n        formItemProps: pick(props ?? {}, FORM_ITEM_PROPS),\r\n        node,\r\n        field: props?.field,\r\n        modelValue: props?.['model-value'] ?? props?.modelValue\r\n      }\r\n\r\n      item.field && fields.push(item.field)\r\n      results.push(item)\r\n    }\r\n\r\n    model.formKeys.set(formId, fields)\r\n    return results\r\n  }\r\n\r\n  onBeforeUnmount(() => {\r\n    props.model?.formKeys.delete(formId)\r\n  })\r\n\r\n  return {\r\n    getSlotsNodes\r\n  }\r\n}\r\n", "<template>\r\n  <component :is=\"tag\" :style=\"style\" :class=\"cls.b\" v-if=\"span !== 0\">\r\n    <slot />\r\n  </component>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { GridItemProps } from '@ui/types/components/grid'\r\nimport { computed, inject, type CSSProperties, watch } from 'vue'\r\nimport { GridDIKey } from './di'\r\nimport { bem } from '@ui/utils'\r\n\r\ndefineOptions({\r\n  name: 'GridItem'\r\n})\r\n\r\nconst props = withDefaults(defineProps<GridItemProps>(), {\r\n  tag: 'div'\r\n})\r\n\r\nconst cls = bem('grid-item')\r\n\r\nconst { currentBreakpoint, gridItemsProps } = inject(GridDIKey) ?? {}\r\n\r\nif (!currentBreakpoint) {\r\n  console.error('GridItem组件仅能在Grid组件中使用')\r\n}\r\n\r\nconst span = computed<number | 'full'>(() => {\r\n  let { span } = props\r\n  if (span === undefined) return 1\r\n  if (span === 'full') return 'full'\r\n\r\n  if (typeof span === 'number') return span\r\n\r\n  const breakpoint = currentBreakpoint?.value\r\n\r\n  if (!breakpoint) return span.default\r\n  return span[breakpoint.name] ?? span.default\r\n})\r\n\r\nconst style = computed<CSSProperties>(() => {\r\n  return {\r\n    gridColumn: span.value === 'full' ? '1 / -1' : `span ${span.value}`\r\n  }\r\n})\r\n\r\nwatch(\r\n  () => props.span,\r\n  span => {\r\n    if (typeof span === 'object') {\r\n      gridItemsProps?.add(props)\r\n    } else {\r\n      gridItemsProps?.delete(props)\r\n    }\r\n  },\r\n  { immediate: true }\r\n)\r\n</script>\r\n", "<template>\r\n  <u-grid-item :span=\"span\" :class=\"className\">\r\n    <label\r\n      v-if=\"props.label || $slots.label\"\r\n      :class=\"[cls.e('label'), bem.is('required', fieldRequired)]\"\r\n      :style=\"labelStyles\"\r\n    >\r\n      <u-tip v-if=\"tips\" :content=\"tips\" :class=\"cls.e('tips')\">\r\n        <span :class=\"cls.e('tip-label')\">\r\n          <slot name=\"label\">{{ label }}:</slot>\r\n        </span>\r\n      </u-tip>\r\n      <template v-else>\r\n        <slot name=\"label\">{{ label }}:</slot>\r\n      </template>\r\n    </label>\r\n\r\n    <section :class=\"cls.e('content')\">\r\n      <slot></slot>\r\n\r\n      <section v-if=\"!readonly\" :class=\"cls.e('error')\">\r\n        <transition name=\"form-item-tips\" mode=\"out-in\">\r\n          <span :class=\"cls.e('error-text')\" v-if=\"!!errorTips\">\r\n            {{ errorTips }}\r\n          </span>\r\n        </transition>\r\n      </section>\r\n    </section>\r\n  </u-grid-item>\r\n</template>\r\n\r\n<script lang=\"tsx\" setup>\r\nimport { bem, withUnit } from '@ui/utils'\r\nimport type { FormItemProps } from '@ui/types/components/form-item'\r\nimport { type CSSProperties, computed } from 'vue'\r\nimport { useConfig, useFallbackProps, useFormComponent } from '@ui/compositions'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\nimport { UGridItem } from '../grid'\r\nimport { UTip } from '../tip'\r\n\r\ndefineOptions({\r\n  name: 'FormItem'\r\n})\r\n\r\nconst props = withDefaults(defineProps<FormItemProps>(), {\r\n  readonly: undefined\r\n})\r\n\r\ndefineSlots<{\r\n  /** 标签插槽 */\r\n  label?: () => any\r\n  default?: () => any\r\n}>()\r\n\r\nconst cls = bem('form-item')\r\n\r\n/** 表单组件上下文 */\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { config } = useConfig()\r\n\r\nconst { size, readonly } = useFallbackProps([formProps ?? {}, props], {\r\n  size: 'default' as ComponentSize,\r\n  readonly: false\r\n})\r\n\r\nconst className = computed(() => {\r\n  return [cls.b, cls.m(size.value), bem.is('error', !!errorTips.value)].join(\r\n    ' '\r\n  )\r\n})\r\n\r\n/** label样式 */\r\nconst labelStyles = computed<CSSProperties>(() => {\r\n  return {\r\n    width: withUnit(\r\n      props.labelWidth ?? formProps?.labelWidth ?? config.form.labelWidth,\r\n      'px'\r\n    )\r\n  }\r\n})\r\n\r\n/** 错误提示 */\r\nconst errorTips = computed<string | undefined>(() => {\r\n  if (props.field) {\r\n    return formProps?.model.errors.get(props.field)?.[0]\r\n  }\r\n})\r\n\r\n/** 字段是否必须 */\r\nconst fieldRequired = computed<boolean>(() => {\r\n  const { field } = props\r\n  if (!field || readonly.value) return false\r\n  const required = formProps?.model?.fields[field]?.required\r\n  return required ? true : false\r\n})\r\n</script>\r\n", "<template>\r\n  <u-grid\r\n    tag=\"form\"\r\n    ref=\"gridRef\"\r\n    :cols=\"breakpointCols\"\r\n    :class=\"[cls.b, bem.is('readonly', readonly)]\"\r\n  >\r\n    <template\r\n      v-for=\"{\r\n        node,\r\n        isFormItem,\r\n        formItemProps,\r\n        field,\r\n        modelValue\r\n      } of getSlotsNodes()\"\r\n      :key=\"node.key\"\r\n    >\r\n      <u-form-item v-if=\"isFormItem\" v-bind=\"formItemProps\">\r\n        <component\r\n          :is=\"node\"\r\n          :model-value=\"modelValue ?? getChainValue(model?.data ?? {}, field)\"\r\n          @update:model-value=\"handleUpdateValue(field, $event)\"\r\n        />\r\n      </u-form-item>\r\n\r\n      <component v-else :is=\"node\" />\r\n    </template>\r\n  </u-grid>\r\n</template>\r\n\r\n<script lang=\"ts\" setup generic=\"Model extends FormModel | DynamicFormModel\">\r\nimport type { FormProps, _FormExposed } from '@ui/types/components/form'\r\nimport { UGrid, type GridExposed } from '../grid'\r\nimport { bem } from '@ui/utils'\r\nimport { useFormComponent } from '@ui/compositions'\r\nimport { useNodeInterceptor } from './use-node-interceptor'\r\nimport { UFormItem } from '../form-item'\r\nimport { shallowRef, toRef } from 'vue'\r\nimport { getChainValue, setChainValue } from 'cat-kit/fe'\r\nimport type { FormModel } from './form-model'\r\nimport type { DynamicFormModel } from './dynamic-form-model'\r\n\r\ndefineOptions({\r\n  name: 'Form'\r\n})\r\n\r\nconst props = defineProps<FormProps<Model>>()\r\n\r\nconst model = toRef(() => props.model)\r\n\r\ndefineSlots<{\r\n  default(props: {\r\n    /** 表单数据 */\r\n    data: Model['data']\r\n    /** 表单模型 */\r\n    model: Model\r\n  }): any\r\n}>()\r\n\r\nconst cls = bem('form')\r\n\r\nconst breakpointCols = { xs: 1, sm: 2, xl: 3, default: 4 }\r\n\r\nuseFormComponent(props)\r\n\r\nconst { getSlotsNodes } = useNodeInterceptor({ props })\r\n\r\nfunction handleUpdateValue(field: string, value: any) {\r\n  const { data } = model.value ?? {}\r\n  if (!data) return\r\n\r\n  setChainValue(data, field, value)\r\n}\r\n\r\nconst gridRef = shallowRef<GridExposed>()\r\n\r\ndefineExpose<_FormExposed>({\r\n  el: toRef(() => gridRef.value?.el)\r\n})\r\n</script>\r\n", "<template>\r\n  <div :class=\"cls?.e('action')\" :style=\"style\">\r\n    <slot> </slot>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { type CSSProperties, computed, inject } from 'vue'\r\nimport { CardDIKey } from './di'\r\nimport type { CardActionProps } from '@ui/types/components/card'\r\n\r\ndefineOptions({ name: 'CardAction' })\r\n\r\nconst props = defineProps<CardActionProps>()\r\n\r\nconst style = computed<CSSProperties>(() => {\r\n  return {\r\n    textAlign: props.alignRight ? 'right' : undefined\r\n  }\r\n})\r\n\r\nconst injected = inject(CardDIKey)\r\nconst { cls } = injected || {}\r\n\r\nif (!injected) {\r\n  console.warn('CardAction组件仅能在Card组件中使用')\r\n}\r\n</script>\r\n", "<template>\r\n  <u-card :class=\"cls.e('form')\" v-if=\"state.visible && !!props.model\">\r\n    <u-card-header>\r\n      <template v-if=\"props.readonly\">详情</template>\r\n      <template v-else-if=\"!!state.parentRow\">新增子级</template>\r\n      <template v-else-if=\"state.type === 'create'\">新增</template>\r\n      <template v-else-if=\"state.type === 'update'\">编辑</template>\r\n    </u-card-header>\r\n\r\n    <transition name=\"fade\" appear mode=\"out-in\">\r\n      <u-scroll always :class=\"cls.e('form-wrap')\">\r\n        <u-form\r\n          :model=\"props.model\"\r\n          :readonly=\"props.readonly\"\r\n          @keyup.enter=\"handleSave\"\r\n          :label-width=\"props.labelWidth\"\r\n        >\r\n          <template #default=\"{ data, model }\">\r\n            <slot\r\n              v-bind=\"{\r\n                data,\r\n                model,\r\n                row: state.row,\r\n                indexes: insertIndexes,\r\n                index: state.row?.index\r\n              }\"\r\n            />\r\n          </template>\r\n        </u-form>\r\n      </u-scroll>\r\n    </transition>\r\n\r\n    <u-card-action :class=\"cls.e('action')\">\r\n      <u-button\r\n        text\r\n        type=\"primary\"\r\n        :loading=\"state.loading\"\r\n        @click=\"handleClose\"\r\n      >\r\n        关闭\r\n      </u-button>\r\n      <u-button\r\n        v-if=\"!props.readonly && !props.quickEdit && state.dataUpdated\"\r\n        :type=\"state.type === 'create' ? 'success' : 'primary'\"\r\n        :loading=\"state.loading\"\r\n        @click=\"handleSave\"\r\n        plain\r\n      >\r\n        确认{{ state.type === 'create' ? '新增' : '修改' }}\r\n      </u-button>\r\n    </u-card-action>\r\n  </u-card>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { inject } from 'vue'\r\nimport { UForm } from '../form'\r\nimport { UCard, UCardAction, UCardHeader } from '../card'\r\nimport { BatchEditDIKey } from './di'\r\nimport { UScroll } from '../scroll'\r\nimport { UButton } from '../button'\r\n\r\ndefineOptions({\r\n  name: 'BatchEditForm'\r\n})\r\n\r\nconst { cls, props, state, insertIndexes, handleSave, handleClose } =\r\n  inject(BatchEditDIKey)!\r\n</script>\r\n", "<template>\r\n  <u-layout\r\n    :class=\"cls.b\"\r\n    :cols=\"cols\"\r\n    rows=\"100%\"\r\n    gap=\"8px\"\r\n    :resizable=\"resizable\"\r\n    @keyup.esc=\"handleClose\"\r\n  >\r\n    <BatchEditList :slots=\"slots\">\r\n      <slot name=\"header\" v-if=\"!!slots.header\" />\r\n    </BatchEditList>\r\n    <BatchEditForm v-slot=\"scoped\">\r\n      <!-- @vue-ignore -->\r\n      <slot name=\"form\" v-bind=\"scoped\" />\r\n    </BatchEditForm>\r\n  </u-layout>\r\n</template>\r\n\r\n<script lang=\"ts\" setup generic=\"Model extends FormModel\">\r\nimport {\r\n  type BatchEditEmits,\r\n  type BatchEditFeature,\r\n  type BatchEditProps\r\n} from '@ui/types/components/batch-edit'\r\nimport { computed, inject, provide, shallowRef, watch } from 'vue'\r\nimport {\r\n  type TableColumnSlotsScope,\r\n  type TableExposed,\r\n  type TableRow\r\n} from '../table'\r\nimport { type FormModel } from '../form'\r\nimport { ULayout } from '../layout'\r\nimport { bem } from '@ui/utils'\r\nimport { DialogDIKey } from '../dialog/di'\r\nimport { useEdit } from './use-edit'\r\nimport { BatchEditDIKey } from './di'\r\nimport BatchEditList from './batch-edit-list.vue'\r\nimport BatchEditForm from './batch-edit-form.vue'\r\n\r\ndefineOptions({\r\n  name: 'BatchEdit'\r\n})\r\n\r\nconst props = withDefaults(defineProps<BatchEditProps<Model>>(), {\r\n  cols: () => ['1fr', '400px'],\r\n  resizable: true,\r\n  mode: 'normal'\r\n})\r\n\r\nconst emit = defineEmits<BatchEditEmits>()\r\n\r\nconst featureSets = computed(() => {\r\n  return new Set<BatchEditFeature>(\r\n    props.features ?? ['create', 'delete', 'update']\r\n  )\r\n})\r\n\r\nconst slots = defineSlots<\r\n  {\r\n    form?: (props: {\r\n      /** 表单数据 */\r\n      data: Model['data']\r\n      /** 表单模型 */\r\n      model: Model\r\n      /** 当前编辑的行 */\r\n      row?: TableRow\r\n      /** 当前编辑的行索引 */\r\n      index?: number\r\n      /** 操作的目标行索引路径 */\r\n      indexes?: number[]\r\n    }) => any\r\n\r\n    header?: () => any\r\n  } & Partial<{\r\n    [key: `column:${string}`]: (props: TableColumnSlotsScope) => any\r\n  }>\r\n>()\r\n\r\nconst cls = bem('batch-edit')\r\n\r\nconst tableRef = shallowRef<TableExposed>()\r\n\r\nconst editCtx = useEdit({\r\n  props,\r\n  emit,\r\n  tableRef\r\n})\r\n\r\nconst { state, handleClose } = editCtx\r\n\r\nprovide(BatchEditDIKey, {\r\n  cls,\r\n  props,\r\n  emit,\r\n  tableRef,\r\n  featureSets,\r\n  ...editCtx\r\n})\r\n\r\nconst dialogCtx = inject(DialogDIKey, undefined)\r\n\r\n// 如果在dialog上下文中\r\ndialogCtx &&\r\n  watch(dialogCtx.visible, visible => {\r\n    !visible && editCtx.handleClose()\r\n  })\r\n\r\nconst cols = computed(() => {\r\n  return !!state.row || state.visible ? props.cols : undefined\r\n})\r\n</script>\r\n", "import type { BatchEditColumn } from '@ui/types/components/batch-edit'\r\n\r\n/**\r\n * 定义批量编辑组件的列\r\n * @param columns 列\r\n * @returns\r\n */\r\nexport function defineBatchEditColumns(columns: BatchEditColumn[]) {\r\n  return columns\r\n}\r\n", "<template>\r\n  <div :class=\"cls.b\">\r\n    <slot v-bind=\"{ props }\" />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { bem } from '@ui/utils'\r\nimport type { ButtonProps } from '@ui/types/components/button'\r\n\r\ndefineOptions({\r\n  name: 'ButtonGroup'\r\n})\r\n\r\nconst props = defineProps<ButtonProps>()\r\n\r\nconst cls = bem('button-group')\r\n\r\ndefineSlots<{\r\n  default: (props: { props: ButtonProps }) => any\r\n}>()\r\n</script>\r\n", "import { type Dater, date } from 'cat-kit/fe'\r\nimport type { Day } from '@ui/types/components/calendar'\r\n\r\nexport const weekDays = ['日', '一', '二', '三', '四', '五', '六']\r\n\r\n/**\r\n * 获取一个月的天数\r\n * @param d 日期\r\n * @param disabledDate 禁用日期\r\n * @returns\r\n */\r\nexport function getMonthDays(\r\n  d: Date | string | number | Dater,\r\n  disabledDate?: (d: Dater) => boolean\r\n) {\r\n  const todayStr = date().format()\r\n  if (d instanceof Date || typeof d === 'string' || typeof d === 'number') {\r\n    d = date(d)\r\n  }\r\n\r\n  // 本月天数\r\n  d.setDay(1)\r\n  const currentMonthDays: Day[] = Array.from({ length: d.getDays() }).map(\r\n    (_, i) => {\r\n      const day: Day = {\r\n        date: d.calc(i, 'days'),\r\n        type: 'current'\r\n      }\r\n      day.isToday = day.date.format() === todayStr\r\n      day.disabled = disabledDate?.(day.date)\r\n      return day\r\n    }\r\n  )\r\n\r\n  const preMonthDays: Day[] = []\r\n\r\n  const nextMonthDays: Day[] = []\r\n\r\n  // 上月天数\r\n  const firstDayWeek = d.weekDay\r\n\r\n  if (firstDayWeek !== 0) {\r\n    // 上个月最后一天\r\n    d.setDay(0)\r\n    let i = 0\r\n    while (i < firstDayWeek) {\r\n      const day: Day = {\r\n        date: d.calc(-i, 'days'),\r\n        type: 'pre'\r\n      }\r\n      day.disabled = disabledDate?.(day.date)\r\n      preMonthDays.unshift(day)\r\n      i++\r\n    }\r\n  }\r\n\r\n  // 下个月的天数\r\n  const nextMonthDaysAmount = 42 - currentMonthDays.length - preMonthDays.length\r\n\r\n  let j = 0\r\n  d.setMonth(d.month + 2).setDay(1)\r\n\r\n  while (j < nextMonthDaysAmount) {\r\n    const day: Day = {\r\n      date: d.calc(j++, 'days'),\r\n      type: 'next'\r\n    }\r\n    day.disabled = disabledDate?.(day.date)\r\n    nextMonthDays.push(day)\r\n  }\r\n\r\n  return [...preMonthDays, ...currentMonthDays, ...nextMonthDays]\r\n}\r\n\r\n/**\r\n * 获取一年的月份\r\n * @param d 日期\r\n * @param disabledDate 禁用的日期\r\n * @returns\r\n */\r\nexport function getYearMonths(\r\n  d: Date | string | number | Dater,\r\n  disabledDate?: (d: Dater) => boolean\r\n): Array<{\r\n  key: string\r\n  month: number\r\n  disabled?: boolean\r\n}> {\r\n  if (d instanceof Date || typeof d === 'string' || typeof d === 'number') {\r\n    d = date(d)\r\n  }\r\n\r\n  const year = d.year\r\n\r\n  return Array.from({ length: 12 }).map((_, i) => {\r\n    const month = i + 1\r\n\r\n    const ym = `${year}-${month}`\r\n\r\n    return {\r\n      key: ym,\r\n      month,\r\n      disabled: disabledDate?.(date(ym).toEndOfMonth())\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 获取当前年份所处的10年\r\n * @param d 日期\r\n * @param disabledDate 禁用的日期\r\n * @returns\r\n */\r\nexport function getTenYears(\r\n  d: Date | string | number | Dater,\r\n  disabledDate?: (d: Dater) => boolean\r\n) {\r\n  if (d instanceof Date || typeof d === 'string' || typeof d === 'number') {\r\n    d = date(d)\r\n  }\r\n\r\n  const startYear = d.year - (d.year % 10) + 1\r\n\r\n  return Array.from({ length: 10 }).map((_, i) => {\r\n    const year = startYear + i\r\n    return {\r\n      year,\r\n      disabled: disabledDate?.(date(`${year}-12-31 23:59:59`))\r\n    }\r\n  })\r\n}\r\n", "<template>\r\n  <div :class=\"cls.b\">\r\n    <ul :class=\"cls.e('days')\">\r\n      <li\r\n        :class=\"[cls.e('day'), cls.em('day', day.type)]\"\r\n        v-for=\"day of days\"\r\n        :key=\"day.date.timestamp\"\r\n      >\r\n        {{ day.date.day }}\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { CalendarProps } from '@ui/types/components/calendar'\r\nimport { bem } from '@ui/utils'\r\nimport { computed } from 'vue'\r\nimport { getMonthDays } from './utils'\r\n\r\ndefineOptions({\r\n  name: 'Calendar'\r\n})\r\n\r\ndefineProps<CalendarProps>()\r\n\r\nconst model = defineModel<string>()\r\n\r\nconst cls = bem('calendar')\r\n\r\nconst days = computed(() => {\r\n  return getMonthDays(model.value ?? new Date())\r\n})\r\n</script>\r\n", "<template>\r\n  <div :class=\"cls?.e('cover')\" :style=\"style\">\r\n    <img\r\n      v-if=\"src\"\r\n      :src=\"src\"\r\n      draggable=\"false\"\r\n      alt=\"封面\"\r\n      :class=\"bem.is('height-fixed', props.height !== undefined)\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, inject } from 'vue'\r\nimport { CardDIKey } from './di'\r\nimport type { CardCoverProps } from '@ui/types/components/card'\r\nimport { withUnit, bem } from '@ui/utils'\r\n\r\ndefineOptions({ name: 'CardCover' })\r\n\r\nconst props = defineProps<CardCoverProps>()\r\n\r\nconst injected = inject(CardDIKey)\r\nconst { cls } = injected || {}\r\n\r\nif (!injected) {\r\n  console.warn('CardCover组件仅能在Card组件中使用')\r\n}\r\n\r\nconst style = computed(() => {\r\n  return {\r\n    height: withUnit(props.height, 'px')\r\n  }\r\n})\r\n</script>\r\n", "<template>\r\n  <div :class=\"cls?.e('content')\" :style=\"style\">\r\n    <slot> </slot>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, inject, type CSSProperties } from 'vue'\r\nimport { CardDIKey } from './di'\r\nimport type { CardContentProps } from '@ui/types/components/card'\r\n\r\ndefineOptions({ name: 'CardContent' })\r\n\r\nconst props = defineProps<CardContentProps>()\r\n\r\nconst style = computed<CSSProperties | undefined>(() => {\r\n  return props.cover ? {\r\n    padding: 0,\r\n    fontSize: 0\r\n  } : undefined\r\n})\r\n\r\nconst injected = inject(CardDIKey)\r\nconst { cls } = injected || {}\r\n\r\nif (!injected) {\r\n  console.warn('CardContent组件仅能在Card组件中使用')\r\n}\r\n</script>\r\n", "import type { BEM } from \"@ui/utils\"\r\nimport type { ComponentSize } from \"@ui/types\"\r\nimport type { CascadeEmits, CascadeProps } from \"@ui/types/components/cascade\"\r\nimport type { ComputedRef, InjectionKey, ShallowRef } from \"vue\"\r\nimport type { CascadeNode } from \"./cascade-node\"\r\n\r\nexport const CascadeDIKey: InjectionKey<{\r\n  /** 样式*/\r\n  cls: BEM<\"cascade\">\r\n  /** 属性 */\r\n  cascadeProps: CascadeProps\r\n  emit: CascadeEmits\r\n\r\n  size: ComputedRef<ComponentSize>\r\n  disabled: ComputedRef<boolean>\r\n  readonly: ComputedRef<boolean>\r\n  /** 关闭 */\r\n  close: () => void\r\n  /** 打开 */\r\n  open: () => void\r\n  /** 更新位置*/\r\n  updatePosition: () => void\r\n  /** CascadeNode生成数据*/\r\n  forest: Record<string, any>\r\n  /** 字典 */\r\n  nodeDict: ComputedRef<Map<string | number, CascadeNode<Record<string, any>>>>\r\n  /** 单选事件 */\r\n  handleSelect: (data: CascadeNode<Record<string, any>>) => void\r\n  /** 多选事件 */\r\n  handleCheck: (data: CascadeNode<Record<string, any>>, check: boolean) => void\r\n  /** 选中数据 */\r\n  cascade: ShallowRef<string | undefined>\r\n  /** 多选选中数据 */\r\n  cascadeMulti: ShallowRef<string[]>\r\n  /** 鼠标移入移除 */\r\n  hovered: ShallowRef<boolean>\r\n  /** 清空 */\r\n  clear: () => void\r\n  /** 删除单个项 */\r\n  remove: (tag: string) => void\r\n  /** 筛选组装后数据 */\r\n  filterData: Record<string, any>\r\n  /** 清空搜索内容*/\r\n  qsClear: () => void\r\n  /** 筛选选中事件 */\r\n  handleFilter: (data: string) => void\r\n  /**  获取节点路径*/\r\n  getNodePath: (data: any) => string\r\n}> = Symbol(\"CascadeDIKey\")\r\n", "import { nextTick, shallowReactive, watch, type ComputedRef } from \"vue\"\r\nimport type { CascadeNode } from \"./cascade-node\"\r\nimport type { CascadeEmits, CascadeProps } from \"@ui/types/components/cascade\"\r\nimport { Tree } from \"cat-kit/fe\"\r\n\r\ninterface Options<DataItem extends Record<string, any>> {\r\n  emit: CascadeEmits\r\n  props: CascadeProps\r\n  nodeDict: ComputedRef<Map<any, CascadeNode<DataItem>>>\r\n  forest: Record<string, any>\r\n}\r\n\r\n/**\r\n * 单选\r\n */\r\nexport function useSelect<\r\n  DataItem extends Record<string, any> = Record<string, any>,\r\n>(options: Options<DataItem>) {\r\n  const { emit, props, nodeDict, forest } = options\r\n  const selected = shallowReactive(new Set<DataItem>())\r\n  let isEcho = false\r\n\r\n  const selectParentNodes = (node: CascadeNode<DataItem>) => {\r\n    let currentNode = node\r\n    const selectedNodes = new Set<DataItem>()\r\n    while (currentNode.parent) {\r\n      currentNode = currentNode.parent\r\n      currentNode.selected = true\r\n      selectedNodes.add(currentNode.data)\r\n    }\r\n    return selectedNodes\r\n  }\r\n\r\n  const deselectSiblingNodes = (node: CascadeNode<DataItem>) => {\r\n    if (node.parent) {\r\n      node.parent.children?.forEach((sibling) => {\r\n        if (sibling !== node) {\r\n          sibling.selected = false\r\n          selected.delete(sibling.data)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  watch(\r\n    () => [props.modelValue, forest.value.nodes],\r\n    ([modelValue, nodes]) => {\r\n      if (modelValue?.length === undefined) {\r\n        selected.clear()\r\n        return\r\n      }\r\n\r\n      if (props.multiple) return\r\n      if (isEcho && selected.size !== 0) return\r\n      nodes.forEach((node) => {\r\n        Tree.bft(node, (item) => {\r\n          if (modelValue?.includes(item.data[props.valueKey!])) {\r\n            selected.add(item.data)\r\n            isEcho = false\r\n            deselectSiblingNodes(item)\r\n          }\r\n        })\r\n      })\r\n      nextTick(() => {\r\n        isEcho = true\r\n      })\r\n    },\r\n    {\r\n      immediate: true,\r\n    }\r\n  )\r\n\r\n  watch(\r\n    selected,\r\n    (c) => {\r\n      if (props.multiple) return\r\n      if (!isEcho) return\r\n      isEcho = false\r\n      let selectedArr = Array.from(c)\r\n      \r\n      emit(\r\n        \"update:modelValue\",\r\n        c.size === 0\r\n          ? undefined\r\n          : selectedArr.map((item) => item[props.valueKey!])\r\n      )\r\n      emit(\r\n        \"change\",\r\n        selectedArr.map((item) => item[props.valueKey!]),\r\n        selectedArr.map((item) => item[props.labelKey!]),\r\n        selectedArr\r\n      )\r\n      nextTick(() => {\r\n        isEcho = true\r\n      })\r\n    },\r\n    {\r\n      immediate: true,\r\n    }\r\n  )\r\n\r\n  const handleSelect = (node: CascadeNode<DataItem>) => {\r\n    isEcho = true\r\n    if (node.disabled) return\r\n\r\n    // 取消同级和子节点的选中状态\r\n    deselectSiblingNodes(node)\r\n\r\n    // 移除深度大于当前节点的已选中节点\r\n    selected.forEach((dataItem) => {\r\n      const selectedNode = nodeDict.value.get(dataItem[props.valueKey!])\r\n      if (selectedNode && selectedNode.depth > node.depth) {\r\n        selectedNode.selected = false\r\n        selected.delete(dataItem)\r\n      }\r\n    })\r\n    // 更新选中的节点\r\n    node.selected = true\r\n    selected.add(node.data!)\r\n\r\n    // 获取所有选中的父节点并更新 selected 集合\r\n    const parentNodes = selectParentNodes(node)\r\n    parentNodes.forEach((parentNode) => {\r\n      if (parentNode !== undefined) {\r\n        selected.add(parentNode)\r\n      }\r\n    })\r\n  }\r\n\r\n  return {\r\n    selected,\r\n    handleSelect,\r\n  }\r\n}\r\n", "import { nextTick, shallowReactive, watch, type ComputedRef } from \"vue\"\r\nimport type { CascadeNode } from \"./cascade-node\"\r\nimport type { CascadeEmits, CascadeProps } from \"@ui/types/components/cascade\"\r\nimport { Tree } from \"cat-kit/fe\"\r\n\r\ninterface Options<DataItem extends Record<string, any>> {\r\n  emit: CascadeEmits\r\n  props: CascadeProps\r\n  nodeDict: ComputedRef<Map<any, CascadeNode<DataItem>>>\r\n  forest: Record<string, any>\r\n}\r\n\r\n/**\r\n * 多选\r\n */\r\nexport function useCheck<DataItem extends Record<string, any>>(\r\n  options: Options<DataItem>\r\n) {\r\n  const { emit, props, nodeDict, forest } = options\r\n\r\n  const checked = shallowReactive(new Set<DataItem>())\r\n  let isEcho = false\r\n\r\n  watch(\r\n    [() => props.modelValue, nodeDict],\r\n    ([c, nodeDict], [oc]) => {\r\n      if (!props.multiple) return\r\n      if (isEcho && checked.size !== 0) return\r\n      if (forest.value.size === 0) return\r\n\r\n      oc?.forEach((key: any) => {\r\n        const node = nodeDict.get(key)!\r\n        node.checked = false\r\n        checked.delete(node.data!)\r\n      })\r\n      c?.forEach((key: any) => {\r\n        const node = nodeDict.get(key)!\r\n        if (node) {\r\n          checked.add(node.data!)\r\n          node.checked = true\r\n        }\r\n      })\r\n      nextTick(() => {\r\n        isEcho = true\r\n      })\r\n    },\r\n    {\r\n      immediate: true,\r\n    }\r\n  )\r\n\r\n  watch(\r\n    checked,\r\n    (c) => {\r\n      if (!props.multiple) return\r\n      if (!isEcho) return\r\n      isEcho = false\r\n      const checkedArr = Array.from(c)\r\n      emit(\r\n        \"update:modelValue\",\r\n        c.size === 0\r\n          ? undefined\r\n          : checkedArr.map((item) => item[props.valueKey!])\r\n      )\r\n      emit(\r\n        \"change\",\r\n        checkedArr.map((item) => item[props.valueKey!]),\r\n        checkedArr.map((item) => item[props.labelKey!]),\r\n        checkedArr\r\n      )\r\n\r\n      nextTick(() => {\r\n        isEcho = true\r\n      })\r\n    },\r\n    {\r\n      immediate: true,\r\n    }\r\n  )\r\n\r\n  function handleCheck(node: CascadeNode<DataItem>, check: boolean) {\r\n    isEcho = true\r\n    const { checkStrictly } = props\r\n    if (check) {\r\n      Tree.dft(node, (node) => {\r\n        if (node.disabled) return\r\n        node.checked = true\r\n        checked.add(node.data)\r\n      })\r\n\r\n      if (!checkStrictly) {\r\n        let parent = node.parent\r\n        while (parent && parent.depth > 0) {\r\n          parent.checked = parent.children!.every((child) => child.checked)\r\n          if (!parent.checked) {\r\n            parent.indeterminate = true\r\n          } else {\r\n            parent.indeterminate = false\r\n            checked.add(parent.data)\r\n          }\r\n\r\n          parent = parent.parent\r\n        }\r\n      }\r\n    } else {\r\n      Tree.dft(node, (node) => {\r\n        node.checked = false\r\n        node.indeterminate = false\r\n        checked.delete(node.data)\r\n      })\r\n\r\n      if (!checkStrictly) {\r\n        let parent = node.parent\r\n        while (parent && parent.depth > 0) {\r\n          parent.checked = false\r\n          checked.delete(parent.data)\r\n\r\n          parent.indeterminate =\r\n            parent.children!.some((child) => child.indeterminate) ||\r\n            parent.children!.some((child) => child.checked)\r\n\r\n          parent = parent.parent\r\n        }\r\n      }\r\n    }\r\n    nextTick(() => {\r\n      isEcho = false\r\n    })\r\n  }\r\n\r\n  return {\r\n    checked,\r\n    handleCheck,\r\n  }\r\n}\r\n", "<template>\r\n  <template v-for=\"(data, dataIndex) in cascadeData\">\r\n    <u-scroll\r\n      tag=\"ul\"\r\n      :class=\"[cls.e('options'), cls.m(size)]\"\r\n      ref=\"scrollRef\"\r\n      v-show=\"depthIndex.includes(dataIndex + 1)\"\r\n    >\r\n      <template v-for=\"(option, index) in data\">\r\n        <li\r\n          v-show=\"shouldShowLevel(dataIndex, option)\"\r\n          :class=\"[\r\n            cls.e('option'),\r\n            bem.is('selected', option.selected),\r\n            bem.is('checked', option.checked),\r\n            bem.is('disabled', option.disabled),\r\n          ]\"\r\n          :data-key=\"option.data[labelKey!]\"\r\n          :data-depth=\"option.depth\"\r\n          @click=\"handleClick(option)\"\r\n          v-ripple=\"option.disabled ? false : cls.e('ripple')\"\r\n        >\r\n          <slot :option=\"option\" :index=\"index\">\r\n            <div>\r\n              <u-checkbox\r\n                v-if=\"multiple\"\r\n                :model-value=\"option.checked\"\r\n                :indeterminate=\"option.indeterminate\"\r\n                @update:model-value=\"handleCheck(option, $event)\"\r\n              ></u-checkbox>\r\n              {{ option.data[labelKey!] }}\r\n            </div>\r\n            <u-icon v-if=\"option[childrenKey!] && option[childrenKey!].length\"\r\n              ><ArrowRight\r\n            /></u-icon>\r\n          </slot>\r\n        </li>\r\n      </template>\r\n    </u-scroll>\r\n  </template>\r\n</template>\r\n\r\n<script lang=\"ts\" setup generic=\"Option extends Record<string, any>\">\r\nimport { ref, watch, inject, shallowRef, nextTick } from \"vue\"\r\nimport { bem, nextFrame } from \"@ui/utils\"\r\nimport { CascadeDIKey } from \"./di\"\r\nimport { vRipple } from \"@ui/directives\"\r\nimport { ArrowRight } from \"icon-ultra\"\r\nimport { UScroll, type ScrollExposed } from \"../scroll\"\r\nimport { UIcon } from \"../icon\"\r\nimport { UCheckbox } from \"../checkbox\"\r\nimport type { CascadeNodeProps } from \"@ui/types/components/cascade\"\r\nimport type { CascadeNode } from \"./cascade-node\"\r\n\r\ndefineOptions({\r\n  name: \"CascadeNode\",\r\n})\r\n\r\nconst props = withDefaults(defineProps<CascadeNodeProps>(), {})\r\n\r\nconst injected = inject(CascadeDIKey)\r\n\r\nconst {\r\n  cls,\r\n  cascadeProps,\r\n  size,\r\n  close,\r\n  updatePosition,\r\n  handleSelect,\r\n  handleCheck,\r\n  cascade,\r\n} = injected!\r\n\r\nconst { labelKey, valueKey, childrenKey, multiple } = cascadeProps\r\n\r\nconst depthIndex = ref([1])\r\n\r\nconst parentNodes = ref<string[]>([])\r\n\r\nconst scrollRef = shallowRef<ScrollExposed[]>([])\r\n\r\nlet isEchoing = true\r\n\r\nconst shouldShowLevel = (level: number, data: Option) => {\r\n  return (\r\n    data.parentNodes === \"\" ||\r\n    (depthIndex.value.includes(level) &&\r\n      parentNodes.value.includes(data.parentNodes))\r\n  )\r\n}\r\n\r\nconst addUniqueItem = (array: any[], item: any) => {\r\n  if (!array.includes(item) && item) array.push(item)\r\n}\r\n\r\nconst handleClick = (option: CascadeNode<Record<string, any>>) => {\r\n  if (option.disabled) return\r\n  isEchoing = false\r\n  if (option[childrenKey!] === undefined || !option[childrenKey!].length) {\r\n    !multiple && close()\r\n  } else {\r\n    if (option.depth === 1) {\r\n      parentNodes.value = []\r\n      depthIndex.value = [1, 2]\r\n    } else {\r\n      parentNodes.value.splice(option.depth - 1, 1)\r\n    }\r\n    depthIndex.value = [...depthIndex.value, option.depth + 1]\r\n    parentNodes.value = [...parentNodes.value, option.data[valueKey!]]\r\n    nextTick(() => {\r\n      updatePosition()\r\n    })\r\n    initData()\r\n  }\r\n\r\n  !multiple && handleSelect(option)\r\n}\r\n\r\n/**数据初始化 */\r\nconst initData = () => {\r\n  props.cascadeData?.some((node) => {\r\n    node.forEach((item) => {\r\n      item.selected = false\r\n    })\r\n  })\r\n}\r\n\r\n/**回显 */\r\nconst echo = (arr) => {\r\n  let echoData: any = []\r\n  depthIndex.value = [1]\r\n  parentNodes.value = []\r\n  props.cascadeData?.some((node) => {\r\n    node.forEach((item) => {\r\n      if (arr.includes(item.data[valueKey!])) {\r\n        echoData.push(item)\r\n      }\r\n    })\r\n  })\r\n\r\n  echoData.forEach((item, index) => {\r\n    multiple ? (item.checked = true) : (item.selected = true)\r\n    addUniqueItem(parentNodes.value, item.parentNodes)\r\n    addUniqueItem(depthIndex.value, index + 1)\r\n    shouldShowLevel(index, item)\r\n  })\r\n}\r\n\r\nwatch(\r\n  () => cascade.value,\r\n  (val) => {\r\n    if (val === \"\") {\r\n      initData()\r\n      return\r\n    }\r\n    if (val && isEchoing) {\r\n      echo(cascadeProps.modelValue!)\r\n    }\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nwatch(\r\n  [scrollRef, cascade],\r\n  ([scroll, cascade]) => {\r\n    if (scroll && cascade) {\r\n      nextFrame(() => {\r\n        scroll.forEach((item, index) => {\r\n          const node = item.containerRef!.getElementsByClassName(\r\n            !multiple ? \"is-selected\" : \"is-checked\"\r\n          )[0]\r\n          node?.scrollIntoView({ block: \"nearest\", inline: \"start\" })\r\n        })\r\n      })\r\n    }\r\n  },\r\n  {\r\n    immediate: true,\r\n  }\r\n)\r\n</script>\r\n", "<template>\r\n  <div :class=\"[cls.e('multi'), cls.m(size), bem.is('disabled', disabled)]\">\r\n    <!-- 默认展示 -->\r\n    <span :class=\"cls.e('placeholder')\" v-show=\"!cascadeMulti.length\">\r\n      {{ placeholder }}\r\n    </span>\r\n    <!-- 选择的数据项 -->\r\n    <div v-if=\"cascadeMulti.length\" :class=\"cls.e('tags')\">\r\n      <u-tag\r\n        v-for=\"(tag, index) in visibleTags\"\r\n        :key=\"tag + index\"\r\n        :closable=\"!disabled\"\r\n        @close=\"handleRemove(tag)\"\r\n      >\r\n        {{ tag }}\r\n      </u-tag>\r\n      <u-tag v-if=\"hiddenCount > 0\">+{{ hiddenCount }}</u-tag>\r\n    </div>\r\n    <!-- 清空 icon -->\r\n    <transition name=\"zoom-in\">\r\n      <u-icon\r\n        v-if=\"clearable && cascadeMulti?.length && hovered && !disabled\"\r\n        :class=\"cls.e('clear')\"\r\n        @click.stop=\"handleClear\"\r\n      >\r\n        <Close />\r\n      </u-icon>\r\n    </transition>\r\n    <!-- 下拉 icon -->\r\n    <u-icon :class=\"cls.e(`arrow`)\" v-if=\"!readonly\">\r\n      <ArrowDown />\r\n    </u-icon>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { CascadeDIKey } from \"./di\"\r\nimport { computed, inject } from \"vue\"\r\nimport { UTag } from \"../tag\"\r\nimport { UIcon } from \"../icon\"\r\nimport { Close, ArrowDown } from \"icon-ultra\"\r\nimport { bem } from \"@ui/utils\"\r\n\r\nconst injected = inject(CascadeDIKey)\r\nconst {\r\n  cls,\r\n  cascadeProps,\r\n  cascadeMulti,\r\n  disabled,\r\n  readonly,\r\n  hovered,\r\n  size,\r\n  clear,\r\n  remove,\r\n} = injected!\r\n\r\nconst { placeholder, clearable } = cascadeProps\r\n\r\ndefineOptions({\r\n  name: \"CascadeMulti\",\r\n})\r\n\r\nconst limit = () => {\r\n  let { visibilityLimit } = cascadeProps\r\n\r\n  if (!visibilityLimit) return\r\n  if (visibilityLimit < 0) {\r\n    visibilityLimit = 0\r\n  }\r\n  if (disabled.value || readonly.value) {\r\n    visibilityLimit = cascadeMulti.value?.length ?? 0\r\n  }\r\n  return visibilityLimit\r\n}\r\n\r\nconst visibleTags = computed(() => {\r\n  if (cascadeMulti.value.length > limit()!) {\r\n    return cascadeMulti.value.slice(0, limit())\r\n  }\r\n  return cascadeMulti.value\r\n})\r\n\r\nconst hiddenCount = computed(() => {\r\n  if (cascadeMulti.value.length > limit()!) {\r\n    return cascadeMulti.value.length - limit()!\r\n  }\r\n  return 0\r\n})\r\n\r\n/**删除 */\r\nconst handleRemove = (tag: string) => {\r\n  remove(tag)\r\n}\r\n\r\n/**清空 */\r\nconst handleClear = () => {\r\n  clear()\r\n}\r\n</script>\r\n", "<template>\r\n  <u-scroll\r\n    tag=\"ul\"\r\n    :class=\"[cls.e('options'), cls.m(size)]\"\r\n    ref=\"scrollRef\"\r\n    style=\"width: 100%\"\r\n  >\r\n    <li\r\n      v-for=\"(data, index) in filteredPaths\"\r\n      :class=\"[cls.e('option'), bem.is('selected', selectedIndex === index)]\"\r\n      @click=\"handleClick(data, index)\"\r\n      :key=\"index\"\r\n      v-ripple=\"cls.e('ripple')\"\r\n    >\r\n      {{ data }}\r\n    </li>\r\n  </u-scroll>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, inject, shallowRef, watch } from \"vue\"\r\nimport { CascadeDIKey } from \"./di\"\r\nimport type { CascadeFilterProps } from \"@ui/types/components/cascade\"\r\nimport { UScroll } from \"../scroll\"\r\nimport { bem } from \"@ui/utils\"\r\nimport { vRipple } from \"@ui/directives\"\r\n\r\nconst props = withDefaults(defineProps<CascadeFilterProps>(), {\r\n  selectAndReset: true,\r\n})\r\n\r\ndefineOptions({\r\n  name: \"CascadeFilter\",\r\n})\r\n\r\nconst injected = inject(CascadeDIKey)\r\n\r\nconst { cls, size, handleFilter, getNodePath, cascade, qsClear, close } =\r\n  injected!\r\n\r\nconst selectedIndex = shallowRef(-1)\r\n\r\nconst filteredPaths = computed(() => {\r\n  return props\r\n    .filterData!.map((node) => getNodePath(node.data))\r\n    .filter((path) => path !== \"\")\r\n})\r\n\r\nconst handleClick = (data: string, index: number) => {\r\n  selectedIndex.value = index\r\n  handleFilter(data)\r\n\r\n  if (!props.selectAndReset) return\r\n  qsClear()\r\n  close()\r\n}\r\n\r\nwatch(\r\n  () => cascade.value,\r\n  (val) => {\r\n    selectedIndex.value = props.filterData!.findIndex((node) => {\r\n      return getNodePath(node.data) === val\r\n    })\r\n  },\r\n  { immediate: true }\r\n)\r\n</script>\r\n", "import { TreeNode as _CascadeNode, getChainValue } from \"cat-kit/fe\"\r\nimport { shallowReactive } from \"vue\"\r\n\r\nexport class CascadeNode<\r\n  Val extends Record<string, any> = Record<string, any>,\r\n> extends _CascadeNode<Val> {\r\n  override parent: CascadeNode<Val> | null = null\r\n\r\n  override children?: CascadeNode<Val>[] = undefined\r\n\r\n  expanded = false\r\n  loading = false\r\n  loaded = false\r\n  /** 多选是否选中 */\r\n  checked = false\r\n  /** 单选是否选中 */\r\n  selected = false\r\n  indeterminate = false\r\n  disabled = false\r\n  visible = true\r\n\r\n  get parentExpanded() {\r\n    if (!this.parent) return true\r\n    return this.parent.expanded || this.depth === 1\r\n  }\r\n\r\n  labelKey: string\r\n  valueKey: string\r\n\r\n  constructor(params: {\r\n    data: Val\r\n    index: number\r\n    parent?: any\r\n    labelKey: string\r\n    valueKey: string\r\n  }) {\r\n    const { data, index, parent, labelKey, valueKey } = params\r\n    super(data, index)\r\n    if (parent) {\r\n      this.parent = parent\r\n    }\r\n    this.labelKey = labelKey\r\n    this.valueKey = valueKey\r\n\r\n    return shallowReactive(this)\r\n  }\r\n\r\n  get label(): string {\r\n    return String(getChainValue(this.data, this.labelKey))\r\n  }\r\n\r\n  get key(): string | number {\r\n    return getChainValue(this.data, this.valueKey)\r\n  }\r\n\r\n  get levelIndicator(): string {\r\n    // 根据节点深度生成层级标识，例如 'Level 1', 'Level 2', 等\r\n    return `Level ${this.depth}`\r\n  }\r\n}\r\n", "<template>\r\n  <u-dropdown\r\n    v-if=\"!readonly\"\r\n    :class=\"[cls.b, bem.is('disabled', disabled), cls.m(size)]\"\r\n    :content-class=\"[cls.e('panel'), cls.em('panel', size)]\"\r\n    trigger=\"click\"\r\n    ref=\"dropdownRef\"\r\n    :disabled=\"disabled\"\r\n    :width=\"cascadeData.length ? 'auto' : ''\"\r\n    @mouseenter=\"hovered = true\"\r\n    @mouseleave=\"hovered = false\"\r\n  >\r\n    <template #trigger>\r\n      <!-- 单选展示 -->\r\n      <u-input\r\n        v-if=\"!multiple\"\r\n        :size=\"size\"\r\n        :disabled=\"disabled\"\r\n        :placeholder=\"placeholder\"\r\n        :clearable=\"clearable\"\r\n        v-model=\"cascade\"\r\n        native-readonly\r\n        @clear=\"clear\"\r\n      >\r\n        <template #suffix>\r\n          <u-icon :class=\"cls.e('arrow')\"><ArrowDown /></u-icon>\r\n        </template>\r\n      </u-input>\r\n      <!-- 多选展示 -->\r\n      <UCascadeMulti v-else />\r\n    </template>\r\n\r\n    <template #content>\r\n      <!-- 过滤 -->\r\n      <div v-if=\"filterable\" :class=\"[cls.e('content-filter'), cls.m(size)]\">\r\n        <u-input\r\n          placeholder=\"输入关键字进行过滤\"\r\n          v-model=\"qs\"\r\n          :clearable=\"false\"\r\n          @clear=\"qsClear\"\r\n        >\r\n          <template #suffix>\r\n            <u-icon><Search /></u-icon>\r\n          </template>\r\n        </u-input>\r\n      </div>\r\n      <!-- 数据列表 -->\r\n      <template v-if=\"cascadeData.length\">\r\n        <div :class=\"cls.e('content')\" v-if=\"!filterData.length\">\r\n          <UCascadeNode v-bind=\"$attrs\" :cascadeData=\"cascadeData\" />\r\n        </div>\r\n        <div v-else>\r\n          <UCascadeFilter v-bind=\"$attrs\" :filterData=\"filterData\" />\r\n        </div>\r\n      </template>\r\n      <div :class=\"cls.e('empty')\" v-else>\r\n        <UEmpty />\r\n      </div>\r\n    </template>\r\n  </u-dropdown>\r\n\r\n  <div :class=\"[cls.m(size)]\" v-else-if=\"cascade\">\r\n    <div :class=\"cls.e('tags')\">\r\n      <u-tag>\r\n        {{ cascade }}\r\n      </u-tag>\r\n    </div>\r\n  </div>\r\n\r\n  <span v-else>{{ FORM_EMPTY_CONTENT }}</span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup generic=\"Option extends Record<string, any>\">\r\nimport { useFormComponent, useFormFallbackProps } from \"@ui/compositions\"\r\nimport type { CascadeProps, CascadeEmits } from \"@ui/types/components/cascade\"\r\nimport { bem } from \"@ui/utils\"\r\nimport { computed, provide, shallowRef, watch } from \"vue\"\r\nimport { ArrowDown, Search } from \"icon-ultra\"\r\nimport { UCascadeNode, UCascadeMulti, UCascadeFilter } from \"./index\"\r\nimport { CascadeDIKey } from \"./di\"\r\nimport { UInput } from \"../input\"\r\nimport { UTag } from \"../tag\"\r\nimport { UIcon } from \"../icon\"\r\nimport { UDropdown, type DropdownExposed } from \"../dropdown\"\r\nimport { Forest } from \"cat-kit/fe\"\r\nimport { CascadeNode } from \"./cascade-node\"\r\nimport { useSelect } from \"./use-select\"\r\nimport { useCheck } from \"./use-check\"\r\nimport { UEmpty } from \"../empty\"\r\nimport { FORM_EMPTY_CONTENT } from \"@ui/shared\"\r\n\r\ndefineOptions({\r\n  name: \"Cascade\",\r\n})\r\n\r\nconst cls = bem(\"cascade\")\r\n\r\nconst emit = defineEmits<CascadeEmits>()\r\n\r\nconst props = withDefaults(defineProps<CascadeProps>(), {\r\n  labelKey: \"label\",\r\n  valueKey: \"value\",\r\n  placeholder: \"请选择\",\r\n  clearable: true,\r\n  disabled: undefined,\r\n  readonly: undefined,\r\n  childrenKey: \"children\",\r\n  filterable: false,\r\n  options: () => [],\r\n  visibilityLimit: 3,\r\n})\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled, readonly } = useFormFallbackProps(\r\n  [formProps ?? {}, props],\r\n  {\r\n    size: \"default\",\r\n    disabled: false,\r\n    readonly: false,\r\n  }\r\n)\r\n\r\nconst hovered = shallowRef(false)\r\n\r\nconst cascadeData = shallowRef<Record<string, any>[]>([])\r\n\r\nconst qs = shallowRef<string>(\"\")\r\n\r\n/** 森林 */\r\nconst forest = computed(() => {\r\n  const { valueKey, labelKey, options, disabledNode } = props\r\n  return Forest.create(options as Option[], {\r\n    createNode: disabledNode\r\n      ? (data, index) => {\r\n          const node = new CascadeNode({\r\n            data,\r\n            index,\r\n            valueKey: valueKey!,\r\n            labelKey: labelKey!,\r\n          })\r\n          if (data) {\r\n            node.disabled = disabledNode(data, node) ?? false\r\n          }\r\n          return node\r\n        }\r\n      : (data, index) => {\r\n          const node = new CascadeNode({\r\n            data,\r\n            index,\r\n            valueKey: valueKey!,\r\n            labelKey: labelKey!,\r\n          })\r\n          return node\r\n        },\r\n  })\r\n})\r\n\r\n/**\r\n * 节点的字典，key为指定的valueKey的值\r\n */\r\nconst nodeDict = computed(() => {\r\n  const dict = new Map<string | number, CascadeNode<Option>>()\r\n\r\n  forest.value.dft((node) => {\r\n    dict.set(node.key, node)\r\n  })\r\n\r\n  return dict\r\n})\r\n\r\nconst dropdownRef = shallowRef<DropdownExposed>()\r\n\r\nconst close = () => {\r\n  dropdownRef.value?.close()\r\n}\r\n\r\nconst open = () => {\r\n  dropdownRef.value?.open()\r\n}\r\n\r\nconst updatePosition = () => {\r\n  dropdownRef.value?.updateDropdown()\r\n}\r\n\r\nconst { handleSelect, selected } = useSelect<Record<string, any>>({\r\n  props,\r\n  emit,\r\n  nodeDict,\r\n  forest,\r\n})\r\n\r\nconst { checked, handleCheck } = useCheck<Record<string, any>>({\r\n  props,\r\n  emit,\r\n  nodeDict,\r\n  forest,\r\n})\r\n\r\n/**按深度分离 */\r\nfunction separateByDepth(data) {\r\n  const result = {}\r\n  function traverse(node, parent?: Option) {\r\n    if (!result[node.depth]) {\r\n      result[node.depth] = []\r\n    }\r\n    result[node.depth].push(node)\r\n    node.parentNodes = parent ? parent.data[props.valueKey] : \"\"\r\n    if (node.children) {\r\n      node.children.forEach((child) => traverse(child, node))\r\n    }\r\n  }\r\n  data.forEach((item) => traverse(item))\r\n  return Object.keys(result)\r\n    .sort((a: any, b: any) => a - b)\r\n    .map((key) => result[key])\r\n}\r\n\r\n/**展示数据 */\r\nconst cascade = shallowRef<string>()\r\n\r\nwatch(\r\n  () => props.options,\r\n  (option) => {\r\n    if (option) {\r\n      cascadeData.value = separateByDepth(forest.value.nodes)\r\n    }\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nwatch(\r\n  selected,\r\n  (selected) => {\r\n    if (props.multiple) return\r\n    cascade.value =\r\n      selected.size === 0\r\n        ? \"\"\r\n        : Array.from(selected)\r\n            .map((node) => node[props.labelKey!])\r\n            .join(\" / \")\r\n  },\r\n  {\r\n    immediate: true,\r\n  }\r\n)\r\n\r\nwatch(\r\n  checked,\r\n  (checked) => {\r\n    if (!props.multiple) return\r\n    cascade.value =\r\n      checked.size === 0\r\n        ? \"\"\r\n        : Array.from(checked)\r\n            .map((node) => node[props.labelKey!])\r\n            .join(\" / \")\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\n/**\r\n * 生成树形结构中各个节点的路径\r\n */\r\nconst getNodePath = (node) => {\r\n  let path = [node[props.labelKey!]]\r\n  let currentNode = nodeDict.value.get(node[props.valueKey!])\r\n\r\n  while (currentNode?.parent) {\r\n    if (currentNode.disabled) {\r\n      // 如果当前节点或其父节点被禁用，返回空字符串\r\n      return \"\"\r\n    }\r\n    currentNode = currentNode.parent\r\n    if (currentNode.data) {\r\n      path.unshift(currentNode.data[props.labelKey!])\r\n    }\r\n  }\r\n  if (node.disabled) {\r\n    // 如果节点本身被禁用，返回空字符串\r\n    return \"\"\r\n  }\r\n  return path.join(\" / \")\r\n}\r\n\r\n/**树形回显数据格式 */\r\nconst cascadeMulti = computed(() => {\r\n  const paths = Array.from(checked).map((node) => getNodePath(node))\r\n\r\n  const filteredPaths = paths.filter((path, index) => {\r\n    return !paths.some((p, i) => i !== index && p.startsWith(path))\r\n  })\r\n  return filteredPaths\r\n})\r\n\r\n/**清空数据 */\r\nconst clear = () => {\r\n  props.multiple && checked.clear()\r\n  !props.multiple && selected.clear()\r\n  cascade.value = \"\"\r\n  close()\r\n}\r\n\r\n/**\r\n * 删除单个项\r\n * @param tag 删除的标签\r\n */\r\nconst remove = (tag: string) => {\r\n  let data = tag.split(\" / \")\r\n  let del = data[data.length - 1]\r\n  forest.value.dft((node) => {\r\n    if (node.label === del) {\r\n      checked.delete(node.data)\r\n      return\r\n    }\r\n  })\r\n}\r\n\r\nconst filterData = shallowRef<Record<string, any>[]>([])\r\n\r\nconst qsClear = () => {\r\n  qs.value = \"\"\r\n}\r\n\r\nwatch(qs, (qs) => {\r\n  if (qs) {\r\n    filterData.value = []\r\n    forest.value.dft((node) => {\r\n      if (node.label.includes(qs) && !node.disabled) {\r\n        filterData.value.push(node)\r\n      }\r\n    })\r\n  } else {\r\n    filterData.value = []\r\n  }\r\n})\r\n\r\n/** 筛选选中事件 */\r\nconst handleFilter = (data: string) => {\r\n  cascade.value = data\r\n  let filter = data.split(\" / \")\r\n  selected.clear()\r\n  forest.value.dft((node) => {\r\n    if (!node.disabled) {\r\n      let nodePath = getNodePath(node.data)\r\n      if (filter.includes(node.data[props.labelKey!]) && nodePath !== \"\") {\r\n        selected.add(node.data)\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nprovide(CascadeDIKey, {\r\n  cls,\r\n  cascadeProps: props,\r\n  size,\r\n  disabled,\r\n  readonly,\r\n  close,\r\n  open,\r\n  updatePosition,\r\n  forest,\r\n  nodeDict,\r\n  handleSelect,\r\n  handleCheck,\r\n  cascade,\r\n  cascadeMulti,\r\n  emit,\r\n  hovered,\r\n  clear,\r\n  remove,\r\n  filterData,\r\n  qsClear,\r\n  handleFilter,\r\n  getNodePath,\r\n})\r\n</script>\r\n", "<template>\r\n  <div :class=\"classList\" @click=\"handleChange\">\r\n    <slot />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { CheckTagEmits, CheckTagProps } from '@ui/types/components/check-tag'\r\nimport { bem } from '@ui/utils'\r\nimport { computed } from 'vue'\r\n\r\ndefineOptions({\r\n  name: 'CheckTag'\r\n})\r\n\r\nconst cls = bem('check-tag')\r\n\r\nconst props = withDefaults(defineProps<CheckTagProps>(), {})\r\n\r\nconst emits = defineEmits<CheckTagEmits>()\r\n\r\nconst classList = computed(() => {\r\n  return [cls.b, bem.is('checked', props.checked)]\r\n})\r\n\r\nconst handleChange = () => {\r\n  emits('update:modelValue', props.checked)\r\n}\r\n</script>\r\n", "<template>\r\n  <div :class=\"[cls.b, cls.m(size), bem.is('block', block)]\">\r\n    <u-checkbox\r\n      v-for=\"item of items\"\r\n      :key=\"item[valueKey]\"\r\n      :model-value=\"getCheckStatus(item)\"\r\n      @update:model-value=\"handleUpdate($event, item)\"\r\n      :disabled=\"disabled\"\r\n      :size=\"size\"\r\n    >\r\n      {{ item[labelKey] }}\r\n    </u-checkbox>\r\n  </div>\r\n</template>\r\n\r\n<script\r\n  lang=\"ts\"\r\n  setup\r\n  generic=\"\r\n    Item extends Record<string, string | number>,\r\n    Val extends string | number\r\n  \"\r\n>\r\nimport type {\r\n  CheckboxGroupProps,\r\n  CheckboxGroupEmits\r\n} from '@ui/types/components/checkbox-group'\r\nimport { UCheckbox } from '../checkbox'\r\nimport { bem } from '@ui/utils'\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\n\r\ndefineOptions({\r\n  name: 'CheckboxGroup'\r\n})\r\n\r\nconst props = withDefaults(defineProps<CheckboxGroupProps<Item, Val>>(), {\r\n  labelKey: 'label',\r\n  valueKey: 'value',\r\n  disabled: undefined\r\n})\r\n\r\nconst emit = defineEmits<CheckboxGroupEmits<Val>>()\r\nconst model = defineModel<Val[]>()\r\n\r\nconst cls = bem('checkbox-group')\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled } = useFormFallbackProps([formProps ?? {}, props], {\r\n  size: 'default',\r\n  disabled: false\r\n})\r\n\r\n/**\r\n * 获取checkbox的选中状态\r\n * @param item - 模型对象\r\n * @returns 模型值是否存在于model.value中\r\n */\r\nconst getCheckStatus = (item: Record<string, string | number>): boolean => {\r\n  const { valueKey } = props\r\n  const value = item[valueKey] as Val\r\n  if (!value || !model.value) return false\r\n  return model.value.includes(value)\r\n}\r\n\r\n/**\r\n * 处理更新操作\r\n * @param  checked - 指示是否选中\r\n * @param item - 更新的项\r\n */\r\nconst handleUpdate = (\r\n  checked: boolean,\r\n  item: Record<string, string | number>\r\n) => {\r\n  const { valueKey } = props\r\n  const value = item[valueKey] as Val\r\n  if (!value) return\r\n  if (checked) {\r\n    model.value = [...(model.value ?? []), value]\r\n  } else {\r\n    model.value = model.value?.filter(v => v !== value)\r\n  }\r\n}\r\n</script>\r\n", "import type { BEM } from \"@ui/utils\"\r\nimport type { InjectionKey } from \"vue\"\r\n\r\n\r\nexport const ContextMenuDIKey: InjectionKey<{\r\n  cls: BEM<'context-menu'>\r\n}> = Symbol('ContextMenuDIKey')", "<template>\r\n  <li\r\n    :class=\"[\r\n      cls.e('item'),\r\n      bem.is('disabled', disabled),\r\n      bem.is('loading', loading),\r\n      cls.em('item', 'menu')\r\n    ]\"\r\n    v-ripple=\"!disabled && !loading\"\r\n    @click=\"handleClickMenu\"\r\n  >\r\n    <u-icon v-if=\"loading\" :class=\"bem.is('loading')\">\r\n      <Loading />\r\n    </u-icon>\r\n    <template v-else>\r\n      <u-icon v-if=\"menu.icon\">\r\n        <component :is=\"menu.icon\" />\r\n      </u-icon>\r\n      <i v-else :class=\"cls.e('icon-place')\"></i>\r\n    </template>\r\n\r\n    <span :class=\"cls.e('label')\">{{ menu.label }}</span>\r\n  </li>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, inject, shallowRef } from 'vue'\r\nimport { ContextMenuDIKey } from './di'\r\nimport type { ContextMenuItem } from '@ui/types/components/context-menu'\r\nimport { vRipple } from '@ui/directives'\r\nimport { UIcon } from '../icon'\r\nimport { Loading } from 'icon-ultra'\r\nimport { bem } from '@ui/utils'\r\n\r\ndefineOptions({\r\n  name: 'ContextMenuItem'\r\n})\r\n\r\nconst { menu } = defineProps<{\r\n  menu: ContextMenuItem\r\n}>()\r\n\r\nconst emit = defineEmits<{\r\n  (e: 'click-start'): void\r\n  (e: 'click-end'): void\r\n}>()\r\n\r\nconst { cls } = inject(ContextMenuDIKey)!\r\n\r\nconst loading = shallowRef(false)\r\n\r\nconst disabled = computed(() => {\r\n  return (\r\n    (typeof menu.disabled === 'function' ? menu.disabled() : menu.disabled) ??\r\n    false\r\n  )\r\n})\r\n\r\nfunction handleClickMenu() {\r\n  if (disabled.value || loading.value) return\r\n  emit('click-start')\r\n  loading.value = true\r\n  const result = menu.callback?.()\r\n\r\n  if (result instanceof Promise) {\r\n    return result\r\n      .then(() => {})\r\n      .finally(() => {\r\n        emit('click-end')\r\n        loading.value = false\r\n      })\r\n  }\r\n  loading.value = false\r\n  emit('click-end')\r\n}\r\n</script>\r\n", "<template>\r\n  <transition name=\"zoom-in\" appear @after-leave=\"emit('destroy')\">\r\n    <ul\r\n      :class=\"[cls.b, cls.m(size)]\"\r\n      :style=\"style\"\r\n      ref=\"contextMenuRef\"\r\n      v-if=\"visible\"\r\n      v-click-outside=\"handleClickOutside\"\r\n    >\r\n      <UContextMenuItem\r\n        v-for=\"menu of menus\"\r\n        :menu=\"menu\"\r\n        :disabled=\"getMenuDisabled(menu)\"\r\n        @click-start=\"handleClickStart\"\r\n        @click-end=\"handleClickEnd\"\r\n      />\r\n    </ul>\r\n  </transition>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type {\r\n  ContextMenuEmits,\r\n  ContextMenuItem,\r\n  ContextMenuProps\r\n} from '@ui/types/components/context-menu'\r\nimport { bem, withUnit, zIndex } from '@ui/utils'\r\nimport { computed, provide, shallowRef, type CSSProperties } from 'vue'\r\nimport { ContextMenuDIKey } from './di'\r\nimport UContextMenuItem from './context-menu-item.vue'\r\nimport { objMap } from 'cat-kit/fe'\r\nimport { useFallbackProps } from '@ui/compositions'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\nimport { vClickOutside } from '@ui/directives'\r\n\r\ndefineOptions({\r\n  name: 'ContextMenu'\r\n})\r\n\r\nconst props = withDefaults(defineProps<ContextMenuProps>(), {\r\n  width: 150\r\n})\r\n\r\nconst emit = defineEmits<ContextMenuEmits>()\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst cls = bem('context-menu')\r\n\r\nconst contextMenuRef = shallowRef<HTMLElement>()\r\n\r\nconst visible = shallowRef(true)\r\n\r\nconst computePosition = () => {\r\n  const position: {\r\n    top?: number\r\n    left?: number\r\n    right?: number\r\n    bottom?: number\r\n    transformOrigin?: string\r\n  } = {}\r\n\r\n  const { mousePosition } = props\r\n  const { x, y } = mousePosition\r\n  if (x > window.innerWidth / 2) {\r\n    position.right = window.innerWidth - x - 1\r\n  } else {\r\n    position.left = x + 1\r\n  }\r\n  if (y > window.innerHeight / 2) {\r\n    position.bottom = window.innerHeight - y - 1\r\n  } else {\r\n    position.top = y + 1\r\n  }\r\n\r\n  const positionY = position.top ? 'top' : 'bottom'\r\n  const positionX = position.left ? 'left' : 'right'\r\n  position.transformOrigin = `${positionY} ${positionX}`\r\n\r\n  return objMap(position, v => withUnit(v, 'px'))\r\n}\r\n\r\nconst style = computed<CSSProperties>(() => {\r\n  return {\r\n    width: withUnit(props.width, 'px'),\r\n    ...computePosition(),\r\n    zIndex: zIndex()\r\n  }\r\n})\r\n\r\nconst menus = computed(() => {\r\n  const { menus } = props\r\n  if (typeof menus === 'function') {\r\n    return menus()\r\n  }\r\n  return menus\r\n})\r\n\r\nconst getMenuDisabled = (menu: ContextMenuItem) => {\r\n  return typeof menu.disabled === 'function' ? menu.disabled() : menu.disabled\r\n}\r\n\r\nfunction close() {\r\n  visible.value = false\r\n}\r\n\r\n\r\nlet loading = false\r\nfunction handleClickStart() {\r\n  loading= true\r\n}\r\n\r\nfunction handleClickEnd() {\r\n  loading = false\r\n  close()\r\n}\r\n\r\n\r\nfunction handleClickOutside() {\r\n  if (loading) return\r\n  close()\r\n}\r\n\r\n\r\nprovide(ContextMenuDIKey, {\r\n  cls\r\n})\r\n</script>\r\n", "import type { ContextMenuProps } from '@ui/types/components/context-menu'\r\nimport { createVNode, render, type VNode } from 'vue'\r\nimport MContextMenu from './context-menu.vue'\r\n\r\nlet node: VNode\r\n\r\nexport const contextmenu = {\r\n  pop(options: ContextMenuProps) {\r\n    if (node) {\r\n      render(null, document.body)\r\n    }\r\n\r\n    node = createVNode(MContextMenu, {\r\n      ...options,\r\n      onDestroy() {\r\n        render(null, document.body)\r\n      }\r\n    })\r\n\r\n    render(node, document.body)\r\n  }\r\n}\r\n", "import type {\r\n  DatePickerEmits,\r\n  DatePickerProps\r\n} from '@ui/types/components/date-picker'\r\nimport { bem, type BEM } from '@ui/utils'\r\nimport { date, type Dater } from 'cat-kit/fe'\r\nimport {\r\n  computed,\r\n  inject,\r\n  provide,\r\n  shallowReactive,\r\n  watch,\r\n  type ComputedRef,\r\n  type InjectionKey\r\n} from 'vue'\r\n\r\ninterface DateProvideConfig {\r\n  props: DatePickerProps\r\n  emit: DatePickerEmits\r\n  closeDropdown: () => void\r\n}\r\n\r\ninterface DatePickerState {\r\n  panel: 'day' | 'month' | 'year'\r\n  date?: Dater\r\n  panelDate: Dater\r\n}\r\n\r\ninterface DatePickerContext {\r\n  /** 组件类 */\r\n  cls: BEM<'date-picker'>\r\n  /** 组件 props */\r\n  pickerProps: DatePickerProps\r\n  /** 组件 emits */\r\n  pickerEmit: DatePickerEmits\r\n  /** 组件状态 */\r\n  state: DatePickerState\r\n  /** 格式化字符串 */\r\n  formatStr: ComputedRef<string>\r\n  /** 关闭下拉框 */\r\n  closeDropdown: () => void\r\n  /** 更新面板 */\r\n  showNextPanel: () => void\r\n  /** 上一年 */\r\n  handlePreYear: () => void\r\n  /** 上个月 */\r\n  handlePreMonth: () => void\r\n  /** 下一年 */\r\n  handleNextYear: () => void\r\n  /** 下个月 */\r\n  handleNextMonth: () => void\r\n  /** 下十年 */\r\n  handleNextTenYears: () => void\r\n  /** 上十年 */\r\n  handlePreTenYears: () => void\r\n  /** 更新面板日期 */\r\n  updatePanelDate: () => void\r\n}\r\n\r\nconst diKey: InjectionKey<DatePickerContext> = Symbol('DatePickerDIKey')\r\n\r\nexport function useDate(\r\n  type: 'provide',\r\n  config: DateProvideConfig\r\n): DatePickerContext\r\nexport function useDate(type: 'inject'): DatePickerContext\r\nexport function useDate(\r\n  type: 'provide' | 'inject',\r\n  config?: DateProvideConfig\r\n): DatePickerContext {\r\n  if (type === 'inject') {\r\n    return inject(diKey)!\r\n  }\r\n\r\n  const { props, emit, closeDropdown } = config!\r\n  const formats = {\r\n    date: 'yyyy-MM-dd',\r\n    month: 'yyyy-MM',\r\n    year: 'yyyy'\r\n  }\r\n  const formatStr = computed(() => {\r\n    return props.format ?? formats[props.type!]\r\n  })\r\n\r\n  const typePanels = {\r\n    date: ['year', 'month', 'day'],\r\n    month: ['year', 'month'],\r\n    year: ['year']\r\n  }\r\n\r\n  /** 组件类 */\r\n  const cls = bem('date-picker')\r\n\r\n  const currentDate = props.modelValue ? date(props.modelValue) : undefined\r\n  const state = shallowReactive<DatePickerState>({\r\n    panel: 'day',\r\n    date: currentDate,\r\n    panelDate: date(currentDate?.timestamp ?? new Date())\r\n  })\r\n\r\n  function updatePanelDate() {\r\n    state.panelDate = date(state.date?.timestamp ?? new Date())\r\n    const panels = typePanels[props.type!]\r\n    state.panel = panels[panels.length - 1] as 'day' | 'month' | 'year'\r\n  }\r\n\r\n  watch(\r\n    () => props.modelValue,\r\n    v => {\r\n      state.date = v ? date(v) : undefined\r\n      updatePanelDate()\r\n    }\r\n  )\r\n\r\n  /** 更新展示的面板 */\r\n  function showNextPanel() {\r\n    const panels = typePanels[props.type!]\r\n    const index = panels.indexOf(state.panel)\r\n    if (index === -1) {\r\n      state.panel = panels[panels.length - 1] as 'day' | 'month' | 'year'\r\n    } else if (index < panels.length - 1) {\r\n      state.panel = panels[index + 1] as 'day' | 'month' | 'year'\r\n    }\r\n  }\r\n\r\n  watch(\r\n    () => props.type,\r\n    () => {\r\n      showNextPanel()\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  function handlePreYear() {\r\n    state.panelDate = state.panelDate.calc(-1, 'years')\r\n  }\r\n\r\n  function handlePreMonth() {\r\n    state.panelDate = state.panelDate.calc(-1, 'months')\r\n  }\r\n\r\n  function handleNextYear() {\r\n    state.panelDate = state.panelDate.calc(1, 'years')\r\n  }\r\n\r\n  function handleNextMonth() {\r\n    state.panelDate = state.panelDate.calc(1, 'months')\r\n  }\r\n\r\n  function handlePreTenYears() {\r\n    state.panelDate = state.panelDate.calc(-10, 'years')\r\n  }\r\n\r\n  function handleNextTenYears() {\r\n    state.panelDate = state.panelDate.calc(10, 'years')\r\n  }\r\n\r\n  const ctx: DatePickerContext = {\r\n    cls,\r\n    state,\r\n    pickerProps: props,\r\n    pickerEmit: emit,\r\n    formatStr,\r\n    closeDropdown,\r\n    showNextPanel,\r\n    handlePreYear,\r\n    handlePreMonth,\r\n    handleNextYear,\r\n    handleNextMonth,\r\n    handleNextTenYears,\r\n    handlePreTenYears,\r\n    updatePanelDate\r\n  }\r\n\r\n  provide(diKey, ctx)\r\n\r\n  return ctx\r\n}\r\n", "<template>\r\n  <ul :class=\"cls.e('week')\">\r\n    <li :class=\"cls.e('week-day')\" v-for=\"weekDay of weekDays\">\r\n      {{ weekDay }}\r\n    </li>\r\n  </ul>\r\n\r\n  <ul :class=\"cls.e('days')\">\r\n    <li\r\n      v-for=\"day of days\"\r\n      :title=\"day.isToday ? '今天' : ''\"\r\n      :class=\"[\r\n        cls.e('day'),\r\n        cls.em('day', day.type),\r\n        bem.is('today', day.isToday === true),\r\n        bem.is('disabled', day.disabled === true),\r\n        bem.is('selected', didDaySelect(day.date))\r\n      ]\"\r\n      :key=\"day.date.timestamp\"\r\n      @click=\"handleSelectDate(day)\"\r\n    >\r\n      <span :class=\"cls.e('day-text')\">\r\n        {{ day.date.day }}\r\n      </span>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed } from 'vue'\r\nimport { useDate } from '../use-date'\r\nimport { bem } from '@ui/utils'\r\nimport { getMonthDays, weekDays } from '../../calendar/utils'\r\nimport type { Dater } from 'cat-kit/fe'\r\nimport type { Day } from '@ui/types'\r\n\r\ndefineOptions({\r\n  name: 'DayPanel',\r\n  inheritAttrs: false\r\n})\r\n\r\nconst { cls, pickerProps, state, pickerEmit, formatStr, closeDropdown } =\r\n  useDate('inject')\r\n\r\nconst days = computed(() => {\r\n  return getMonthDays(state.panelDate.timestamp, pickerProps.disabledDate)\r\n})\r\n\r\nfunction didDaySelect(date: Dater) {\r\n  if (!state.date) return false\r\n  const fmtStr = 'yyyyMMdd  '\r\n  return state.date.format(fmtStr) === date.format(fmtStr)\r\n}\r\n\r\nfunction handleSelectDate(day: Day) {\r\n  if (day.disabled) return\r\n  pickerEmit('update:modelValue', day.date.format(formatStr.value))\r\n  state.date = day.date\r\n  closeDropdown()\r\n}\r\n</script>\r\n", "<template>\r\n  <ul :class=\"cls.e('months')\">\r\n    <li\r\n      v-for=\"{ key, month, disabled } of months\"\r\n      :key=\"key\"\r\n      :class=\"[\r\n        cls.e('month'),\r\n        bem.is('selected', didMonthSelected(month)),\r\n        bem.is('disabled', disabled === true)\r\n      ]\"\r\n      @click=\"!disabled && handleSelectMonth(month)\"\r\n    >\r\n      <span :class=\"cls.e('month-text')\">{{ month }}月</span>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed } from 'vue'\r\nimport { useDate } from '../use-date'\r\nimport { bem } from '@ui/utils'\r\nimport { getYearMonths } from '../../calendar/utils'\r\nimport { date } from 'cat-kit/fe'\r\n\r\ndefineOptions({\r\n  name: 'MonthPanel'\r\n})\r\n\r\nconst {\r\n  cls,\r\n  state,\r\n  pickerProps,\r\n  pickerEmit,\r\n  showNextPanel,\r\n  closeDropdown,\r\n  formatStr\r\n} = useDate('inject')\r\n\r\nconst months = computed(() => {\r\n  return getYearMonths(state.panelDate.timestamp, pickerProps.disabledDate)\r\n})\r\n\r\nfunction handleSelectMonth(month: number) {\r\n  state.panelDate = state.panelDate.setMonth(month)\r\n  showNextPanel()\r\n  if (pickerProps.type === 'month') {\r\n    state.date = date(state.panelDate.format('yyyy-MM'))\r\n    pickerEmit('update:modelValue', state.date.format(formatStr.value))\r\n    closeDropdown()\r\n  }\r\n}\r\n\r\nfunction didMonthSelected(month: number) {\r\n  if (!state.date) return false\r\n  return state.date.month === month && state.date.year === state.panelDate.year\r\n}\r\n</script>\r\n", "<template>\r\n  <ul :class=\"cls.e('years')\">\r\n    <li\r\n      v-for=\"{ year, disabled } of years\"\r\n      :key=\"year\"\r\n      :class=\"[\r\n        cls.e('year'),\r\n        bem.is('selected', didYearSelected(year)),\r\n        bem.is('disabled', disabled === true)\r\n      ]\"\r\n      @click=\"!disabled && handleSelectYear(year)\"\r\n    >\r\n      <span :class=\"cls.e('year-text')\">{{ year }}</span>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { bem } from '@ui/utils'\r\nimport { useDate } from '../use-date'\r\nimport { getTenYears } from '../../calendar/utils'\r\nimport { computed } from 'vue'\r\nimport { date } from 'cat-kit/fe'\r\n\r\ndefineOptions({\r\n  name: 'YearPanel'\r\n})\r\n\r\nconst {\r\n  cls,\r\n  state,\r\n  pickerProps,\r\n  pickerEmit,\r\n  showNextPanel,\r\n  closeDropdown,\r\n  formatStr\r\n} = useDate('inject')\r\n\r\nconst years = computed(() => {\r\n  return getTenYears(state.panelDate.timestamp, pickerProps.disabledDate)\r\n})\r\n\r\nfunction didYearSelected(year: number) {\r\n  if (!state.date) return false\r\n  return state.date.year === year\r\n}\r\n\r\nfunction handleSelectYear(year: number) {\r\n  state.panelDate = state.panelDate.setYear(year)\r\n  showNextPanel()\r\n  if (pickerProps.type === 'year') {\r\n    const dateStr = state.panelDate.format('yyyy')\r\n    state.date = date(dateStr)\r\n    pickerEmit('update:modelValue', state.date.format(formatStr.value))\r\n    closeDropdown()\r\n  }\r\n}\r\n</script>\r\n", "<template>\r\n  <transition name=\"fade\" appear>\r\n    <div :class=\"className\" :style=\"{ zIndex: zIndex() }\">\r\n      <div :class=\"cls.e('loader')\"></div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { LoadingProps } from '@ui/types/components/loading'\r\nimport { bem, zIndex } from '@ui/utils'\r\nimport { computed } from 'vue'\r\nimport { useFallbackProps } from '@ui/compositions'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\n\r\ndefineOptions({\r\n  name: 'Loading'\r\n})\r\n\r\nconst props = withDefaults(defineProps<LoadingProps>(), {\r\n  type: 'spinner'\r\n})\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst cls = bem('loading')\r\n\r\nconst className = computed(() => {\r\n  return [cls.b, cls.m(size.value), cls.e(props.type)]\r\n})\r\n</script>\r\n", "import {\r\n  createVNode,\r\n  render,\r\n  type DirectiveBinding,\r\n  type ObjectDirective\r\n} from 'vue'\r\nimport LoadingComponent from './loading.vue'\r\nimport { bem } from '@ui/utils'\r\nimport type { LoadingType } from '@ui/types/components/loading'\r\n\r\nconst loadingCls = bem('loading')\r\nconst loadingContainerCls = loadingCls.e('container')\r\n\r\nfunction renderLoading(el: HTMLElement, binding: DirectiveBinding) {\r\n  el.classList.add(loadingContainerCls)\r\n\r\n  const node = createVNode(LoadingComponent, {\r\n    type: binding.arg as LoadingType\r\n  })\r\n\r\n  render(node, el)\r\n}\r\n\r\nfunction removeLoading(el: HTMLElement) {\r\n  render(null, el)\r\n  el.classList.remove(loadingContainerCls)\r\n}\r\nexport const vLoading: ObjectDirective<HTMLElement> = {\r\n  mounted(el, binding) {\r\n    binding.value && renderLoading(el, binding)\r\n  },\r\n\r\n  updated(el, binding) {\r\n    binding.value ? renderLoading(el, binding) : removeLoading(el)\r\n  },\r\n\r\n  unmounted(el) {\r\n    removeLoading(el)\r\n  }\r\n}\r\n", "import type { ColorType } from '@ui/types/component-common'\r\nimport type { MessageType } from '@ui/types/components/message'\r\nimport {\r\n  CircleCheckFilled,\r\n  InfoFilled,\r\n  WarningFilled,\r\n  CircleCloseFilled,\r\n  QuestionFilled\r\n} from 'icon-ultra'\r\nimport type { DefineComponent } from 'vue'\r\n\r\nconst typeIcons = {\r\n  default: InfoFilled,\r\n  info: QuestionFilled,\r\n  success: CircleCheckFilled,\r\n  warn: WarningFilled,\r\n  error: CircleCloseFilled\r\n}\r\nexport function getTypeIcon(type: MessageType, icon?: DefineComponent): DefineComponent {\r\n  return (icon ?? typeIcons[type]) as any\r\n}\r\n\r\nconst typeColors = {\r\n  error: 'danger',\r\n  warn: 'warning'\r\n}\r\n\r\nexport function getTypeColor(type: MessageType): ColorType {\r\n  return typeColors[type] ?? type\r\n}\r\n", "<template>\r\n  <li\r\n    :class=\"[cls.b, cls.m(size), cls.m('color-' + getTypeColor(type))]\"\r\n    @mouseenter=\"suspendClose\"\r\n    @mouseleave=\"close\"\r\n  >\r\n    <div :class=\"cls.e('icon')\">\r\n      <UIcon>\r\n        <component :is=\"getTypeIcon(type, icon)\" />\r\n      </UIcon>\r\n    </div>\r\n    <div :class=\"cls.e('content')\" v-if=\"html\" v-html=\"message\"></div>\r\n    <div :class=\"cls.e('content')\" v-else>\r\n      {{ message }}\r\n    </div>\r\n    <div\r\n      :class=\"cls.e('close')\"\r\n      v-if=\"closable || duration === 0\"\r\n      @click.stop=\"immediateClose\"\r\n    >\r\n      <UIcon><Close /></UIcon>\r\n    </div>\r\n  </li>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { MessageProps } from '@ui/types/components/message'\r\nimport { bem } from '@ui/utils'\r\nimport { onMounted } from 'vue'\r\nimport { useFallbackProps } from '@ui/compositions'\r\nimport { Close } from 'icon-ultra'\r\nimport { UIcon } from '../icon'\r\nimport { getTypeColor, getTypeIcon } from './helper'\r\n\r\ndefineOptions({\r\n  name: 'Message'\r\n})\r\n\r\nconst props = withDefaults(defineProps<MessageProps>(), {\r\n  type: 'default',\r\n  duration: 3000,\r\n  offset: 20\r\n})\r\n\r\nconst emit = defineEmits<{\r\n  (e: 'close'): void\r\n}>()\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default'\r\n})\r\n\r\nconst cls = bem('message')\r\n\r\nlet startTime = 0\r\nlet timer: number\r\nlet restDuration = 0\r\n\r\nfunction close() {\r\n  if (props.duration === 0) return\r\n  startTime = Date.now()\r\n  timer = setTimeout(() => {\r\n    emit('close')\r\n  }, restDuration)\r\n}\r\n\r\nfunction startClose() {\r\n  if (props.duration <= 0) return\r\n  restDuration = props.duration\r\n  close()\r\n}\r\n\r\nonMounted(() => {\r\n  startClose()\r\n})\r\n\r\nfunction suspendClose() {\r\n  clearTimeout(timer)\r\n  restDuration = restDuration - (Date.now() - startTime)\r\n}\r\n\r\nfunction immediateClose() {\r\n  emit('close')\r\n}\r\n</script>\r\n", "<template>\r\n  <transition-group name=\"message\" appear @after-leave=\"handleAfterLeave\">\r\n    <UMessage\r\n      v-for=\"({ onClose, ...message }, index) of messages\"\r\n      v-bind=\"message\"\r\n      :data-id=\"message.key\"\r\n      @close=\"handleClose(index, onClose)\"\r\n    />\r\n  </transition-group>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { MessageOptions } from '@ui/types/components/message'\r\nimport UMessage from './message.vue'\r\n\r\ndefineOptions({\r\n  name: 'MessageBox'\r\n})\r\n\r\ndefineProps<{\r\n  messages: Array<Omit<MessageOptions & { key: string }, 'onClosed'>>\r\n}>()\r\n\r\nconst emit = defineEmits<{\r\n  (e: 'remove', id: string): void\r\n  (e: 'close', index: number): void\r\n}>()\r\n\r\nfunction handleAfterLeave(el: Element) {\r\n  emit('remove', (el as HTMLElement).dataset.id as string)\r\n}\r\n\r\nfunction handleClose(i: number, onClose?: () => void) {\r\n  emit('close', i)\r\n  onClose?.()\r\n}\r\n</script>\r\n", "import { createApp, h, shallowReactive, type App } from 'vue'\r\nimport type { MessageOptions, MessageType } from '@ui/types/components/message'\r\nimport { bem, setStyles, zIndex } from '@ui/utils'\r\nimport UMessageBox from './message-box.vue'\r\n\r\nexport const messageTypes: Array<MessageType> = [\r\n  'success',\r\n  'warn',\r\n  'info',\r\n  'error',\r\n  'default'\r\n]\r\n\r\nlet uid = 0\r\n\r\ntype MessageAliasFns = {\r\n  [key in MessageType]: (\r\n    /** 消息 */\r\n    message: string,\r\n    /** 消息配置 */\r\n    config?: Omit<MessageOptions, 'type' | 'message'>\r\n  ) => void\r\n}\r\n\r\ntype Message = {\r\n  (options: MessageOptions | MessageType): void\r\n  /** 关闭所有的消息 */\r\n  closeAll(): void\r\n} & MessageAliasFns\r\n\r\nconst cls = bem('message')\r\n\r\nlet messageApp: App | null = null\r\n\r\nconst messages = shallowReactive<Array<MessageOptions & { key: string }>>([])\r\nlet count = 0\r\n\r\nconst closedCallbacks = new Map<string, () => void>()\r\n\r\nfunction handleRemove(id: string) {\r\n  count--\r\n\r\n  // 执行销毁函数\r\n  if (closedCallbacks.has(id)) {\r\n    closedCallbacks.get(id)!()\r\n    closedCallbacks.delete(id)\r\n  }\r\n  if (count === 0 && messageApp) {\r\n    messageApp.unmount()\r\n    document.body.removeChild(messageApp._container)\r\n    messageApp = null\r\n  }\r\n}\r\nfunction closeMessage(index: number) {\r\n  messages.splice(index, 1)\r\n}\r\n\r\nfunction renderMessageBox() {\r\n  messageApp = createApp({\r\n    render: () =>\r\n      h(UMessageBox, {\r\n        messages,\r\n        onRemove: handleRemove,\r\n        onClose: closeMessage\r\n      })\r\n  })\r\n  const container = document.createElement('ul')\r\n  container.className = cls.e('container')\r\n  setStyles(container, { zIndex: zIndex() })\r\n  document.body.appendChild(container)\r\n  messageApp.mount(container)\r\n}\r\n\r\n// @ts-ignore\r\nconst msg: Message = options => {\r\n  if (typeof options === 'string') {\r\n    options = {\r\n      message: options\r\n    }\r\n  }\r\n\r\n  const { onClosed, ...messageOptions } = options\r\n  const key = String(uid++)\r\n  // 这些回调会在消息离开动画结束后被消费\r\n  onClosed && closedCallbacks.set(key, onClosed)\r\n\r\n  messages.push({\r\n    ...messageOptions,\r\n    key\r\n  })\r\n\r\n  count++\r\n\r\n  if (messageApp?._container) {\r\n    setStyles(messageApp?._container, { zIndex: zIndex() })\r\n  }\r\n\r\n  if (messages.length && !messageApp) {\r\n    renderMessageBox()\r\n  }\r\n}\r\n\r\nmsg.closeAll = function () {\r\n  messages.splice(0).forEach(message => message.onClose?.())\r\n}\r\n\r\nmessageTypes.forEach(type => {\r\n  msg[type] = (message, config) => {\r\n    msg({\r\n      message,\r\n      type,\r\n      ...config\r\n    })\r\n  }\r\n})\r\n\r\nexport const message = msg\r\n", "<template>\r\n  <transition name=\"message-confirm-fade\" @after-leave=\"$emit('destroy')\">\r\n    <div :class=\"[cls.b, cls.m(size)]\" v-show=\"visible\">\r\n      <div :class=\"cls.e('mask')\" :style=\"{ zIndex: `${zIndex()}`}\">\r\n        <div :class=\"cls.e('box')\">\r\n          <div :class=\"cls.e('header')\" v-if=\"title\">{{ title }}</div>\r\n          <div :class=\"cls.e('content')\">{{ message }}</div>\r\n          <div :class=\"cls.e('footer')\">\r\n            <UButton\r\n              plain\r\n              @click=\"close('cancel')\"\r\n              :class=\"cls.em('footer', 'btn')\"\r\n              v-if=\"cancelButtonText\"\r\n              >{{ cancelButtonText }}</UButton\r\n            >\r\n            <UButton\r\n              :type=\"confirmButtonType\"\r\n              @click=\"close('confirm')\"\r\n              :class=\"cls.em('footer', 'btn')\"\r\n              >{{ confirmButtonText }}</UButton\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { MessageConfirmProps } from '@ui/types/components/message-confirm'\r\nimport { bem } from '@ui/utils'\r\nimport { UButton } from '../button'\r\nimport { useFallbackProps } from '@ui/compositions'\r\nimport { ref, onMounted } from 'vue'\r\nimport type { ColorType, ComponentSize } from '@ui/types/component-common'\r\nimport { zIndex } from '@ui/utils'\r\n\r\ndefineOptions({\r\n  name: 'MessageConfirm'\r\n})\r\n\r\nconst props = withDefaults(defineProps<MessageConfirmProps>(), {\r\n  title: '',\r\n  message: '',\r\n  confirmButtonText: '确定',\r\n  confirmButtonType: 'primary' as ColorType,\r\n  cancelButtonText: ''\r\n})\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst cls = bem('message-confirm')\r\n\r\nconst visible = ref<boolean>(false)\r\n\r\nonMounted(() => {\r\n  visible.value = true\r\n})\r\n\r\nconst close = (action: 'cancel' | 'confirm') => {\r\n  visible.value = false\r\n  if (props.onClose) props.onClose(action)\r\n}\r\n</script>\r\n", "import type { MessageConfirmProps } from '@ui/types/components/message-confirm'\r\nimport UMessageConfirm from './message-confirm.vue'\r\nimport { createVNode, render } from 'vue'\r\nimport { zIndex } from '@ui/utils'\r\nimport { type ColorType } from '@ui/types/component-common'\r\n\r\nconst ColorTypeArray: ColorType[] = ['primary', 'success', 'info', 'warning', 'danger']\r\n\r\ntype MessageConfirmFn = (options: MessageConfirmProps) => void\r\n\r\ntype MessageConfirmTypeFn = {\r\n  [k in ColorType]: (message: string, onClose?: (action: 'cancel' | 'confirm') => void) => void\r\n} & MessageConfirmFn\r\n\r\nconst MessageConfirm: MessageConfirmFn & Partial<MessageConfirmTypeFn> = (options: MessageConfirmProps) => {\r\n  const container = document.createElement('div')\r\n  const vm = createVNode(UMessageConfirm, {\r\n    ...options, zIndex: zIndex()\r\n  })\r\n  vm.props!.onDestroy = () => render(null, container)\r\n  render(vm, container)\r\n  document.body.appendChild(container.firstElementChild!)\r\n}\r\n\r\nColorTypeArray.forEach((type) => {\r\n  MessageConfirm[type] = (message: string, onClose?: (action: 'cancel' | 'confirm') => void) => {\r\n    return MessageConfirm({\r\n      message,\r\n      confirmButtonType: type,\r\n      onClose\r\n    })\r\n  }\r\n})\r\n\r\nexport default MessageConfirm as MessageConfirmTypeFn", "<template>\r\n  <transition\r\n    :name=\"`notification-fade-${position.split('-')[0]}`\"\r\n    @before-leave=\"onClose\"\r\n    @after-leave=\"$emit('destroy')\"\r\n  >\r\n    <div\r\n      :class=\"[cls.b, cls.m(size), cls.e(type), cls.e(position)]\"\r\n      v-show=\"visible\"\r\n      :style=\"customStyle\"\r\n    >\r\n      <div :class=\"cls.e('icon')\">\r\n        <UIcon>\r\n          <component :is=\"typeIcon\" />\r\n        </UIcon>\r\n      </div>\r\n      <div :class=\"cls.e('content')\">\r\n        <div :class=\"cls.em('content', 'title')\">{{ title }}</div>\r\n        <div :class=\"cls.em('content', 'message')\">{{ message }}</div>\r\n        <div :class=\"cls.em('content', 'button')\" v-if=\"buttonText\">\r\n          <UButton :type=\"type\" plain @click=\"handleClick\">{{ buttonText }}</UButton>\r\n        </div>\r\n      </div>\r\n      <div :class=\"cls.e('close')\" v-if=\"closable\" @click.stop=\"close\">\r\n        <UIcon><Close /></UIcon>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { NotificationProps, NotificationExposed } from '@ui/types/components/notification'\r\nimport { bem } from '@ui/utils'\r\nimport { useFallbackProps } from '@ui/compositions'\r\nimport { ref, computed, onMounted, type CSSProperties } from 'vue'\r\nimport {\r\n  Close,\r\n  CircleCheckFilled,\r\n  InfoFilled,\r\n  WarningFilled,\r\n  CircleCloseFilled,\r\n  QuestionFilled\r\n} from 'icon-ultra'\r\nimport { UIcon } from '../icon'\r\nimport { UButton } from '../button'\r\nimport type { ColorType } from '@ui/types/component-common'\r\n\r\ndefineOptions({\r\n  name: 'Notification'\r\n})\r\n\r\nconst props = withDefaults(defineProps<NotificationProps>(), {\r\n  closable: false,\r\n  duration: 4500,\r\n  offset: 20,\r\n  buttonText: '',\r\n  position: 'bottom-right'\r\n})\r\n\r\nconst { type, size } = useFallbackProps([props], {\r\n  type: 'primary' as ColorType,\r\n  size: 'default'\r\n})\r\n\r\nconst typeIcon = computed(() => {\r\n  return (\r\n    props.icon ||\r\n    {\r\n      primary: InfoFilled,\r\n      info: QuestionFilled,\r\n      success: CircleCheckFilled,\r\n      warning: WarningFilled,\r\n      danger: CircleCloseFilled\r\n    }[type.value]\r\n  )\r\n})\r\n\r\nconst cls = bem('notification')\r\n\r\nconst visible = ref<boolean>(false)\r\n\r\nonMounted(() => {\r\n  visible.value = true\r\n  startTimer()\r\n})\r\n\r\nconst close = () => {\r\n  visible.value = false\r\n}\r\n\r\nconst customStyle = computed<CSSProperties>(() => {\r\n  return props.offset > 0\r\n    ? {\r\n        [`${props.position.split('-')[0]}`]: `${props.offset}px`,\r\n        zIndex: props.zIndex,\r\n        transform:\r\n          props.position.split('-')[0] === 'bottom'\r\n            ? `translateY(-${props.offset}px)`\r\n            : `translateY(${props.offset}px)`,\r\n        transition: `opacity 0.3s, transform 0.4s, top 0.4s`\r\n      }\r\n    : {\r\n        [`${props.position.split('-')[0]}`]: `${props.offset}px`,\r\n        zIndex: props.zIndex\r\n      }\r\n})\r\n\r\nlet timer = 0\r\n\r\nconst startTimer = () => {\r\n  if (props.duration) {\r\n    timer = setTimeout(() => {\r\n      close()\r\n    }, props.duration)\r\n  }\r\n}\r\n\r\nconst clearTimer = () => clearTimeout(timer)\r\n\r\nconst handleClick = (e: MouseEvent) => {\r\n  if (props.onClick) props.onClick(e)\r\n  close()\r\n}\r\n\r\ndefineExpose<NotificationExposed>({ startTimer, clearTimer })\r\n</script>\r\n", "export { default as UNotification } from './notification.vue'\r\nimport UNotification from './notification.vue'\r\nimport { createVNode, render, type VNode, reactive } from 'vue'\r\n\r\nexport type {\r\n  NotificationProps,\r\n  NotificationEmits,\r\n  NotificationExposed\r\n} from '@ui/types/components/notification'\r\n\r\nimport type { NotificationProps } from '@ui/types/components/notification'\r\nimport { zIndex } from '@ui/utils'\r\n\r\ntype NotificationItem = {\r\n  vm: VNode\r\n}\r\n\r\nconst notificationQueue = reactive({\r\n  'bottom-right': [] as NotificationItem[],\r\n  'bottom-left': [] as NotificationItem[],\r\n  'top-right': [] as NotificationItem[],\r\n  'top-left': [] as NotificationItem[]\r\n})\r\n\r\nconst length = (key: string) => {\r\n  return notificationQueue[key].length\r\n}\r\n\r\nlet count = 1\r\n\r\nconst close = (id: string, position: string, userClose?: (vm: VNode) => void) => {\r\n  const index = notificationQueue[position].findIndex(({ vm }) => {\r\n    return id === vm.component!.props.id\r\n  })\r\n  if (index > -1) {\r\n    const { vm } = notificationQueue[position][index]!\r\n    userClose?.(vm)\r\n    let offset = Number(notificationQueue[position][index]!.vm.component!.props.offset)\r\n    notificationQueue[position].splice(index, 1)\r\n    let temp = 0\r\n    for (let i = length(position); i > 0; i--) {\r\n      if (i < index + 1) {\r\n        temp = Number(notificationQueue[position][i - 1]!.vm.component!.props.offset)\r\n        notificationQueue[position][i - 1]!.vm.component!.props.offset = offset\r\n        offset = temp\r\n      }\r\n    }\r\n  }\r\n  if (!notificationQueue[position].length) {\r\n    const wrapper = document.getElementById(`notification-${position}-id`)!\r\n    wrapper.style.removeProperty('height')\r\n    wrapper.style.removeProperty('overflow')\r\n  }\r\n}\r\n\r\nconst createWrapper = (options: NotificationProps) => {\r\n  const position = options.position || 'bottom-right'\r\n  if (document.getElementById(`notification-${position}-id`)) {\r\n    return document.getElementById(`notification-${position}-id`)\r\n  } else {\r\n    const offset = options.offset || 20\r\n    const wrapper = document.createElement('div')\r\n    wrapper.id = `notification-${position}-id`\r\n    Object.assign(wrapper.style, {\r\n      position: 'fixed',\r\n      textAlign: 'center'\r\n    }, {\r\n      'top-right': { top: `${offset}px`, right: `${offset}px` },\r\n      'top-left': { top: `${offset}px`, left: `${offset}px` },\r\n      'bottom-left': { bottom: `${offset}px`, left: `${offset}px` },\r\n      'bottom-right': { bottom: `${offset}px`, right: `${offset}px` }\r\n    }[position])\r\n    wrapper.addEventListener('mouseenter', (e: MouseEvent) => {\r\n      if (length(position)) {\r\n        let innerCount = 0\r\n        let innerOffset = 0\r\n        let width = 0\r\n        let height = 0\r\n        for (let i = length(position); i > 0; i--) {\r\n          notificationQueue[position][i - 1]!.vm.component!.exposed!.clearTimer()\r\n          if (i === length(position)) {\r\n            width = notificationQueue[position][i - 1]!.vm.el?.offsetWidth + 8\r\n          }\r\n          notificationQueue[position][i - 1]!.vm.component!.props.offset = innerOffset\r\n          innerOffset += notificationQueue[position][i - 1]!.vm.el?.offsetHeight / 2 + 5\r\n          if (innerCount < 3) height += notificationQueue[position][i - 1]!.vm.el?.offsetHeight + 10\r\n          innerCount++\r\n        }\r\n\r\n        Object.assign((e.target as HTMLElement).style, {\r\n          width: `${width}px`,\r\n          height: `${height}px`,\r\n          overflow: 'hidden',\r\n          transition: 'height 0.4s'\r\n        })\r\n      }\r\n    })\r\n    wrapper.addEventListener('mouseleave', (e: MouseEvent) => {\r\n      if (length(position)) {\r\n        let innerOffset = 0\r\n        let innerCount = 0\r\n        let height = 0\r\n        for (let i = length(position); i > 0; i--) {\r\n          notificationQueue[position][i - 1]!.vm.component!.exposed!.startTimer()\r\n          if (i === length(position)) height = notificationQueue[position][i - 1]!.vm.el?.offsetHeight + 80\r\n          notificationQueue[position][i - 1]!.vm.component!.props.offset = innerOffset\r\n          if (innerCount < 2) innerOffset += 10\r\n          innerCount++\r\n        }\r\n        ; (e.target as HTMLElement).style.transition = 'height 0.45s'\r\n          ; (e.target as HTMLElement).style.height = `${height}px`\r\n      } else {\r\n        ; (e.target as HTMLElement).style.removeProperty('height')\r\n          ; (e.target as HTMLElement).style.removeProperty('overflow')\r\n      }\r\n    })\r\n    document.body.appendChild(wrapper)\r\n    return wrapper\r\n  }\r\n}\r\n\r\nexport const Notification = (options: NotificationProps) => {\r\n  const position = options.position || 'bottom-right'\r\n  const container = document.createElement('div')\r\n  const id = `notification_${count++}`\r\n\r\n  if (length(position)) {\r\n    let innerOffset = 0\r\n    let innerCount = 0\r\n    for (let i = length(position); i > 0; i--) {\r\n      if (innerCount < 2) innerOffset += 10\r\n      notificationQueue[position][i - 1]!.vm.component!.props.offset = innerOffset\r\n      innerCount++\r\n    }\r\n  }\r\n\r\n  const vm = createVNode(UNotification, {\r\n    ...options,\r\n    offset: 0,\r\n    id,\r\n    zIndex: zIndex(),\r\n    onClose: () => {\r\n      close(id, position, options.onClose)\r\n    }\r\n  })\r\n  vm.props!.onDestroy = () => render(null, container)\r\n  render(vm, container)\r\n  notificationQueue[position].push({ vm })\r\n  const wrapper = createWrapper(options)\r\n  wrapper?.appendChild(container.firstElementChild!)\r\n}\r\n\r\n", "/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n", "import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n", "import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n", "import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n", "import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n", "/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n", "/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n", "/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n", "/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n", "import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n", "import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n", "/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n", "import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n", "/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n", "import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n", "import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n", "/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n", "/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n", "/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n", "/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n", "import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n", "import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n", "import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n", "/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n", "/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n", "import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n", "/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n", "import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n", "import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n", "import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n", "import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n", "/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n", "import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n", "import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n", "import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n", "/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n", "import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n", "/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n", "import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n", "import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n", "/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n", "import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n", "import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n", "import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n", "/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n", "import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n", "import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n", "import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n", "/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n", "import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n", "import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n", "import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n", "import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n", "/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n", "import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n", "import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n", "import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n", "import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n", "/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n", "import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n", "import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n", "import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n", "import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n", "import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n", "import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n", "import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n", "/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n", "import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n", "import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n", "import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n", "import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n", "import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n", "import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n", "/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n", "import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n", "import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n", "import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n", "/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n", "/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n", "/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n", "import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n", "import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n", "import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n", "import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n", "import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n", "/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n", "/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n", "import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n", "import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n", "import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n", "import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n", "import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n", "import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n", "import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n", "import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n", "import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n", "import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n", "import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n", "import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n", "/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n", "import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n", "import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n", "import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n", "import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n", "import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n", "import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n", "import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n", "import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n", "import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n", "import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n", "/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n", "/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n", "import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n", "/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n", "/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n", "import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n", "/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n", "/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n", "import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n", "import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n", "import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n", "import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n", "/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n", "import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n", "import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n", "import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n", "/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n", "import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n", "import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n", "import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n", "import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n", "import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n", "var Scope = /* @__PURE__ */ ((Scope2) => (Scope2[Scope2.TYPE = 3] = \"TYPE\", Scope2[Scope2.LEVEL = 12] = \"LEVEL\", Scope2[Scope2.ATTRIBUTE = 13] = \"ATTRIBUTE\", Scope2[Scope2.BLOT = 14] = \"BLOT\", Scope2[Scope2.INLINE = 7] = \"INLINE\", Scope2[Scope2.BLOCK = 11] = \"BLOCK\", Scope2[Scope2.BLOCK_BLOT = 10] = \"BLOCK_BLOT\", Scope2[Scope2.INLINE_BLOT = 6] = \"INLINE_BLOT\", Scope2[Scope2.BLOCK_ATTRIBUTE = 9] = \"BLOCK_ATTRIBUTE\", Scope2[Scope2.INLINE_ATTRIBUTE = 5] = \"INLINE_ATTRIBUTE\", Scope2[Scope2.ANY = 15] = \"ANY\", Scope2))(Scope || {});\nclass Attributor {\n  constructor(attrName, keyName, options = {}) {\n    this.attrName = attrName, this.keyName = keyName;\n    const attributeBit = Scope.TYPE & Scope.ATTRIBUTE;\n    this.scope = options.scope != null ? (\n      // Ignore type bits, force attribute bit\n      options.scope & Scope.LEVEL | attributeBit\n    ) : Scope.ATTRIBUTE, options.whitelist != null && (this.whitelist = options.whitelist);\n  }\n  static keys(node) {\n    return Array.from(node.attributes).map((item) => item.name);\n  }\n  add(node, value) {\n    return this.canAdd(node, value) ? (node.setAttribute(this.keyName, value), !0) : !1;\n  }\n  canAdd(_node, value) {\n    return this.whitelist == null ? !0 : typeof value == \"string\" ? this.whitelist.indexOf(value.replace(/[\"']/g, \"\")) > -1 : this.whitelist.indexOf(value) > -1;\n  }\n  remove(node) {\n    node.removeAttribute(this.keyName);\n  }\n  value(node) {\n    const value = node.getAttribute(this.keyName);\n    return this.canAdd(node, value) && value ? value : \"\";\n  }\n}\nclass ParchmentError extends Error {\n  constructor(message) {\n    message = \"[Parchment] \" + message, super(message), this.message = message, this.name = this.constructor.name;\n  }\n}\nconst _Registry = class _Registry {\n  constructor() {\n    this.attributes = {}, this.classes = {}, this.tags = {}, this.types = {};\n  }\n  static find(node, bubble = !1) {\n    if (node == null)\n      return null;\n    if (this.blots.has(node))\n      return this.blots.get(node) || null;\n    if (bubble) {\n      let parentNode = null;\n      try {\n        parentNode = node.parentNode;\n      } catch {\n        return null;\n      }\n      return this.find(parentNode, bubble);\n    }\n    return null;\n  }\n  create(scroll, input, value) {\n    const match2 = this.query(input);\n    if (match2 == null)\n      throw new ParchmentError(`Unable to create ${input} blot`);\n    const blotClass = match2, node = (\n      // @ts-expect-error Fix me later\n      input instanceof Node || input.nodeType === Node.TEXT_NODE ? input : blotClass.create(value)\n    ), blot = new blotClass(scroll, node, value);\n    return _Registry.blots.set(blot.domNode, blot), blot;\n  }\n  find(node, bubble = !1) {\n    return _Registry.find(node, bubble);\n  }\n  query(query, scope = Scope.ANY) {\n    let match2;\n    return typeof query == \"string\" ? match2 = this.types[query] || this.attributes[query] : query instanceof Text || query.nodeType === Node.TEXT_NODE ? match2 = this.types.text : typeof query == \"number\" ? query & Scope.LEVEL & Scope.BLOCK ? match2 = this.types.block : query & Scope.LEVEL & Scope.INLINE && (match2 = this.types.inline) : query instanceof Element && ((query.getAttribute(\"class\") || \"\").split(/\\s+/).some((name) => (match2 = this.classes[name], !!match2)), match2 = match2 || this.tags[query.tagName]), match2 == null ? null : \"scope\" in match2 && scope & Scope.LEVEL & match2.scope && scope & Scope.TYPE & match2.scope ? match2 : null;\n  }\n  register(...definitions) {\n    return definitions.map((definition) => {\n      const isBlot = \"blotName\" in definition, isAttr = \"attrName\" in definition;\n      if (!isBlot && !isAttr)\n        throw new ParchmentError(\"Invalid definition\");\n      if (isBlot && definition.blotName === \"abstract\")\n        throw new ParchmentError(\"Cannot register abstract class\");\n      const key = isBlot ? definition.blotName : isAttr ? definition.attrName : void 0;\n      return this.types[key] = definition, isAttr ? typeof definition.keyName == \"string\" && (this.attributes[definition.keyName] = definition) : isBlot && (definition.className && (this.classes[definition.className] = definition), definition.tagName && (Array.isArray(definition.tagName) ? definition.tagName = definition.tagName.map((tagName) => tagName.toUpperCase()) : definition.tagName = definition.tagName.toUpperCase(), (Array.isArray(definition.tagName) ? definition.tagName : [definition.tagName]).forEach((tag) => {\n        (this.tags[tag] == null || definition.className == null) && (this.tags[tag] = definition);\n      }))), definition;\n    });\n  }\n};\n_Registry.blots = /* @__PURE__ */ new WeakMap();\nlet Registry = _Registry;\nfunction match(node, prefix) {\n  return (node.getAttribute(\"class\") || \"\").split(/\\s+/).filter((name) => name.indexOf(`${prefix}-`) === 0);\n}\nclass ClassAttributor extends Attributor {\n  static keys(node) {\n    return (node.getAttribute(\"class\") || \"\").split(/\\s+/).map((name) => name.split(\"-\").slice(0, -1).join(\"-\"));\n  }\n  add(node, value) {\n    return this.canAdd(node, value) ? (this.remove(node), node.classList.add(`${this.keyName}-${value}`), !0) : !1;\n  }\n  remove(node) {\n    match(node, this.keyName).forEach((name) => {\n      node.classList.remove(name);\n    }), node.classList.length === 0 && node.removeAttribute(\"class\");\n  }\n  value(node) {\n    const value = (match(node, this.keyName)[0] || \"\").slice(this.keyName.length + 1);\n    return this.canAdd(node, value) ? value : \"\";\n  }\n}\nconst ClassAttributor$1 = ClassAttributor;\nfunction camelize(name) {\n  const parts = name.split(\"-\"), rest = parts.slice(1).map((part) => part[0].toUpperCase() + part.slice(1)).join(\"\");\n  return parts[0] + rest;\n}\nclass StyleAttributor extends Attributor {\n  static keys(node) {\n    return (node.getAttribute(\"style\") || \"\").split(\";\").map((value) => value.split(\":\")[0].trim());\n  }\n  add(node, value) {\n    return this.canAdd(node, value) ? (node.style[camelize(this.keyName)] = value, !0) : !1;\n  }\n  remove(node) {\n    node.style[camelize(this.keyName)] = \"\", node.getAttribute(\"style\") || node.removeAttribute(\"style\");\n  }\n  value(node) {\n    const value = node.style[camelize(this.keyName)];\n    return this.canAdd(node, value) ? value : \"\";\n  }\n}\nconst StyleAttributor$1 = StyleAttributor;\nclass AttributorStore {\n  constructor(domNode) {\n    this.attributes = {}, this.domNode = domNode, this.build();\n  }\n  attribute(attribute, value) {\n    value ? attribute.add(this.domNode, value) && (attribute.value(this.domNode) != null ? this.attributes[attribute.attrName] = attribute : delete this.attributes[attribute.attrName]) : (attribute.remove(this.domNode), delete this.attributes[attribute.attrName]);\n  }\n  build() {\n    this.attributes = {};\n    const blot = Registry.find(this.domNode);\n    if (blot == null)\n      return;\n    const attributes = Attributor.keys(this.domNode), classes = ClassAttributor$1.keys(this.domNode), styles = StyleAttributor$1.keys(this.domNode);\n    attributes.concat(classes).concat(styles).forEach((name) => {\n      const attr = blot.scroll.query(name, Scope.ATTRIBUTE);\n      attr instanceof Attributor && (this.attributes[attr.attrName] = attr);\n    });\n  }\n  copy(target) {\n    Object.keys(this.attributes).forEach((key) => {\n      const value = this.attributes[key].value(this.domNode);\n      target.format(key, value);\n    });\n  }\n  move(target) {\n    this.copy(target), Object.keys(this.attributes).forEach((key) => {\n      this.attributes[key].remove(this.domNode);\n    }), this.attributes = {};\n  }\n  values() {\n    return Object.keys(this.attributes).reduce(\n      (attributes, name) => (attributes[name] = this.attributes[name].value(this.domNode), attributes),\n      {}\n    );\n  }\n}\nconst AttributorStore$1 = AttributorStore, _ShadowBlot = class _ShadowBlot {\n  constructor(scroll, domNode) {\n    this.scroll = scroll, this.domNode = domNode, Registry.blots.set(domNode, this), this.prev = null, this.next = null;\n  }\n  static create(rawValue) {\n    if (this.tagName == null)\n      throw new ParchmentError(\"Blot definition missing tagName\");\n    let node, value;\n    return Array.isArray(this.tagName) ? (typeof rawValue == \"string\" ? (value = rawValue.toUpperCase(), parseInt(value, 10).toString() === value && (value = parseInt(value, 10))) : typeof rawValue == \"number\" && (value = rawValue), typeof value == \"number\" ? node = document.createElement(this.tagName[value - 1]) : value && this.tagName.indexOf(value) > -1 ? node = document.createElement(value) : node = document.createElement(this.tagName[0])) : node = document.createElement(this.tagName), this.className && node.classList.add(this.className), node;\n  }\n  // Hack for accessing inherited static methods\n  get statics() {\n    return this.constructor;\n  }\n  attach() {\n  }\n  clone() {\n    const domNode = this.domNode.cloneNode(!1);\n    return this.scroll.create(domNode);\n  }\n  detach() {\n    this.parent != null && this.parent.removeChild(this), Registry.blots.delete(this.domNode);\n  }\n  deleteAt(index, length) {\n    this.isolate(index, length).remove();\n  }\n  formatAt(index, length, name, value) {\n    const blot = this.isolate(index, length);\n    if (this.scroll.query(name, Scope.BLOT) != null && value)\n      blot.wrap(name, value);\n    else if (this.scroll.query(name, Scope.ATTRIBUTE) != null) {\n      const parent = this.scroll.create(this.statics.scope);\n      blot.wrap(parent), parent.format(name, value);\n    }\n  }\n  insertAt(index, value, def) {\n    const blot = def == null ? this.scroll.create(\"text\", value) : this.scroll.create(value, def), ref = this.split(index);\n    this.parent.insertBefore(blot, ref || void 0);\n  }\n  isolate(index, length) {\n    const target = this.split(index);\n    if (target == null)\n      throw new Error(\"Attempt to isolate at end\");\n    return target.split(length), target;\n  }\n  length() {\n    return 1;\n  }\n  offset(root = this.parent) {\n    return this.parent == null || this === root ? 0 : this.parent.children.offset(this) + this.parent.offset(root);\n  }\n  optimize(_context) {\n    this.statics.requiredContainer && !(this.parent instanceof this.statics.requiredContainer) && this.wrap(this.statics.requiredContainer.blotName);\n  }\n  remove() {\n    this.domNode.parentNode != null && this.domNode.parentNode.removeChild(this.domNode), this.detach();\n  }\n  replaceWith(name, value) {\n    const replacement = typeof name == \"string\" ? this.scroll.create(name, value) : name;\n    return this.parent != null && (this.parent.insertBefore(replacement, this.next || void 0), this.remove()), replacement;\n  }\n  split(index, _force) {\n    return index === 0 ? this : this.next;\n  }\n  update(_mutations, _context) {\n  }\n  wrap(name, value) {\n    const wrapper = typeof name == \"string\" ? this.scroll.create(name, value) : name;\n    if (this.parent != null && this.parent.insertBefore(wrapper, this.next || void 0), typeof wrapper.appendChild != \"function\")\n      throw new ParchmentError(`Cannot wrap ${name}`);\n    return wrapper.appendChild(this), wrapper;\n  }\n};\n_ShadowBlot.blotName = \"abstract\";\nlet ShadowBlot = _ShadowBlot;\nconst _LeafBlot = class _LeafBlot extends ShadowBlot {\n  /**\n   * Returns the value represented by domNode if it is this Blot's type\n   * No checking that domNode can represent this Blot type is required so\n   * applications needing it should check externally before calling.\n   */\n  static value(_domNode) {\n    return !0;\n  }\n  /**\n   * Given location represented by node and offset from DOM Selection Range,\n   * return index to that location.\n   */\n  index(node, offset) {\n    return this.domNode === node || this.domNode.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY ? Math.min(offset, 1) : -1;\n  }\n  /**\n   * Given index to location within blot, return node and offset representing\n   * that location, consumable by DOM Selection Range\n   */\n  position(index, _inclusive) {\n    let offset = Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);\n    return index > 0 && (offset += 1), [this.parent.domNode, offset];\n  }\n  /**\n   * Return value represented by this blot\n   * Should not change without interaction from API or\n   * user change detectable by update()\n   */\n  value() {\n    return {\n      [this.statics.blotName]: this.statics.value(this.domNode) || !0\n    };\n  }\n};\n_LeafBlot.scope = Scope.INLINE_BLOT;\nlet LeafBlot = _LeafBlot;\nconst LeafBlot$1 = LeafBlot;\nclass LinkedList {\n  constructor() {\n    this.head = null, this.tail = null, this.length = 0;\n  }\n  append(...nodes) {\n    if (this.insertBefore(nodes[0], null), nodes.length > 1) {\n      const rest = nodes.slice(1);\n      this.append(...rest);\n    }\n  }\n  at(index) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur && index > 0; )\n      index -= 1, cur = next();\n    return cur;\n  }\n  contains(node) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur; ) {\n      if (cur === node)\n        return !0;\n      cur = next();\n    }\n    return !1;\n  }\n  indexOf(node) {\n    const next = this.iterator();\n    let cur = next(), index = 0;\n    for (; cur; ) {\n      if (cur === node)\n        return index;\n      index += 1, cur = next();\n    }\n    return -1;\n  }\n  insertBefore(node, refNode) {\n    node != null && (this.remove(node), node.next = refNode, refNode != null ? (node.prev = refNode.prev, refNode.prev != null && (refNode.prev.next = node), refNode.prev = node, refNode === this.head && (this.head = node)) : this.tail != null ? (this.tail.next = node, node.prev = this.tail, this.tail = node) : (node.prev = null, this.head = this.tail = node), this.length += 1);\n  }\n  offset(target) {\n    let index = 0, cur = this.head;\n    for (; cur != null; ) {\n      if (cur === target)\n        return index;\n      index += cur.length(), cur = cur.next;\n    }\n    return -1;\n  }\n  remove(node) {\n    this.contains(node) && (node.prev != null && (node.prev.next = node.next), node.next != null && (node.next.prev = node.prev), node === this.head && (this.head = node.next), node === this.tail && (this.tail = node.prev), this.length -= 1);\n  }\n  iterator(curNode = this.head) {\n    return () => {\n      const ret = curNode;\n      return curNode != null && (curNode = curNode.next), ret;\n    };\n  }\n  find(index, inclusive = !1) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur; ) {\n      const length = cur.length();\n      if (index < length || inclusive && index === length && (cur.next == null || cur.next.length() !== 0))\n        return [cur, index];\n      index -= length, cur = next();\n    }\n    return [null, 0];\n  }\n  forEach(callback) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur; )\n      callback(cur), cur = next();\n  }\n  forEachAt(index, length, callback) {\n    if (length <= 0)\n      return;\n    const [startNode, offset] = this.find(index);\n    let curIndex = index - offset;\n    const next = this.iterator(startNode);\n    let cur = next();\n    for (; cur && curIndex < index + length; ) {\n      const curLength = cur.length();\n      index > curIndex ? callback(\n        cur,\n        index - curIndex,\n        Math.min(length, curIndex + curLength - index)\n      ) : callback(cur, 0, Math.min(curLength, index + length - curIndex)), curIndex += curLength, cur = next();\n    }\n  }\n  map(callback) {\n    return this.reduce((memo, cur) => (memo.push(callback(cur)), memo), []);\n  }\n  reduce(callback, memo) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur; )\n      memo = callback(memo, cur), cur = next();\n    return memo;\n  }\n}\nfunction makeAttachedBlot(node, scroll) {\n  const found = scroll.find(node);\n  if (found)\n    return found;\n  try {\n    return scroll.create(node);\n  } catch {\n    const blot = scroll.create(Scope.INLINE);\n    return Array.from(node.childNodes).forEach((child) => {\n      blot.domNode.appendChild(child);\n    }), node.parentNode && node.parentNode.replaceChild(blot.domNode, node), blot.attach(), blot;\n  }\n}\nconst _ParentBlot = class _ParentBlot extends ShadowBlot {\n  constructor(scroll, domNode) {\n    super(scroll, domNode), this.uiNode = null, this.build();\n  }\n  appendChild(other) {\n    this.insertBefore(other);\n  }\n  attach() {\n    super.attach(), this.children.forEach((child) => {\n      child.attach();\n    });\n  }\n  attachUI(node) {\n    this.uiNode != null && this.uiNode.remove(), this.uiNode = node, _ParentBlot.uiClass && this.uiNode.classList.add(_ParentBlot.uiClass), this.uiNode.setAttribute(\"contenteditable\", \"false\"), this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\n  }\n  /**\n   * Called during construction, should fill its own children LinkedList.\n   */\n  build() {\n    this.children = new LinkedList(), Array.from(this.domNode.childNodes).filter((node) => node !== this.uiNode).reverse().forEach((node) => {\n      try {\n        const child = makeAttachedBlot(node, this.scroll);\n        this.insertBefore(child, this.children.head || void 0);\n      } catch (err) {\n        if (err instanceof ParchmentError)\n          return;\n        throw err;\n      }\n    });\n  }\n  deleteAt(index, length) {\n    if (index === 0 && length === this.length())\n      return this.remove();\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\n      child.deleteAt(offset, childLength);\n    });\n  }\n  descendant(criteria, index = 0) {\n    const [child, offset] = this.children.find(index);\n    return criteria.blotName == null && criteria(child) || criteria.blotName != null && child instanceof criteria ? [child, offset] : child instanceof _ParentBlot ? child.descendant(criteria, offset) : [null, -1];\n  }\n  descendants(criteria, index = 0, length = Number.MAX_VALUE) {\n    let descendants = [], lengthLeft = length;\n    return this.children.forEachAt(\n      index,\n      length,\n      (child, childIndex, childLength) => {\n        (criteria.blotName == null && criteria(child) || criteria.blotName != null && child instanceof criteria) && descendants.push(child), child instanceof _ParentBlot && (descendants = descendants.concat(\n          child.descendants(criteria, childIndex, lengthLeft)\n        )), lengthLeft -= childLength;\n      }\n    ), descendants;\n  }\n  detach() {\n    this.children.forEach((child) => {\n      child.detach();\n    }), super.detach();\n  }\n  enforceAllowedChildren() {\n    let done = !1;\n    this.children.forEach((child) => {\n      done || this.statics.allowedChildren.some(\n        (def) => child instanceof def\n      ) || (child.statics.scope === Scope.BLOCK_BLOT ? (child.next != null && this.splitAfter(child), child.prev != null && this.splitAfter(child.prev), child.parent.unwrap(), done = !0) : child instanceof _ParentBlot ? child.unwrap() : child.remove());\n    });\n  }\n  formatAt(index, length, name, value) {\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\n      child.formatAt(offset, childLength, name, value);\n    });\n  }\n  insertAt(index, value, def) {\n    const [child, offset] = this.children.find(index);\n    if (child)\n      child.insertAt(offset, value, def);\n    else {\n      const blot = def == null ? this.scroll.create(\"text\", value) : this.scroll.create(value, def);\n      this.appendChild(blot);\n    }\n  }\n  insertBefore(childBlot, refBlot) {\n    childBlot.parent != null && childBlot.parent.children.remove(childBlot);\n    let refDomNode = null;\n    this.children.insertBefore(childBlot, refBlot || null), childBlot.parent = this, refBlot != null && (refDomNode = refBlot.domNode), (this.domNode.parentNode !== childBlot.domNode || this.domNode.nextSibling !== refDomNode) && this.domNode.insertBefore(childBlot.domNode, refDomNode), childBlot.attach();\n  }\n  length() {\n    return this.children.reduce((memo, child) => memo + child.length(), 0);\n  }\n  moveChildren(targetParent, refNode) {\n    this.children.forEach((child) => {\n      targetParent.insertBefore(child, refNode);\n    });\n  }\n  optimize(context) {\n    if (super.optimize(context), this.enforceAllowedChildren(), this.uiNode != null && this.uiNode !== this.domNode.firstChild && this.domNode.insertBefore(this.uiNode, this.domNode.firstChild), this.children.length === 0)\n      if (this.statics.defaultChild != null) {\n        const child = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(child);\n      } else\n        this.remove();\n  }\n  path(index, inclusive = !1) {\n    const [child, offset] = this.children.find(index, inclusive), position = [[this, index]];\n    return child instanceof _ParentBlot ? position.concat(child.path(offset, inclusive)) : (child != null && position.push([child, offset]), position);\n  }\n  removeChild(child) {\n    this.children.remove(child);\n  }\n  replaceWith(name, value) {\n    const replacement = typeof name == \"string\" ? this.scroll.create(name, value) : name;\n    return replacement instanceof _ParentBlot && this.moveChildren(replacement), super.replaceWith(replacement);\n  }\n  split(index, force = !1) {\n    if (!force) {\n      if (index === 0)\n        return this;\n      if (index === this.length())\n        return this.next;\n    }\n    const after = this.clone();\n    return this.parent && this.parent.insertBefore(after, this.next || void 0), this.children.forEachAt(index, this.length(), (child, offset, _length) => {\n      const split = child.split(offset, force);\n      split != null && after.appendChild(split);\n    }), after;\n  }\n  splitAfter(child) {\n    const after = this.clone();\n    for (; child.next != null; )\n      after.appendChild(child.next);\n    return this.parent && this.parent.insertBefore(after, this.next || void 0), after;\n  }\n  unwrap() {\n    this.parent && this.moveChildren(this.parent, this.next || void 0), this.remove();\n  }\n  update(mutations, _context) {\n    const addedNodes = [], removedNodes = [];\n    mutations.forEach((mutation) => {\n      mutation.target === this.domNode && mutation.type === \"childList\" && (addedNodes.push(...mutation.addedNodes), removedNodes.push(...mutation.removedNodes));\n    }), removedNodes.forEach((node) => {\n      if (node.parentNode != null && // @ts-expect-error Fix me later\n      node.tagName !== \"IFRAME\" && document.body.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY)\n        return;\n      const blot = this.scroll.find(node);\n      blot != null && (blot.domNode.parentNode == null || blot.domNode.parentNode === this.domNode) && blot.detach();\n    }), addedNodes.filter((node) => node.parentNode === this.domNode && node !== this.uiNode).sort((a, b) => a === b ? 0 : a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING ? 1 : -1).forEach((node) => {\n      let refBlot = null;\n      node.nextSibling != null && (refBlot = this.scroll.find(node.nextSibling));\n      const blot = makeAttachedBlot(node, this.scroll);\n      (blot.next !== refBlot || blot.next == null) && (blot.parent != null && blot.parent.removeChild(this), this.insertBefore(blot, refBlot || void 0));\n    }), this.enforceAllowedChildren();\n  }\n};\n_ParentBlot.uiClass = \"\";\nlet ParentBlot = _ParentBlot;\nconst ParentBlot$1 = ParentBlot;\nfunction isEqual(obj1, obj2) {\n  if (Object.keys(obj1).length !== Object.keys(obj2).length)\n    return !1;\n  for (const prop in obj1)\n    if (obj1[prop] !== obj2[prop])\n      return !1;\n  return !0;\n}\nconst _InlineBlot = class _InlineBlot extends ParentBlot$1 {\n  static create(value) {\n    return super.create(value);\n  }\n  static formats(domNode, scroll) {\n    const match2 = scroll.query(_InlineBlot.blotName);\n    if (!(match2 != null && domNode.tagName === match2.tagName)) {\n      if (typeof this.tagName == \"string\")\n        return !0;\n      if (Array.isArray(this.tagName))\n        return domNode.tagName.toLowerCase();\n    }\n  }\n  constructor(scroll, domNode) {\n    super(scroll, domNode), this.attributes = new AttributorStore$1(this.domNode);\n  }\n  format(name, value) {\n    if (name === this.statics.blotName && !value)\n      this.children.forEach((child) => {\n        child instanceof _InlineBlot || (child = child.wrap(_InlineBlot.blotName, !0)), this.attributes.copy(child);\n      }), this.unwrap();\n    else {\n      const format = this.scroll.query(name, Scope.INLINE);\n      if (format == null)\n        return;\n      format instanceof Attributor ? this.attributes.attribute(format, value) : value && (name !== this.statics.blotName || this.formats()[name] !== value) && this.replaceWith(name, value);\n    }\n  }\n  formats() {\n    const formats = this.attributes.values(), format = this.statics.formats(this.domNode, this.scroll);\n    return format != null && (formats[this.statics.blotName] = format), formats;\n  }\n  formatAt(index, length, name, value) {\n    this.formats()[name] != null || this.scroll.query(name, Scope.ATTRIBUTE) ? this.isolate(index, length).format(name, value) : super.formatAt(index, length, name, value);\n  }\n  optimize(context) {\n    super.optimize(context);\n    const formats = this.formats();\n    if (Object.keys(formats).length === 0)\n      return this.unwrap();\n    const next = this.next;\n    next instanceof _InlineBlot && next.prev === this && isEqual(formats, next.formats()) && (next.moveChildren(this), next.remove());\n  }\n  replaceWith(name, value) {\n    const replacement = super.replaceWith(name, value);\n    return this.attributes.copy(replacement), replacement;\n  }\n  update(mutations, context) {\n    super.update(mutations, context), mutations.some(\n      (mutation) => mutation.target === this.domNode && mutation.type === \"attributes\"\n    ) && this.attributes.build();\n  }\n  wrap(name, value) {\n    const wrapper = super.wrap(name, value);\n    return wrapper instanceof _InlineBlot && this.attributes.move(wrapper), wrapper;\n  }\n};\n_InlineBlot.allowedChildren = [_InlineBlot, LeafBlot$1], _InlineBlot.blotName = \"inline\", _InlineBlot.scope = Scope.INLINE_BLOT, _InlineBlot.tagName = \"SPAN\";\nlet InlineBlot = _InlineBlot;\nconst InlineBlot$1 = InlineBlot, _BlockBlot = class _BlockBlot extends ParentBlot$1 {\n  static create(value) {\n    return super.create(value);\n  }\n  static formats(domNode, scroll) {\n    const match2 = scroll.query(_BlockBlot.blotName);\n    if (!(match2 != null && domNode.tagName === match2.tagName)) {\n      if (typeof this.tagName == \"string\")\n        return !0;\n      if (Array.isArray(this.tagName))\n        return domNode.tagName.toLowerCase();\n    }\n  }\n  constructor(scroll, domNode) {\n    super(scroll, domNode), this.attributes = new AttributorStore$1(this.domNode);\n  }\n  format(name, value) {\n    const format = this.scroll.query(name, Scope.BLOCK);\n    format != null && (format instanceof Attributor ? this.attributes.attribute(format, value) : name === this.statics.blotName && !value ? this.replaceWith(_BlockBlot.blotName) : value && (name !== this.statics.blotName || this.formats()[name] !== value) && this.replaceWith(name, value));\n  }\n  formats() {\n    const formats = this.attributes.values(), format = this.statics.formats(this.domNode, this.scroll);\n    return format != null && (formats[this.statics.blotName] = format), formats;\n  }\n  formatAt(index, length, name, value) {\n    this.scroll.query(name, Scope.BLOCK) != null ? this.format(name, value) : super.formatAt(index, length, name, value);\n  }\n  insertAt(index, value, def) {\n    if (def == null || this.scroll.query(value, Scope.INLINE) != null)\n      super.insertAt(index, value, def);\n    else {\n      const after = this.split(index);\n      if (after != null) {\n        const blot = this.scroll.create(value, def);\n        after.parent.insertBefore(blot, after);\n      } else\n        throw new Error(\"Attempt to insertAt after block boundaries\");\n    }\n  }\n  replaceWith(name, value) {\n    const replacement = super.replaceWith(name, value);\n    return this.attributes.copy(replacement), replacement;\n  }\n  update(mutations, context) {\n    super.update(mutations, context), mutations.some(\n      (mutation) => mutation.target === this.domNode && mutation.type === \"attributes\"\n    ) && this.attributes.build();\n  }\n};\n_BlockBlot.blotName = \"block\", _BlockBlot.scope = Scope.BLOCK_BLOT, _BlockBlot.tagName = \"P\", _BlockBlot.allowedChildren = [\n  InlineBlot$1,\n  _BlockBlot,\n  LeafBlot$1\n];\nlet BlockBlot = _BlockBlot;\nconst BlockBlot$1 = BlockBlot, _ContainerBlot = class _ContainerBlot extends ParentBlot$1 {\n  checkMerge() {\n    return this.next !== null && this.next.statics.blotName === this.statics.blotName;\n  }\n  deleteAt(index, length) {\n    super.deleteAt(index, length), this.enforceAllowedChildren();\n  }\n  formatAt(index, length, name, value) {\n    super.formatAt(index, length, name, value), this.enforceAllowedChildren();\n  }\n  insertAt(index, value, def) {\n    super.insertAt(index, value, def), this.enforceAllowedChildren();\n  }\n  optimize(context) {\n    super.optimize(context), this.children.length > 0 && this.next != null && this.checkMerge() && (this.next.moveChildren(this), this.next.remove());\n  }\n};\n_ContainerBlot.blotName = \"container\", _ContainerBlot.scope = Scope.BLOCK_BLOT;\nlet ContainerBlot = _ContainerBlot;\nconst ContainerBlot$1 = ContainerBlot;\nclass EmbedBlot extends LeafBlot$1 {\n  static formats(_domNode, _scroll) {\n  }\n  format(name, value) {\n    super.formatAt(0, this.length(), name, value);\n  }\n  formatAt(index, length, name, value) {\n    index === 0 && length === this.length() ? this.format(name, value) : super.formatAt(index, length, name, value);\n  }\n  formats() {\n    return this.statics.formats(this.domNode, this.scroll);\n  }\n}\nconst EmbedBlot$1 = EmbedBlot, OBSERVER_CONFIG = {\n  attributes: !0,\n  characterData: !0,\n  characterDataOldValue: !0,\n  childList: !0,\n  subtree: !0\n}, MAX_OPTIMIZE_ITERATIONS = 100, _ScrollBlot = class _ScrollBlot extends ParentBlot$1 {\n  constructor(registry, node) {\n    super(null, node), this.registry = registry, this.scroll = this, this.build(), this.observer = new MutationObserver((mutations) => {\n      this.update(mutations);\n    }), this.observer.observe(this.domNode, OBSERVER_CONFIG), this.attach();\n  }\n  create(input, value) {\n    return this.registry.create(this, input, value);\n  }\n  find(node, bubble = !1) {\n    const blot = this.registry.find(node, bubble);\n    return blot ? blot.scroll === this ? blot : bubble ? this.find(blot.scroll.domNode.parentNode, !0) : null : null;\n  }\n  query(query, scope = Scope.ANY) {\n    return this.registry.query(query, scope);\n  }\n  register(...definitions) {\n    return this.registry.register(...definitions);\n  }\n  build() {\n    this.scroll != null && super.build();\n  }\n  detach() {\n    super.detach(), this.observer.disconnect();\n  }\n  deleteAt(index, length) {\n    this.update(), index === 0 && length === this.length() ? this.children.forEach((child) => {\n      child.remove();\n    }) : super.deleteAt(index, length);\n  }\n  formatAt(index, length, name, value) {\n    this.update(), super.formatAt(index, length, name, value);\n  }\n  insertAt(index, value, def) {\n    this.update(), super.insertAt(index, value, def);\n  }\n  optimize(mutations = [], context = {}) {\n    super.optimize(context);\n    const mutationsMap = context.mutationsMap || /* @__PURE__ */ new WeakMap();\n    let records = Array.from(this.observer.takeRecords());\n    for (; records.length > 0; )\n      mutations.push(records.pop());\n    const mark = (blot, markParent = !0) => {\n      blot == null || blot === this || blot.domNode.parentNode != null && (mutationsMap.has(blot.domNode) || mutationsMap.set(blot.domNode, []), markParent && mark(blot.parent));\n    }, optimize = (blot) => {\n      mutationsMap.has(blot.domNode) && (blot instanceof ParentBlot$1 && blot.children.forEach(optimize), mutationsMap.delete(blot.domNode), blot.optimize(context));\n    };\n    let remaining = mutations;\n    for (let i = 0; remaining.length > 0; i += 1) {\n      if (i >= MAX_OPTIMIZE_ITERATIONS)\n        throw new Error(\"[Parchment] Maximum optimize iterations reached\");\n      for (remaining.forEach((mutation) => {\n        const blot = this.find(mutation.target, !0);\n        blot != null && (blot.domNode === mutation.target && (mutation.type === \"childList\" ? (mark(this.find(mutation.previousSibling, !1)), Array.from(mutation.addedNodes).forEach((node) => {\n          const child = this.find(node, !1);\n          mark(child, !1), child instanceof ParentBlot$1 && child.children.forEach((grandChild) => {\n            mark(grandChild, !1);\n          });\n        })) : mutation.type === \"attributes\" && mark(blot.prev)), mark(blot));\n      }), this.children.forEach(optimize), remaining = Array.from(this.observer.takeRecords()), records = remaining.slice(); records.length > 0; )\n        mutations.push(records.pop());\n    }\n  }\n  update(mutations, context = {}) {\n    mutations = mutations || this.observer.takeRecords();\n    const mutationsMap = /* @__PURE__ */ new WeakMap();\n    mutations.map((mutation) => {\n      const blot = this.find(mutation.target, !0);\n      return blot == null ? null : mutationsMap.has(blot.domNode) ? (mutationsMap.get(blot.domNode).push(mutation), null) : (mutationsMap.set(blot.domNode, [mutation]), blot);\n    }).forEach((blot) => {\n      blot != null && blot !== this && mutationsMap.has(blot.domNode) && blot.update(mutationsMap.get(blot.domNode) || [], context);\n    }), context.mutationsMap = mutationsMap, mutationsMap.has(this.domNode) && super.update(mutationsMap.get(this.domNode), context), this.optimize(mutations, context);\n  }\n};\n_ScrollBlot.blotName = \"scroll\", _ScrollBlot.defaultChild = BlockBlot$1, _ScrollBlot.allowedChildren = [BlockBlot$1, ContainerBlot$1], _ScrollBlot.scope = Scope.BLOCK_BLOT, _ScrollBlot.tagName = \"DIV\";\nlet ScrollBlot = _ScrollBlot;\nconst ScrollBlot$1 = ScrollBlot, _TextBlot = class _TextBlot extends LeafBlot$1 {\n  static create(value) {\n    return document.createTextNode(value);\n  }\n  static value(domNode) {\n    return domNode.data;\n  }\n  constructor(scroll, node) {\n    super(scroll, node), this.text = this.statics.value(this.domNode);\n  }\n  deleteAt(index, length) {\n    this.domNode.data = this.text = this.text.slice(0, index) + this.text.slice(index + length);\n  }\n  index(node, offset) {\n    return this.domNode === node ? offset : -1;\n  }\n  insertAt(index, value, def) {\n    def == null ? (this.text = this.text.slice(0, index) + value + this.text.slice(index), this.domNode.data = this.text) : super.insertAt(index, value, def);\n  }\n  length() {\n    return this.text.length;\n  }\n  optimize(context) {\n    super.optimize(context), this.text = this.statics.value(this.domNode), this.text.length === 0 ? this.remove() : this.next instanceof _TextBlot && this.next.prev === this && (this.insertAt(this.length(), this.next.value()), this.next.remove());\n  }\n  position(index, _inclusive = !1) {\n    return [this.domNode, index];\n  }\n  split(index, force = !1) {\n    if (!force) {\n      if (index === 0)\n        return this;\n      if (index === this.length())\n        return this.next;\n    }\n    const after = this.scroll.create(this.domNode.splitText(index));\n    return this.parent.insertBefore(after, this.next || void 0), this.text = this.statics.value(this.domNode), after;\n  }\n  update(mutations, _context) {\n    mutations.some((mutation) => mutation.type === \"characterData\" && mutation.target === this.domNode) && (this.text = this.statics.value(this.domNode));\n  }\n  value() {\n    return this.text;\n  }\n};\n_TextBlot.blotName = \"text\", _TextBlot.scope = Scope.INLINE_BLOT;\nlet TextBlot = _TextBlot;\nconst TextBlot$1 = TextBlot;\nexport {\n  Attributor,\n  AttributorStore$1 as AttributorStore,\n  BlockBlot$1 as BlockBlot,\n  ClassAttributor$1 as ClassAttributor,\n  ContainerBlot$1 as ContainerBlot,\n  EmbedBlot$1 as EmbedBlot,\n  InlineBlot$1 as InlineBlot,\n  LeafBlot$1 as LeafBlot,\n  ParentBlot$1 as ParentBlot,\n  Registry,\n  Scope,\n  ScrollBlot$1 as ScrollBlot,\n  StyleAttributor$1 as StyleAttributor,\n  TextBlot$1 as TextBlot\n};\n//# sourceMappingURL=parchment.js.map\n", "/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int|Object} [cursor_pos] Edit position in text1 or object with more info\n * @param {boolean} [cleanup] Apply semantic cleanup before returning.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos, cleanup, _fix_unicode) {\n  // Check for equality\n  if (text1 === text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  if (cursor_pos != null) {\n    var editdiff = find_cursor_edit_diff(text1, text2, cursor_pos);\n    if (editdiff) {\n      return editdiff;\n    }\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs, _fix_unicode);\n  if (cleanup) {\n    diff_cleanupSemantic(diffs);\n  }\n  return diffs;\n}\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)],\n    ];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [\n      [DIFF_DELETE, text1],\n      [DIFF_INSERT, text2],\n    ];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n}\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = delta % 2 !== 0;\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 === -d || (k1 !== d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (\n        x1 < text1_length &&\n        y1 < text2_length &&\n        text1.charAt(x1) === text2.charAt(y1)\n      ) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 === -d || (k2 !== d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (\n        x2 < text1_length &&\n        y2 < text2_length &&\n        text1.charAt(text1_length - x2 - 1) ===\n          text2.charAt(text2_length - y2 - 1)\n      ) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] !== -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [\n    [DIFF_DELETE, text1],\n    [DIFF_INSERT, text2],\n  ];\n}\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n}\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) !== text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(pointerstart, pointermid) ==\n      text2.substring(pointerstart, pointermid)\n    ) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_start(text1.charCodeAt(pointermid - 1))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\nfunction diff_commonOverlap_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (\n      found == 0 ||\n      text1.substring(text_length - length) == text2.substring(0, length)\n    ) {\n      best = length;\n      length++;\n    }\n  }\n}\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.slice(-1) !== text2.slice(-1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n      text2.substring(text2.length - pointermid, text2.length - pointerend)\n    ) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_end(text1.charCodeAt(text1.length - pointermid))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = \"\";\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) !== -1) {\n      var prefixLength = diff_commonPrefix(\n        longtext.substring(i),\n        shorttext.substring(j)\n      );\n      var suffixLength = diff_commonSuffix(\n        longtext.substring(0, i),\n        shorttext.substring(0, j)\n      );\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common =\n          shorttext.substring(j - suffixLength, j) +\n          shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [\n        best_longtext_a,\n        best_longtext_b,\n        best_shorttext_a,\n        best_shorttext_b,\n        best_common,\n      ];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 4)\n  );\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 2)\n  );\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n}\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemantic(diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastequality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastequality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (\n        lastequality &&\n        lastequality.length <=\n          Math.max(length_insertions1, length_deletions1) &&\n        lastequality.length <= Math.max(length_insertions2, length_deletions2)\n      ) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, [\n          DIFF_DELETE,\n          lastequality,\n        ]);\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastequality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n  diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (\n      diffs[pointer - 1][0] == DIFF_DELETE &&\n      diffs[pointer][0] == DIFF_INSERT\n    ) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (\n          overlap_length1 >= deletion.length / 2 ||\n          overlap_length1 >= insertion.length / 2\n        ) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            insertion.substring(0, overlap_length1),\n          ]);\n          diffs[pointer - 1][1] = deletion.substring(\n            0,\n            deletion.length - overlap_length1\n          );\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (\n          overlap_length2 >= deletion.length / 2 ||\n          overlap_length2 >= insertion.length / 2\n        ) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            deletion.substring(0, overlap_length2),\n          ]);\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(\n            0,\n            insertion.length - overlap_length2\n          );\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n}\n\nvar nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\nvar whitespaceRegex_ = /\\s/;\nvar linebreakRegex_ = /[\\r\\n]/;\nvar blanklineEndRegex_ = /\\n\\r?\\n$/;\nvar blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemanticLossless(diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] == DIFF_EQUAL &&\n      diffs[pointer + 1][0] == DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore =\n        diff_cleanupSemanticScore_(equality1, edit) +\n        diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score =\n          diff_cleanupSemanticScore_(equality1, edit) +\n          diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n}\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n * @param {boolean} fix_unicode Whether to normalize to a unicode-correct diff\n */\nfunction diff_cleanupMerge(diffs, fix_unicode) {\n  diffs.push([DIFF_EQUAL, \"\"]); // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = \"\";\n  var text_insert = \"\";\n  var commonlength;\n  while (pointer < diffs.length) {\n    if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n      diffs.splice(pointer, 1);\n      continue;\n    }\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        var previous_equality = pointer - count_insert - count_delete - 1;\n        if (fix_unicode) {\n          // prevent splitting of unicode surrogate pairs.  when fix_unicode is true,\n          // we assume that the old and new text in the diff are complete and correct\n          // unicode-encoded JS strings, but the tuple boundaries may fall between\n          // surrogate pairs.  we fix this by shaving off stray surrogates from the end\n          // of the previous equality and the beginning of this equality.  this may create\n          // empty equalities or a common prefix or suffix.  for example, if AB and AC are\n          // emojis, `[[0, 'A'], [-1, 'BA'], [0, 'C']]` would turn into deleting 'ABAC' and\n          // inserting 'AC', and then the common suffix 'AC' will be eliminated.  in this\n          // particular case, both equalities go away, we absorb any previous inequalities,\n          // and we keep scanning for the next equality before rewriting the tuples.\n          if (\n            previous_equality >= 0 &&\n            ends_with_pair_start(diffs[previous_equality][1])\n          ) {\n            var stray = diffs[previous_equality][1].slice(-1);\n            diffs[previous_equality][1] = diffs[previous_equality][1].slice(\n              0,\n              -1\n            );\n            text_delete = stray + text_delete;\n            text_insert = stray + text_insert;\n            if (!diffs[previous_equality][1]) {\n              // emptied out previous equality, so delete it and include previous delete/insert\n              diffs.splice(previous_equality, 1);\n              pointer--;\n              var k = previous_equality - 1;\n              if (diffs[k] && diffs[k][0] === DIFF_INSERT) {\n                count_insert++;\n                text_insert = diffs[k][1] + text_insert;\n                k--;\n              }\n              if (diffs[k] && diffs[k][0] === DIFF_DELETE) {\n                count_delete++;\n                text_delete = diffs[k][1] + text_delete;\n                k--;\n              }\n              previous_equality = k;\n            }\n          }\n          if (starts_with_pair_end(diffs[pointer][1])) {\n            var stray = diffs[pointer][1].charAt(0);\n            diffs[pointer][1] = diffs[pointer][1].slice(1);\n            text_delete += stray;\n            text_insert += stray;\n          }\n        }\n        if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n          // for empty equality not at end, wait for next equality\n          diffs.splice(pointer, 1);\n          break;\n        }\n        if (text_delete.length > 0 || text_insert.length > 0) {\n          // note that diff_commonPrefix and diff_commonSuffix are unicode-aware\n          if (text_delete.length > 0 && text_insert.length > 0) {\n            // Factor out any common prefixes.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (previous_equality >= 0) {\n                diffs[previous_equality][1] += text_insert.substring(\n                  0,\n                  commonlength\n                );\n              } else {\n                diffs.splice(0, 0, [\n                  DIFF_EQUAL,\n                  text_insert.substring(0, commonlength),\n                ]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixes.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] =\n                text_insert.substring(text_insert.length - commonlength) +\n                diffs[pointer][1];\n              text_insert = text_insert.substring(\n                0,\n                text_insert.length - commonlength\n              );\n              text_delete = text_delete.substring(\n                0,\n                text_delete.length - commonlength\n              );\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          var n = count_insert + count_delete;\n          if (text_delete.length === 0 && text_insert.length === 0) {\n            diffs.splice(pointer - n, n);\n            pointer = pointer - n;\n          } else if (text_delete.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 1;\n          } else if (text_insert.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete]);\n            pointer = pointer - n + 1;\n          } else {\n            diffs.splice(\n              pointer - n,\n              n,\n              [DIFF_DELETE, text_delete],\n              [DIFF_INSERT, text_insert]\n            );\n            pointer = pointer - n + 2;\n          }\n        }\n        if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = \"\";\n        text_insert = \"\";\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === \"\") {\n    diffs.pop(); // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      if (\n        diffs[pointer][1].substring(\n          diffs[pointer][1].length - diffs[pointer - 1][1].length\n        ) === diffs[pointer - 1][1]\n      ) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] =\n          diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(\n            0,\n            diffs[pointer][1].length - diffs[pointer - 1][1].length\n          );\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (\n        diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n        diffs[pointer + 1][1]\n      ) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n          diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs, fix_unicode);\n  }\n}\n\nfunction is_surrogate_pair_start(charCode) {\n  return charCode >= 0xd800 && charCode <= 0xdbff;\n}\n\nfunction is_surrogate_pair_end(charCode) {\n  return charCode >= 0xdc00 && charCode <= 0xdfff;\n}\n\nfunction starts_with_pair_end(str) {\n  return is_surrogate_pair_end(str.charCodeAt(0));\n}\n\nfunction ends_with_pair_start(str) {\n  return is_surrogate_pair_start(str.charCodeAt(str.length - 1));\n}\n\nfunction remove_empty_tuples(tuples) {\n  var ret = [];\n  for (var i = 0; i < tuples.length; i++) {\n    if (tuples[i][1].length > 0) {\n      ret.push(tuples[i]);\n    }\n  }\n  return ret;\n}\n\nfunction make_edit_splice(before, oldMiddle, newMiddle, after) {\n  if (ends_with_pair_start(before) || starts_with_pair_end(after)) {\n    return null;\n  }\n  return remove_empty_tuples([\n    [DIFF_EQUAL, before],\n    [DIFF_DELETE, oldMiddle],\n    [DIFF_INSERT, newMiddle],\n    [DIFF_EQUAL, after],\n  ]);\n}\n\nfunction find_cursor_edit_diff(oldText, newText, cursor_pos) {\n  // note: this runs after equality check has ruled out exact equality\n  var oldRange =\n    typeof cursor_pos === \"number\"\n      ? { index: cursor_pos, length: 0 }\n      : cursor_pos.oldRange;\n  var newRange = typeof cursor_pos === \"number\" ? null : cursor_pos.newRange;\n  // take into account the old and new selection to generate the best diff\n  // possible for a text edit.  for example, a text change from \"xxx\" to \"xx\"\n  // could be a delete or forwards-delete of any one of the x's, or the\n  // result of selecting two of the x's and typing \"x\".\n  var oldLength = oldText.length;\n  var newLength = newText.length;\n  if (oldRange.length === 0 && (newRange === null || newRange.length === 0)) {\n    // see if we have an insert or delete before or after cursor\n    var oldCursor = oldRange.index;\n    var oldBefore = oldText.slice(0, oldCursor);\n    var oldAfter = oldText.slice(oldCursor);\n    var maybeNewCursor = newRange ? newRange.index : null;\n    editBefore: {\n      // is this an insert or delete right before oldCursor?\n      var newCursor = oldCursor + newLength - oldLength;\n      if (maybeNewCursor !== null && maybeNewCursor !== newCursor) {\n        break editBefore;\n      }\n      if (newCursor < 0 || newCursor > newLength) {\n        break editBefore;\n      }\n      var newBefore = newText.slice(0, newCursor);\n      var newAfter = newText.slice(newCursor);\n      if (newAfter !== oldAfter) {\n        break editBefore;\n      }\n      var prefixLength = Math.min(oldCursor, newCursor);\n      var oldPrefix = oldBefore.slice(0, prefixLength);\n      var newPrefix = newBefore.slice(0, prefixLength);\n      if (oldPrefix !== newPrefix) {\n        break editBefore;\n      }\n      var oldMiddle = oldBefore.slice(prefixLength);\n      var newMiddle = newBefore.slice(prefixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldAfter);\n    }\n    editAfter: {\n      // is this an insert or delete right after oldCursor?\n      if (maybeNewCursor !== null && maybeNewCursor !== oldCursor) {\n        break editAfter;\n      }\n      var cursor = oldCursor;\n      var newBefore = newText.slice(0, cursor);\n      var newAfter = newText.slice(cursor);\n      if (newBefore !== oldBefore) {\n        break editAfter;\n      }\n      var suffixLength = Math.min(oldLength - cursor, newLength - cursor);\n      var oldSuffix = oldAfter.slice(oldAfter.length - suffixLength);\n      var newSuffix = newAfter.slice(newAfter.length - suffixLength);\n      if (oldSuffix !== newSuffix) {\n        break editAfter;\n      }\n      var oldMiddle = oldAfter.slice(0, oldAfter.length - suffixLength);\n      var newMiddle = newAfter.slice(0, newAfter.length - suffixLength);\n      return make_edit_splice(oldBefore, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n  if (oldRange.length > 0 && newRange && newRange.length === 0) {\n    replaceRange: {\n      // see if diff could be a splice of the old selection range\n      var oldPrefix = oldText.slice(0, oldRange.index);\n      var oldSuffix = oldText.slice(oldRange.index + oldRange.length);\n      var prefixLength = oldPrefix.length;\n      var suffixLength = oldSuffix.length;\n      if (newLength < prefixLength + suffixLength) {\n        break replaceRange;\n      }\n      var newPrefix = newText.slice(0, prefixLength);\n      var newSuffix = newText.slice(newLength - suffixLength);\n      if (oldPrefix !== newPrefix || oldSuffix !== newSuffix) {\n        break replaceRange;\n      }\n      var oldMiddle = oldText.slice(prefixLength, oldLength - suffixLength);\n      var newMiddle = newText.slice(prefixLength, newLength - suffixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n\n  return null;\n}\n\nfunction diff(text1, text2, cursor_pos, cleanup) {\n  // only pass fix_unicode=true at the top level, not when diff_main is\n  // recursively invoked\n  return diff_main(text1, text2, cursor_pos, cleanup, true);\n}\n\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n", "/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cloneDeep = require(\"lodash.clonedeep\");\nconst isEqual = require(\"lodash.isequal\");\nvar AttributeMap;\n(function (AttributeMap) {\n    function compose(a = {}, b = {}, keepNull = false) {\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        let attributes = cloneDeep(b);\n        if (!keepNull) {\n            attributes = Object.keys(attributes).reduce((copy, key) => {\n                if (attributes[key] != null) {\n                    copy[key] = attributes[key];\n                }\n                return copy;\n            }, {});\n        }\n        for (const key in a) {\n            if (a[key] !== undefined && b[key] === undefined) {\n                attributes[key] = a[key];\n            }\n        }\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.compose = compose;\n    function diff(a = {}, b = {}) {\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        const attributes = Object.keys(a)\n            .concat(Object.keys(b))\n            .reduce((attrs, key) => {\n            if (!isEqual(a[key], b[key])) {\n                attrs[key] = b[key] === undefined ? null : b[key];\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.diff = diff;\n    function invert(attr = {}, base = {}) {\n        attr = attr || {};\n        const baseInverted = Object.keys(base).reduce((memo, key) => {\n            if (base[key] !== attr[key] && attr[key] !== undefined) {\n                memo[key] = base[key];\n            }\n            return memo;\n        }, {});\n        return Object.keys(attr).reduce((memo, key) => {\n            if (attr[key] !== base[key] && base[key] === undefined) {\n                memo[key] = null;\n            }\n            return memo;\n        }, baseInverted);\n    }\n    AttributeMap.invert = invert;\n    function transform(a, b, priority = false) {\n        if (typeof a !== 'object') {\n            return b;\n        }\n        if (typeof b !== 'object') {\n            return undefined;\n        }\n        if (!priority) {\n            return b; // b simply overwrites us without priority\n        }\n        const attributes = Object.keys(b).reduce((attrs, key) => {\n            if (a[key] === undefined) {\n                attrs[key] = b[key]; // null is a valid value\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.transform = transform;\n})(AttributeMap || (AttributeMap = {}));\nexports.default = AttributeMap;\n//# sourceMappingURL=AttributeMap.js.map", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Op;\n(function (Op) {\n    function length(op) {\n        if (typeof op.delete === 'number') {\n            return op.delete;\n        }\n        else if (typeof op.retain === 'number') {\n            return op.retain;\n        }\n        else if (typeof op.retain === 'object' && op.retain !== null) {\n            return 1;\n        }\n        else {\n            return typeof op.insert === 'string' ? op.insert.length : 1;\n        }\n    }\n    Op.length = length;\n})(Op || (Op = {}));\nexports.default = Op;\n//# sourceMappingURL=Op.js.map", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Op_1 = require(\"./Op\");\nclass Iterator {\n    constructor(ops) {\n        this.ops = ops;\n        this.index = 0;\n        this.offset = 0;\n    }\n    hasNext() {\n        return this.peekLength() < Infinity;\n    }\n    next(length) {\n        if (!length) {\n            length = Infinity;\n        }\n        const nextOp = this.ops[this.index];\n        if (nextOp) {\n            const offset = this.offset;\n            const opLength = Op_1.default.length(nextOp);\n            if (length >= opLength - offset) {\n                length = opLength - offset;\n                this.index += 1;\n                this.offset = 0;\n            }\n            else {\n                this.offset += length;\n            }\n            if (typeof nextOp.delete === 'number') {\n                return { delete: length };\n            }\n            else {\n                const retOp = {};\n                if (nextOp.attributes) {\n                    retOp.attributes = nextOp.attributes;\n                }\n                if (typeof nextOp.retain === 'number') {\n                    retOp.retain = length;\n                }\n                else if (typeof nextOp.retain === 'object' &&\n                    nextOp.retain !== null) {\n                    // offset should === 0, length should === 1\n                    retOp.retain = nextOp.retain;\n                }\n                else if (typeof nextOp.insert === 'string') {\n                    retOp.insert = nextOp.insert.substr(offset, length);\n                }\n                else {\n                    // offset should === 0, length should === 1\n                    retOp.insert = nextOp.insert;\n                }\n                return retOp;\n            }\n        }\n        else {\n            return { retain: Infinity };\n        }\n    }\n    peek() {\n        return this.ops[this.index];\n    }\n    peekLength() {\n        if (this.ops[this.index]) {\n            // Should never return 0 if our index is being managed correctly\n            return Op_1.default.length(this.ops[this.index]) - this.offset;\n        }\n        else {\n            return Infinity;\n        }\n    }\n    peekType() {\n        const op = this.ops[this.index];\n        if (op) {\n            if (typeof op.delete === 'number') {\n                return 'delete';\n            }\n            else if (typeof op.retain === 'number' ||\n                (typeof op.retain === 'object' && op.retain !== null)) {\n                return 'retain';\n            }\n            else {\n                return 'insert';\n            }\n        }\n        return 'retain';\n    }\n    rest() {\n        if (!this.hasNext()) {\n            return [];\n        }\n        else if (this.offset === 0) {\n            return this.ops.slice(this.index);\n        }\n        else {\n            const offset = this.offset;\n            const index = this.index;\n            const next = this.next();\n            const rest = this.ops.slice(this.index);\n            this.offset = offset;\n            this.index = index;\n            return [next].concat(rest);\n        }\n    }\n}\nexports.default = Iterator;\n//# sourceMappingURL=OpIterator.js.map", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AttributeMap = exports.OpIterator = exports.Op = void 0;\nconst diff = require(\"fast-diff\");\nconst cloneDeep = require(\"lodash.clonedeep\");\nconst isEqual = require(\"lodash.isequal\");\nconst AttributeMap_1 = require(\"./AttributeMap\");\nexports.AttributeMap = AttributeMap_1.default;\nconst Op_1 = require(\"./Op\");\nexports.Op = Op_1.default;\nconst OpIterator_1 = require(\"./OpIterator\");\nexports.OpIterator = OpIterator_1.default;\nconst NULL_CHARACTER = String.fromCharCode(0); // Placeholder char for embed in diff()\nconst getEmbedTypeAndData = (a, b) => {\n    if (typeof a !== 'object' || a === null) {\n        throw new Error(`cannot retain a ${typeof a}`);\n    }\n    if (typeof b !== 'object' || b === null) {\n        throw new Error(`cannot retain a ${typeof b}`);\n    }\n    const embedType = Object.keys(a)[0];\n    if (!embedType || embedType !== Object.keys(b)[0]) {\n        throw new Error(`embed types not matched: ${embedType} != ${Object.keys(b)[0]}`);\n    }\n    return [embedType, a[embedType], b[embedType]];\n};\nclass Delta {\n    constructor(ops) {\n        // Assume we are given a well formed ops\n        if (Array.isArray(ops)) {\n            this.ops = ops;\n        }\n        else if (ops != null && Array.isArray(ops.ops)) {\n            this.ops = ops.ops;\n        }\n        else {\n            this.ops = [];\n        }\n    }\n    static registerEmbed(embedType, handler) {\n        this.handlers[embedType] = handler;\n    }\n    static unregisterEmbed(embedType) {\n        delete this.handlers[embedType];\n    }\n    static getHandler(embedType) {\n        const handler = this.handlers[embedType];\n        if (!handler) {\n            throw new Error(`no handlers for embed type \"${embedType}\"`);\n        }\n        return handler;\n    }\n    insert(arg, attributes) {\n        const newOp = {};\n        if (typeof arg === 'string' && arg.length === 0) {\n            return this;\n        }\n        newOp.insert = arg;\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    }\n    delete(length) {\n        if (length <= 0) {\n            return this;\n        }\n        return this.push({ delete: length });\n    }\n    retain(length, attributes) {\n        if (typeof length === 'number' && length <= 0) {\n            return this;\n        }\n        const newOp = { retain: length };\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    }\n    push(newOp) {\n        let index = this.ops.length;\n        let lastOp = this.ops[index - 1];\n        newOp = cloneDeep(newOp);\n        if (typeof lastOp === 'object') {\n            if (typeof newOp.delete === 'number' &&\n                typeof lastOp.delete === 'number') {\n                this.ops[index - 1] = { delete: lastOp.delete + newOp.delete };\n                return this;\n            }\n            // Since it does not matter if we insert before or after deleting at the same index,\n            // always prefer to insert first\n            if (typeof lastOp.delete === 'number' && newOp.insert != null) {\n                index -= 1;\n                lastOp = this.ops[index - 1];\n                if (typeof lastOp !== 'object') {\n                    this.ops.unshift(newOp);\n                    return this;\n                }\n            }\n            if (isEqual(newOp.attributes, lastOp.attributes)) {\n                if (typeof newOp.insert === 'string' &&\n                    typeof lastOp.insert === 'string') {\n                    this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n                else if (typeof newOp.retain === 'number' &&\n                    typeof lastOp.retain === 'number') {\n                    this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n            }\n        }\n        if (index === this.ops.length) {\n            this.ops.push(newOp);\n        }\n        else {\n            this.ops.splice(index, 0, newOp);\n        }\n        return this;\n    }\n    chop() {\n        const lastOp = this.ops[this.ops.length - 1];\n        if (lastOp && typeof lastOp.retain === 'number' && !lastOp.attributes) {\n            this.ops.pop();\n        }\n        return this;\n    }\n    filter(predicate) {\n        return this.ops.filter(predicate);\n    }\n    forEach(predicate) {\n        this.ops.forEach(predicate);\n    }\n    map(predicate) {\n        return this.ops.map(predicate);\n    }\n    partition(predicate) {\n        const passed = [];\n        const failed = [];\n        this.forEach((op) => {\n            const target = predicate(op) ? passed : failed;\n            target.push(op);\n        });\n        return [passed, failed];\n    }\n    reduce(predicate, initialValue) {\n        return this.ops.reduce(predicate, initialValue);\n    }\n    changeLength() {\n        return this.reduce((length, elem) => {\n            if (elem.insert) {\n                return length + Op_1.default.length(elem);\n            }\n            else if (elem.delete) {\n                return length - elem.delete;\n            }\n            return length;\n        }, 0);\n    }\n    length() {\n        return this.reduce((length, elem) => {\n            return length + Op_1.default.length(elem);\n        }, 0);\n    }\n    slice(start = 0, end = Infinity) {\n        const ops = [];\n        const iter = new OpIterator_1.default(this.ops);\n        let index = 0;\n        while (index < end && iter.hasNext()) {\n            let nextOp;\n            if (index < start) {\n                nextOp = iter.next(start - index);\n            }\n            else {\n                nextOp = iter.next(end - index);\n                ops.push(nextOp);\n            }\n            index += Op_1.default.length(nextOp);\n        }\n        return new Delta(ops);\n    }\n    compose(other) {\n        const thisIter = new OpIterator_1.default(this.ops);\n        const otherIter = new OpIterator_1.default(other.ops);\n        const ops = [];\n        const firstOther = otherIter.peek();\n        if (firstOther != null &&\n            typeof firstOther.retain === 'number' &&\n            firstOther.attributes == null) {\n            let firstLeft = firstOther.retain;\n            while (thisIter.peekType() === 'insert' &&\n                thisIter.peekLength() <= firstLeft) {\n                firstLeft -= thisIter.peekLength();\n                ops.push(thisIter.next());\n            }\n            if (firstOther.retain - firstLeft > 0) {\n                otherIter.next(firstOther.retain - firstLeft);\n            }\n        }\n        const delta = new Delta(ops);\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else if (thisIter.peekType() === 'delete') {\n                delta.push(thisIter.next());\n            }\n            else {\n                const length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                const thisOp = thisIter.next(length);\n                const otherOp = otherIter.next(length);\n                if (otherOp.retain) {\n                    const newOp = {};\n                    if (typeof thisOp.retain === 'number') {\n                        newOp.retain =\n                            typeof otherOp.retain === 'number' ? length : otherOp.retain;\n                    }\n                    else {\n                        if (typeof otherOp.retain === 'number') {\n                            if (thisOp.retain == null) {\n                                newOp.insert = thisOp.insert;\n                            }\n                            else {\n                                newOp.retain = thisOp.retain;\n                            }\n                        }\n                        else {\n                            const action = thisOp.retain == null ? 'insert' : 'retain';\n                            const [embedType, thisData, otherData] = getEmbedTypeAndData(thisOp[action], otherOp.retain);\n                            const handler = Delta.getHandler(embedType);\n                            newOp[action] = {\n                                [embedType]: handler.compose(thisData, otherData, action === 'retain'),\n                            };\n                        }\n                    }\n                    // Preserve null when composing with a retain, otherwise remove it for inserts\n                    const attributes = AttributeMap_1.default.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n                    if (attributes) {\n                        newOp.attributes = attributes;\n                    }\n                    delta.push(newOp);\n                    // Optimization if rest of other is just retain\n                    if (!otherIter.hasNext() &&\n                        isEqual(delta.ops[delta.ops.length - 1], newOp)) {\n                        const rest = new Delta(thisIter.rest());\n                        return delta.concat(rest).chop();\n                    }\n                    // Other op should be delete, we could be an insert or retain\n                    // Insert + delete cancels out\n                }\n                else if (typeof otherOp.delete === 'number' &&\n                    (typeof thisOp.retain === 'number' ||\n                        (typeof thisOp.retain === 'object' && thisOp.retain !== null))) {\n                    delta.push(otherOp);\n                }\n            }\n        }\n        return delta.chop();\n    }\n    concat(other) {\n        const delta = new Delta(this.ops.slice());\n        if (other.ops.length > 0) {\n            delta.push(other.ops[0]);\n            delta.ops = delta.ops.concat(other.ops.slice(1));\n        }\n        return delta;\n    }\n    diff(other, cursor) {\n        if (this.ops === other.ops) {\n            return new Delta();\n        }\n        const strings = [this, other].map((delta) => {\n            return delta\n                .map((op) => {\n                if (op.insert != null) {\n                    return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n                }\n                const prep = delta === other ? 'on' : 'with';\n                throw new Error('diff() called ' + prep + ' non-document');\n            })\n                .join('');\n        });\n        const retDelta = new Delta();\n        const diffResult = diff(strings[0], strings[1], cursor, true);\n        const thisIter = new OpIterator_1.default(this.ops);\n        const otherIter = new OpIterator_1.default(other.ops);\n        diffResult.forEach((component) => {\n            let length = component[1].length;\n            while (length > 0) {\n                let opLength = 0;\n                switch (component[0]) {\n                    case diff.INSERT:\n                        opLength = Math.min(otherIter.peekLength(), length);\n                        retDelta.push(otherIter.next(opLength));\n                        break;\n                    case diff.DELETE:\n                        opLength = Math.min(length, thisIter.peekLength());\n                        thisIter.next(opLength);\n                        retDelta.delete(opLength);\n                        break;\n                    case diff.EQUAL:\n                        opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n                        const thisOp = thisIter.next(opLength);\n                        const otherOp = otherIter.next(opLength);\n                        if (isEqual(thisOp.insert, otherOp.insert)) {\n                            retDelta.retain(opLength, AttributeMap_1.default.diff(thisOp.attributes, otherOp.attributes));\n                        }\n                        else {\n                            retDelta.push(otherOp).delete(opLength);\n                        }\n                        break;\n                }\n                length -= opLength;\n            }\n        });\n        return retDelta.chop();\n    }\n    eachLine(predicate, newline = '\\n') {\n        const iter = new OpIterator_1.default(this.ops);\n        let line = new Delta();\n        let i = 0;\n        while (iter.hasNext()) {\n            if (iter.peekType() !== 'insert') {\n                return;\n            }\n            const thisOp = iter.peek();\n            const start = Op_1.default.length(thisOp) - iter.peekLength();\n            const index = typeof thisOp.insert === 'string'\n                ? thisOp.insert.indexOf(newline, start) - start\n                : -1;\n            if (index < 0) {\n                line.push(iter.next());\n            }\n            else if (index > 0) {\n                line.push(iter.next(index));\n            }\n            else {\n                if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n                    return;\n                }\n                i += 1;\n                line = new Delta();\n            }\n        }\n        if (line.length() > 0) {\n            predicate(line, {}, i);\n        }\n    }\n    invert(base) {\n        const inverted = new Delta();\n        this.reduce((baseIndex, op) => {\n            if (op.insert) {\n                inverted.delete(Op_1.default.length(op));\n            }\n            else if (typeof op.retain === 'number' && op.attributes == null) {\n                inverted.retain(op.retain);\n                return baseIndex + op.retain;\n            }\n            else if (op.delete || typeof op.retain === 'number') {\n                const length = (op.delete || op.retain);\n                const slice = base.slice(baseIndex, baseIndex + length);\n                slice.forEach((baseOp) => {\n                    if (op.delete) {\n                        inverted.push(baseOp);\n                    }\n                    else if (op.retain && op.attributes) {\n                        inverted.retain(Op_1.default.length(baseOp), AttributeMap_1.default.invert(op.attributes, baseOp.attributes));\n                    }\n                });\n                return baseIndex + length;\n            }\n            else if (typeof op.retain === 'object' && op.retain !== null) {\n                const slice = base.slice(baseIndex, baseIndex + 1);\n                const baseOp = new OpIterator_1.default(slice.ops).next();\n                const [embedType, opData, baseOpData] = getEmbedTypeAndData(op.retain, baseOp.insert);\n                const handler = Delta.getHandler(embedType);\n                inverted.retain({ [embedType]: handler.invert(opData, baseOpData) }, AttributeMap_1.default.invert(op.attributes, baseOp.attributes));\n                return baseIndex + 1;\n            }\n            return baseIndex;\n        }, 0);\n        return inverted.chop();\n    }\n    transform(arg, priority = false) {\n        priority = !!priority;\n        if (typeof arg === 'number') {\n            return this.transformPosition(arg, priority);\n        }\n        const other = arg;\n        const thisIter = new OpIterator_1.default(this.ops);\n        const otherIter = new OpIterator_1.default(other.ops);\n        const delta = new Delta();\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (thisIter.peekType() === 'insert' &&\n                (priority || otherIter.peekType() !== 'insert')) {\n                delta.retain(Op_1.default.length(thisIter.next()));\n            }\n            else if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else {\n                const length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                const thisOp = thisIter.next(length);\n                const otherOp = otherIter.next(length);\n                if (thisOp.delete) {\n                    // Our delete either makes their delete redundant or removes their retain\n                    continue;\n                }\n                else if (otherOp.delete) {\n                    delta.push(otherOp);\n                }\n                else {\n                    const thisData = thisOp.retain;\n                    const otherData = otherOp.retain;\n                    let transformedData = typeof otherData === 'object' && otherData !== null\n                        ? otherData\n                        : length;\n                    if (typeof thisData === 'object' &&\n                        thisData !== null &&\n                        typeof otherData === 'object' &&\n                        otherData !== null) {\n                        const embedType = Object.keys(thisData)[0];\n                        if (embedType === Object.keys(otherData)[0]) {\n                            const handler = Delta.getHandler(embedType);\n                            if (handler) {\n                                transformedData = {\n                                    [embedType]: handler.transform(thisData[embedType], otherData[embedType], priority),\n                                };\n                            }\n                        }\n                    }\n                    // We retain either their retain or insert\n                    delta.retain(transformedData, AttributeMap_1.default.transform(thisOp.attributes, otherOp.attributes, priority));\n                }\n            }\n        }\n        return delta.chop();\n    }\n    transformPosition(index, priority = false) {\n        priority = !!priority;\n        const thisIter = new OpIterator_1.default(this.ops);\n        let offset = 0;\n        while (thisIter.hasNext() && offset <= index) {\n            const length = thisIter.peekLength();\n            const nextType = thisIter.peekType();\n            thisIter.next();\n            if (nextType === 'delete') {\n                index -= Math.min(length, index - offset);\n                continue;\n            }\n            else if (nextType === 'insert' && (offset < index || !priority)) {\n                index += length;\n            }\n            offset += length;\n        }\n        return index;\n    }\n}\nDelta.Op = Op_1.default;\nDelta.OpIterator = OpIterator_1.default;\nDelta.AttributeMap = AttributeMap_1.default;\nDelta.handlers = {};\nexports.default = Delta;\nif (typeof module === 'object') {\n    module.exports = Delta;\n    module.exports.default = Delta;\n}\n//# sourceMappingURL=Delta.js.map", "import { EmbedBlot } from 'parchment';\nclass Break extends EmbedBlot {\n  static value() {\n    return undefined;\n  }\n  optimize() {\n    if (this.prev || this.next) {\n      this.remove();\n    }\n  }\n  length() {\n    return 0;\n  }\n  value() {\n    return '';\n  }\n}\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\nexport default Break;\n//# sourceMappingURL=break.js.map", "import { TextBlot } from 'parchment';\nclass Text extends TextBlot {}\nfunction escapeText(text) {\n  return text.replace(/[&<>\"']/g, s => {\n    // https://lodash.com/docs#escape\n    const entityMap = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;'\n    };\n    return entityMap[s];\n  });\n}\nexport { Text as default, escapeText };\n//# sourceMappingURL=text.js.map", "import { EmbedBlot, InlineBlot, Scope } from 'parchment';\nimport Break from './break.js';\nimport Text from './text.js';\nclass Inline extends InlineBlot {\n  static allowedChildren = [Inline, Break, EmbedBlot, Text];\n  // Lower index means deeper in the DOM tree, since not found (-1) is for embeds\n  static order = ['cursor', 'inline',\n  // Must be lower\n  'link',\n  // Chrome wants <a> to be lower\n  'underline', 'strike', 'italic', 'bold', 'script', 'code' // Must be higher\n  ];\n  static compare(self, other) {\n    const selfIndex = Inline.order.indexOf(self);\n    const otherIndex = Inline.order.indexOf(other);\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    }\n    if (self === other) {\n      return 0;\n    }\n    if (self < other) {\n      return -1;\n    }\n    return 1;\n  }\n  formatAt(index, length, name, value) {\n    if (Inline.compare(this.statics.blotName, name) < 0 && this.scroll.query(name, Scope.BLOT)) {\n      const blot = this.isolate(index, length);\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n  optimize(context) {\n    super.optimize(context);\n    if (this.parent instanceof Inline && Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {\n      const parent = this.parent.isolate(this.offset(), this.length());\n      // @ts-expect-error TODO: make isolate generic\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n}\nexport default Inline;\n//# sourceMappingURL=inline.js.map", "import { AttributorStore, BlockBlot, EmbedBlot, LeafBlot, Scope } from 'parchment';\nimport Delta from 'quill-delta';\nimport Break from './break.js';\nimport Inline from './inline.js';\nimport TextBlot from './text.js';\nconst NEWLINE_LENGTH = 1;\nclass Block extends BlockBlot {\n  cache = {};\n  delta() {\n    if (this.cache.delta == null) {\n      this.cache.delta = blockDelta(this);\n    }\n    return this.cache.delta;\n  }\n  deleteAt(index, length) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n  formatAt(index, length, name, value) {\n    if (length <= 0) return;\n    if (this.scroll.query(name, Scope.BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(index, Math.min(length, this.length() - index - 1), name, value);\n    }\n    this.cache = {};\n  }\n  insertAt(index, value, def) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      this.cache = {};\n      return;\n    }\n    if (value.length === 0) return;\n    const lines = value.split('\\n');\n    const text = lines.shift();\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n      this.cache = {};\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let block = this;\n    lines.reduce((lineIndex, line) => {\n      // @ts-expect-error Fix me later\n      block = block.split(lineIndex, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n  insertBefore(blot, ref) {\n    const {\n      head\n    } = this.children;\n    super.insertBefore(blot, ref);\n    if (head instanceof Break) {\n      head.remove();\n    }\n    this.cache = {};\n  }\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n    return this.cache.length;\n  }\n  moveChildren(target, ref) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n  optimize(context) {\n    super.optimize(context);\n    this.cache = {};\n  }\n  path(index) {\n    return super.path(index, true);\n  }\n  removeChild(child) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n  split(index) {\n    let force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      const clone = this.clone();\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      }\n      this.parent.insertBefore(clone, this.next);\n      return clone;\n    }\n    const next = super.split(index, force);\n    this.cache = {};\n    return next;\n  }\n}\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = Break;\nBlock.allowedChildren = [Break, Inline, EmbedBlot, TextBlot];\nclass BlockEmbed extends EmbedBlot {\n  attach() {\n    super.attach();\n    this.attributes = new AttributorStore(this.domNode);\n  }\n  delta() {\n    return new Delta().insert(this.value(), {\n      ...this.formats(),\n      ...this.attributes.values()\n    });\n  }\n  format(name, value) {\n    const attribute = this.scroll.query(name, Scope.BLOCK_ATTRIBUTE);\n    if (attribute != null) {\n      // @ts-expect-error TODO: Scroll#query() should return Attributor when scope is attribute\n      this.attributes.attribute(attribute, value);\n    }\n  }\n  formatAt(index, length, name, value) {\n    this.format(name, value);\n  }\n  insertAt(index, value, def) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      return;\n    }\n    const lines = value.split('\\n');\n    const text = lines.pop();\n    const blocks = lines.map(line => {\n      const block = this.scroll.create(Block.blotName);\n      block.insertAt(0, line);\n      return block;\n    });\n    const ref = this.split(index);\n    blocks.forEach(block => {\n      this.parent.insertBefore(block, ref);\n    });\n    if (text) {\n      this.parent.insertBefore(this.scroll.create('text', text), ref);\n    }\n  }\n}\nBlockEmbed.scope = Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\nfunction blockDelta(blot) {\n  let filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return blot.descendants(LeafBlot).reduce((delta, leaf) => {\n    if (leaf.length() === 0) {\n      return delta;\n    }\n    return delta.insert(leaf.value(), bubbleFormats(leaf, {}, filter));\n  }, new Delta()).insert('\\n', bubbleFormats(blot));\n}\nfunction bubbleFormats(blot) {\n  let formats = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let filter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  if (blot == null) return formats;\n  if ('formats' in blot && typeof blot.formats === 'function') {\n    formats = {\n      ...formats,\n      ...blot.formats()\n    };\n    if (filter) {\n      // exclude syntax highlighting from deltas and getFormat()\n      delete formats['code-token'];\n    }\n  }\n  if (blot.parent == null || blot.parent.statics.blotName === 'scroll' || blot.parent.statics.scope !== blot.statics.scope) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats, filter);\n}\nexport { blockDelta, bubbleFormats, BlockEmbed, Block as default };\n//# sourceMappingURL=block.js.map", "import { EmbedBlot, Scope } from 'parchment';\nimport TextBlot from './text.js';\nclass Cursor extends EmbedBlot {\n  static blotName = 'cursor';\n  static className = 'ql-cursor';\n  static tagName = 'span';\n  static CONTENTS = '\\uFEFF'; // Zero width no break space\n\n  static value() {\n    return undefined;\n  }\n  constructor(scroll, domNode, selection) {\n    super(scroll, domNode);\n    this.selection = selection;\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\n    this.domNode.appendChild(this.textNode);\n    this.savedLength = 0;\n  }\n  detach() {\n    // super.detach() will also clear domNode.__blot\n    if (this.parent != null) this.parent.removeChild(this);\n  }\n  format(name, value) {\n    if (this.savedLength !== 0) {\n      super.format(name, value);\n      return;\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let target = this;\n    let index = 0;\n    while (target != null && target.statics.scope !== Scope.BLOCK_BLOT) {\n      index += target.offset(target.parent);\n      target = target.parent;\n    }\n    if (target != null) {\n      this.savedLength = Cursor.CONTENTS.length;\n      // @ts-expect-error TODO: allow empty context in Parchment\n      target.optimize();\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\n      this.savedLength = 0;\n    }\n  }\n  index(node, offset) {\n    if (node === this.textNode) return 0;\n    return super.index(node, offset);\n  }\n  length() {\n    return this.savedLength;\n  }\n  position() {\n    return [this.textNode, this.textNode.data.length];\n  }\n  remove() {\n    super.remove();\n    // @ts-expect-error Fix me later\n    this.parent = null;\n  }\n  restore() {\n    if (this.selection.composing || this.parent == null) return null;\n    const range = this.selection.getNativeRange();\n    // Browser may push down styles/nodes inside the cursor blot.\n    // https://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#push-down-values\n    while (this.domNode.lastChild != null && this.domNode.lastChild !== this.textNode) {\n      // @ts-expect-error Fix me later\n      this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode);\n    }\n    const prevTextBlot = this.prev instanceof TextBlot ? this.prev : null;\n    const prevTextLength = prevTextBlot ? prevTextBlot.length() : 0;\n    const nextTextBlot = this.next instanceof TextBlot ? this.next : null;\n    // @ts-expect-error TODO: make TextBlot.text public\n    const nextText = nextTextBlot ? nextTextBlot.text : '';\n    const {\n      textNode\n    } = this;\n    // take text from inside this blot and reset it\n    const newText = textNode.data.split(Cursor.CONTENTS).join('');\n    textNode.data = Cursor.CONTENTS;\n\n    // proactively merge TextBlots around cursor so that optimization\n    // doesn't lose the cursor.  the reason we are here in cursor.restore\n    // could be that the user clicked in prevTextBlot or nextTextBlot, or\n    // the user typed something.\n    let mergedTextBlot;\n    if (prevTextBlot) {\n      mergedTextBlot = prevTextBlot;\n      if (newText || nextTextBlot) {\n        prevTextBlot.insertAt(prevTextBlot.length(), newText + nextText);\n        if (nextTextBlot) {\n          nextTextBlot.remove();\n        }\n      }\n    } else if (nextTextBlot) {\n      mergedTextBlot = nextTextBlot;\n      nextTextBlot.insertAt(0, newText);\n    } else {\n      const newTextNode = document.createTextNode(newText);\n      mergedTextBlot = this.scroll.create(newTextNode);\n      this.parent.insertBefore(mergedTextBlot, this);\n    }\n    this.remove();\n    if (range) {\n      // calculate selection to restore\n      const remapOffset = (node, offset) => {\n        if (prevTextBlot && node === prevTextBlot.domNode) {\n          return offset;\n        }\n        if (node === textNode) {\n          return prevTextLength + offset - 1;\n        }\n        if (nextTextBlot && node === nextTextBlot.domNode) {\n          return prevTextLength + newText.length + offset;\n        }\n        return null;\n      };\n      const start = remapOffset(range.start.node, range.start.offset);\n      const end = remapOffset(range.end.node, range.end.offset);\n      if (start !== null && end !== null) {\n        return {\n          startNode: mergedTextBlot.domNode,\n          startOffset: start,\n          endNode: mergedTextBlot.domNode,\n          endOffset: end\n        };\n      }\n    }\n    return null;\n  }\n  update(mutations, context) {\n    if (mutations.some(mutation => {\n      return mutation.type === 'characterData' && mutation.target === this.textNode;\n    })) {\n      const range = this.restore();\n      if (range) context.range = range;\n    }\n  }\n\n  // Avoid .ql-cursor being a descendant of `<a/>`.\n  // The reason is Safari pushes down `<a/>` on text insertion.\n  // That will cause DOM nodes not sync with the model.\n  //\n  // For example ({I} is the caret), given the markup:\n  //    <a><span class=\"ql-cursor\">\\uFEFF{I}</span></a>\n  // When typing a char \"x\", `<a/>` will be pushed down inside the `<span>` first:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF{I}</a></span>\n  // And then \"x\" will be inserted after `<a/>`:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF</a>d{I}</span>\n  optimize(context) {\n    // @ts-expect-error Fix me later\n    super.optimize(context);\n    let {\n      parent\n    } = this;\n    while (parent) {\n      if (parent.domNode.tagName === 'A') {\n        this.savedLength = Cursor.CONTENTS.length;\n        // @ts-expect-error TODO: make isolate generic\n        parent.isolate(this.offset(parent), this.length()).unwrap();\n        this.savedLength = 0;\n        break;\n      }\n      parent = parent.parent;\n    }\n  }\n  value() {\n    return '';\n  }\n}\nexport default Cursor;\n//# sourceMappingURL=cursor.js.map", "'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n", "export default new WeakMap();\n//# sourceMappingURL=instances.js.map", "const levels = ['error', 'warn', 'log', 'info'];\nlet level = 'warn';\nfunction debug(method) {\n  if (level) {\n    if (levels.indexOf(method) <= levels.indexOf(level)) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      console[method](...args); // eslint-disable-line no-console\n    }\n  }\n}\nfunction namespace(ns) {\n  return levels.reduce((logger, method) => {\n    logger[method] = debug.bind(console, method, ns);\n    return logger;\n  }, {});\n}\nnamespace.level = newLevel => {\n  level = newLevel;\n};\ndebug.level = namespace.level;\nexport default namespace;\n//# sourceMappingURL=logger.js.map", "import { EventEmitter } from 'eventemitter3';\nimport instances from './instances.js';\nimport logger from './logger.js';\nconst debug = logger('quill:events');\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\nEVENTS.forEach(eventName => {\n  document.addEventListener(eventName, function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    Array.from(document.querySelectorAll('.ql-container')).forEach(node => {\n      const quill = instances.get(node);\n      if (quill && quill.emitter) {\n        quill.emitter.handleDOM(...args);\n      }\n    });\n  });\n});\nclass Emitter extends EventEmitter {\n  static events = {\n    EDITOR_CHANGE: 'editor-change',\n    SCROLL_BEFORE_UPDATE: 'scroll-before-update',\n    SCROLL_BLOT_MOUNT: 'scroll-blot-mount',\n    SCROLL_BLOT_UNMOUNT: 'scroll-blot-unmount',\n    SCROLL_OPTIMIZE: 'scroll-optimize',\n    SCROLL_UPDATE: 'scroll-update',\n    SCROLL_EMBED_UPDATE: 'scroll-embed-update',\n    SELECTION_CHANGE: 'selection-change',\n    TEXT_CHANGE: 'text-change',\n    COMPOSITION_BEFORE_START: 'composition-before-start',\n    COMPOSITION_START: 'composition-start',\n    COMPOSITION_BEFORE_END: 'composition-before-end',\n    COMPOSITION_END: 'composition-end'\n  };\n  static sources = {\n    API: 'api',\n    SILENT: 'silent',\n    USER: 'user'\n  };\n  constructor() {\n    super();\n    this.domListeners = {};\n    this.on('error', debug.error);\n  }\n  emit() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    debug.log.call(debug, ...args);\n    // @ts-expect-error\n    return super.emit(...args);\n  }\n  handleDOM(event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    (this.domListeners[event.type] || []).forEach(_ref => {\n      let {\n        node,\n        handler\n      } = _ref;\n      if (event.target === node || node.contains(event.target)) {\n        handler(event, ...args);\n      }\n    });\n  }\n  listenDOM(eventName, node, handler) {\n    if (!this.domListeners[eventName]) {\n      this.domListeners[eventName] = [];\n    }\n    this.domListeners[eventName].push({\n      node,\n      handler\n    });\n  }\n}\nexport default Emitter;\n//# sourceMappingURL=emitter.js.map", "import { LeafBlot, Scope } from 'parchment';\nimport { cloneDeep, isEqual } from 'lodash-es';\nimport Emitter from './emitter.js';\nimport logger from './logger.js';\nconst debug = logger('quill:selection');\nexport class Range {\n  constructor(index) {\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this.index = index;\n    this.length = length;\n  }\n}\nclass Selection {\n  constructor(scroll, emitter) {\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    // @ts-expect-error\n    this.cursor = this.scroll.create('cursor', this);\n    // savedRange is last non-null range\n    this.savedRange = new Range(0, 0);\n    this.lastRange = this.savedRange;\n    this.lastNative = null;\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, () => {\n      if (!this.mouseDown && !this.composing) {\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\n      if (!this.hasFocus()) return;\n      const native = this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === this.cursor.textNode) return; // cursor.restore() will handle\n      this.emitter.once(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n        try {\n          if (this.root.contains(native.start.node) && this.root.contains(native.end.node)) {\n            this.setNativeRange(native.start.node, native.start.offset, native.end.node, native.end.offset);\n          }\n          const triggeredByTyping = mutations.some(mutation => mutation.type === 'characterData' || mutation.type === 'childList' || mutation.type === 'attributes' && mutation.target === this.root);\n          this.update(triggeredByTyping ? Emitter.sources.SILENT : source);\n        } catch (ignored) {\n          // ignore\n        }\n      });\n    });\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\n      if (context.range) {\n        const {\n          startNode,\n          startOffset,\n          endNode,\n          endOffset\n        } = context.range;\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\n        this.update(Emitter.sources.SILENT);\n      }\n    });\n    this.update(Emitter.sources.SILENT);\n  }\n  handleComposition() {\n    this.emitter.on(Emitter.events.COMPOSITION_BEFORE_START, () => {\n      this.composing = true;\n    });\n    this.emitter.on(Emitter.events.COMPOSITION_END, () => {\n      this.composing = false;\n      if (this.cursor.parent) {\n        const range = this.cursor.restore();\n        if (!range) return;\n        setTimeout(() => {\n          this.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n        }, 1);\n      }\n    });\n  }\n  handleDragging() {\n    this.emitter.listenDOM('mousedown', document.body, () => {\n      this.mouseDown = true;\n    });\n    this.emitter.listenDOM('mouseup', document.body, () => {\n      this.mouseDown = false;\n      this.update(Emitter.sources.USER);\n    });\n  }\n  focus() {\n    if (this.hasFocus()) return;\n    this.root.focus({\n      preventScroll: true\n    });\n    this.setRange(this.savedRange);\n  }\n  format(format, value) {\n    this.scroll.update();\n    const nativeRange = this.getNativeRange();\n    if (nativeRange == null || !nativeRange.native.collapsed || this.scroll.query(format, Scope.BLOCK)) return;\n    if (nativeRange.start.node !== this.cursor.textNode) {\n      const blot = this.scroll.find(nativeRange.start.node, false);\n      if (blot == null) return;\n      // TODO Give blot ability to not split\n      if (blot instanceof LeafBlot) {\n        const after = blot.split(nativeRange.start.offset);\n        blot.parent.insertBefore(this.cursor, after);\n      } else {\n        // @ts-expect-error TODO: nativeRange.start.node doesn't seem to match function signature\n        blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\n      }\n      this.cursor.attach();\n    }\n    this.cursor.format(format, value);\n    this.scroll.optimize();\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n    this.update();\n  }\n  getBounds(index) {\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    const scrollLength = this.scroll.length();\n    index = Math.min(index, scrollLength - 1);\n    length = Math.min(index + length, scrollLength - 1) - index;\n    let node;\n    let [leaf, offset] = this.scroll.leaf(index);\n    if (leaf == null) return null;\n    if (length > 0 && offset === leaf.length()) {\n      const [next] = this.scroll.leaf(index + 1);\n      if (next) {\n        const [line] = this.scroll.line(index);\n        const [nextLine] = this.scroll.line(index + 1);\n        if (line === nextLine) {\n          leaf = next;\n          offset = 0;\n        }\n      }\n    }\n    [node, offset] = leaf.position(offset, true);\n    const range = document.createRange();\n    if (length > 0) {\n      range.setStart(node, offset);\n      [leaf, offset] = this.scroll.leaf(index + length);\n      if (leaf == null) return null;\n      [node, offset] = leaf.position(offset, true);\n      range.setEnd(node, offset);\n      return range.getBoundingClientRect();\n    }\n    let side = 'left';\n    let rect;\n    if (node instanceof Text) {\n      // Return null if the text node is empty because it is\n      // not able to get a useful client rect:\n      // https://github.com/w3c/csswg-drafts/issues/2514.\n      // Empty text nodes are most likely caused by TextBlot#optimize()\n      // not getting called when editor content changes.\n      if (!node.data.length) {\n        return null;\n      }\n      if (offset < node.data.length) {\n        range.setStart(node, offset);\n        range.setEnd(node, offset + 1);\n      } else {\n        range.setStart(node, offset - 1);\n        range.setEnd(node, offset);\n        side = 'right';\n      }\n      rect = range.getBoundingClientRect();\n    } else {\n      if (!(leaf.domNode instanceof Element)) return null;\n      rect = leaf.domNode.getBoundingClientRect();\n      if (offset > 0) side = 'right';\n    }\n    return {\n      bottom: rect.top + rect.height,\n      height: rect.height,\n      left: rect[side],\n      right: rect[side],\n      top: rect.top,\n      width: 0\n    };\n  }\n  getNativeRange() {\n    const selection = document.getSelection();\n    if (selection == null || selection.rangeCount <= 0) return null;\n    const nativeRange = selection.getRangeAt(0);\n    if (nativeRange == null) return null;\n    const range = this.normalizeNative(nativeRange);\n    debug.info('getNativeRange', range);\n    return range;\n  }\n  getRange() {\n    const root = this.scroll.domNode;\n    if ('isConnected' in root && !root.isConnected) {\n      // document.getSelection() forces layout on Blink, so we trend to\n      // not calling it.\n      return [null, null];\n    }\n    const normalized = this.getNativeRange();\n    if (normalized == null) return [null, null];\n    const range = this.normalizedToRange(normalized);\n    return [range, normalized];\n  }\n  hasFocus() {\n    return document.activeElement === this.root || document.activeElement != null && contains(this.root, document.activeElement);\n  }\n  normalizedToRange(range) {\n    const positions = [[range.start.node, range.start.offset]];\n    if (!range.native.collapsed) {\n      positions.push([range.end.node, range.end.offset]);\n    }\n    const indexes = positions.map(position => {\n      const [node, offset] = position;\n      const blot = this.scroll.find(node, true);\n      // @ts-expect-error Fix me later\n      const index = blot.offset(this.scroll);\n      if (offset === 0) {\n        return index;\n      }\n      if (blot instanceof LeafBlot) {\n        return index + blot.index(node, offset);\n      }\n      // @ts-expect-error Fix me later\n      return index + blot.length();\n    });\n    const end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\n    const start = Math.min(end, ...indexes);\n    return new Range(start, end - start);\n  }\n  normalizeNative(nativeRange) {\n    if (!contains(this.root, nativeRange.startContainer) || !nativeRange.collapsed && !contains(this.root, nativeRange.endContainer)) {\n      return null;\n    }\n    const range = {\n      start: {\n        node: nativeRange.startContainer,\n        offset: nativeRange.startOffset\n      },\n      end: {\n        node: nativeRange.endContainer,\n        offset: nativeRange.endOffset\n      },\n      native: nativeRange\n    };\n    [range.start, range.end].forEach(position => {\n      let {\n        node,\n        offset\n      } = position;\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\n        if (node.childNodes.length > offset) {\n          node = node.childNodes[offset];\n          offset = 0;\n        } else if (node.childNodes.length === offset) {\n          // @ts-expect-error Fix me later\n          node = node.lastChild;\n          if (node instanceof Text) {\n            offset = node.data.length;\n          } else if (node.childNodes.length > 0) {\n            // Container case\n            offset = node.childNodes.length;\n          } else {\n            // Embed case\n            offset = node.childNodes.length + 1;\n          }\n        } else {\n          break;\n        }\n      }\n      position.node = node;\n      position.offset = offset;\n    });\n    return range;\n  }\n  rangeToNative(range) {\n    const scrollLength = this.scroll.length();\n    const getPosition = (index, inclusive) => {\n      index = Math.min(scrollLength - 1, index);\n      const [leaf, leafOffset] = this.scroll.leaf(index);\n      return leaf ? leaf.position(leafOffset, inclusive) : [null, -1];\n    };\n    return [...getPosition(range.index, false), ...getPosition(range.index + range.length, true)];\n  }\n  setNativeRange(startNode, startOffset) {\n    let endNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : startNode;\n    let endOffset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : startOffset;\n    let force = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n    if (startNode != null && (this.root.parentNode == null || startNode.parentNode == null ||\n    // @ts-expect-error Fix me later\n    endNode.parentNode == null)) {\n      return;\n    }\n    const selection = document.getSelection();\n    if (selection == null) return;\n    if (startNode != null) {\n      if (!this.hasFocus()) this.root.focus({\n        preventScroll: true\n      });\n      const {\n        native\n      } = this.getNativeRange() || {};\n      if (native == null || force || startNode !== native.startContainer || startOffset !== native.startOffset || endNode !== native.endContainer || endOffset !== native.endOffset) {\n        if (startNode instanceof Element && startNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          startOffset = Array.from(startNode.parentNode.childNodes).indexOf(startNode);\n          startNode = startNode.parentNode;\n        }\n        if (endNode instanceof Element && endNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          endOffset = Array.from(endNode.parentNode.childNodes).indexOf(endNode);\n          endNode = endNode.parentNode;\n        }\n        const range = document.createRange();\n        // @ts-expect-error Fix me later\n        range.setStart(startNode, startOffset);\n        // @ts-expect-error Fix me later\n        range.setEnd(endNode, endOffset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    } else {\n      selection.removeAllRanges();\n      this.root.blur();\n    }\n  }\n  setRange(range) {\n    let force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Emitter.sources.API;\n    if (typeof force === 'string') {\n      source = force;\n      force = false;\n    }\n    debug.info('setRange', range);\n    if (range != null) {\n      const args = this.rangeToNative(range);\n      this.setNativeRange(...args, force);\n    } else {\n      this.setNativeRange(null);\n    }\n    this.update(source);\n  }\n  update() {\n    let source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Emitter.sources.USER;\n    const oldRange = this.lastRange;\n    const [lastRange, nativeRange] = this.getRange();\n    this.lastRange = lastRange;\n    this.lastNative = nativeRange;\n    if (this.lastRange != null) {\n      this.savedRange = this.lastRange;\n    }\n    if (!isEqual(oldRange, this.lastRange)) {\n      if (!this.composing && nativeRange != null && nativeRange.native.collapsed && nativeRange.start.node !== this.cursor.textNode) {\n        const range = this.cursor.restore();\n        if (range) {\n          this.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n        }\n      }\n      const args = [Emitter.events.SELECTION_CHANGE, cloneDeep(this.lastRange), cloneDeep(oldRange), source];\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n      if (source !== Emitter.sources.SILENT) {\n        this.emitter.emit(...args);\n      }\n    }\n  }\n}\nfunction contains(parent, descendant) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode; // eslint-disable-line @typescript-eslint/no-unused-expressions\n  } catch (e) {\n    return false;\n  }\n  return parent.contains(descendant);\n}\nexport default Selection;\n//# sourceMappingURL=selection.js.map", "import { cloneDeep, isEqual, merge } from 'lodash-es';\nimport { LeafBlot, EmbedBlot, Scope, ParentBlot } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Block, { BlockEmbed, bubbleFormats } from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport { Range } from './selection.js';\nconst ASCII = /^[ -~]*$/;\nclass Editor {\n  constructor(scroll) {\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n  applyDelta(delta) {\n    this.scroll.update();\n    let scrollLength = this.scroll.length();\n    this.scroll.batchStart();\n    const normalizedDelta = normalizeDelta(delta);\n    const deleteDelta = new Delta();\n    const normalizedOps = splitOpLines(normalizedDelta.ops.slice());\n    normalizedOps.reduce((index, op) => {\n      const length = Op.length(op);\n      let attributes = op.attributes || {};\n      let isImplicitNewlinePrepended = false;\n      let isImplicitNewlineAppended = false;\n      if (op.insert != null) {\n        deleteDelta.retain(length);\n        if (typeof op.insert === 'string') {\n          const text = op.insert;\n          isImplicitNewlineAppended = !text.endsWith('\\n') && (scrollLength <= index || !!this.scroll.descendant(BlockEmbed, index)[0]);\n          this.scroll.insertAt(index, text);\n          const [line, offset] = this.scroll.line(index);\n          let formats = merge({}, bubbleFormats(line));\n          if (line instanceof Block) {\n            const [leaf] = line.descendant(LeafBlot, offset);\n            if (leaf) {\n              formats = merge(formats, bubbleFormats(leaf));\n            }\n          }\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        } else if (typeof op.insert === 'object') {\n          const key = Object.keys(op.insert)[0]; // There should only be one key\n          if (key == null) return index;\n          const isInlineEmbed = this.scroll.query(key, Scope.INLINE) != null;\n          if (isInlineEmbed) {\n            if (scrollLength <= index || !!this.scroll.descendant(BlockEmbed, index)[0]) {\n              isImplicitNewlineAppended = true;\n            }\n          } else if (index > 0) {\n            const [leaf, offset] = this.scroll.descendant(LeafBlot, index - 1);\n            if (leaf instanceof TextBlot) {\n              const text = leaf.value();\n              if (text[offset] !== '\\n') {\n                isImplicitNewlinePrepended = true;\n              }\n            } else if (leaf instanceof EmbedBlot && leaf.statics.scope === Scope.INLINE_BLOT) {\n              isImplicitNewlinePrepended = true;\n            }\n          }\n          this.scroll.insertAt(index, key, op.insert[key]);\n          if (isInlineEmbed) {\n            const [leaf] = this.scroll.descendant(LeafBlot, index);\n            if (leaf) {\n              const formats = merge({}, bubbleFormats(leaf));\n              attributes = AttributeMap.diff(formats, attributes) || {};\n            }\n          }\n        }\n        scrollLength += length;\n      } else {\n        deleteDelta.push(op);\n        if (op.retain !== null && typeof op.retain === 'object') {\n          const key = Object.keys(op.retain)[0];\n          if (key == null) return index;\n          this.scroll.updateEmbedAt(index, key, op.retain[key]);\n        }\n      }\n      Object.keys(attributes).forEach(name => {\n        this.scroll.formatAt(index, length, name, attributes[name]);\n      });\n      const prependedLength = isImplicitNewlinePrepended ? 1 : 0;\n      const addedLength = isImplicitNewlineAppended ? 1 : 0;\n      scrollLength += prependedLength + addedLength;\n      deleteDelta.retain(prependedLength);\n      deleteDelta.delete(addedLength);\n      return index + length + prependedLength + addedLength;\n    }, 0);\n    deleteDelta.reduce((index, op) => {\n      if (typeof op.delete === 'number') {\n        this.scroll.deleteAt(index, op.delete);\n        return index;\n      }\n      return index + Op.length(op);\n    }, 0);\n    this.scroll.batchEnd();\n    this.scroll.optimize();\n    return this.update(normalizedDelta);\n  }\n  deleteText(index, length) {\n    this.scroll.deleteAt(index, length);\n    return this.update(new Delta().retain(index).delete(length));\n  }\n  formatLine(index, length) {\n    let formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    this.scroll.update();\n    Object.keys(formats).forEach(format => {\n      this.scroll.lines(index, Math.max(length, 1)).forEach(line => {\n        line.format(format, formats[format]);\n      });\n    });\n    this.scroll.optimize();\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n  formatText(index, length) {\n    let formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Object.keys(formats).forEach(format => {\n      this.scroll.formatAt(index, length, format, formats[format]);\n    });\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n  getContents(index, length) {\n    return this.delta.slice(index, index + length);\n  }\n  getDelta() {\n    return this.scroll.lines().reduce((delta, line) => {\n      return delta.concat(line.delta());\n    }, new Delta());\n  }\n  getFormat(index) {\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    let lines = [];\n    let leaves = [];\n    if (length === 0) {\n      this.scroll.path(index).forEach(path => {\n        const [blot] = path;\n        if (blot instanceof Block) {\n          lines.push(blot);\n        } else if (blot instanceof LeafBlot) {\n          leaves.push(blot);\n        }\n      });\n    } else {\n      lines = this.scroll.lines(index, length);\n      leaves = this.scroll.descendants(LeafBlot, index, length);\n    }\n    const [lineFormats, leafFormats] = [lines, leaves].map(blots => {\n      const blot = blots.shift();\n      if (blot == null) return {};\n      let formats = bubbleFormats(blot);\n      while (Object.keys(formats).length > 0) {\n        const blot = blots.shift();\n        if (blot == null) return formats;\n        formats = combineFormats(bubbleFormats(blot), formats);\n      }\n      return formats;\n    });\n    return {\n      ...lineFormats,\n      ...leafFormats\n    };\n  }\n  getHTML(index, length) {\n    const [line, lineOffset] = this.scroll.line(index);\n    if (line) {\n      const lineLength = line.length();\n      const isWithinLine = line.length() >= lineOffset + length;\n      if (isWithinLine && !(lineOffset === 0 && length === lineLength)) {\n        return convertHTML(line, lineOffset, length, true);\n      }\n      return convertHTML(this.scroll, index, length, true);\n    }\n    return '';\n  }\n  getText(index, length) {\n    return this.getContents(index, length).filter(op => typeof op.insert === 'string').map(op => op.insert).join('');\n  }\n  insertContents(index, contents) {\n    const normalizedDelta = normalizeDelta(contents);\n    const change = new Delta().retain(index).concat(normalizedDelta);\n    this.scroll.insertContents(index, normalizedDelta);\n    return this.update(change);\n  }\n  insertEmbed(index, embed, value) {\n    this.scroll.insertAt(index, embed, value);\n    return this.update(new Delta().retain(index).insert({\n      [embed]: value\n    }));\n  }\n  insertText(index, text) {\n    let formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    this.scroll.insertAt(index, text);\n    Object.keys(formats).forEach(format => {\n      this.scroll.formatAt(index, text.length, format, formats[format]);\n    });\n    return this.update(new Delta().retain(index).insert(text, cloneDeep(formats)));\n  }\n  isBlank() {\n    if (this.scroll.children.length === 0) return true;\n    if (this.scroll.children.length > 1) return false;\n    const blot = this.scroll.children.head;\n    if (blot?.statics.blotName !== Block.blotName) return false;\n    const block = blot;\n    if (block.children.length > 1) return false;\n    return block.children.head instanceof Break;\n  }\n  removeFormat(index, length) {\n    const text = this.getText(index, length);\n    const [line, offset] = this.scroll.line(index + length);\n    let suffixLength = 0;\n    let suffix = new Delta();\n    if (line != null) {\n      suffixLength = line.length() - offset;\n      suffix = line.delta().slice(offset, offset + suffixLength - 1).insert('\\n');\n    }\n    const contents = this.getContents(index, length + suffixLength);\n    const diff = contents.diff(new Delta().insert(text).concat(suffix));\n    const delta = new Delta().retain(index).concat(diff);\n    return this.applyDelta(delta);\n  }\n  update(change) {\n    let mutations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    let selectionInfo = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n    const oldDelta = this.delta;\n    if (mutations.length === 1 && mutations[0].type === 'characterData' &&\n    // @ts-expect-error Fix me later\n    mutations[0].target.data.match(ASCII) && this.scroll.find(mutations[0].target)) {\n      // Optimization for character changes\n      const textBlot = this.scroll.find(mutations[0].target);\n      const formats = bubbleFormats(textBlot);\n      const index = textBlot.offset(this.scroll);\n      // @ts-expect-error Fix me later\n      const oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\n      const oldText = new Delta().insert(oldValue);\n      // @ts-expect-error\n      const newText = new Delta().insert(textBlot.value());\n      const relativeSelectionInfo = selectionInfo && {\n        oldRange: shiftRange(selectionInfo.oldRange, -index),\n        newRange: shiftRange(selectionInfo.newRange, -index)\n      };\n      const diffDelta = new Delta().retain(index).concat(oldText.diff(newText, relativeSelectionInfo));\n      change = diffDelta.reduce((delta, op) => {\n        if (op.insert) {\n          return delta.insert(op.insert, formats);\n        }\n        return delta.push(op);\n      }, new Delta());\n      this.delta = oldDelta.compose(change);\n    } else {\n      this.delta = this.getDelta();\n      if (!change || !isEqual(oldDelta.compose(change), this.delta)) {\n        change = oldDelta.diff(this.delta, selectionInfo);\n      }\n    }\n    return change;\n  }\n}\nfunction convertListHTML(items, lastIndent, types) {\n  if (items.length === 0) {\n    const [endTag] = getListType(types.pop());\n    if (lastIndent <= 0) {\n      return `</li></${endTag}>`;\n    }\n    return `</li></${endTag}>${convertListHTML([], lastIndent - 1, types)}`;\n  }\n  const [{\n    child,\n    offset,\n    length,\n    indent,\n    type\n  }, ...rest] = items;\n  const [tag, attribute] = getListType(type);\n  if (indent > lastIndent) {\n    types.push(type);\n    if (indent === lastIndent + 1) {\n      return `<${tag}><li${attribute}>${convertHTML(child, offset, length)}${convertListHTML(rest, indent, types)}`;\n    }\n    return `<${tag}><li>${convertListHTML(items, lastIndent + 1, types)}`;\n  }\n  const previousType = types[types.length - 1];\n  if (indent === lastIndent && type === previousType) {\n    return `</li><li${attribute}>${convertHTML(child, offset, length)}${convertListHTML(rest, indent, types)}`;\n  }\n  const [endTag] = getListType(types.pop());\n  return `</li></${endTag}>${convertListHTML(items, lastIndent - 1, types)}`;\n}\nfunction convertHTML(blot, index, length) {\n  let isRoot = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  if ('html' in blot && typeof blot.html === 'function') {\n    return blot.html(index, length);\n  }\n  if (blot instanceof TextBlot) {\n    return escapeText(blot.value().slice(index, index + length));\n  }\n  if (blot instanceof ParentBlot) {\n    // TODO fix API\n    if (blot.statics.blotName === 'list-container') {\n      const items = [];\n      blot.children.forEachAt(index, length, (child, offset, childLength) => {\n        const formats = 'formats' in child && typeof child.formats === 'function' ? child.formats() : {};\n        items.push({\n          child,\n          offset,\n          length: childLength,\n          indent: formats.indent || 0,\n          type: formats.list\n        });\n      });\n      return convertListHTML(items, -1, []);\n    }\n    const parts = [];\n    blot.children.forEachAt(index, length, (child, offset, childLength) => {\n      parts.push(convertHTML(child, offset, childLength));\n    });\n    if (isRoot || blot.statics.blotName === 'list') {\n      return parts.join('');\n    }\n    const {\n      outerHTML,\n      innerHTML\n    } = blot.domNode;\n    const [start, end] = outerHTML.split(`>${innerHTML}<`);\n    // TODO cleanup\n    if (start === '<table') {\n      return `<table style=\"border: 1px solid #000;\">${parts.join('')}<${end}`;\n    }\n    return `${start}>${parts.join('')}<${end}`;\n  }\n  return blot.domNode instanceof Element ? blot.domNode.outerHTML : '';\n}\nfunction combineFormats(formats, combined) {\n  return Object.keys(combined).reduce((merged, name) => {\n    if (formats[name] == null) return merged;\n    const combinedValue = combined[name];\n    if (combinedValue === formats[name]) {\n      merged[name] = combinedValue;\n    } else if (Array.isArray(combinedValue)) {\n      if (combinedValue.indexOf(formats[name]) < 0) {\n        merged[name] = combinedValue.concat([formats[name]]);\n      } else {\n        // If style already exists, don't add to an array, but don't lose other styles\n        merged[name] = combinedValue;\n      }\n    } else {\n      merged[name] = [combinedValue, formats[name]];\n    }\n    return merged;\n  }, {});\n}\nfunction getListType(type) {\n  const tag = type === 'ordered' ? 'ol' : 'ul';\n  switch (type) {\n    case 'checked':\n      return [tag, ' data-list=\"checked\"'];\n    case 'unchecked':\n      return [tag, ' data-list=\"unchecked\"'];\n    default:\n      return [tag, ''];\n  }\n}\nfunction normalizeDelta(delta) {\n  return delta.reduce((normalizedDelta, op) => {\n    if (typeof op.insert === 'string') {\n      const text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return normalizedDelta.insert(text, op.attributes);\n    }\n    return normalizedDelta.push(op);\n  }, new Delta());\n}\nfunction shiftRange(_ref, amount) {\n  let {\n    index,\n    length\n  } = _ref;\n  return new Range(index + amount, length);\n}\nfunction splitOpLines(ops) {\n  const split = [];\n  ops.forEach(op => {\n    if (typeof op.insert === 'string') {\n      const lines = op.insert.split('\\n');\n      lines.forEach((line, index) => {\n        if (index) split.push({\n          insert: '\\n',\n          attributes: op.attributes\n        });\n        if (line) split.push({\n          insert: line,\n          attributes: op.attributes\n        });\n      });\n    } else {\n      split.push(op);\n    }\n  });\n  return split;\n}\nexport default Editor;\n//# sourceMappingURL=editor.js.map", "class Module {\n  static DEFAULTS = {};\n  constructor(quill) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.quill = quill;\n    this.options = options;\n  }\n}\nexport default Module;\n//# sourceMappingURL=module.js.map", "import { EmbedBlot } from 'parchment';\nimport TextBlot from './text.js';\nconst GUARD_TEXT = '\\uFEFF';\nclass Embed extends EmbedBlot {\n  constructor(scroll, node) {\n    super(scroll, node);\n    this.contentNode = document.createElement('span');\n    this.contentNode.setAttribute('contenteditable', 'false');\n    Array.from(this.domNode.childNodes).forEach(childNode => {\n      this.contentNode.appendChild(childNode);\n    });\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\n    this.domNode.appendChild(this.leftGuard);\n    this.domNode.appendChild(this.contentNode);\n    this.domNode.appendChild(this.rightGuard);\n  }\n  index(node, offset) {\n    if (node === this.leftGuard) return 0;\n    if (node === this.rightGuard) return 1;\n    return super.index(node, offset);\n  }\n  restore(node) {\n    let range = null;\n    let textNode;\n    const text = node.data.split(GUARD_TEXT).join('');\n    if (node === this.leftGuard) {\n      if (this.prev instanceof TextBlot) {\n        const prevLength = this.prev.length();\n        this.prev.insertAt(prevLength, text);\n        range = {\n          startNode: this.prev.domNode,\n          startOffset: prevLength + text.length\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    } else if (node === this.rightGuard) {\n      if (this.next instanceof TextBlot) {\n        this.next.insertAt(0, text);\n        range = {\n          startNode: this.next.domNode,\n          startOffset: text.length\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this.next);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    }\n    node.data = GUARD_TEXT;\n    return range;\n  }\n  update(mutations, context) {\n    mutations.forEach(mutation => {\n      if (mutation.type === 'characterData' && (mutation.target === this.leftGuard || mutation.target === this.rightGuard)) {\n        const range = this.restore(mutation.target);\n        if (range) context.range = range;\n      }\n    });\n  }\n}\nexport default Embed;\n//# sourceMappingURL=embed.js.map", "import Embed from '../blots/embed.js';\nimport Emitter from './emitter.js';\nclass Composition {\n  isComposing = false;\n  constructor(scroll, emitter) {\n    this.scroll = scroll;\n    this.emitter = emitter;\n    this.setupListeners();\n  }\n  setupListeners() {\n    this.scroll.domNode.addEventListener('compositionstart', event => {\n      if (!this.isComposing) {\n        this.handleCompositionStart(event);\n      }\n    });\n    this.scroll.domNode.addEventListener('compositionend', event => {\n      if (this.isComposing) {\n        // Webkit makes DOM changes after compositionend, so we use microtask to\n        // ensure the order.\n        // https://bugs.webkit.org/show_bug.cgi?id=31902\n        queueMicrotask(() => {\n          this.handleCompositionEnd(event);\n        });\n      }\n    });\n  }\n  handleCompositionStart(event) {\n    const blot = event.target instanceof Node ? this.scroll.find(event.target, true) : null;\n    if (blot && !(blot instanceof Embed)) {\n      this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_START, event);\n      this.scroll.batchStart();\n      this.emitter.emit(Emitter.events.COMPOSITION_START, event);\n      this.isComposing = true;\n    }\n  }\n  handleCompositionEnd(event) {\n    this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_END, event);\n    this.scroll.batchEnd();\n    this.emitter.emit(Emitter.events.COMPOSITION_END, event);\n    this.isComposing = false;\n  }\n}\nexport default Composition;\n//# sourceMappingURL=composition.js.map", "class Theme {\n  static DEFAULTS = {\n    modules: {}\n  };\n  static themes = {\n    default: Theme\n  };\n  modules = {};\n  constructor(quill, options) {\n    this.quill = quill;\n    this.options = options;\n  }\n  init() {\n    Object.keys(this.options.modules).forEach(name => {\n      if (this.modules[name] == null) {\n        this.addModule(name);\n      }\n    });\n  }\n  addModule(name) {\n    // @ts-expect-error\n    const ModuleClass = this.quill.constructor.import(`modules/${name}`);\n    this.modules[name] = new ModuleClass(this.quill, this.options.modules[name] || {});\n    return this.modules[name];\n  }\n}\nexport default Theme;\n//# sourceMappingURL=theme.js.map", "const getParentElement = element => element.parentElement || element.getRootNode().host || null;\nconst getElementRect = element => {\n  const rect = element.getBoundingClientRect();\n  const scaleX = 'offsetWidth' in element && Math.abs(rect.width) / element.offsetWidth || 1;\n  const scaleY = 'offsetHeight' in element && Math.abs(rect.height) / element.offsetHeight || 1;\n  return {\n    top: rect.top,\n    right: rect.left + element.clientWidth * scaleX,\n    bottom: rect.top + element.clientHeight * scaleY,\n    left: rect.left\n  };\n};\nconst paddingValueToInt = value => {\n  const number = parseInt(value, 10);\n  return Number.isNaN(number) ? 0 : number;\n};\n\n// Follow the steps described in https://www.w3.org/TR/cssom-view-1/#element-scrolling-members,\n// assuming that the scroll option is set to 'nearest'.\nconst getScrollDistance = (targetStart, targetEnd, scrollStart, scrollEnd, scrollPaddingStart, scrollPaddingEnd) => {\n  if (targetStart < scrollStart && targetEnd > scrollEnd) {\n    return 0;\n  }\n  if (targetStart < scrollStart) {\n    return -(scrollStart - targetStart + scrollPaddingStart);\n  }\n  if (targetEnd > scrollEnd) {\n    return targetEnd - targetStart > scrollEnd - scrollStart ? targetStart + scrollPaddingStart - scrollStart : targetEnd - scrollEnd + scrollPaddingEnd;\n  }\n  return 0;\n};\nconst scrollRectIntoView = (root, targetRect) => {\n  const document = root.ownerDocument;\n  let rect = targetRect;\n  let current = root;\n  while (current) {\n    const isDocumentBody = current === document.body;\n    const bounding = isDocumentBody ? {\n      top: 0,\n      right: window.visualViewport?.width ?? document.documentElement.clientWidth,\n      bottom: window.visualViewport?.height ?? document.documentElement.clientHeight,\n      left: 0\n    } : getElementRect(current);\n    const style = getComputedStyle(current);\n    const scrollDistanceX = getScrollDistance(rect.left, rect.right, bounding.left, bounding.right, paddingValueToInt(style.scrollPaddingLeft), paddingValueToInt(style.scrollPaddingRight));\n    const scrollDistanceY = getScrollDistance(rect.top, rect.bottom, bounding.top, bounding.bottom, paddingValueToInt(style.scrollPaddingTop), paddingValueToInt(style.scrollPaddingBottom));\n    if (scrollDistanceX || scrollDistanceY) {\n      if (isDocumentBody) {\n        document.defaultView?.scrollBy(scrollDistanceX, scrollDistanceY);\n      } else {\n        const {\n          scrollLeft,\n          scrollTop\n        } = current;\n        if (scrollDistanceY) {\n          current.scrollTop += scrollDistanceY;\n        }\n        if (scrollDistanceX) {\n          current.scrollLeft += scrollDistanceX;\n        }\n        const scrolledLeft = current.scrollLeft - scrollLeft;\n        const scrolledTop = current.scrollTop - scrollTop;\n        rect = {\n          left: rect.left - scrolledLeft,\n          top: rect.top - scrolledTop,\n          right: rect.right - scrolledLeft,\n          bottom: rect.bottom - scrolledTop\n        };\n      }\n    }\n    current = isDocumentBody || style.position === 'fixed' ? null : getParentElement(current);\n  }\n};\nexport default scrollRectIntoView;\n//# sourceMappingURL=scrollRectIntoView.js.map", "import { Registry } from 'parchment';\nconst MAX_REGISTER_ITERATIONS = 100;\nconst CORE_FORMATS = ['block', 'break', 'cursor', 'inline', 'scroll', 'text'];\nconst createRegistryWithFormats = (formats, sourceRegistry, debug) => {\n  const registry = new Registry();\n  CORE_FORMATS.forEach(name => {\n    const coreBlot = sourceRegistry.query(name);\n    if (coreBlot) registry.register(coreBlot);\n  });\n  formats.forEach(name => {\n    let format = sourceRegistry.query(name);\n    if (!format) {\n      debug.error(`Cannot register \"${name}\" specified in \"formats\" config. Are you sure it was registered?`);\n    }\n    let iterations = 0;\n    while (format) {\n      registry.register(format);\n      format = 'blotName' in format ? format.requiredContainer ?? null : null;\n      iterations += 1;\n      if (iterations > MAX_REGISTER_ITERATIONS) {\n        debug.error(`Cycle detected in registering blot requiredContainer: \"${name}\"`);\n        break;\n      }\n    }\n  });\n  return registry;\n};\nexport default createRegistryWithFormats;\n//# sourceMappingURL=createRegistryWithFormats.js.map", "import { merge } from 'lodash-es';\nimport * as Parchment from 'parchment';\nimport Delta from 'quill-delta';\nimport Editor from './editor.js';\nimport Emitter from './emitter.js';\nimport instances from './instances.js';\nimport logger from './logger.js';\nimport Module from './module.js';\nimport Selection, { Range } from './selection.js';\nimport Composition from './composition.js';\nimport Theme from './theme.js';\nimport scrollRectIntoView from './utils/scrollRectIntoView.js';\nimport createRegistryWithFormats from './utils/createRegistryWithFormats.js';\nconst debug = logger('quill');\nconst globalRegistry = new Parchment.Registry();\nParchment.ParentBlot.uiClass = 'ql-ui';\n\n/**\n * Options for initializing a Quill instance\n */\n\n/**\n * Similar to QuillOptions, but with all properties expanded to their default values,\n * and all selectors resolved to HTMLElements.\n */\n\nclass Quill {\n  static DEFAULTS = {\n    bounds: null,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true,\n      uploader: true\n    },\n    placeholder: '',\n    readOnly: false,\n    registry: globalRegistry,\n    theme: 'default'\n  };\n  static events = Emitter.events;\n  static sources = Emitter.sources;\n  static version = typeof \"2.0.2\" === 'undefined' ? 'dev' : \"2.0.2\";\n  static imports = {\n    delta: Delta,\n    parchment: Parchment,\n    'core/module': Module,\n    'core/theme': Theme\n  };\n  static debug(limit) {\n    if (limit === true) {\n      limit = 'log';\n    }\n    logger.level(limit);\n  }\n  static find(node) {\n    let bubble = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    return instances.get(node) || globalRegistry.find(node, bubble);\n  }\n  static import(name) {\n    if (this.imports[name] == null) {\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\n    }\n    return this.imports[name];\n  }\n  static register() {\n    if (typeof (arguments.length <= 0 ? undefined : arguments[0]) !== 'string') {\n      const target = arguments.length <= 0 ? undefined : arguments[0];\n      const overwrite = !!(arguments.length <= 1 ? undefined : arguments[1]);\n      const name = 'attrName' in target ? target.attrName : target.blotName;\n      if (typeof name === 'string') {\n        // Shortcut for formats:\n        // register(Blot | Attributor, overwrite)\n        this.register(`formats/${name}`, target, overwrite);\n      } else {\n        Object.keys(target).forEach(key => {\n          this.register(key, target[key], overwrite);\n        });\n      }\n    } else {\n      const path = arguments.length <= 0 ? undefined : arguments[0];\n      const target = arguments.length <= 1 ? undefined : arguments[1];\n      const overwrite = !!(arguments.length <= 2 ? undefined : arguments[2]);\n      if (this.imports[path] != null && !overwrite) {\n        debug.warn(`Overwriting ${path} with`, target);\n      }\n      this.imports[path] = target;\n      if ((path.startsWith('blots/') || path.startsWith('formats/')) && target && typeof target !== 'boolean' && target.blotName !== 'abstract') {\n        globalRegistry.register(target);\n      }\n      if (typeof target.register === 'function') {\n        target.register(globalRegistry);\n      }\n    }\n  }\n  constructor(container) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      debug.error('Invalid Quill container', container);\n      return;\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    const html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    instances.set(this.container, this);\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.emitter = new Emitter();\n    const scrollBlotName = Parchment.ScrollBlot.blotName;\n    const ScrollBlot = this.options.registry.query(scrollBlotName);\n    if (!ScrollBlot || !('blotName' in ScrollBlot)) {\n      throw new Error(`Cannot initialize Quill without \"${scrollBlotName}\" blot`);\n    }\n    this.scroll = new ScrollBlot(this.options.registry, this.root, {\n      emitter: this.emitter\n    });\n    this.editor = new Editor(this.scroll);\n    this.selection = new Selection(this.scroll, this.emitter);\n    this.composition = new Composition(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options); // eslint-disable-line new-cap\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.uploader = this.theme.addModule('uploader');\n    this.theme.addModule('input');\n    this.theme.addModule('uiNode');\n    this.theme.init();\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, type => {\n      if (type === Emitter.events.TEXT_CHANGE) {\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo = oldRange && newRange ? {\n        oldRange,\n        newRange\n      } : undefined;\n      modify.call(this, () => this.editor.update(null, mutations, selectionInfo), source);\n    });\n    this.emitter.on(Emitter.events.SCROLL_EMBED_UPDATE, (blot, delta) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo = oldRange && newRange ? {\n        oldRange,\n        newRange\n      } : undefined;\n      modify.call(this, () => {\n        const change = new Delta().retain(blot.offset(this)).retain({\n          [blot.statics.blotName]: delta\n        });\n        return this.editor.update(change, [], selectionInfo);\n      }, Quill.sources.USER);\n    });\n    if (html) {\n      const contents = this.clipboard.convert({\n        html: `${html}<p><br></p>`,\n        text: '\\n'\n      });\n      this.setContents(contents);\n    }\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n    this.allowReadOnlyEdits = false;\n  }\n  addContainer(container) {\n    let refNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    if (typeof container === 'string') {\n      const className = container;\n      container = document.createElement('div');\n      container.classList.add(className);\n    }\n    this.container.insertBefore(container, refNode);\n    return container;\n  }\n  blur() {\n    this.selection.setRange(null);\n  }\n  deleteText(index, length, source) {\n    // @ts-expect-error\n    [index, length,, source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.deleteText(index, length);\n    }, source, index, -1 * length);\n  }\n  disable() {\n    this.enable(false);\n  }\n  editReadOnly(modifier) {\n    this.allowReadOnlyEdits = true;\n    const value = modifier();\n    this.allowReadOnlyEdits = false;\n    return value;\n  }\n  enable() {\n    let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.scroll.enable(enabled);\n    this.container.classList.toggle('ql-disabled', !enabled);\n  }\n  focus() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.selection.focus();\n    if (!options.preventScroll) {\n      this.scrollSelectionIntoView();\n    }\n  }\n  format(name, value) {\n    let source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Emitter.sources.API;\n    return modify.call(this, () => {\n      const range = this.getSelection(true);\n      let change = new Delta();\n      if (range == null) return change;\n      if (this.scroll.query(name, Parchment.Scope.BLOCK)) {\n        change = this.editor.formatLine(range.index, range.length, {\n          [name]: value\n        });\n      } else if (range.length === 0) {\n        this.selection.format(name, value);\n        return change;\n      } else {\n        change = this.editor.formatText(range.index, range.length, {\n          [name]: value\n        });\n      }\n      this.setSelection(range, Emitter.sources.SILENT);\n      return change;\n    }, source);\n  }\n  formatLine(index, length, name, value, source) {\n    let formats;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(index, length,\n    // @ts-expect-error\n    name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatLine(index, length, formats);\n    }, source, index, 0);\n  }\n  formatText(index, length, name, value, source) {\n    let formats;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n    // @ts-expect-error\n    index, length, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatText(index, length, formats);\n    }, source, index, 0);\n  }\n  getBounds(index) {\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    let bounds = null;\n    if (typeof index === 'number') {\n      bounds = this.selection.getBounds(index, length);\n    } else {\n      bounds = this.selection.getBounds(index.index, index.length);\n    }\n    if (!bounds) return null;\n    const containerBounds = this.container.getBoundingClientRect();\n    return {\n      bottom: bounds.bottom - containerBounds.top,\n      height: bounds.height,\n      left: bounds.left - containerBounds.left,\n      right: bounds.right - containerBounds.left,\n      top: bounds.top - containerBounds.top,\n      width: bounds.width\n    };\n  }\n  getContents() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.getLength() - index;\n    [index, length] = overload(index, length);\n    return this.editor.getContents(index, length);\n  }\n  getFormat() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.getSelection(true);\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    if (typeof index === 'number') {\n      return this.editor.getFormat(index, length);\n    }\n    return this.editor.getFormat(index.index, index.length);\n  }\n  getIndex(blot) {\n    return blot.offset(this.scroll);\n  }\n  getLength() {\n    return this.scroll.length();\n  }\n  getLeaf(index) {\n    return this.scroll.leaf(index);\n  }\n  getLine(index) {\n    return this.scroll.line(index);\n  }\n  getLines() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.MAX_VALUE;\n    if (typeof index !== 'number') {\n      return this.scroll.lines(index.index, index.length);\n    }\n    return this.scroll.lines(index, length);\n  }\n  getModule(name) {\n    return this.theme.modules[name];\n  }\n  getSelection() {\n    let focus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (focus) this.focus();\n    this.update(); // Make sure we access getRange with editor in consistent state\n    return this.selection.getRange()[0];\n  }\n  getSemanticHTML() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 ? arguments[1] : undefined;\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getHTML(index, length);\n  }\n  getText() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 ? arguments[1] : undefined;\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getText(index, length);\n  }\n  hasFocus() {\n    return this.selection.hasFocus();\n  }\n  insertEmbed(index, embed, value) {\n    let source = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Quill.sources.API;\n    return modify.call(this, () => {\n      return this.editor.insertEmbed(index, embed, value);\n    }, source, index);\n  }\n  insertText(index, text, name, value, source) {\n    let formats;\n    // eslint-disable-next-line prefer-const\n    // @ts-expect-error\n    [index,, formats, source] = overload(index, 0, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.insertText(index, text, formats);\n    }, source, index, text.length);\n  }\n  isEnabled() {\n    return this.scroll.isEnabled();\n  }\n  off() {\n    return this.emitter.off(...arguments);\n  }\n  on() {\n    return this.emitter.on(...arguments);\n  }\n  once() {\n    return this.emitter.once(...arguments);\n  }\n  removeFormat(index, length, source) {\n    [index, length,, source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.removeFormat(index, length);\n    }, source, index);\n  }\n  scrollRectIntoView(rect) {\n    scrollRectIntoView(this.root, rect);\n  }\n\n  /**\n   * @deprecated Use Quill#scrollSelectionIntoView() instead.\n   */\n  scrollIntoView() {\n    console.warn('Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead.');\n    this.scrollSelectionIntoView();\n  }\n\n  /**\n   * Scroll the current selection into the visible area.\n   * If the selection is already visible, no scrolling will occur.\n   */\n  scrollSelectionIntoView() {\n    const range = this.selection.lastRange;\n    const bounds = range && this.selection.getBounds(range.index, range.length);\n    if (bounds) {\n      this.scrollRectIntoView(bounds);\n    }\n  }\n  setContents(delta) {\n    let source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Emitter.sources.API;\n    return modify.call(this, () => {\n      delta = new Delta(delta);\n      const length = this.getLength();\n      // Quill will set empty editor to \\n\n      const delete1 = this.editor.deleteText(0, length);\n      const applied = this.editor.insertContents(0, delta);\n      // Remove extra \\n from empty editor initialization\n      const delete2 = this.editor.deleteText(this.getLength() - 1, 1);\n      return delete1.compose(applied).compose(delete2);\n    }, source);\n  }\n  setSelection(index, length, source) {\n    if (index == null) {\n      // @ts-expect-error https://github.com/microsoft/TypeScript/issues/22609\n      this.selection.setRange(null, length || Quill.sources.API);\n    } else {\n      // @ts-expect-error\n      [index, length,, source] = overload(index, length, source);\n      this.selection.setRange(new Range(Math.max(0, index), length), source);\n      if (source !== Emitter.sources.SILENT) {\n        this.scrollSelectionIntoView();\n      }\n    }\n  }\n  setText(text) {\n    let source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Emitter.sources.API;\n    const delta = new Delta().insert(text);\n    return this.setContents(delta, source);\n  }\n  update() {\n    let source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Emitter.sources.USER;\n    const change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\n    this.selection.update(source);\n    // TODO this is usually undefined\n    return change;\n  }\n  updateContents(delta) {\n    let source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Emitter.sources.API;\n    return modify.call(this, () => {\n      delta = new Delta(delta);\n      return this.editor.applyDelta(delta);\n    }, source, true);\n  }\n}\nfunction resolveSelector(selector) {\n  return typeof selector === 'string' ? document.querySelector(selector) : selector;\n}\nfunction expandModuleConfig(config) {\n  return Object.entries(config ?? {}).reduce((expanded, _ref) => {\n    let [key, value] = _ref;\n    return {\n      ...expanded,\n      [key]: value === true ? {} : value\n    };\n  }, {});\n}\nfunction omitUndefinedValuesFromOptions(obj) {\n  return Object.fromEntries(Object.entries(obj).filter(entry => entry[1] !== undefined));\n}\nfunction expandConfig(containerOrSelector, options) {\n  const container = resolveSelector(containerOrSelector);\n  if (!container) {\n    throw new Error('Invalid Quill container');\n  }\n  const shouldUseDefaultTheme = !options.theme || options.theme === Quill.DEFAULTS.theme;\n  const theme = shouldUseDefaultTheme ? Theme : Quill.import(`themes/${options.theme}`);\n  if (!theme) {\n    throw new Error(`Invalid theme ${options.theme}. Did you register it?`);\n  }\n  const {\n    modules: quillModuleDefaults,\n    ...quillDefaults\n  } = Quill.DEFAULTS;\n  const {\n    modules: themeModuleDefaults,\n    ...themeDefaults\n  } = theme.DEFAULTS;\n  let userModuleOptions = expandModuleConfig(options.modules);\n  // Special case toolbar shorthand\n  if (userModuleOptions != null && userModuleOptions.toolbar && userModuleOptions.toolbar.constructor !== Object) {\n    userModuleOptions = {\n      ...userModuleOptions,\n      toolbar: {\n        container: userModuleOptions.toolbar\n      }\n    };\n  }\n  const modules = merge({}, expandModuleConfig(quillModuleDefaults), expandModuleConfig(themeModuleDefaults), userModuleOptions);\n  const config = {\n    ...quillDefaults,\n    ...omitUndefinedValuesFromOptions(themeDefaults),\n    ...omitUndefinedValuesFromOptions(options)\n  };\n  let registry = options.registry;\n  if (registry) {\n    if (options.formats) {\n      debug.warn('Ignoring \"formats\" option because \"registry\" is specified');\n    }\n  } else {\n    registry = options.formats ? createRegistryWithFormats(options.formats, config.registry, debug) : config.registry;\n  }\n  return {\n    ...config,\n    registry,\n    container,\n    theme,\n    modules: Object.entries(modules).reduce((modulesWithDefaults, _ref2) => {\n      let [name, value] = _ref2;\n      if (!value) return modulesWithDefaults;\n      const moduleClass = Quill.import(`modules/${name}`);\n      if (moduleClass == null) {\n        debug.error(`Cannot load ${name} module. Are you sure you registered it?`);\n        return modulesWithDefaults;\n      }\n      return {\n        ...modulesWithDefaults,\n        // @ts-expect-error\n        [name]: merge({}, moduleClass.DEFAULTS || {}, value)\n      };\n    }, {}),\n    bounds: resolveSelector(config.bounds)\n  };\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(modifier, source, index, shift) {\n  if (!this.isEnabled() && source === Emitter.sources.USER && !this.allowReadOnlyEdits) {\n    return new Delta();\n  }\n  let range = index == null ? null : this.getSelection();\n  const oldDelta = this.editor.delta;\n  const change = modifier();\n  if (range != null) {\n    if (index === true) {\n      index = range.index; // eslint-disable-line prefer-destructuring\n    }\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      // @ts-expect-error index should always be number\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, Emitter.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    const args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n    if (source !== Emitter.sources.SILENT) {\n      this.emitter.emit(...args);\n    }\n  }\n  return change;\n}\nfunction overload(index, length, name, value, source) {\n  let formats = {};\n  // @ts-expect-error\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      // @ts-expect-error\n      source = value;\n      value = name;\n      name = length;\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    } else {\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    }\n  } else if (typeof length !== 'number') {\n    // @ts-expect-error\n    source = value;\n    value = name;\n    name = length;\n    length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if (typeof name === 'object') {\n    // @ts-expect-error Fix me later\n    formats = name;\n    // @ts-expect-error\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      // @ts-expect-error\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || Emitter.sources.API;\n  // @ts-expect-error\n  return [index, length, formats, source];\n}\nfunction shiftRange(range, index, lengthOrSource, source) {\n  const length = typeof lengthOrSource === 'number' ? lengthOrSource : 0;\n  if (range == null) return null;\n  let start;\n  let end;\n  // @ts-expect-error -- TODO: add a better type guard around `index`\n  if (index && typeof index.transformPosition === 'function') {\n    [start, end] = [range.index, range.index + range.length].map(pos =>\n    // @ts-expect-error -- TODO: add a better type guard around `index`\n    index.transformPosition(pos, source !== Emitter.sources.USER));\n  } else {\n    [start, end] = [range.index, range.index + range.length].map(pos => {\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      if (pos < index || pos === index && source === Emitter.sources.USER) return pos;\n      if (length >= 0) {\n        return pos + length;\n      }\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      return Math.max(index, pos + length);\n    });\n  }\n  return new Range(start, end - start);\n}\nexport { Parchment, Range };\nexport { globalRegistry, expandConfig, overload, Quill as default };\n//# sourceMappingURL=quill.js.map", "import { ContainerBlot } from 'parchment';\nclass Container extends ContainerBlot {}\nexport default Container;\n//# sourceMappingURL=container.js.map", "import { ContainerBlot, LeafBlot, Scope, ScrollBlot } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Emitter from '../core/emitter.js';\nimport Block, { BlockEmbed, bubbleFormats } from './block.js';\nimport Break from './break.js';\nimport Container from './container.js';\nfunction isLine(blot) {\n  return blot instanceof Block || blot instanceof BlockEmbed;\n}\nfunction isUpdatable(blot) {\n  return typeof blot.updateContent === 'function';\n}\nclass Scroll extends ScrollBlot {\n  static blotName = 'scroll';\n  static className = 'ql-editor';\n  static tagName = 'DIV';\n  static defaultChild = Block;\n  static allowedChildren = [Block, BlockEmbed, Container];\n  constructor(registry, domNode, _ref) {\n    let {\n      emitter\n    } = _ref;\n    super(registry, domNode);\n    this.emitter = emitter;\n    this.batch = false;\n    this.optimize();\n    this.enable();\n    this.domNode.addEventListener('dragstart', e => this.handleDragStart(e));\n  }\n  batchStart() {\n    if (!Array.isArray(this.batch)) {\n      this.batch = [];\n    }\n  }\n  batchEnd() {\n    if (!this.batch) return;\n    const mutations = this.batch;\n    this.batch = false;\n    this.update(mutations);\n  }\n  emitMount(blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_MOUNT, blot);\n  }\n  emitUnmount(blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_UNMOUNT, blot);\n  }\n  emitEmbedUpdate(blot, change) {\n    this.emitter.emit(Emitter.events.SCROLL_EMBED_UPDATE, blot, change);\n  }\n  deleteAt(index, length) {\n    const [first, offset] = this.line(index);\n    const [last] = this.line(index + length);\n    super.deleteAt(index, length);\n    if (last != null && first !== last && offset > 0) {\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\n        this.optimize();\n        return;\n      }\n      const ref = last.children.head instanceof Break ? null : last.children.head;\n      // @ts-expect-error\n      first.moveChildren(last, ref);\n      // @ts-expect-error\n      first.remove();\n    }\n    this.optimize();\n  }\n  enable() {\n    let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.domNode.setAttribute('contenteditable', enabled ? 'true' : 'false');\n  }\n  formatAt(index, length, format, value) {\n    super.formatAt(index, length, format, value);\n    this.optimize();\n  }\n  insertAt(index, value, def) {\n    if (index >= this.length()) {\n      if (def == null || this.scroll.query(value, Scope.BLOCK) == null) {\n        const blot = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(blot);\n        if (def == null && value.endsWith('\\n')) {\n          blot.insertAt(0, value.slice(0, -1), def);\n        } else {\n          blot.insertAt(0, value, def);\n        }\n      } else {\n        const embed = this.scroll.create(value, def);\n        this.appendChild(embed);\n      }\n    } else {\n      super.insertAt(index, value, def);\n    }\n    this.optimize();\n  }\n  insertBefore(blot, ref) {\n    if (blot.statics.scope === Scope.INLINE_BLOT) {\n      const wrapper = this.scroll.create(this.statics.defaultChild.blotName);\n      wrapper.appendChild(blot);\n      super.insertBefore(wrapper, ref);\n    } else {\n      super.insertBefore(blot, ref);\n    }\n  }\n  insertContents(index, delta) {\n    const renderBlocks = this.deltaToRenderBlocks(delta.concat(new Delta().insert('\\n')));\n    const last = renderBlocks.pop();\n    if (last == null) return;\n    this.batchStart();\n    const first = renderBlocks.shift();\n    if (first) {\n      const shouldInsertNewlineChar = first.type === 'block' && (first.delta.length() === 0 || !this.descendant(BlockEmbed, index)[0] && index < this.length());\n      const delta = first.type === 'block' ? first.delta : new Delta().insert({\n        [first.key]: first.value\n      });\n      insertInlineContents(this, index, delta);\n      const newlineCharLength = first.type === 'block' ? 1 : 0;\n      const lineEndIndex = index + delta.length() + newlineCharLength;\n      if (shouldInsertNewlineChar) {\n        this.insertAt(lineEndIndex - 1, '\\n');\n      }\n      const formats = bubbleFormats(this.line(index)[0]);\n      const attributes = AttributeMap.diff(formats, first.attributes) || {};\n      Object.keys(attributes).forEach(name => {\n        this.formatAt(lineEndIndex - 1, 1, name, attributes[name]);\n      });\n      index = lineEndIndex;\n    }\n    let [refBlot, refBlotOffset] = this.children.find(index);\n    if (renderBlocks.length) {\n      if (refBlot) {\n        refBlot = refBlot.split(refBlotOffset);\n        refBlotOffset = 0;\n      }\n      renderBlocks.forEach(renderBlock => {\n        if (renderBlock.type === 'block') {\n          const block = this.createBlock(renderBlock.attributes, refBlot || undefined);\n          insertInlineContents(block, 0, renderBlock.delta);\n        } else {\n          const blockEmbed = this.create(renderBlock.key, renderBlock.value);\n          this.insertBefore(blockEmbed, refBlot || undefined);\n          Object.keys(renderBlock.attributes).forEach(name => {\n            blockEmbed.format(name, renderBlock.attributes[name]);\n          });\n        }\n      });\n    }\n    if (last.type === 'block' && last.delta.length()) {\n      const offset = refBlot ? refBlot.offset(refBlot.scroll) + refBlotOffset : this.length();\n      insertInlineContents(this, offset, last.delta);\n    }\n    this.batchEnd();\n    this.optimize();\n  }\n  isEnabled() {\n    return this.domNode.getAttribute('contenteditable') === 'true';\n  }\n  leaf(index) {\n    const last = this.path(index).pop();\n    if (!last) {\n      return [null, -1];\n    }\n    const [blot, offset] = last;\n    return blot instanceof LeafBlot ? [blot, offset] : [null, -1];\n  }\n  line(index) {\n    if (index === this.length()) {\n      return this.line(index - 1);\n    }\n    // @ts-expect-error TODO: make descendant() generic\n    return this.descendant(isLine, index);\n  }\n  lines() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.MAX_VALUE;\n    const getLines = (blot, blotIndex, blotLength) => {\n      let lines = [];\n      let lengthLeft = blotLength;\n      blot.children.forEachAt(blotIndex, blotLength, (child, childIndex, childLength) => {\n        if (isLine(child)) {\n          lines.push(child);\n        } else if (child instanceof ContainerBlot) {\n          lines = lines.concat(getLines(child, childIndex, lengthLeft));\n        }\n        lengthLeft -= childLength;\n      });\n      return lines;\n    };\n    return getLines(this, index, length);\n  }\n  optimize() {\n    let mutations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (this.batch) return;\n    super.optimize(mutations, context);\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\n    }\n  }\n  path(index) {\n    return super.path(index).slice(1); // Exclude self\n  }\n  remove() {\n    // Never remove self\n  }\n  update(mutations) {\n    if (this.batch) {\n      if (Array.isArray(mutations)) {\n        this.batch = this.batch.concat(mutations);\n      }\n      return;\n    }\n    let source = Emitter.sources.USER;\n    if (typeof mutations === 'string') {\n      source = mutations;\n    }\n    if (!Array.isArray(mutations)) {\n      mutations = this.observer.takeRecords();\n    }\n    mutations = mutations.filter(_ref2 => {\n      let {\n        target\n      } = _ref2;\n      const blot = this.find(target, true);\n      return blot && !isUpdatable(blot);\n    });\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\n    }\n    super.update(mutations.concat([])); // pass copy\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\n    }\n  }\n  updateEmbedAt(index, key, change) {\n    // Currently it only supports top-level embeds (BlockEmbed).\n    // We can update `ParentBlot` in parchment to support inline embeds.\n    const [blot] = this.descendant(b => b instanceof BlockEmbed, index);\n    if (blot && blot.statics.blotName === key && isUpdatable(blot)) {\n      blot.updateContent(change);\n    }\n  }\n  handleDragStart(event) {\n    event.preventDefault();\n  }\n  deltaToRenderBlocks(delta) {\n    const renderBlocks = [];\n    let currentBlockDelta = new Delta();\n    delta.forEach(op => {\n      const insert = op?.insert;\n      if (!insert) return;\n      if (typeof insert === 'string') {\n        const splitted = insert.split('\\n');\n        splitted.slice(0, -1).forEach(text => {\n          currentBlockDelta.insert(text, op.attributes);\n          renderBlocks.push({\n            type: 'block',\n            delta: currentBlockDelta,\n            attributes: op.attributes ?? {}\n          });\n          currentBlockDelta = new Delta();\n        });\n        const last = splitted[splitted.length - 1];\n        if (last) {\n          currentBlockDelta.insert(last, op.attributes);\n        }\n      } else {\n        const key = Object.keys(insert)[0];\n        if (!key) return;\n        if (this.query(key, Scope.INLINE)) {\n          currentBlockDelta.push(op);\n        } else {\n          if (currentBlockDelta.length()) {\n            renderBlocks.push({\n              type: 'block',\n              delta: currentBlockDelta,\n              attributes: {}\n            });\n          }\n          currentBlockDelta = new Delta();\n          renderBlocks.push({\n            type: 'blockEmbed',\n            key,\n            value: insert[key],\n            attributes: op.attributes ?? {}\n          });\n        }\n      }\n    });\n    if (currentBlockDelta.length()) {\n      renderBlocks.push({\n        type: 'block',\n        delta: currentBlockDelta,\n        attributes: {}\n      });\n    }\n    return renderBlocks;\n  }\n  createBlock(attributes, refBlot) {\n    let blotName;\n    const formats = {};\n    Object.entries(attributes).forEach(_ref3 => {\n      let [key, value] = _ref3;\n      const isBlockBlot = this.query(key, Scope.BLOCK & Scope.BLOT) != null;\n      if (isBlockBlot) {\n        blotName = key;\n      } else {\n        formats[key] = value;\n      }\n    });\n    const block = this.create(blotName || this.statics.defaultChild.blotName, blotName ? attributes[blotName] : undefined);\n    this.insertBefore(block, refBlot || undefined);\n    const length = block.length();\n    Object.entries(formats).forEach(_ref4 => {\n      let [key, value] = _ref4;\n      block.formatAt(0, length, key, value);\n    });\n    return block;\n  }\n}\nfunction insertInlineContents(parent, index, inlineContents) {\n  inlineContents.reduce((index, op) => {\n    const length = Op.length(op);\n    let attributes = op.attributes || {};\n    if (op.insert != null) {\n      if (typeof op.insert === 'string') {\n        const text = op.insert;\n        parent.insertAt(index, text);\n        const [leaf] = parent.descendant(LeafBlot, index);\n        const formats = bubbleFormats(leaf);\n        attributes = AttributeMap.diff(formats, attributes) || {};\n      } else if (typeof op.insert === 'object') {\n        const key = Object.keys(op.insert)[0]; // There should only be one key\n        if (key == null) return index;\n        parent.insertAt(index, key, op.insert[key]);\n        const isInlineEmbed = parent.scroll.query(key, Scope.INLINE) != null;\n        if (isInlineEmbed) {\n          const [leaf] = parent.descendant(LeafBlot, index);\n          const formats = bubbleFormats(leaf);\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        }\n      }\n    }\n    Object.keys(attributes).forEach(key => {\n      parent.formatAt(index, length, key, attributes[key]);\n    });\n    return index + length;\n  }, index);\n}\nexport default Scroll;\n//# sourceMappingURL=scroll.js.map", "import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify']\n};\nconst AlignAttribute = new Attributor('align', 'align', config);\nconst AlignClass = new ClassAttributor('align', 'ql-align', config);\nconst AlignStyle = new StyleAttributor('align', 'text-align', config);\nexport { AlignAttribute, AlignClass, AlignStyle };\n//# sourceMappingURL=align.js.map", "import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\nclass ColorAttributor extends StyleAttributor {\n  value(domNode) {\n    let value = super.value(domNode);\n    if (!value.startsWith('rgb(')) return value;\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n    const hex = value.split(',').map(component => `00${parseInt(component, 10).toString(16)}`.slice(-2)).join('');\n    return `#${hex}`;\n  }\n}\nconst ColorClass = new ClassAttributor('color', 'ql-color', {\n  scope: Scope.INLINE\n});\nconst ColorStyle = new ColorAttributor('color', 'color', {\n  scope: Scope.INLINE\n});\nexport { ColorAttributor, ColorClass, ColorStyle };\n//# sourceMappingURL=color.js.map", "import { ClassAttributor, Scope } from 'parchment';\nimport { ColorAttributor } from './color.js';\nconst BackgroundClass = new ClassAttributor('background', 'ql-bg', {\n  scope: Scope.INLINE\n});\nconst BackgroundStyle = new ColorAttributor('background', 'background-color', {\n  scope: Scope.INLINE\n});\nexport { BackgroundClass, BackgroundStyle };\n//# sourceMappingURL=background.js.map", "import Block from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport Cursor from '../blots/cursor.js';\nimport Inline from '../blots/inline.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport Container from '../blots/container.js';\nimport Quill from '../core/quill.js';\nclass CodeBlockContainer extends Container {\n  static create(value) {\n    const domNode = super.create(value);\n    domNode.setAttribute('spellcheck', 'false');\n    return domNode;\n  }\n  code(index, length) {\n    return this.children\n    // @ts-expect-error\n    .map(child => child.length() <= 1 ? '' : child.domNode.innerText).join('\\n').slice(index, index + length);\n  }\n  html(index, length) {\n    // `\\n`s are needed in order to support empty lines at the beginning and the end.\n    // https://html.spec.whatwg.org/multipage/syntax.html#element-restrictions\n    return `<pre>\\n${escapeText(this.code(index, length))}\\n</pre>`;\n  }\n}\nclass CodeBlock extends Block {\n  static TAB = '  ';\n  static register() {\n    Quill.register(CodeBlockContainer);\n  }\n}\nclass Code extends Inline {}\nCode.blotName = 'code';\nCode.tagName = 'CODE';\nCodeBlock.blotName = 'code-block';\nCodeBlock.className = 'ql-code-block';\nCodeBlock.tagName = 'DIV';\nCodeBlockContainer.blotName = 'code-block-container';\nCodeBlockContainer.className = 'ql-code-block-container';\nCodeBlockContainer.tagName = 'DIV';\nCodeBlockContainer.allowedChildren = [CodeBlock];\nCodeBlock.allowedChildren = [TextBlot, Break, Cursor];\nCodeBlock.requiredContainer = CodeBlockContainer;\nexport { Code, CodeBlockContainer, CodeBlock as default };\n//# sourceMappingURL=code.js.map", "import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['rtl']\n};\nconst DirectionAttribute = new Attributor('direction', 'dir', config);\nconst DirectionClass = new ClassAttributor('direction', 'ql-direction', config);\nconst DirectionStyle = new StyleAttributor('direction', 'direction', config);\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\n//# sourceMappingURL=direction.js.map", "import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\nconst config = {\n  scope: Scope.INLINE,\n  whitelist: ['serif', 'monospace']\n};\nconst FontClass = new ClassAttributor('font', 'ql-font', config);\nclass FontStyleAttributor extends StyleAttributor {\n  value(node) {\n    return super.value(node).replace(/[\"']/g, '');\n  }\n}\nconst FontStyle = new FontStyleAttributor('font', 'font-family', config);\nexport { FontStyle, FontClass };\n//# sourceMappingURL=font.js.map", "import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\nconst SizeClass = new ClassAttributor('size', 'ql-size', {\n  scope: Scope.INLINE,\n  whitelist: ['small', 'large', 'huge']\n});\nconst SizeStyle = new StyleAttributor('size', 'font-size', {\n  scope: Scope.INLINE,\n  whitelist: ['10px', '18px', '32px']\n});\nexport { SizeClass, SizeStyle };\n//# sourceMappingURL=size.js.map", "import { cloneDeep, isEqual } from 'lodash-es';\nimport Delta, { AttributeMap } from 'quill-delta';\nimport { EmbedBlot, Scope, TextBlot } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nconst debug = logger('quill:keyboard');\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\nclass Keyboard extends Module {\n  static match(evt, binding) {\n    if (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(key => {\n      return !!binding[key] !== evt[key] && binding[key] !== null;\n    })) {\n      return false;\n    }\n    return binding.key === evt.key || binding.key === evt.which;\n  }\n  constructor(quill, options) {\n    super(quill, options);\n    this.bindings = {};\n    // @ts-expect-error Fix me later\n    Object.keys(this.options.bindings).forEach(name => {\n      // @ts-expect-error Fix me later\n      if (this.options.bindings[name]) {\n        // @ts-expect-error Fix me later\n        this.addBinding(this.options.bindings[name]);\n      }\n    });\n    this.addBinding({\n      key: 'Enter',\n      shiftKey: null\n    }, this.handleEnter);\n    this.addBinding({\n      key: 'Enter',\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null\n    }, () => {});\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      this.addBinding({\n        key: 'Backspace'\n      }, {\n        collapsed: true\n      }, this.handleBackspace);\n      this.addBinding({\n        key: 'Delete'\n      }, {\n        collapsed: true\n      }, this.handleDelete);\n    } else {\n      this.addBinding({\n        key: 'Backspace'\n      }, {\n        collapsed: true,\n        prefix: /^.?$/\n      }, this.handleBackspace);\n      this.addBinding({\n        key: 'Delete'\n      }, {\n        collapsed: true,\n        suffix: /^.?$/\n      }, this.handleDelete);\n    }\n    this.addBinding({\n      key: 'Backspace'\n    }, {\n      collapsed: false\n    }, this.handleDeleteRange);\n    this.addBinding({\n      key: 'Delete'\n    }, {\n      collapsed: false\n    }, this.handleDeleteRange);\n    this.addBinding({\n      key: 'Backspace',\n      altKey: null,\n      ctrlKey: null,\n      metaKey: null,\n      shiftKey: null\n    }, {\n      collapsed: true,\n      offset: 0\n    }, this.handleBackspace);\n    this.listen();\n  }\n  addBinding(keyBinding) {\n    let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let handler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const binding = normalize(keyBinding);\n    if (binding == null) {\n      debug.warn('Attempted to add invalid keyboard binding', binding);\n      return;\n    }\n    if (typeof context === 'function') {\n      context = {\n        handler: context\n      };\n    }\n    if (typeof handler === 'function') {\n      handler = {\n        handler\n      };\n    }\n    const keys = Array.isArray(binding.key) ? binding.key : [binding.key];\n    keys.forEach(key => {\n      const singleBinding = {\n        ...binding,\n        key,\n        ...context,\n        ...handler\n      };\n      this.bindings[singleBinding.key] = this.bindings[singleBinding.key] || [];\n      this.bindings[singleBinding.key].push(singleBinding);\n    });\n  }\n  listen() {\n    this.quill.root.addEventListener('keydown', evt => {\n      if (evt.defaultPrevented || evt.isComposing) return;\n\n      // evt.isComposing is false when pressing Enter/Backspace when composing in Safari\n      // https://bugs.webkit.org/show_bug.cgi?id=165004\n      const isComposing = evt.keyCode === 229 && (evt.key === 'Enter' || evt.key === 'Backspace');\n      if (isComposing) return;\n      const bindings = (this.bindings[evt.key] || []).concat(this.bindings[evt.which] || []);\n      const matches = bindings.filter(binding => Keyboard.match(evt, binding));\n      if (matches.length === 0) return;\n      // @ts-expect-error\n      const blot = Quill.find(evt.target, true);\n      if (blot && blot.scroll !== this.quill.scroll) return;\n      const range = this.quill.getSelection();\n      if (range == null || !this.quill.hasFocus()) return;\n      const [line, offset] = this.quill.getLine(range.index);\n      const [leafStart, offsetStart] = this.quill.getLeaf(range.index);\n      const [leafEnd, offsetEnd] = range.length === 0 ? [leafStart, offsetStart] : this.quill.getLeaf(range.index + range.length);\n      const prefixText = leafStart instanceof TextBlot ? leafStart.value().slice(0, offsetStart) : '';\n      const suffixText = leafEnd instanceof TextBlot ? leafEnd.value().slice(offsetEnd) : '';\n      const curContext = {\n        collapsed: range.length === 0,\n        // @ts-expect-error Fix me later\n        empty: range.length === 0 && line.length() <= 1,\n        format: this.quill.getFormat(range),\n        line,\n        offset,\n        prefix: prefixText,\n        suffix: suffixText,\n        event: evt\n      };\n      const prevented = matches.some(binding => {\n        if (binding.collapsed != null && binding.collapsed !== curContext.collapsed) {\n          return false;\n        }\n        if (binding.empty != null && binding.empty !== curContext.empty) {\n          return false;\n        }\n        if (binding.offset != null && binding.offset !== curContext.offset) {\n          return false;\n        }\n        if (Array.isArray(binding.format)) {\n          // any format is present\n          if (binding.format.every(name => curContext.format[name] == null)) {\n            return false;\n          }\n        } else if (typeof binding.format === 'object') {\n          // all formats must match\n          if (!Object.keys(binding.format).every(name => {\n            // @ts-expect-error Fix me later\n            if (binding.format[name] === true) return curContext.format[name] != null;\n            // @ts-expect-error Fix me later\n            if (binding.format[name] === false) return curContext.format[name] == null;\n            // @ts-expect-error Fix me later\n            return isEqual(binding.format[name], curContext.format[name]);\n          })) {\n            return false;\n          }\n        }\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) {\n          return false;\n        }\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) {\n          return false;\n        }\n        // @ts-expect-error Fix me later\n        return binding.handler.call(this, range, curContext, binding) !== true;\n      });\n      if (prevented) {\n        evt.preventDefault();\n      }\n    });\n  }\n  handleBackspace(range, context) {\n    // Check for astral symbols\n    const length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix) ? 2 : 1;\n    if (range.index === 0 || this.quill.getLength() <= 1) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index - length).delete(length);\n    if (context.offset === 0) {\n      // Always deleting newline here, length always 1\n      const [prev] = this.quill.getLine(range.index - 1);\n      if (prev) {\n        const isPrevLineEmpty = prev.statics.blotName === 'block' && prev.length() <= 1;\n        if (!isPrevLineEmpty) {\n          // @ts-expect-error Fix me later\n          const curFormats = line.formats();\n          const prevFormats = this.quill.getFormat(range.index - 1, 1);\n          formats = AttributeMap.diff(curFormats, prevFormats) || {};\n          if (Object.keys(formats).length > 0) {\n            // line.length() - 1 targets \\n in line, another -1 for newline being deleted\n            const formatDelta = new Delta()\n            // @ts-expect-error Fix me later\n            .retain(range.index + line.length() - 2).retain(1, formats);\n            delta = delta.compose(formatDelta);\n          }\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n  handleDelete(range, context) {\n    // Check for astral symbols\n    const length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix) ? 2 : 1;\n    if (range.index >= this.quill.getLength() - length) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index).delete(length);\n    // @ts-expect-error Fix me later\n    if (context.offset >= line.length() - 1) {\n      const [next] = this.quill.getLine(range.index + 1);\n      if (next) {\n        // @ts-expect-error Fix me later\n        const curFormats = line.formats();\n        const nextFormats = this.quill.getFormat(range.index, 1);\n        formats = AttributeMap.diff(curFormats, nextFormats) || {};\n        if (Object.keys(formats).length > 0) {\n          delta = delta.retain(next.length() - 1).retain(1, formats);\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n  handleDeleteRange(range) {\n    deleteRange({\n      range,\n      quill: this.quill\n    });\n    this.quill.focus();\n  }\n  handleEnter(range, context) {\n    const lineFormats = Object.keys(context.format).reduce((formats, format) => {\n      if (this.quill.scroll.query(format, Scope.BLOCK) && !Array.isArray(context.format[format])) {\n        formats[format] = context.format[format];\n      }\n      return formats;\n    }, {});\n    const delta = new Delta().retain(range.index).delete(range.length).insert('\\n', lineFormats);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n    this.quill.focus();\n  }\n}\nconst defaultOptions = {\n  bindings: {\n    bold: makeFormatHandler('bold'),\n    italic: makeFormatHandler('italic'),\n    underline: makeFormatHandler('underline'),\n    indent: {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: 'Tab',\n      format: ['blockquote', 'indent', 'list'],\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', Quill.sources.USER);\n        return false;\n      }\n    },\n    outdent: {\n      key: 'Tab',\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', Quill.sources.USER);\n        return false;\n      }\n    },\n    'outdent backspace': {\n      key: 'Backspace',\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', Quill.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, Quill.sources.USER);\n        }\n      }\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: 'Tab',\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler(range) {\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\n      }\n    },\n    tab: {\n      key: 'Tab',\n      handler(range, context) {\n        if (context.format.table) return true;\n        this.quill.history.cutoff();\n        const delta = new Delta().retain(range.index).delete(range.length).insert('\\t');\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        return false;\n      }\n    },\n    'blockquote empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['blockquote'],\n      empty: true,\n      handler() {\n        this.quill.format('blockquote', false, Quill.sources.USER);\n      }\n    },\n    'list empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler(range, context) {\n        const formats = {\n          list: false\n        };\n        if (context.format.indent) {\n          formats.indent = false;\n        }\n        this.quill.formatLine(range.index, range.length, formats, Quill.sources.USER);\n      }\n    },\n    'checklist enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: {\n        list: 'checked'\n      },\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const formats = {\n          // @ts-expect-error Fix me later\n          ...line.formats(),\n          list: 'checked'\n        };\n        const delta = new Delta().retain(range.index).insert('\\n', formats)\n        // @ts-expect-error Fix me later\n        .retain(line.length() - offset - 1).retain(1, {\n          list: 'unchecked'\n        });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      }\n    },\n    'header enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler(range, context) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const delta = new Delta().retain(range.index).insert('\\n', context.format)\n        // @ts-expect-error Fix me later\n        .retain(line.length() - offset - 1).retain(1, {\n          header: null\n        });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      }\n    },\n    'table backspace': {\n      key: 'Backspace',\n      format: ['table'],\n      collapsed: true,\n      offset: 0,\n      handler() {}\n    },\n    'table delete': {\n      key: 'Delete',\n      format: ['table'],\n      collapsed: true,\n      suffix: /^$/,\n      handler() {}\n    },\n    'table enter': {\n      key: 'Enter',\n      shiftKey: null,\n      format: ['table'],\n      handler(range) {\n        const module = this.quill.getModule('table');\n        if (module) {\n          // @ts-expect-error\n          const [table, row, cell, offset] = module.getTable(range);\n          const shift = tableSide(table, row, cell, offset);\n          if (shift == null) return;\n          let index = table.offset();\n          if (shift < 0) {\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(range.index + 1, range.length, Quill.sources.SILENT);\n          } else if (shift > 0) {\n            index += table.length();\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(index, Quill.sources.USER);\n          }\n        }\n      }\n    },\n    'table tab': {\n      key: 'Tab',\n      shiftKey: null,\n      format: ['table'],\n      handler(range, context) {\n        const {\n          event,\n          line: cell\n        } = context;\n        const offset = cell.offset(this.quill.scroll);\n        if (event.shiftKey) {\n          this.quill.setSelection(offset - 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(offset + cell.length(), Quill.sources.USER);\n        }\n      }\n    },\n    'list autofill': {\n      key: ' ',\n      shiftKey: null,\n      collapsed: true,\n      format: {\n        'code-block': false,\n        blockquote: false,\n        table: false\n      },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler(range, context) {\n        if (this.quill.scroll.query('list') == null) return true;\n        const {\n          length\n        } = context.prefix;\n        const [line, offset] = this.quill.getLine(range.index);\n        if (offset > length) return true;\n        let value;\n        switch (context.prefix.trim()) {\n          case '[]':\n          case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-':\n          case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\n        this.quill.history.cutoff();\n        const delta = new Delta().retain(range.index - offset).delete(length + 1)\n        // @ts-expect-error Fix me later\n        .retain(line.length() - 2 - offset).retain(1, {\n          list: value\n        });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\n        return false;\n      }\n    },\n    'code exit': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /^$/,\n      suffix: /^\\s*$/,\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        let numLines = 2;\n        let cur = line;\n        while (cur != null && cur.length() <= 1 && cur.formats()['code-block']) {\n          // @ts-expect-error\n          cur = cur.prev;\n          numLines -= 1;\n          // Requisite prev lines are empty\n          if (numLines <= 0) {\n            const delta = new Delta()\n            // @ts-expect-error Fix me later\n            .retain(range.index + line.length() - offset - 2).retain(1, {\n              'code-block': null\n            }).delete(1);\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(range.index - 1, Quill.sources.SILENT);\n            return false;\n          }\n        }\n        return true;\n      }\n    },\n    'embed left': makeEmbedArrowHandler('ArrowLeft', false),\n    'embed left shift': makeEmbedArrowHandler('ArrowLeft', true),\n    'embed right': makeEmbedArrowHandler('ArrowRight', false),\n    'embed right shift': makeEmbedArrowHandler('ArrowRight', true),\n    'table down': makeTableArrowHandler(false),\n    'table up': makeTableArrowHandler(true)\n  }\n};\nKeyboard.DEFAULTS = defaultOptions;\nfunction makeCodeBlockHandler(indent) {\n  return {\n    key: 'Tab',\n    shiftKey: !indent,\n    format: {\n      'code-block': true\n    },\n    handler(range, _ref) {\n      let {\n        event\n      } = _ref;\n      const CodeBlock = this.quill.scroll.query('code-block');\n      // @ts-expect-error\n      const {\n        TAB\n      } = CodeBlock;\n      if (range.length === 0 && !event.shiftKey) {\n        this.quill.insertText(range.index, TAB, Quill.sources.USER);\n        this.quill.setSelection(range.index + TAB.length, Quill.sources.SILENT);\n        return;\n      }\n      const lines = range.length === 0 ? this.quill.getLines(range.index, 1) : this.quill.getLines(range);\n      let {\n        index,\n        length\n      } = range;\n      lines.forEach((line, i) => {\n        if (indent) {\n          line.insertAt(0, TAB);\n          if (i === 0) {\n            index += TAB.length;\n          } else {\n            length += TAB.length;\n          }\n          // @ts-expect-error Fix me later\n        } else if (line.domNode.textContent.startsWith(TAB)) {\n          line.deleteAt(0, TAB.length);\n          if (i === 0) {\n            index -= TAB.length;\n          } else {\n            length -= TAB.length;\n          }\n        }\n      });\n      this.quill.update(Quill.sources.USER);\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\n    }\n  };\n}\nfunction makeEmbedArrowHandler(key, shiftKey) {\n  const where = key === 'ArrowLeft' ? 'prefix' : 'suffix';\n  return {\n    key,\n    shiftKey,\n    altKey: null,\n    [where]: /^$/,\n    handler(range) {\n      let {\n        index\n      } = range;\n      if (key === 'ArrowRight') {\n        index += range.length + 1;\n      }\n      const [leaf] = this.quill.getLeaf(index);\n      if (!(leaf instanceof EmbedBlot)) return true;\n      if (key === 'ArrowLeft') {\n        if (shiftKey) {\n          this.quill.setSelection(range.index - 1, range.length + 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\n        }\n      } else if (shiftKey) {\n        this.quill.setSelection(range.index, range.length + 1, Quill.sources.USER);\n      } else {\n        this.quill.setSelection(range.index + range.length + 1, Quill.sources.USER);\n      }\n      return false;\n    }\n  };\n}\nfunction makeFormatHandler(format) {\n  return {\n    key: format[0],\n    shortKey: true,\n    handler(range, context) {\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\n    }\n  };\n}\nfunction makeTableArrowHandler(up) {\n  return {\n    key: up ? 'ArrowUp' : 'ArrowDown',\n    collapsed: true,\n    format: ['table'],\n    handler(range, context) {\n      // TODO move to table module\n      const key = up ? 'prev' : 'next';\n      const cell = context.line;\n      const targetRow = cell.parent[key];\n      if (targetRow != null) {\n        if (targetRow.statics.blotName === 'table-row') {\n          // @ts-expect-error\n          let targetCell = targetRow.children.head;\n          let cur = cell;\n          while (cur.prev != null) {\n            // @ts-expect-error\n            cur = cur.prev;\n            targetCell = targetCell.next;\n          }\n          const index = targetCell.offset(this.quill.scroll) + Math.min(context.offset, targetCell.length() - 1);\n          this.quill.setSelection(index, 0, Quill.sources.USER);\n        }\n      } else {\n        // @ts-expect-error\n        const targetLine = cell.table()[key];\n        if (targetLine != null) {\n          if (up) {\n            this.quill.setSelection(targetLine.offset(this.quill.scroll) + targetLine.length() - 1, 0, Quill.sources.USER);\n          } else {\n            this.quill.setSelection(targetLine.offset(this.quill.scroll), 0, Quill.sources.USER);\n          }\n        }\n      }\n      return false;\n    }\n  };\n}\nfunction normalize(binding) {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    binding = {\n      key: binding\n    };\n  } else if (typeof binding === 'object') {\n    binding = cloneDeep(binding);\n  } else {\n    return null;\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\n// TODO: Move into quill.ts or editor.ts\nfunction deleteRange(_ref2) {\n  let {\n    quill,\n    range\n  } = _ref2;\n  const lines = quill.getLines(range);\n  let formats = {};\n  if (lines.length > 1) {\n    const firstFormats = lines[0].formats();\n    const lastFormats = lines[lines.length - 1].formats();\n    formats = AttributeMap.diff(lastFormats, firstFormats) || {};\n  }\n  quill.deleteText(range, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    quill.formatLine(range.index, 1, formats, Quill.sources.USER);\n  }\n  quill.setSelection(range.index, Quill.sources.SILENT);\n}\nfunction tableSide(_table, row, cell, offset) {\n  if (row.prev == null && row.next == null) {\n    if (cell.prev == null && cell.next == null) {\n      return offset === 0 ? -1 : 1;\n    }\n    return cell.prev == null ? -1 : 1;\n  }\n  if (row.prev == null) {\n    return -1;\n  }\n  if (row.next == null) {\n    return 1;\n  }\n  return null;\n}\nexport { Keyboard as default, SHORTKEY, normalize, deleteRange };\n//# sourceMappingURL=keyboard.js.map", "const normalWeightRegexp = /font-weight:\\s*normal/;\nconst blockTagNames = ['P', 'OL', 'UL'];\nconst isBlockElement = element => {\n  return element && blockTagNames.includes(element.tagName);\n};\nconst normalizeEmptyLines = doc => {\n  Array.from(doc.querySelectorAll('br')).filter(br => isBlockElement(br.previousElementSibling) && isBlockElement(br.nextElementSibling)).forEach(br => {\n    br.parentNode?.removeChild(br);\n  });\n};\nconst normalizeFontWeight = doc => {\n  Array.from(doc.querySelectorAll('b[style*=\"font-weight\"]')).filter(node => node.getAttribute('style')?.match(normalWeightRegexp)).forEach(node => {\n    const fragment = doc.createDocumentFragment();\n    fragment.append(...node.childNodes);\n    node.parentNode?.replaceChild(fragment, node);\n  });\n};\nexport default function normalize(doc) {\n  if (doc.querySelector('[id^=\"docs-internal-guid-\"]')) {\n    normalizeFontWeight(doc);\n    normalizeEmptyLines(doc);\n  }\n}\n//# sourceMappingURL=googleDocs.js.map", "const ignoreRegexp = /\\bmso-list:[^;]*ignore/i;\nconst idRegexp = /\\bmso-list:[^;]*\\bl(\\d+)/i;\nconst indentRegexp = /\\bmso-list:[^;]*\\blevel(\\d+)/i;\nconst parseListItem = (element, html) => {\n  const style = element.getAttribute('style');\n  const idMatch = style?.match(idRegexp);\n  if (!idMatch) {\n    return null;\n  }\n  const id = Number(idMatch[1]);\n  const indentMatch = style?.match(indentRegexp);\n  const indent = indentMatch ? Number(indentMatch[1]) : 1;\n  const typeRegexp = new RegExp(`@list l${id}:level${indent}\\\\s*\\\\{[^\\\\}]*mso-level-number-format:\\\\s*([\\\\w-]+)`, 'i');\n  const typeMatch = html.match(typeRegexp);\n  const type = typeMatch && typeMatch[1] === 'bullet' ? 'bullet' : 'ordered';\n  return {\n    id,\n    indent,\n    type,\n    element\n  };\n};\n\n// list items are represented as `p` tags with styles like `mso-list: l0 level1` where:\n// 1. \"0\" in \"l0\" means the list item id;\n// 2. \"1\" in \"level1\" means the indent level, starting from 1.\nconst normalizeListItem = doc => {\n  const msoList = Array.from(doc.querySelectorAll('[style*=mso-list]'));\n  const ignored = [];\n  const others = [];\n  msoList.forEach(node => {\n    const shouldIgnore = (node.getAttribute('style') || '').match(ignoreRegexp);\n    if (shouldIgnore) {\n      ignored.push(node);\n    } else {\n      others.push(node);\n    }\n  });\n\n  // Each list item contains a marker wrapped with \"mso-list: Ignore\".\n  ignored.forEach(node => node.parentNode?.removeChild(node));\n\n  // The list stype is not defined inline with the tag, instead, it's in the\n  // style tag so we need to pass the html as a string.\n  const html = doc.documentElement.innerHTML;\n  const listItems = others.map(element => parseListItem(element, html)).filter(parsed => parsed);\n  while (listItems.length) {\n    const childListItems = [];\n    let current = listItems.shift();\n    // Group continuous items into the same group (aka \"ul\")\n    while (current) {\n      childListItems.push(current);\n      current = listItems.length && listItems[0]?.element === current.element.nextElementSibling &&\n      // Different id means the next item doesn't belong to this group.\n      listItems[0].id === current.id ? listItems.shift() : null;\n    }\n    const ul = document.createElement('ul');\n    childListItems.forEach(listItem => {\n      const li = document.createElement('li');\n      li.setAttribute('data-list', listItem.type);\n      if (listItem.indent > 1) {\n        li.setAttribute('class', `ql-indent-${listItem.indent - 1}`);\n      }\n      li.innerHTML = listItem.element.innerHTML;\n      ul.appendChild(li);\n    });\n    const element = childListItems[0]?.element;\n    const {\n      parentNode\n    } = element ?? {};\n    if (element) {\n      parentNode?.replaceChild(ul, element);\n    }\n    childListItems.slice(1).forEach(_ref => {\n      let {\n        element: e\n      } = _ref;\n      parentNode?.removeChild(e);\n    });\n  }\n};\nexport default function normalize(doc) {\n  if (doc.documentElement.getAttribute('xmlns:w') === 'urn:schemas-microsoft-com:office:word') {\n    normalizeListItem(doc);\n  }\n}\n//# sourceMappingURL=msWord.js.map", "import googleDocs from './normalizers/googleDocs.js';\nimport msWord from './normalizers/msWord.js';\nconst NORMALIZERS = [msWord, googleDocs];\nconst normalizeExternalHTML = doc => {\n  if (doc.documentElement) {\n    NORMALIZERS.forEach(normalize => {\n      normalize(doc);\n    });\n  }\n};\nexport default normalizeExternalHTML;\n//# sourceMappingURL=index.js.map", "import { Attributor, BlockBlot, ClassAttributor, EmbedBlot, Scope, StyleAttributor } from 'parchment';\nimport Delta from 'quill-delta';\nimport { BlockEmbed } from '../blots/block.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport { AlignAttribute, AlignStyle } from '../formats/align.js';\nimport { BackgroundStyle } from '../formats/background.js';\nimport CodeBlock from '../formats/code.js';\nimport { ColorStyle } from '../formats/color.js';\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction.js';\nimport { FontStyle } from '../formats/font.js';\nimport { SizeStyle } from '../formats/size.js';\nimport { deleteRange } from './keyboard.js';\nimport normalizeExternalHTML from './normalizeExternalHTML/index.js';\nconst debug = logger('quill:clipboard');\nconst CLIPBOARD_CONFIG = [[Node.TEXT_NODE, matchText], [Node.TEXT_NODE, matchNewline], ['br', matchBreak], [Node.ELEMENT_NODE, matchNewline], [Node.ELEMENT_NODE, matchBlot], [Node.ELEMENT_NODE, matchAttributor], [Node.ELEMENT_NODE, matchStyles], ['li', matchIndent], ['ol, ul', matchList], ['pre', matchCodeBlock], ['tr', matchTable], ['b', createMatchAlias('bold')], ['i', createMatchAlias('italic')], ['strike', createMatchAlias('strike')], ['style', matchIgnore]];\nconst ATTRIBUTE_ATTRIBUTORS = [AlignAttribute, DirectionAttribute].reduce((memo, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\nconst STYLE_ATTRIBUTORS = [AlignStyle, BackgroundStyle, ColorStyle, DirectionStyle, FontStyle, SizeStyle].reduce((memo, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\nclass Clipboard extends Module {\n  static DEFAULTS = {\n    matchers: []\n  };\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill.root.addEventListener('copy', e => this.onCaptureCopy(e, false));\n    this.quill.root.addEventListener('cut', e => this.onCaptureCopy(e, true));\n    this.quill.root.addEventListener('paste', this.onCapturePaste.bind(this));\n    this.matchers = [];\n    CLIPBOARD_CONFIG.concat(this.options.matchers ?? []).forEach(_ref => {\n      let [selector, matcher] = _ref;\n      this.addMatcher(selector, matcher);\n    });\n  }\n  addMatcher(selector, matcher) {\n    this.matchers.push([selector, matcher]);\n  }\n  convert(_ref2) {\n    let {\n      html,\n      text\n    } = _ref2;\n    let formats = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (formats[CodeBlock.blotName]) {\n      return new Delta().insert(text || '', {\n        [CodeBlock.blotName]: formats[CodeBlock.blotName]\n      });\n    }\n    if (!html) {\n      return new Delta().insert(text || '', formats);\n    }\n    const delta = this.convertHTML(html);\n    // Remove trailing newline\n    if (deltaEndsWith(delta, '\\n') && (delta.ops[delta.ops.length - 1].attributes == null || formats.table)) {\n      return delta.compose(new Delta().retain(delta.length() - 1).delete(1));\n    }\n    return delta;\n  }\n  normalizeHTML(doc) {\n    normalizeExternalHTML(doc);\n  }\n  convertHTML(html) {\n    const doc = new DOMParser().parseFromString(html, 'text/html');\n    this.normalizeHTML(doc);\n    const container = doc.body;\n    const nodeMatches = new WeakMap();\n    const [elementMatchers, textMatchers] = this.prepareMatching(container, nodeMatches);\n    return traverse(this.quill.scroll, container, elementMatchers, textMatchers, nodeMatches);\n  }\n  dangerouslyPasteHTML(index, html) {\n    let source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Quill.sources.API;\n    if (typeof index === 'string') {\n      const delta = this.convert({\n        html: index,\n        text: ''\n      });\n      // @ts-expect-error\n      this.quill.setContents(delta, html);\n      this.quill.setSelection(0, Quill.sources.SILENT);\n    } else {\n      const paste = this.convert({\n        html,\n        text: ''\n      });\n      this.quill.updateContents(new Delta().retain(index).concat(paste), source);\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\n    }\n  }\n  onCaptureCopy(e) {\n    let isCut = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (e.defaultPrevented) return;\n    e.preventDefault();\n    const [range] = this.quill.selection.getRange();\n    if (range == null) return;\n    const {\n      html,\n      text\n    } = this.onCopy(range, isCut);\n    e.clipboardData?.setData('text/plain', text);\n    e.clipboardData?.setData('text/html', html);\n    if (isCut) {\n      deleteRange({\n        range,\n        quill: this.quill\n      });\n    }\n  }\n\n  /*\n   * https://www.iana.org/assignments/media-types/text/uri-list\n   */\n  normalizeURIList(urlList) {\n    return urlList.split(/\\r?\\n/)\n    // Ignore all comments\n    .filter(url => url[0] !== '#').join('\\n');\n  }\n  onCapturePaste(e) {\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\n    e.preventDefault();\n    const range = this.quill.getSelection(true);\n    if (range == null) return;\n    const html = e.clipboardData?.getData('text/html');\n    let text = e.clipboardData?.getData('text/plain');\n    if (!html && !text) {\n      const urlList = e.clipboardData?.getData('text/uri-list');\n      if (urlList) {\n        text = this.normalizeURIList(urlList);\n      }\n    }\n    const files = Array.from(e.clipboardData?.files || []);\n    if (!html && files.length > 0) {\n      this.quill.uploader.upload(range, files);\n      return;\n    }\n    if (html && files.length > 0) {\n      const doc = new DOMParser().parseFromString(html, 'text/html');\n      if (doc.body.childElementCount === 1 && doc.body.firstElementChild?.tagName === 'IMG') {\n        this.quill.uploader.upload(range, files);\n        return;\n      }\n    }\n    this.onPaste(range, {\n      html,\n      text\n    });\n  }\n  onCopy(range) {\n    const text = this.quill.getText(range);\n    const html = this.quill.getSemanticHTML(range);\n    return {\n      html,\n      text\n    };\n  }\n  onPaste(range, _ref3) {\n    let {\n      text,\n      html\n    } = _ref3;\n    const formats = this.quill.getFormat(range.index);\n    const pastedDelta = this.convert({\n      text,\n      html\n    }, formats);\n    debug.log('onPaste', pastedDelta, {\n      text,\n      html\n    });\n    const delta = new Delta().retain(range.index).delete(range.length).concat(pastedDelta);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    // range.length contributes to delta.length()\n    this.quill.setSelection(delta.length() - range.length, Quill.sources.SILENT);\n    this.quill.scrollSelectionIntoView();\n  }\n  prepareMatching(container, nodeMatches) {\n    const elementMatchers = [];\n    const textMatchers = [];\n    this.matchers.forEach(pair => {\n      const [selector, matcher] = pair;\n      switch (selector) {\n        case Node.TEXT_NODE:\n          textMatchers.push(matcher);\n          break;\n        case Node.ELEMENT_NODE:\n          elementMatchers.push(matcher);\n          break;\n        default:\n          Array.from(container.querySelectorAll(selector)).forEach(node => {\n            if (nodeMatches.has(node)) {\n              const matches = nodeMatches.get(node);\n              matches?.push(matcher);\n            } else {\n              nodeMatches.set(node, [matcher]);\n            }\n          });\n          break;\n      }\n    });\n    return [elementMatchers, textMatchers];\n  }\n}\nfunction applyFormat(delta, format, value, scroll) {\n  if (!scroll.query(format)) {\n    return delta;\n  }\n  return delta.reduce((newDelta, op) => {\n    if (!op.insert) return newDelta;\n    if (op.attributes && op.attributes[format]) {\n      return newDelta.push(op);\n    }\n    const formats = value ? {\n      [format]: value\n    } : {};\n    return newDelta.insert(op.insert, {\n      ...formats,\n      ...op.attributes\n    });\n  }, new Delta());\n}\nfunction deltaEndsWith(delta, text) {\n  let endText = '';\n  for (let i = delta.ops.length - 1; i >= 0 && endText.length < text.length; --i // eslint-disable-line no-plusplus\n  ) {\n    const op = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1 * text.length) === text;\n}\nfunction isLine(node, scroll) {\n  if (!(node instanceof Element)) return false;\n  const match = scroll.query(node);\n  // @ts-expect-error\n  if (match && match.prototype instanceof EmbedBlot) return false;\n  return ['address', 'article', 'blockquote', 'canvas', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'iframe', 'li', 'main', 'nav', 'ol', 'output', 'p', 'pre', 'section', 'table', 'td', 'tr', 'ul', 'video'].includes(node.tagName.toLowerCase());\n}\nfunction isBetweenInlineElements(node, scroll) {\n  return node.previousElementSibling && node.nextElementSibling && !isLine(node.previousElementSibling, scroll) && !isLine(node.nextElementSibling, scroll);\n}\nconst preNodes = new WeakMap();\nfunction isPre(node) {\n  if (node == null) return false;\n  if (!preNodes.has(node)) {\n    // @ts-expect-error\n    if (node.tagName === 'PRE') {\n      preNodes.set(node, true);\n    } else {\n      preNodes.set(node, isPre(node.parentNode));\n    }\n  }\n  return preNodes.get(node);\n}\nfunction traverse(scroll, node, elementMatchers, textMatchers, nodeMatches) {\n  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce((delta, matcher) => {\n      return matcher(node, delta, scroll);\n    }, new Delta());\n  }\n  if (node.nodeType === node.ELEMENT_NODE) {\n    return Array.from(node.childNodes || []).reduce((delta, childNode) => {\n      let childrenDelta = traverse(scroll, childNode, elementMatchers, textMatchers, nodeMatches);\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce((reducedDelta, matcher) => {\n          return matcher(childNode, reducedDelta, scroll);\n        }, childrenDelta);\n        childrenDelta = (nodeMatches.get(childNode) || []).reduce((reducedDelta, matcher) => {\n          return matcher(childNode, reducedDelta, scroll);\n        }, childrenDelta);\n      }\n      return delta.concat(childrenDelta);\n    }, new Delta());\n  }\n  return new Delta();\n}\nfunction createMatchAlias(format) {\n  return (_node, delta, scroll) => {\n    return applyFormat(delta, format, true, scroll);\n  };\n}\nfunction matchAttributor(node, delta, scroll) {\n  const attributes = Attributor.keys(node);\n  const classes = ClassAttributor.keys(node);\n  const styles = StyleAttributor.keys(node);\n  const formats = {};\n  attributes.concat(classes).concat(styles).forEach(name => {\n    let attr = scroll.query(name, Scope.ATTRIBUTE);\n    if (attr != null) {\n      formats[attr.attrName] = attr.value(node);\n      if (formats[attr.attrName]) return;\n    }\n    attr = ATTRIBUTE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n    attr = STYLE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      attr = STYLE_ATTRIBUTORS[name];\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n  });\n  return Object.entries(formats).reduce((newDelta, _ref4) => {\n    let [name, value] = _ref4;\n    return applyFormat(newDelta, name, value, scroll);\n  }, delta);\n}\nfunction matchBlot(node, delta, scroll) {\n  const match = scroll.query(node);\n  if (match == null) return delta;\n  // @ts-expect-error\n  if (match.prototype instanceof EmbedBlot) {\n    const embed = {};\n    // @ts-expect-error\n    const value = match.value(node);\n    if (value != null) {\n      // @ts-expect-error\n      embed[match.blotName] = value;\n      // @ts-expect-error\n      return new Delta().insert(embed, match.formats(node, scroll));\n    }\n  } else {\n    // @ts-expect-error\n    if (match.prototype instanceof BlockBlot && !deltaEndsWith(delta, '\\n')) {\n      delta.insert('\\n');\n    }\n    if ('blotName' in match && 'formats' in match && typeof match.formats === 'function') {\n      return applyFormat(delta, match.blotName, match.formats(node, scroll), scroll);\n    }\n  }\n  return delta;\n}\nfunction matchBreak(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\nfunction matchCodeBlock(node, delta, scroll) {\n  const match = scroll.query('code-block');\n  const language = match && 'formats' in match && typeof match.formats === 'function' ? match.formats(node, scroll) : true;\n  return applyFormat(delta, 'code-block', language, scroll);\n}\nfunction matchIgnore() {\n  return new Delta();\n}\nfunction matchIndent(node, delta, scroll) {\n  const match = scroll.query(node);\n  if (match == null ||\n  // @ts-expect-error\n  match.blotName !== 'list' || !deltaEndsWith(delta, '\\n')) {\n    return delta;\n  }\n  let indent = -1;\n  let parent = node.parentNode;\n  while (parent != null) {\n    // @ts-expect-error\n    if (['OL', 'UL'].includes(parent.tagName)) {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.reduce((composed, op) => {\n    if (!op.insert) return composed;\n    if (op.attributes && typeof op.attributes.indent === 'number') {\n      return composed.push(op);\n    }\n    return composed.insert(op.insert, {\n      indent,\n      ...(op.attributes || {})\n    });\n  }, new Delta());\n}\nfunction matchList(node, delta, scroll) {\n  const element = node;\n  let list = element.tagName === 'OL' ? 'ordered' : 'bullet';\n  const checkedAttr = element.getAttribute('data-checked');\n  if (checkedAttr) {\n    list = checkedAttr === 'true' ? 'checked' : 'unchecked';\n  }\n  return applyFormat(delta, 'list', list, scroll);\n}\nfunction matchNewline(node, delta, scroll) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (isLine(node, scroll) && (node.childNodes.length > 0 || node instanceof HTMLParagraphElement)) {\n      return delta.insert('\\n');\n    }\n    if (delta.length() > 0 && node.nextSibling) {\n      let nextSibling = node.nextSibling;\n      while (nextSibling != null) {\n        if (isLine(nextSibling, scroll)) {\n          return delta.insert('\\n');\n        }\n        const match = scroll.query(nextSibling);\n        // @ts-expect-error\n        if (match && match.prototype instanceof BlockEmbed) {\n          return delta.insert('\\n');\n        }\n        nextSibling = nextSibling.firstChild;\n      }\n    }\n  }\n  return delta;\n}\nfunction matchStyles(node, delta, scroll) {\n  const formats = {};\n  const style = node.style || {};\n  if (style.fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.textDecoration === 'underline') {\n    formats.underline = true;\n  }\n  if (style.textDecoration === 'line-through') {\n    formats.strike = true;\n  }\n  if (style.fontWeight?.startsWith('bold') ||\n  // @ts-expect-error Fix me later\n  parseInt(style.fontWeight, 10) >= 700) {\n    formats.bold = true;\n  }\n  delta = Object.entries(formats).reduce((newDelta, _ref5) => {\n    let [name, value] = _ref5;\n    return applyFormat(newDelta, name, value, scroll);\n  }, delta);\n  // @ts-expect-error\n  if (parseFloat(style.textIndent || 0) > 0) {\n    // Could be 0.5in\n    return new Delta().insert('\\t').concat(delta);\n  }\n  return delta;\n}\nfunction matchTable(node, delta, scroll) {\n  const table = node.parentElement?.tagName === 'TABLE' ? node.parentElement : node.parentElement?.parentElement;\n  if (table != null) {\n    const rows = Array.from(table.querySelectorAll('tr'));\n    const row = rows.indexOf(node) + 1;\n    return applyFormat(delta, 'table', row, scroll);\n  }\n  return delta;\n}\nfunction matchText(node, delta, scroll) {\n  // @ts-expect-error\n  let text = node.data;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentElement?.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (!isPre(node)) {\n    if (text.trim().length === 0 && text.includes('\\n') && !isBetweenInlineElements(node, scroll)) {\n      return delta;\n    }\n    const replacer = (collapse, match) => {\n      const replaced = match.replace(/[^\\u00a0]/g, ''); // \\u00a0 is nbsp;\n      return replaced.length < 1 && collapse ? ' ' : replaced;\n    };\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true)); // collapse whitespace\n    if (node.previousSibling == null && node.parentElement != null && isLine(node.parentElement, scroll) || node.previousSibling instanceof Element && isLine(node.previousSibling, scroll)) {\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\n    }\n    if (node.nextSibling == null && node.parentElement != null && isLine(node.parentElement, scroll) || node.nextSibling instanceof Element && isLine(node.nextSibling, scroll)) {\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\n    }\n  }\n  return delta.insert(text);\n}\nexport { Clipboard as default, matchAttributor, matchBlot, matchNewline, matchText, traverse };\n//# sourceMappingURL=clipboard.js.map", "import { Scope } from 'parchment';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nclass History extends Module {\n  static DEFAULTS = {\n    delay: 1000,\n    maxStack: 100,\n    userOnly: false\n  };\n  lastRecorded = 0;\n  ignoreChange = false;\n  stack = {\n    undo: [],\n    redo: []\n  };\n  currentRange = null;\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill.on(Quill.events.EDITOR_CHANGE, (eventName, value, oldValue, source) => {\n      if (eventName === Quill.events.SELECTION_CHANGE) {\n        if (value && source !== Quill.sources.SILENT) {\n          this.currentRange = value;\n        }\n      } else if (eventName === Quill.events.TEXT_CHANGE) {\n        if (!this.ignoreChange) {\n          if (!this.options.userOnly || source === Quill.sources.USER) {\n            this.record(value, oldValue);\n          } else {\n            this.transform(value);\n          }\n        }\n        this.currentRange = transformRange(this.currentRange, value);\n      }\n    });\n    this.quill.keyboard.addBinding({\n      key: 'z',\n      shortKey: true\n    }, this.undo.bind(this));\n    this.quill.keyboard.addBinding({\n      key: ['z', 'Z'],\n      shortKey: true,\n      shiftKey: true\n    }, this.redo.bind(this));\n    if (/Win/i.test(navigator.platform)) {\n      this.quill.keyboard.addBinding({\n        key: 'y',\n        shortKey: true\n      }, this.redo.bind(this));\n    }\n    this.quill.root.addEventListener('beforeinput', event => {\n      if (event.inputType === 'historyUndo') {\n        this.undo();\n        event.preventDefault();\n      } else if (event.inputType === 'historyRedo') {\n        this.redo();\n        event.preventDefault();\n      }\n    });\n  }\n  change(source, dest) {\n    if (this.stack[source].length === 0) return;\n    const item = this.stack[source].pop();\n    if (!item) return;\n    const base = this.quill.getContents();\n    const inverseDelta = item.delta.invert(base);\n    this.stack[dest].push({\n      delta: inverseDelta,\n      range: transformRange(item.range, inverseDelta)\n    });\n    this.lastRecorded = 0;\n    this.ignoreChange = true;\n    this.quill.updateContents(item.delta, Quill.sources.USER);\n    this.ignoreChange = false;\n    this.restoreSelection(item);\n  }\n  clear() {\n    this.stack = {\n      undo: [],\n      redo: []\n    };\n  }\n  cutoff() {\n    this.lastRecorded = 0;\n  }\n  record(changeDelta, oldDelta) {\n    if (changeDelta.ops.length === 0) return;\n    this.stack.redo = [];\n    let undoDelta = changeDelta.invert(oldDelta);\n    let undoRange = this.currentRange;\n    const timestamp = Date.now();\n    if (\n    // @ts-expect-error Fix me later\n    this.lastRecorded + this.options.delay > timestamp && this.stack.undo.length > 0) {\n      const item = this.stack.undo.pop();\n      if (item) {\n        undoDelta = undoDelta.compose(item.delta);\n        undoRange = item.range;\n      }\n    } else {\n      this.lastRecorded = timestamp;\n    }\n    if (undoDelta.length() === 0) return;\n    this.stack.undo.push({\n      delta: undoDelta,\n      range: undoRange\n    });\n    // @ts-expect-error Fix me later\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n  redo() {\n    this.change('redo', 'undo');\n  }\n  transform(delta) {\n    transformStack(this.stack.undo, delta);\n    transformStack(this.stack.redo, delta);\n  }\n  undo() {\n    this.change('undo', 'redo');\n  }\n  restoreSelection(stackItem) {\n    if (stackItem.range) {\n      this.quill.setSelection(stackItem.range, Quill.sources.USER);\n    } else {\n      const index = getLastChangeIndex(this.quill.scroll, stackItem.delta);\n      this.quill.setSelection(index, Quill.sources.USER);\n    }\n  }\n}\nfunction transformStack(stack, delta) {\n  let remoteDelta = delta;\n  for (let i = stack.length - 1; i >= 0; i -= 1) {\n    const oldItem = stack[i];\n    stack[i] = {\n      delta: remoteDelta.transform(oldItem.delta, true),\n      range: oldItem.range && transformRange(oldItem.range, remoteDelta)\n    };\n    remoteDelta = oldItem.delta.transform(remoteDelta);\n    if (stack[i].delta.length() === 0) {\n      stack.splice(i, 1);\n    }\n  }\n}\nfunction endsWithNewlineChange(scroll, delta) {\n  const lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some(attr => {\n      return scroll.query(attr, Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\nfunction getLastChangeIndex(scroll, delta) {\n  const deleteLength = delta.reduce((length, op) => {\n    return length + (op.delete || 0);\n  }, 0);\n  let changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(scroll, delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\nfunction transformRange(range, delta) {\n  if (!range) return range;\n  const start = delta.transformPosition(range.index);\n  const end = delta.transformPosition(range.index + range.length);\n  return {\n    index: start,\n    length: end - start\n  };\n}\nexport { History as default, getLastChangeIndex };\n//# sourceMappingURL=history.js.map", "import Delta from 'quill-delta';\nimport Emitter from '../core/emitter.js';\nimport Module from '../core/module.js';\nclass Uploader extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    quill.root.addEventListener('drop', e => {\n      e.preventDefault();\n      let native = null;\n      if (document.caretRangeFromPoint) {\n        native = document.caretRangeFromPoint(e.clientX, e.clientY);\n        // @ts-expect-error\n      } else if (document.caretPositionFromPoint) {\n        // @ts-expect-error\n        const position = document.caretPositionFromPoint(e.clientX, e.clientY);\n        native = document.createRange();\n        native.setStart(position.offsetNode, position.offset);\n        native.setEnd(position.offsetNode, position.offset);\n      }\n      const normalized = native && quill.selection.normalizeNative(native);\n      if (normalized) {\n        const range = quill.selection.normalizedToRange(normalized);\n        if (e.dataTransfer?.files) {\n          this.upload(range, e.dataTransfer.files);\n        }\n      }\n    });\n  }\n  upload(range, files) {\n    const uploads = [];\n    Array.from(files).forEach(file => {\n      if (file && this.options.mimetypes?.includes(file.type)) {\n        uploads.push(file);\n      }\n    });\n    if (uploads.length > 0) {\n      // @ts-expect-error Fix me later\n      this.options.handler.call(this, range, uploads);\n    }\n  }\n}\nUploader.DEFAULTS = {\n  mimetypes: ['image/png', 'image/jpeg'],\n  handler(range, files) {\n    if (!this.quill.scroll.query('image')) {\n      return;\n    }\n    const promises = files.map(file => {\n      return new Promise(resolve => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(file);\n      });\n    });\n    Promise.all(promises).then(images => {\n      const update = images.reduce((delta, image) => {\n        return delta.insert({\n          image\n        });\n      }, new Delta().retain(range.index).delete(range.length));\n      this.quill.updateContents(update, Emitter.sources.USER);\n      this.quill.setSelection(range.index + images.length, Emitter.sources.SILENT);\n    });\n  }\n};\nexport default Uploader;\n//# sourceMappingURL=uploader.js.map", "import Delta from 'quill-delta';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport { deleteRange } from './keyboard.js';\nconst INSERT_TYPES = ['insertText', 'insertReplacementText'];\nclass Input extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    quill.root.addEventListener('beforeinput', event => {\n      this.handleBeforeInput(event);\n    });\n\n    // Gboard with English input on Android triggers `compositionstart` sometimes even\n    // users are not going to type anything.\n    if (!/Android/i.test(navigator.userAgent)) {\n      quill.on(Quill.events.COMPOSITION_BEFORE_START, () => {\n        this.handleCompositionStart();\n      });\n    }\n  }\n  deleteRange(range) {\n    deleteRange({\n      range,\n      quill: this.quill\n    });\n  }\n  replaceText(range) {\n    let text = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    if (range.length === 0) return false;\n    if (text) {\n      // Follow the native behavior that inherits the formats of the first character\n      const formats = this.quill.getFormat(range.index, 1);\n      this.deleteRange(range);\n      this.quill.updateContents(new Delta().retain(range.index).insert(text, formats), Quill.sources.USER);\n    } else {\n      this.deleteRange(range);\n    }\n    this.quill.setSelection(range.index + text.length, 0, Quill.sources.SILENT);\n    return true;\n  }\n  handleBeforeInput(event) {\n    if (this.quill.composition.isComposing || event.defaultPrevented || !INSERT_TYPES.includes(event.inputType)) {\n      return;\n    }\n    const staticRange = event.getTargetRanges ? event.getTargetRanges()[0] : null;\n    if (!staticRange || staticRange.collapsed === true) {\n      return;\n    }\n    const text = getPlainTextFromInputEvent(event);\n    if (text == null) {\n      return;\n    }\n    const normalized = this.quill.selection.normalizeNative(staticRange);\n    const range = normalized ? this.quill.selection.normalizedToRange(normalized) : null;\n    if (range && this.replaceText(range, text)) {\n      event.preventDefault();\n    }\n  }\n  handleCompositionStart() {\n    const range = this.quill.getSelection();\n    if (range) {\n      this.replaceText(range);\n    }\n  }\n}\nfunction getPlainTextFromInputEvent(event) {\n  // When `inputType` is \"insertText\":\n  // - `event.data` should be string (Safari uses `event.dataTransfer`).\n  // - `event.dataTransfer` should be null.\n  // When `inputType` is \"insertReplacementText\":\n  // - `event.data` should be null.\n  // - `event.dataTransfer` should contain \"text/plain\" data.\n\n  if (typeof event.data === 'string') {\n    return event.data;\n  }\n  if (event.dataTransfer?.types.includes('text/plain')) {\n    return event.dataTransfer.getData('text/plain');\n  }\n  return null;\n}\nexport default Input;\n//# sourceMappingURL=input.js.map", "import { ParentBlot } from 'parchment';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nconst isMac = /Mac/i.test(navigator.platform);\n\n// Export for testing\nexport const TTL_FOR_VALID_SELECTION_CHANGE = 100;\n\n// A loose check to determine if the shortcut can move the caret before a UI node:\n// <ANY_PARENT>[CARET]<div class=\"ql-ui\"></div>[CONTENT]</ANY_PARENT>\nconst canMoveCaretBeforeUINode = event => {\n  if (event.key === 'ArrowLeft' || event.key === 'ArrowRight' ||\n  // RTL scripts or moving from the end of the previous line\n  event.key === 'ArrowUp' || event.key === 'ArrowDown' || event.key === 'Home') {\n    return true;\n  }\n  if (isMac && event.key === 'a' && event.ctrlKey === true) {\n    return true;\n  }\n  return false;\n};\nclass UINode extends Module {\n  isListening = false;\n  selectionChangeDeadline = 0;\n  constructor(quill, options) {\n    super(quill, options);\n    this.handleArrowKeys();\n    this.handleNavigationShortcuts();\n  }\n  handleArrowKeys() {\n    this.quill.keyboard.addBinding({\n      key: ['ArrowLeft', 'ArrowRight'],\n      offset: 0,\n      shiftKey: null,\n      handler(range, _ref) {\n        let {\n          line,\n          event\n        } = _ref;\n        if (!(line instanceof ParentBlot) || !line.uiNode) {\n          return true;\n        }\n        const isRTL = getComputedStyle(line.domNode)['direction'] === 'rtl';\n        if (isRTL && event.key !== 'ArrowRight' || !isRTL && event.key !== 'ArrowLeft') {\n          return true;\n        }\n        this.quill.setSelection(range.index - 1, range.length + (event.shiftKey ? 1 : 0), Quill.sources.USER);\n        return false;\n      }\n    });\n  }\n  handleNavigationShortcuts() {\n    this.quill.root.addEventListener('keydown', event => {\n      if (!event.defaultPrevented && canMoveCaretBeforeUINode(event)) {\n        this.ensureListeningToSelectionChange();\n      }\n    });\n  }\n\n  /**\n   * We only listen to the `selectionchange` event when\n   * there is an intention of moving the caret to the beginning using shortcuts.\n   * This is primarily implemented to prevent infinite loops, as we are changing\n   * the selection within the handler of a `selectionchange` event.\n   */\n  ensureListeningToSelectionChange() {\n    this.selectionChangeDeadline = Date.now() + TTL_FOR_VALID_SELECTION_CHANGE;\n    if (this.isListening) return;\n    this.isListening = true;\n    const listener = () => {\n      this.isListening = false;\n      if (Date.now() <= this.selectionChangeDeadline) {\n        this.handleSelectionChange();\n      }\n    };\n    document.addEventListener('selectionchange', listener, {\n      once: true\n    });\n  }\n  handleSelectionChange() {\n    const selection = document.getSelection();\n    if (!selection) return;\n    const range = selection.getRangeAt(0);\n    if (range.collapsed !== true || range.startOffset !== 0) return;\n    const line = this.quill.scroll.find(range.startContainer);\n    if (!(line instanceof ParentBlot) || !line.uiNode) return;\n    const newRange = document.createRange();\n    newRange.setStartAfter(line.uiNode);\n    newRange.setEndAfter(line.uiNode);\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n}\nexport default UINode;\n//# sourceMappingURL=uiNode.js.map", "import Quill, { Parchment, Range } from './core/quill.js';\nimport Block, { BlockEmbed } from './blots/block.js';\nimport Break from './blots/break.js';\nimport Container from './blots/container.js';\nimport Cursor from './blots/cursor.js';\nimport Embed from './blots/embed.js';\nimport Inline from './blots/inline.js';\nimport Scroll from './blots/scroll.js';\nimport TextBlot from './blots/text.js';\nimport Clipboard from './modules/clipboard.js';\nimport History from './modules/history.js';\nimport Keyboard from './modules/keyboard.js';\nimport Uploader from './modules/uploader.js';\nimport Delta, { Op, OpIterator, AttributeMap } from 'quill-delta';\nimport Input from './modules/input.js';\nimport UINode from './modules/uiNode.js';\nexport { default as Module } from './core/module.js';\nexport { Delta, Op, OpIterator, AttributeMap, Parchment, Range };\nQuill.register({\n  'blots/block': Block,\n  'blots/block/embed': BlockEmbed,\n  'blots/break': Break,\n  'blots/container': Container,\n  'blots/cursor': Cursor,\n  'blots/embed': Embed,\n  'blots/inline': Inline,\n  'blots/scroll': Scroll,\n  'blots/text': TextBlot,\n  'modules/clipboard': Clipboard,\n  'modules/history': History,\n  'modules/keyboard': Keyboard,\n  'modules/uploader': Uploader,\n  'modules/input': Input,\n  'modules/uiNode': UINode\n});\nexport default Quill;\n//# sourceMappingURL=core.js.map", "import { ClassAttributor, Scope } from 'parchment';\nclass IndentAttributor extends ClassAttributor {\n  add(node, value) {\n    let normalizedValue = 0;\n    if (value === '+1' || value === '-1') {\n      const indent = this.value(node) || 0;\n      normalizedValue = value === '+1' ? indent + 1 : indent - 1;\n    } else if (typeof value === 'number') {\n      normalizedValue = value;\n    }\n    if (normalizedValue === 0) {\n      this.remove(node);\n      return true;\n    }\n    return super.add(node, normalizedValue.toString());\n  }\n  canAdd(node, value) {\n    return super.canAdd(node, value) || super.canAdd(node, parseInt(value, 10));\n  }\n  value(node) {\n    return parseInt(super.value(node), 10) || undefined; // Don't return NaN\n  }\n}\nconst IndentClass = new IndentAttributor('indent', 'ql-indent', {\n  scope: Scope.BLOCK,\n  // @ts-expect-error\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8]\n});\nexport default IndentClass;\n//# sourceMappingURL=indent.js.map", "import Block from '../blots/block.js';\nclass Blockquote extends Block {\n  static blotName = 'blockquote';\n  static tagName = 'blockquote';\n}\nexport default Blockquote;\n//# sourceMappingURL=blockquote.js.map", "import Block from '../blots/block.js';\nclass Header extends Block {\n  static blotName = 'header';\n  static tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n  static formats(domNode) {\n    return this.tagName.indexOf(domNode.tagName) + 1;\n  }\n}\nexport default Header;\n//# sourceMappingURL=header.js.map", "import Block from '../blots/block.js';\nimport Container from '../blots/container.js';\nimport Quill from '../core/quill.js';\nclass ListContainer extends Container {}\nListContainer.blotName = 'list-container';\nListContainer.tagName = 'OL';\nclass ListItem extends Block {\n  static create(value) {\n    const node = super.create();\n    node.setAttribute('data-list', value);\n    return node;\n  }\n  static formats(domNode) {\n    return domNode.getAttribute('data-list') || undefined;\n  }\n  static register() {\n    Quill.register(ListContainer);\n  }\n  constructor(scroll, domNode) {\n    super(scroll, domNode);\n    const ui = domNode.ownerDocument.createElement('span');\n    const listEventHandler = e => {\n      if (!scroll.isEnabled()) return;\n      const format = this.statics.formats(domNode, scroll);\n      if (format === 'checked') {\n        this.format('list', 'unchecked');\n        e.preventDefault();\n      } else if (format === 'unchecked') {\n        this.format('list', 'checked');\n        e.preventDefault();\n      }\n    };\n    ui.addEventListener('mousedown', listEventHandler);\n    ui.addEventListener('touchstart', listEventHandler);\n    this.attachUI(ui);\n  }\n  format(name, value) {\n    if (name === this.statics.blotName && value) {\n      this.domNode.setAttribute('data-list', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nListItem.blotName = 'list';\nListItem.tagName = 'LI';\nListContainer.allowedChildren = [ListItem];\nListItem.requiredContainer = ListContainer;\nexport { ListContainer, ListItem as default };\n//# sourceMappingURL=list.js.map", "import Inline from '../blots/inline.js';\nclass Bold extends Inline {\n  static blotName = 'bold';\n  static tagName = ['STRONG', 'B'];\n  static create() {\n    return super.create();\n  }\n  static formats() {\n    return true;\n  }\n  optimize(context) {\n    super.optimize(context);\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\n      this.replaceWith(this.statics.blotName);\n    }\n  }\n}\nexport default Bold;\n//# sourceMappingURL=bold.js.map", "import Bold from './bold.js';\nclass Italic extends Bold {\n  static blotName = 'italic';\n  static tagName = ['EM', 'I'];\n}\nexport default Italic;\n//# sourceMappingURL=italic.js.map", "import Inline from '../blots/inline.js';\nclass Link extends Inline {\n  static blotName = 'link';\n  static tagName = 'A';\n  static SANITIZED_URL = 'about:blank';\n  static PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel', 'sms'];\n  static create(value) {\n    const node = super.create(value);\n    node.setAttribute('href', this.sanitize(value));\n    node.setAttribute('rel', 'noopener noreferrer');\n    node.setAttribute('target', '_blank');\n    return node;\n  }\n  static formats(domNode) {\n    return domNode.getAttribute('href');\n  }\n  static sanitize(url) {\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n  }\n  format(name, value) {\n    if (name !== this.statics.blotName || !value) {\n      super.format(name, value);\n    } else {\n      // @ts-expect-error\n      this.domNode.setAttribute('href', this.constructor.sanitize(value));\n    }\n  }\n}\nfunction sanitize(url, protocols) {\n  const anchor = document.createElement('a');\n  anchor.href = url;\n  const protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\nexport { Link as default, sanitize };\n//# sourceMappingURL=link.js.map", "import Inline from '../blots/inline.js';\nclass Script extends Inline {\n  static blotName = 'script';\n  static tagName = ['SUB', 'SUP'];\n  static create(value) {\n    if (value === 'super') {\n      return document.createElement('sup');\n    }\n    if (value === 'sub') {\n      return document.createElement('sub');\n    }\n    return super.create(value);\n  }\n  static formats(domNode) {\n    if (domNode.tagName === 'SUB') return 'sub';\n    if (domNode.tagName === 'SUP') return 'super';\n    return undefined;\n  }\n}\nexport default Script;\n//# sourceMappingURL=script.js.map", "import Bold from './bold.js';\nclass Strike extends Bold {\n  static blotName = 'strike';\n  static tagName = ['S', 'STRIKE'];\n}\nexport default Strike;\n//# sourceMappingURL=strike.js.map", "import Inline from '../blots/inline.js';\nclass Underline extends Inline {\n  static blotName = 'underline';\n  static tagName = 'U';\n}\nexport default Underline;\n//# sourceMappingURL=underline.js.map", "import Embed from '../blots/embed.js';\nclass Formula extends Embed {\n  static blotName = 'formula';\n  static className = 'ql-formula';\n  static tagName = 'SPAN';\n  static create(value) {\n    // @ts-expect-error\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n    const node = super.create(value);\n    if (typeof value === 'string') {\n      // @ts-expect-error\n      window.katex.render(value, node, {\n        throwOnError: false,\n        errorColor: '#f00'\n      });\n      node.setAttribute('data-value', value);\n    }\n    return node;\n  }\n  static value(domNode) {\n    return domNode.getAttribute('data-value');\n  }\n  html() {\n    const {\n      formula\n    } = this.value();\n    return `<span>${formula}</span>`;\n  }\n}\nexport default Formula;\n//# sourceMappingURL=formula.js.map", "import { EmbedBlot } from 'parchment';\nimport { sanitize } from './link.js';\nconst ATTRIBUTES = ['alt', 'height', 'width'];\nclass Image extends EmbedBlot {\n  static blotName = 'image';\n  static tagName = 'IMG';\n  static create(value) {\n    const node = super.create(value);\n    if (typeof value === 'string') {\n      node.setAttribute('src', this.sanitize(value));\n    }\n    return node;\n  }\n  static formats(domNode) {\n    return ATTRIBUTES.reduce((formats, attribute) => {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n      return formats;\n    }, {});\n  }\n  static match(url) {\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\n  }\n  static sanitize(url) {\n    return sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\n  }\n  static value(domNode) {\n    return domNode.getAttribute('src');\n  }\n  format(name, value) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nexport default Image;\n//# sourceMappingURL=image.js.map", "import { BlockEmbed } from '../blots/block.js';\nimport Link from './link.js';\nconst ATTRIBUTES = ['height', 'width'];\nclass Video extends BlockEmbed {\n  static blotName = 'video';\n  static className = 'ql-video';\n  static tagName = 'IFRAME';\n  static create(value) {\n    const node = super.create(value);\n    node.setAttribute('frameborder', '0');\n    node.setAttribute('allowfullscreen', 'true');\n    node.setAttribute('src', this.sanitize(value));\n    return node;\n  }\n  static formats(domNode) {\n    return ATTRIBUTES.reduce((formats, attribute) => {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n      return formats;\n    }, {});\n  }\n  static sanitize(url) {\n    return Link.sanitize(url);\n  }\n  static value(domNode) {\n    return domNode.getAttribute('src');\n  }\n  format(name, value) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n  html() {\n    const {\n      video\n    } = this.value();\n    return `<a href=\"${video}\">${video}</a>`;\n  }\n}\nexport default Video;\n//# sourceMappingURL=video.js.map", "import Delta from 'quill-delta';\nimport { ClassAttributor, Scope } from 'parchment';\nimport Inline from '../blots/inline.js';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport { blockDelta } from '../blots/block.js';\nimport BreakBlot from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport CodeBlock, { CodeBlockContainer } from '../formats/code.js';\nimport { traverse } from './clipboard.js';\nconst TokenAttributor = new ClassAttributor('code-token', 'hljs', {\n  scope: Scope.INLINE\n});\nclass CodeToken extends Inline {\n  static formats(node, scroll) {\n    while (node != null && node !== scroll.domNode) {\n      if (node.classList && node.classList.contains(CodeBlock.className)) {\n        // @ts-expect-error\n        return super.formats(node, scroll);\n      }\n      // @ts-expect-error\n      node = node.parentNode;\n    }\n    return undefined;\n  }\n  constructor(scroll, domNode, value) {\n    // @ts-expect-error\n    super(scroll, domNode, value);\n    TokenAttributor.add(this.domNode, value);\n  }\n  format(format, value) {\n    if (format !== CodeToken.blotName) {\n      super.format(format, value);\n    } else if (value) {\n      TokenAttributor.add(this.domNode, value);\n    } else {\n      TokenAttributor.remove(this.domNode);\n      this.domNode.classList.remove(this.statics.className);\n    }\n  }\n  optimize() {\n    // @ts-expect-error\n    super.optimize(...arguments);\n    if (!TokenAttributor.value(this.domNode)) {\n      this.unwrap();\n    }\n  }\n}\nCodeToken.blotName = 'code-token';\nCodeToken.className = 'ql-token';\nclass SyntaxCodeBlock extends CodeBlock {\n  static create(value) {\n    const domNode = super.create(value);\n    if (typeof value === 'string') {\n      domNode.setAttribute('data-language', value);\n    }\n    return domNode;\n  }\n  static formats(domNode) {\n    // @ts-expect-error\n    return domNode.getAttribute('data-language') || 'plain';\n  }\n  static register() {} // Syntax module will register\n\n  format(name, value) {\n    if (name === this.statics.blotName && value) {\n      // @ts-expect-error\n      this.domNode.setAttribute('data-language', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n  replaceWith(name, value) {\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\n    return super.replaceWith(name, value);\n  }\n}\nclass SyntaxCodeBlockContainer extends CodeBlockContainer {\n  attach() {\n    super.attach();\n    this.forceNext = false;\n    // @ts-expect-error\n    this.scroll.emitMount(this);\n  }\n  format(name, value) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n      this.children.forEach(child => {\n        // @ts-expect-error\n        child.format(name, value);\n      });\n    }\n  }\n  formatAt(index, length, name, value) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n    }\n    super.formatAt(index, length, name, value);\n  }\n  highlight(highlight) {\n    let forced = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (this.children.head == null) return;\n    const nodes = Array.from(this.domNode.childNodes).filter(node => node !== this.uiNode);\n    const text = `${nodes.map(node => node.textContent).join('\\n')}\\n`;\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n    if (forced || this.forceNext || this.cachedText !== text) {\n      if (text.trim().length > 0 || this.cachedText == null) {\n        const oldDelta = this.children.reduce((delta, child) => {\n          // @ts-expect-error\n          return delta.concat(blockDelta(child, false));\n        }, new Delta());\n        const delta = highlight(text, language);\n        oldDelta.diff(delta).reduce((index, _ref) => {\n          let {\n            retain,\n            attributes\n          } = _ref;\n          // Should be all retains\n          if (!retain) return index;\n          if (attributes) {\n            Object.keys(attributes).forEach(format => {\n              if ([SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)) {\n                // @ts-expect-error\n                this.formatAt(index, retain, format, attributes[format]);\n              }\n            });\n          }\n          // @ts-expect-error\n          return index + retain;\n        }, 0);\n      }\n      this.cachedText = text;\n      this.forceNext = false;\n    }\n  }\n  html(index, length) {\n    const [codeBlock] = this.children.find(index);\n    const language = codeBlock ? SyntaxCodeBlock.formats(codeBlock.domNode) : 'plain';\n    return `<pre data-language=\"${language}\">\\n${escapeText(this.code(index, length))}\\n</pre>`;\n  }\n  optimize(context) {\n    super.optimize(context);\n    if (this.parent != null && this.children.head != null && this.uiNode != null) {\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n      // @ts-expect-error\n      if (language !== this.uiNode.value) {\n        // @ts-expect-error\n        this.uiNode.value = language;\n      }\n    }\n  }\n}\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\nSyntaxCodeBlock.allowedChildren = [CodeToken, CursorBlot, TextBlot, BreakBlot];\nconst highlight = (lib, language, text) => {\n  if (typeof lib.versionString === 'string') {\n    const majorVersion = lib.versionString.split('.')[0];\n    if (parseInt(majorVersion, 10) >= 11) {\n      return lib.highlight(text, {\n        language\n      }).value;\n    }\n  }\n  return lib.highlight(language, text).value;\n};\nclass Syntax extends Module {\n  static register() {\n    Quill.register(CodeToken, true);\n    Quill.register(SyntaxCodeBlock, true);\n    Quill.register(SyntaxCodeBlockContainer, true);\n  }\n  constructor(quill, options) {\n    super(quill, options);\n    if (this.options.hljs == null) {\n      throw new Error('Syntax module requires highlight.js. Please include the library on the page before Quill.');\n    }\n    // @ts-expect-error Fix me later\n    this.languages = this.options.languages.reduce((memo, _ref2) => {\n      let {\n        key\n      } = _ref2;\n      memo[key] = true;\n      return memo;\n    }, {});\n    this.highlightBlot = this.highlightBlot.bind(this);\n    this.initListener();\n    this.initTimer();\n  }\n  initListener() {\n    this.quill.on(Quill.events.SCROLL_BLOT_MOUNT, blot => {\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\n      const select = this.quill.root.ownerDocument.createElement('select');\n      // @ts-expect-error Fix me later\n      this.options.languages.forEach(_ref3 => {\n        let {\n          key,\n          label\n        } = _ref3;\n        const option = select.ownerDocument.createElement('option');\n        option.textContent = label;\n        option.setAttribute('value', key);\n        select.appendChild(option);\n      });\n      select.addEventListener('change', () => {\n        blot.format(SyntaxCodeBlock.blotName, select.value);\n        this.quill.root.focus(); // Prevent scrolling\n        this.highlight(blot, true);\n      });\n      if (blot.uiNode == null) {\n        blot.attachUI(select);\n        if (blot.children.head) {\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\n        }\n      }\n    });\n  }\n  initTimer() {\n    let timer = null;\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(() => {\n        this.highlight();\n        timer = null;\n      }, this.options.interval);\n    });\n  }\n  highlight() {\n    let blot = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (this.quill.selection.composing) return;\n    this.quill.update(Quill.sources.USER);\n    const range = this.quill.getSelection();\n    const blots = blot == null ? this.quill.scroll.descendants(SyntaxCodeBlockContainer) : [blot];\n    blots.forEach(container => {\n      container.highlight(this.highlightBlot, force);\n    });\n    this.quill.update(Quill.sources.SILENT);\n    if (range != null) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    }\n  }\n  highlightBlot(text) {\n    let language = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'plain';\n    language = this.languages[language] ? language : 'plain';\n    if (language === 'plain') {\n      return escapeText(text).split('\\n').reduce((delta, line, i) => {\n        if (i !== 0) {\n          delta.insert('\\n', {\n            [CodeBlock.blotName]: language\n          });\n        }\n        return delta.insert(line);\n      }, new Delta());\n    }\n    const container = this.quill.root.ownerDocument.createElement('div');\n    container.classList.add(CodeBlock.className);\n    container.innerHTML = highlight(this.options.hljs, language, text);\n    return traverse(this.quill.scroll, container, [(node, delta) => {\n      // @ts-expect-error\n      const value = TokenAttributor.value(node);\n      if (value) {\n        return delta.compose(new Delta().retain(delta.length(), {\n          [CodeToken.blotName]: value\n        }));\n      }\n      return delta;\n    }], [(node, delta) => {\n      // @ts-expect-error\n      return node.data.split('\\n').reduce((memo, nodeText, i) => {\n        if (i !== 0) memo.insert('\\n', {\n          [CodeBlock.blotName]: language\n        });\n        return memo.insert(nodeText);\n      }, delta);\n    }], new WeakMap());\n  }\n}\nSyntax.DEFAULTS = {\n  hljs: (() => {\n    return window.hljs;\n  })(),\n  interval: 1000,\n  languages: [{\n    key: 'plain',\n    label: 'Plain'\n  }, {\n    key: 'bash',\n    label: 'Bash'\n  }, {\n    key: 'cpp',\n    label: 'C++'\n  }, {\n    key: 'cs',\n    label: 'C#'\n  }, {\n    key: 'css',\n    label: 'CSS'\n  }, {\n    key: 'diff',\n    label: 'Diff'\n  }, {\n    key: 'xml',\n    label: 'HTML/XML'\n  }, {\n    key: 'java',\n    label: 'Java'\n  }, {\n    key: 'javascript',\n    label: 'JavaScript'\n  }, {\n    key: 'markdown',\n    label: 'Markdown'\n  }, {\n    key: 'php',\n    label: 'PHP'\n  }, {\n    key: 'python',\n    label: 'Python'\n  }, {\n    key: 'ruby',\n    label: 'Ruby'\n  }, {\n    key: 'sql',\n    label: 'SQL'\n  }]\n};\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default };\n//# sourceMappingURL=syntax.js.map", "import Block from '../blots/block.js';\nimport Container from '../blots/container.js';\nclass TableCell extends Block {\n  static blotName = 'table';\n  static tagName = 'TD';\n  static create(value) {\n    const node = super.create();\n    if (value) {\n      node.setAttribute('data-row', value);\n    } else {\n      node.setAttribute('data-row', tableId());\n    }\n    return node;\n  }\n  static formats(domNode) {\n    if (domNode.hasAttribute('data-row')) {\n      return domNode.getAttribute('data-row');\n    }\n    return undefined;\n  }\n  cellOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n  format(name, value) {\n    if (name === TableCell.blotName && value) {\n      this.domNode.setAttribute('data-row', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n  row() {\n    return this.parent;\n  }\n  rowOffset() {\n    if (this.row()) {\n      return this.row().rowOffset();\n    }\n    return -1;\n  }\n  table() {\n    return this.row() && this.row().table();\n  }\n}\nclass TableRow extends Container {\n  static blotName = 'table-row';\n  static tagName = 'TR';\n  checkMerge() {\n    // @ts-expect-error\n    if (super.checkMerge() && this.next.children.head != null) {\n      // @ts-expect-error\n      const thisHead = this.children.head.formats();\n      // @ts-expect-error\n      const thisTail = this.children.tail.formats();\n      // @ts-expect-error\n      const nextHead = this.next.children.head.formats();\n      // @ts-expect-error\n      const nextTail = this.next.children.tail.formats();\n      return thisHead.table === thisTail.table && thisHead.table === nextHead.table && thisHead.table === nextTail.table;\n    }\n    return false;\n  }\n  optimize(context) {\n    super.optimize(context);\n    this.children.forEach(child => {\n      if (child.next == null) return;\n      const childFormats = child.formats();\n      const nextFormats = child.next.formats();\n      if (childFormats.table !== nextFormats.table) {\n        const next = this.splitAfter(child);\n        if (next) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          next.optimize();\n        }\n        // We might be able to merge with prev now\n        if (this.prev) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          this.prev.optimize();\n        }\n      }\n    });\n  }\n  rowOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n  table() {\n    return this.parent && this.parent.parent;\n  }\n}\nclass TableBody extends Container {\n  static blotName = 'table-body';\n  static tagName = 'TBODY';\n}\nclass TableContainer extends Container {\n  static blotName = 'table-container';\n  static tagName = 'TABLE';\n  balanceCells() {\n    const rows = this.descendants(TableRow);\n    const maxColumns = rows.reduce((max, row) => {\n      return Math.max(row.children.length, max);\n    }, 0);\n    rows.forEach(row => {\n      new Array(maxColumns - row.children.length).fill(0).forEach(() => {\n        let value;\n        if (row.children.head != null) {\n          value = TableCell.formats(row.children.head.domNode);\n        }\n        const blot = this.scroll.create(TableCell.blotName, value);\n        row.appendChild(blot);\n        // @ts-expect-error TODO: parameters of optimize() should be a optional\n        blot.optimize(); // Add break blot\n      });\n    });\n  }\n  cells(column) {\n    return this.rows().map(row => row.children.at(column));\n  }\n  deleteColumn(index) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    body.children.forEach(row => {\n      const cell = row.children.at(index);\n      if (cell != null) {\n        cell.remove();\n      }\n    });\n  }\n  insertColumn(index) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    body.children.forEach(row => {\n      const ref = row.children.at(index);\n      // @ts-expect-error\n      const value = TableCell.formats(row.children.head.domNode);\n      const cell = this.scroll.create(TableCell.blotName, value);\n      row.insertBefore(cell, ref);\n    });\n  }\n  insertRow(index) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    const id = tableId();\n    const row = this.scroll.create(TableRow.blotName);\n    body.children.head.children.forEach(() => {\n      const cell = this.scroll.create(TableCell.blotName, id);\n      row.appendChild(cell);\n    });\n    const ref = body.children.at(index);\n    body.insertBefore(row, ref);\n  }\n  rows() {\n    const body = this.children.head;\n    if (body == null) return [];\n    return body.children.map(row => row);\n  }\n}\nTableContainer.allowedChildren = [TableBody];\nTableBody.requiredContainer = TableContainer;\nTableBody.allowedChildren = [TableRow];\nTableRow.requiredContainer = TableBody;\nTableRow.allowedChildren = [TableCell];\nTableCell.requiredContainer = TableRow;\nfunction tableId() {\n  const id = Math.random().toString(36).slice(2, 6);\n  return `row-${id}`;\n}\nexport { TableCell, TableRow, TableBody, TableContainer, tableId };\n//# sourceMappingURL=table.js.map", "import Delta from 'quill-delta';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport { TableCell, TableRow, TableBody, TableContainer, tableId } from '../formats/table.js';\nclass Table extends Module {\n  static register() {\n    Quill.register(TableCell);\n    Quill.register(TableRow);\n    Quill.register(TableBody);\n    Quill.register(TableContainer);\n  }\n  constructor() {\n    super(...arguments);\n    this.listenBalanceCells();\n  }\n  balanceTables() {\n    this.quill.scroll.descendants(TableContainer).forEach(table => {\n      table.balanceCells();\n    });\n  }\n  deleteColumn() {\n    const [table,, cell] = this.getTable();\n    if (cell == null) return;\n    // @ts-expect-error\n    table.deleteColumn(cell.cellOffset());\n    this.quill.update(Quill.sources.USER);\n  }\n  deleteRow() {\n    const [, row] = this.getTable();\n    if (row == null) return;\n    row.remove();\n    this.quill.update(Quill.sources.USER);\n  }\n  deleteTable() {\n    const [table] = this.getTable();\n    if (table == null) return;\n    // @ts-expect-error\n    const offset = table.offset();\n    // @ts-expect-error\n    table.remove();\n    this.quill.update(Quill.sources.USER);\n    this.quill.setSelection(offset, Quill.sources.SILENT);\n  }\n  getTable() {\n    let range = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.quill.getSelection();\n    if (range == null) return [null, null, null, -1];\n    const [cell, offset] = this.quill.getLine(range.index);\n    if (cell == null || cell.statics.blotName !== TableCell.blotName) {\n      return [null, null, null, -1];\n    }\n    const row = cell.parent;\n    const table = row.parent.parent;\n    // @ts-expect-error\n    return [table, row, cell, offset];\n  }\n  insertColumn(offset) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const column = cell.cellOffset();\n    table.insertColumn(column + offset);\n    this.quill.update(Quill.sources.USER);\n    let shift = row.rowOffset();\n    if (offset === 0) {\n      shift += 1;\n    }\n    this.quill.setSelection(range.index + shift, range.length, Quill.sources.SILENT);\n  }\n  insertColumnLeft() {\n    this.insertColumn(0);\n  }\n  insertColumnRight() {\n    this.insertColumn(1);\n  }\n  insertRow(offset) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const index = row.rowOffset();\n    table.insertRow(index + offset);\n    this.quill.update(Quill.sources.USER);\n    if (offset > 0) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    } else {\n      this.quill.setSelection(range.index + row.children.length, range.length, Quill.sources.SILENT);\n    }\n  }\n  insertRowAbove() {\n    this.insertRow(0);\n  }\n  insertRowBelow() {\n    this.insertRow(1);\n  }\n  insertTable(rows, columns) {\n    const range = this.quill.getSelection();\n    if (range == null) return;\n    const delta = new Array(rows).fill(0).reduce(memo => {\n      const text = new Array(columns).fill('\\n').join('');\n      return memo.insert(text, {\n        table: tableId()\n      });\n    }, new Delta().retain(range.index));\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index, Quill.sources.SILENT);\n    this.balanceTables();\n  }\n  listenBalanceCells() {\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, mutations => {\n      mutations.some(mutation => {\n        if (['TD', 'TR', 'TBODY', 'TABLE'].includes(mutation.target.tagName)) {\n          this.quill.once(Quill.events.TEXT_CHANGE, (delta, old, source) => {\n            if (source !== Quill.sources.USER) return;\n            this.balanceTables();\n          });\n          return true;\n        }\n        return false;\n      });\n    });\n  }\n}\nexport default Table;\n//# sourceMappingURL=table.js.map", "import Delta from 'quill-delta';\nimport { EmbedBlot, Scope } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nconst debug = logger('quill:toolbar');\nclass Toolbar extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    if (Array.isArray(this.options.container)) {\n      const container = document.createElement('div');\n      container.setAttribute('role', 'toolbar');\n      addControls(container, this.options.container);\n      quill.container?.parentNode?.insertBefore(container, quill.container);\n      this.container = container;\n    } else if (typeof this.options.container === 'string') {\n      this.container = document.querySelector(this.options.container);\n    } else {\n      this.container = this.options.container;\n    }\n    if (!(this.container instanceof HTMLElement)) {\n      debug.error('Container required for toolbar', this.options);\n      return;\n    }\n    this.container.classList.add('ql-toolbar');\n    this.controls = [];\n    this.handlers = {};\n    if (this.options.handlers) {\n      Object.keys(this.options.handlers).forEach(format => {\n        const handler = this.options.handlers?.[format];\n        if (handler) {\n          this.addHandler(format, handler);\n        }\n      });\n    }\n    Array.from(this.container.querySelectorAll('button, select')).forEach(input => {\n      // @ts-expect-error\n      this.attach(input);\n    });\n    this.quill.on(Quill.events.EDITOR_CHANGE, () => {\n      const [range] = this.quill.selection.getRange(); // quill.getSelection triggers update\n      this.update(range);\n    });\n  }\n  addHandler(format, handler) {\n    this.handlers[format] = handler;\n  }\n  attach(input) {\n    let format = Array.from(input.classList).find(className => {\n      return className.indexOf('ql-') === 0;\n    });\n    if (!format) return;\n    format = format.slice('ql-'.length);\n    if (input.tagName === 'BUTTON') {\n      input.setAttribute('type', 'button');\n    }\n    if (this.handlers[format] == null && this.quill.scroll.query(format) == null) {\n      debug.warn('ignoring attaching to nonexistent format', format, input);\n      return;\n    }\n    const eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n    input.addEventListener(eventName, e => {\n      let value;\n      if (input.tagName === 'SELECT') {\n        // @ts-expect-error\n        if (input.selectedIndex < 0) return;\n        // @ts-expect-error\n        const selected = input.options[input.selectedIndex];\n        if (selected.hasAttribute('selected')) {\n          value = false;\n        } else {\n          value = selected.value || false;\n        }\n      } else {\n        if (input.classList.contains('ql-active')) {\n          value = false;\n        } else {\n          // @ts-expect-error\n          value = input.value || !input.hasAttribute('value');\n        }\n        e.preventDefault();\n      }\n      this.quill.focus();\n      const [range] = this.quill.selection.getRange();\n      if (this.handlers[format] != null) {\n        this.handlers[format].call(this, value);\n      } else if (\n      // @ts-expect-error\n      this.quill.scroll.query(format).prototype instanceof EmbedBlot) {\n        value = prompt(`Enter ${format}`); // eslint-disable-line no-alert\n        if (!value) return;\n        this.quill.updateContents(new Delta()\n        // @ts-expect-error Fix me later\n        .retain(range.index)\n        // @ts-expect-error Fix me later\n        .delete(range.length).insert({\n          [format]: value\n        }), Quill.sources.USER);\n      } else {\n        this.quill.format(format, value, Quill.sources.USER);\n      }\n      this.update(range);\n    });\n    this.controls.push([format, input]);\n  }\n  update(range) {\n    const formats = range == null ? {} : this.quill.getFormat(range);\n    this.controls.forEach(pair => {\n      const [format, input] = pair;\n      if (input.tagName === 'SELECT') {\n        let option = null;\n        if (range == null) {\n          option = null;\n        } else if (formats[format] == null) {\n          option = input.querySelector('option[selected]');\n        } else if (!Array.isArray(formats[format])) {\n          let value = formats[format];\n          if (typeof value === 'string') {\n            value = value.replace(/\"/g, '\\\\\"');\n          }\n          option = input.querySelector(`option[value=\"${value}\"]`);\n        }\n        if (option == null) {\n          // @ts-expect-error TODO fix me later\n          input.value = ''; // TODO make configurable?\n          // @ts-expect-error TODO fix me later\n          input.selectedIndex = -1;\n        } else {\n          option.selected = true;\n        }\n      } else if (range == null) {\n        input.classList.remove('ql-active');\n        input.setAttribute('aria-pressed', 'false');\n      } else if (input.hasAttribute('value')) {\n        // both being null should match (default values)\n        // '1' should match with 1 (headers)\n        const value = formats[format];\n        const isActive = value === input.getAttribute('value') || value != null && value.toString() === input.getAttribute('value') || value == null && !input.getAttribute('value');\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      } else {\n        const isActive = formats[format] != null;\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      }\n    });\n  }\n}\nToolbar.DEFAULTS = {};\nfunction addButton(container, format, value) {\n  const input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add(`ql-${format}`);\n  input.setAttribute('aria-pressed', 'false');\n  if (value != null) {\n    input.value = value;\n    input.setAttribute('aria-label', `${format}: ${value}`);\n  } else {\n    input.setAttribute('aria-label', format);\n  }\n  container.appendChild(input);\n}\nfunction addControls(container, groups) {\n  if (!Array.isArray(groups[0])) {\n    // @ts-expect-error\n    groups = [groups];\n  }\n  groups.forEach(controls => {\n    const group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach(control => {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        const format = Object.keys(control)[0];\n        const value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\nfunction addSelect(container, format, values) {\n  const input = document.createElement('select');\n  input.classList.add(`ql-${format}`);\n  values.forEach(value => {\n    const option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', String(value));\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean() {\n      const range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length === 0) {\n        const formats = this.quill.getFormat();\n        Object.keys(formats).forEach(name => {\n          // Clean functionality in existing apps only clean inline formats\n          if (this.quill.scroll.query(name, Scope.INLINE) != null) {\n            this.quill.format(name, false, Quill.sources.USER);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range.index, range.length, Quill.sources.USER);\n      }\n    },\n    direction(value) {\n      const {\n        align\n      } = this.quill.getFormat();\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', Quill.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, Quill.sources.USER);\n      }\n      this.quill.format('direction', value, Quill.sources.USER);\n    },\n    indent(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      // @ts-expect-error\n      const indent = parseInt(formats.indent || 0, 10);\n      if (value === '+1' || value === '-1') {\n        let modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\n      }\n    },\n    link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:'); // eslint-disable-line no-alert\n      }\n      this.quill.format('link', value, Quill.sources.USER);\n    },\n    list(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats.list === 'checked' || formats.list === 'unchecked') {\n          this.quill.format('list', false, Quill.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, Quill.sources.USER);\n      }\n    }\n  }\n};\nexport { Toolbar as default, addControls };\n//# sourceMappingURL=toolbar.js.map", "const alignLeftIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"13\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"9\\\" y1=\\\"4\\\" y2=\\\"4\\\"/></svg>\";\nconst alignCenterIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"14\\\" x2=\\\"4\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"12\\\" x2=\\\"6\\\" y1=\\\"4\\\" y2=\\\"4\\\"/></svg>\";\nconst alignRightIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"5\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"9\\\" y1=\\\"4\\\" y2=\\\"4\\\"/></svg>\";\nconst alignJustifyIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"4\\\" y2=\\\"4\\\"/></svg>\";\nconst backgroundIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><g class=\\\"ql-fill ql-color-label\\\"><polygon points=\\\"6 6.868 6 6 5 6 5 7 5.942 7 6 6.868\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"4\\\" y=\\\"4\\\"/><polygon points=\\\"6.817 5 6 5 6 6 6.38 6 6.817 5\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"6\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"3\\\" y=\\\"5\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"4\\\" y=\\\"7\\\"/><polygon points=\\\"4 11.439 4 11 3 11 3 12 3.755 12 4 11.439\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"12\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"9\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"15\\\"/><polygon points=\\\"4.63 10 4 10 4 11 4.192 11 4.63 10\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"3\\\" y=\\\"8\\\"/><path d=\\\"M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z\\\"/><path d=\\\"M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z\\\"/><path d=\\\"M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"12\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"11\\\" y=\\\"3\\\"/><path d=\\\"M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"3\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"6\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"3\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"5\\\" y=\\\"3\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"9\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"14\\\"/><polygon points=\\\"13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"13\\\" y=\\\"7\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"5\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"14\\\" y=\\\"6\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"8\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"14\\\" y=\\\"9\\\"/><path d=\\\"M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"14\\\" y=\\\"3\\\"/><polygon points=\\\"12 6.868 12 6 11.62 6 12 6.868\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"12\\\" y=\\\"5\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"13\\\" y=\\\"4\\\"/><polygon points=\\\"12.933 9 13 9 13 8 12.495 8 12.933 9\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"9\\\" y=\\\"14\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"8\\\" y=\\\"15\\\"/><path d=\\\"M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"5\\\" y=\\\"15\\\"/><path d=\\\"M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"11\\\" y=\\\"15\\\"/><path d=\\\"M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"14\\\" y=\\\"15\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"11\\\"/></g><polyline class=\\\"ql-stroke\\\" points=\\\"5.5 13 9 5 12.5 13\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"11.63\\\" x2=\\\"6.38\\\" y1=\\\"11\\\" y2=\\\"11\\\"/></svg>\";\nconst blockquoteIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><rect class=\\\"ql-fill ql-stroke\\\" height=\\\"3\\\" width=\\\"3\\\" x=\\\"4\\\" y=\\\"5\\\"/><rect class=\\\"ql-fill ql-stroke\\\" height=\\\"3\\\" width=\\\"3\\\" x=\\\"11\\\" y=\\\"5\\\"/><path class=\\\"ql-even ql-fill ql-stroke\\\" d=\\\"M7,8c0,4.031-3,5-3,5\\\"/><path class=\\\"ql-even ql-fill ql-stroke\\\" d=\\\"M14,8c0,4.031-3,5-3,5\\\"/></svg>\";\nconst boldIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-stroke\\\" d=\\\"M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z\\\"/><path class=\\\"ql-stroke\\\" d=\\\"M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z\\\"/></svg>\";\nconst cleanIcon = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"5\\\" x2=\\\"13\\\" y1=\\\"3\\\" y2=\\\"3\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"6\\\" x2=\\\"9.35\\\" y1=\\\"12\\\" y2=\\\"3\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"11\\\" x2=\\\"15\\\" y1=\\\"11\\\" y2=\\\"15\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"11\\\" y1=\\\"11\\\" y2=\\\"15\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" rx=\\\"0.5\\\" ry=\\\"0.5\\\" width=\\\"7\\\" x=\\\"2\\\" y=\\\"14\\\"/></svg>\";\nconst codeIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><polyline class=\\\"ql-even ql-stroke\\\" points=\\\"5 7 3 9 5 11\\\"/><polyline class=\\\"ql-even ql-stroke\\\" points=\\\"13 7 15 9 13 11\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"10\\\" x2=\\\"8\\\" y1=\\\"5\\\" y2=\\\"13\\\"/></svg>\";\nconst colorIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-color-label ql-stroke ql-transparent\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"15\\\" y2=\\\"15\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"5.5 11 9 3 12.5 11\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"11.63\\\" x2=\\\"6.38\\\" y1=\\\"9\\\" y2=\\\"9\\\"/></svg>\";\nconst directionLeftToRightIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"3 11 5 9 3 7 3 11\\\"/><line class=\\\"ql-stroke ql-fill\\\" x1=\\\"15\\\" x2=\\\"11\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><path class=\\\"ql-fill\\\" d=\\\"M11,3a3,3,0,0,0,0,6h1V3H11Z\\\"/><rect class=\\\"ql-fill\\\" height=\\\"11\\\" width=\\\"1\\\" x=\\\"11\\\" y=\\\"4\\\"/><rect class=\\\"ql-fill\\\" height=\\\"11\\\" width=\\\"1\\\" x=\\\"13\\\" y=\\\"4\\\"/></svg>\";\nconst directionRightToLeftIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"15 12 13 10 15 8 15 12\\\"/><line class=\\\"ql-stroke ql-fill\\\" x1=\\\"9\\\" x2=\\\"5\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><path class=\\\"ql-fill\\\" d=\\\"M5,3A3,3,0,0,0,5,9H6V3H5Z\\\"/><rect class=\\\"ql-fill\\\" height=\\\"11\\\" width=\\\"1\\\" x=\\\"5\\\" y=\\\"4\\\"/><rect class=\\\"ql-fill\\\" height=\\\"11\\\" width=\\\"1\\\" x=\\\"7\\\" y=\\\"4\\\"/></svg>\";\nconst formulaIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1.6\\\" rx=\\\"0.8\\\" ry=\\\"0.8\\\" width=\\\"5\\\" x=\\\"5.15\\\" y=\\\"6.2\\\"/><path class=\\\"ql-fill\\\" d=\\\"M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z\\\"/></svg>\";\nconst headerIcon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z\\\"/></svg>\";\nconst header2Icon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z\\\"/></svg>\";\nconst header3Icon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z\\\"/></svg>\";\nconst header4Icon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z\\\"/></svg>\";\nconst header5Icon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z\\\"/></svg>\";\nconst header6Icon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z\\\"/></svg>\";\nconst italicIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"13\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"5\\\" x2=\\\"11\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"8\\\" x2=\\\"10\\\" y1=\\\"14\\\" y2=\\\"4\\\"/></svg>\";\nconst imageIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><rect class=\\\"ql-stroke\\\" height=\\\"10\\\" width=\\\"12\\\" x=\\\"3\\\" y=\\\"4\\\"/><circle class=\\\"ql-fill\\\" cx=\\\"6\\\" cy=\\\"7\\\" r=\\\"1\\\"/><polyline class=\\\"ql-even ql-fill\\\" points=\\\"5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12\\\"/></svg>\";\nconst indentIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><polyline class=\\\"ql-fill ql-stroke\\\" points=\\\"3 7 3 11 5 9 3 7\\\"/></svg>\";\nconst outdentIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"5 7 5 11 3 9 5 7\\\"/></svg>\";\nconst linkIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"11\\\" y1=\\\"7\\\" y2=\\\"11\\\"/><path class=\\\"ql-even ql-stroke\\\" d=\\\"M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z\\\"/><path class=\\\"ql-even ql-stroke\\\" d=\\\"M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z\\\"/></svg>\";\nconst listBulletIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"6\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"6\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"6\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"3\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"3\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"3\\\" y1=\\\"14\\\" y2=\\\"14\\\"/></svg>\";\nconst listCheckIcon = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"3 4 4 5 6 3\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"3 14 4 15 6 13\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"3 9 4 10 6 8\\\"/></svg>\";\nconst listOrderedIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke ql-thin\\\" x1=\\\"2.5\\\" x2=\\\"4.5\\\" y1=\\\"5.5\\\" y2=\\\"5.5\\\"/><path class=\\\"ql-fill\\\" d=\\\"M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z\\\"/><path class=\\\"ql-stroke ql-thin\\\" d=\\\"M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156\\\"/><path class=\\\"ql-stroke ql-thin\\\" d=\\\"M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109\\\"/></svg>\";\nconst subscriptIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z\\\"/><path class=\\\"ql-fill\\\" d=\\\"M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z\\\"/></svg>\";\nconst superscriptIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z\\\"/><path class=\\\"ql-fill\\\" d=\\\"M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z\\\"/></svg>\";\nconst strikeIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke ql-thin\\\" x1=\\\"15.5\\\" x2=\\\"2.5\\\" y1=\\\"8.5\\\" y2=\\\"9.5\\\"/><path class=\\\"ql-fill\\\" d=\\\"M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z\\\"/><path class=\\\"ql-fill\\\" d=\\\"M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z\\\"/></svg>\";\nconst tableIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><rect class=\\\"ql-stroke\\\" height=\\\"12\\\" width=\\\"12\\\" x=\\\"3\\\" y=\\\"3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"2\\\" width=\\\"3\\\" x=\\\"5\\\" y=\\\"5\\\"/><rect class=\\\"ql-fill\\\" height=\\\"2\\\" width=\\\"4\\\" x=\\\"9\\\" y=\\\"5\\\"/><g class=\\\"ql-fill ql-transparent\\\"><rect height=\\\"2\\\" width=\\\"3\\\" x=\\\"5\\\" y=\\\"8\\\"/><rect height=\\\"2\\\" width=\\\"4\\\" x=\\\"9\\\" y=\\\"8\\\"/><rect height=\\\"2\\\" width=\\\"3\\\" x=\\\"5\\\" y=\\\"11\\\"/><rect height=\\\"2\\\" width=\\\"4\\\" x=\\\"9\\\" y=\\\"11\\\"/></g></svg>\";\nconst underlineIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-stroke\\\" d=\\\"M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" rx=\\\"0.5\\\" ry=\\\"0.5\\\" width=\\\"12\\\" x=\\\"3\\\" y=\\\"15\\\"/></svg>\";\nconst videoIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><rect class=\\\"ql-stroke\\\" height=\\\"12\\\" width=\\\"12\\\" x=\\\"3\\\" y=\\\"3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"12\\\" width=\\\"1\\\" x=\\\"5\\\" y=\\\"3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"12\\\" width=\\\"1\\\" x=\\\"12\\\" y=\\\"3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"2\\\" width=\\\"8\\\" x=\\\"5\\\" y=\\\"8\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"3\\\" y=\\\"5\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"3\\\" y=\\\"7\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"3\\\" y=\\\"10\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"3\\\" y=\\\"12\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"12\\\" y=\\\"5\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"12\\\" y=\\\"7\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"12\\\" y=\\\"10\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"12\\\" y=\\\"12\\\"/></svg>\";\nexport default {\n  align: {\n    '': alignLeftIcon,\n    center: alignCenterIcon,\n    right: alignRightIcon,\n    justify: alignJustifyIcon\n  },\n  background: backgroundIcon,\n  blockquote: blockquoteIcon,\n  bold: boldIcon,\n  clean: cleanIcon,\n  code: codeIcon,\n  'code-block': codeIcon,\n  color: colorIcon,\n  direction: {\n    '': directionLeftToRightIcon,\n    rtl: directionRightToLeftIcon\n  },\n  formula: formulaIcon,\n  header: {\n    '1': headerIcon,\n    '2': header2Icon,\n    '3': header3Icon,\n    '4': header4Icon,\n    '5': header5Icon,\n    '6': header6Icon\n  },\n  italic: italicIcon,\n  image: imageIcon,\n  indent: {\n    '+1': indentIcon,\n    '-1': outdentIcon\n  },\n  link: linkIcon,\n  list: {\n    bullet: listBulletIcon,\n    check: listCheckIcon,\n    ordered: listOrderedIcon\n  },\n  script: {\n    sub: subscriptIcon,\n    super: superscriptIcon\n  },\n  strike: strikeIcon,\n  table: tableIcon,\n  underline: underlineIcon,\n  video: videoIcon\n};\n//# sourceMappingURL=icons.js.map", "const DropdownIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><polygon class=\\\"ql-stroke\\\" points=\\\"7 11 9 13 11 11 7 11\\\"/><polygon class=\\\"ql-stroke\\\" points=\\\"7 7 9 5 11 7 7 7\\\"/></svg>\";\nlet optionsCounter = 0;\nfunction toggleAriaAttribute(element, attribute) {\n  element.setAttribute(attribute, `${!(element.getAttribute(attribute) === 'true')}`);\n}\nclass Picker {\n  constructor(select) {\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    // @ts-expect-error Fix me later\n    this.select.parentNode.insertBefore(this.container, this.select);\n    this.label.addEventListener('mousedown', () => {\n      this.togglePicker();\n    });\n    this.label.addEventListener('keydown', event => {\n      switch (event.key) {\n        case 'Enter':\n          this.togglePicker();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n  togglePicker() {\n    this.container.classList.toggle('ql-expanded');\n    // Toggle aria-expanded and aria-hidden to make the picker accessible\n    toggleAriaAttribute(this.label, 'aria-expanded');\n    // @ts-expect-error\n    toggleAriaAttribute(this.options, 'aria-hidden');\n  }\n  buildItem(option) {\n    const item = document.createElement('span');\n    // @ts-expect-error\n    item.tabIndex = '0';\n    item.setAttribute('role', 'button');\n    item.classList.add('ql-picker-item');\n    const value = option.getAttribute('value');\n    if (value) {\n      item.setAttribute('data-value', value);\n    }\n    if (option.textContent) {\n      item.setAttribute('data-label', option.textContent);\n    }\n    item.addEventListener('click', () => {\n      this.selectItem(item, true);\n    });\n    item.addEventListener('keydown', event => {\n      switch (event.key) {\n        case 'Enter':\n          this.selectItem(item, true);\n          event.preventDefault();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    return item;\n  }\n  buildLabel() {\n    const label = document.createElement('span');\n    label.classList.add('ql-picker-label');\n    label.innerHTML = DropdownIcon;\n    // @ts-expect-error\n    label.tabIndex = '0';\n    label.setAttribute('role', 'button');\n    label.setAttribute('aria-expanded', 'false');\n    this.container.appendChild(label);\n    return label;\n  }\n  buildOptions() {\n    const options = document.createElement('span');\n    options.classList.add('ql-picker-options');\n\n    // Don't want screen readers to read this until options are visible\n    options.setAttribute('aria-hidden', 'true');\n    // @ts-expect-error\n    options.tabIndex = '-1';\n\n    // Need a unique id for aria-controls\n    options.id = `ql-picker-options-${optionsCounter}`;\n    optionsCounter += 1;\n    this.label.setAttribute('aria-controls', options.id);\n\n    // @ts-expect-error\n    this.options = options;\n    Array.from(this.select.options).forEach(option => {\n      const item = this.buildItem(option);\n      options.appendChild(item);\n      if (option.selected === true) {\n        this.selectItem(item);\n      }\n    });\n    this.container.appendChild(options);\n  }\n  buildPicker() {\n    Array.from(this.select.attributes).forEach(item => {\n      this.container.setAttribute(item.name, item.value);\n    });\n    this.container.classList.add('ql-picker');\n    this.label = this.buildLabel();\n    this.buildOptions();\n  }\n  escape() {\n    // Close menu and return focus to trigger label\n    this.close();\n    // Need setTimeout for accessibility to ensure that the browser executes\n    // focus on the next process thread and after any DOM content changes\n    setTimeout(() => this.label.focus(), 1);\n  }\n  close() {\n    this.container.classList.remove('ql-expanded');\n    this.label.setAttribute('aria-expanded', 'false');\n    // @ts-expect-error\n    this.options.setAttribute('aria-hidden', 'true');\n  }\n  selectItem(item) {\n    let trigger = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    const selected = this.container.querySelector('.ql-selected');\n    if (item === selected) return;\n    if (selected != null) {\n      selected.classList.remove('ql-selected');\n    }\n    if (item == null) return;\n    item.classList.add('ql-selected');\n    // @ts-expect-error Fix me later\n    this.select.selectedIndex = Array.from(item.parentNode.children).indexOf(item);\n    if (item.hasAttribute('data-value')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\n    } else {\n      this.label.removeAttribute('data-value');\n    }\n    if (item.hasAttribute('data-label')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\n    } else {\n      this.label.removeAttribute('data-label');\n    }\n    if (trigger) {\n      this.select.dispatchEvent(new Event('change'));\n      this.close();\n    }\n  }\n  update() {\n    let option;\n    if (this.select.selectedIndex > -1) {\n      const item =\n      // @ts-expect-error Fix me later\n      this.container.querySelector('.ql-picker-options').children[this.select.selectedIndex];\n      option = this.select.options[this.select.selectedIndex];\n      // @ts-expect-error\n      this.selectItem(item);\n    } else {\n      this.selectItem(null);\n    }\n    const isActive = option != null && option !== this.select.querySelector('option[selected]');\n    this.label.classList.toggle('ql-active', isActive);\n  }\n}\nexport default Picker;\n//# sourceMappingURL=picker.js.map", "import Picker from './picker.js';\nclass ColorPicker extends Picker {\n  constructor(select, label) {\n    super(select);\n    this.label.innerHTML = label;\n    this.container.classList.add('ql-color-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).slice(0, 7).forEach(item => {\n      item.classList.add('ql-primary');\n    });\n  }\n  buildItem(option) {\n    const item = super.buildItem(option);\n    item.style.backgroundColor = option.getAttribute('value') || '';\n    return item;\n  }\n  selectItem(item, trigger) {\n    super.selectItem(item, trigger);\n    const colorLabel = this.label.querySelector('.ql-color-label');\n    const value = item ? item.getAttribute('data-value') || '' : '';\n    if (colorLabel) {\n      if (colorLabel.tagName === 'line') {\n        colorLabel.style.stroke = value;\n      } else {\n        colorLabel.style.fill = value;\n      }\n    }\n  }\n}\nexport default ColorPicker;\n//# sourceMappingURL=color-picker.js.map", "import Picker from './picker.js';\nclass IconPicker extends Picker {\n  constructor(select, icons) {\n    super(select);\n    this.container.classList.add('ql-icon-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).forEach(item => {\n      item.innerHTML = icons[item.getAttribute('data-value') || ''];\n    });\n    this.defaultItem = this.container.querySelector('.ql-selected');\n    this.selectItem(this.defaultItem);\n  }\n  selectItem(target, trigger) {\n    super.selectItem(target, trigger);\n    const item = target || this.defaultItem;\n    if (item != null) {\n      if (this.label.innerHTML === item.innerHTML) return;\n      this.label.innerHTML = item.innerHTML;\n    }\n  }\n}\nexport default IconPicker;\n//# sourceMappingURL=icon-picker.js.map", "const isScrollable = el => {\n  const {\n    overflowY\n  } = getComputedStyle(el, null);\n  return overflowY !== 'visible' && overflowY !== 'clip';\n};\nclass Tooltip {\n  constructor(quill, boundsContainer) {\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer('ql-tooltip');\n    // @ts-expect-error\n    this.root.innerHTML = this.constructor.TEMPLATE;\n    if (isScrollable(this.quill.root)) {\n      this.quill.root.addEventListener('scroll', () => {\n        this.root.style.marginTop = `${-1 * this.quill.root.scrollTop}px`;\n      });\n    }\n    this.hide();\n  }\n  hide() {\n    this.root.classList.add('ql-hidden');\n  }\n  position(reference) {\n    const left = reference.left + reference.width / 2 - this.root.offsetWidth / 2;\n    // root.scrollTop should be 0 if scrollContainer !== root\n    const top = reference.bottom + this.quill.root.scrollTop;\n    this.root.style.left = `${left}px`;\n    this.root.style.top = `${top}px`;\n    this.root.classList.remove('ql-flip');\n    const containerBounds = this.boundsContainer.getBoundingClientRect();\n    const rootBounds = this.root.getBoundingClientRect();\n    let shift = 0;\n    if (rootBounds.right > containerBounds.right) {\n      shift = containerBounds.right - rootBounds.right;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.left < containerBounds.left) {\n      shift = containerBounds.left - rootBounds.left;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.bottom > containerBounds.bottom) {\n      const height = rootBounds.bottom - rootBounds.top;\n      const verticalShift = reference.bottom - reference.top + height;\n      this.root.style.top = `${top - verticalShift}px`;\n      this.root.classList.add('ql-flip');\n    }\n    return shift;\n  }\n  show() {\n    this.root.classList.remove('ql-editing');\n    this.root.classList.remove('ql-hidden');\n  }\n}\nexport default Tooltip;\n//# sourceMappingURL=tooltip.js.map", "import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport Theme from '../core/theme.js';\nimport ColorPicker from '../ui/color-picker.js';\nimport IconPicker from '../ui/icon-picker.js';\nimport Picker from '../ui/picker.js';\nimport Tooltip from '../ui/tooltip.js';\nconst ALIGNS = [false, 'center', 'right', 'justify'];\nconst COLORS = ['#000000', '#e60000', '#ff9900', '#ffff00', '#008a00', '#0066cc', '#9933ff', '#ffffff', '#facccc', '#ffebcc', '#ffffcc', '#cce8cc', '#cce0f5', '#ebd6ff', '#bbbbbb', '#f06666', '#ffc266', '#ffff66', '#66b966', '#66a3e0', '#c285ff', '#888888', '#a10000', '#b26b00', '#b2b200', '#006100', '#0047b2', '#6b24b2', '#444444', '#5c0000', '#663d00', '#666600', '#003700', '#002966', '#3d1466'];\nconst FONTS = [false, 'serif', 'monospace'];\nconst HEADERS = ['1', '2', '3', false];\nconst SIZES = ['small', false, 'large', 'huge'];\nclass BaseTheme extends Theme {\n  constructor(quill, options) {\n    super(quill, options);\n    const listener = e => {\n      if (!document.body.contains(quill.root)) {\n        document.body.removeEventListener('click', listener);\n        return;\n      }\n      if (this.tooltip != null &&\n      // @ts-expect-error\n      !this.tooltip.root.contains(e.target) &&\n      // @ts-expect-error\n      document.activeElement !== this.tooltip.textbox && !this.quill.hasFocus()) {\n        this.tooltip.hide();\n      }\n      if (this.pickers != null) {\n        this.pickers.forEach(picker => {\n          // @ts-expect-error\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n    quill.emitter.listenDOM('click', document.body, listener);\n  }\n  addModule(name) {\n    const module = super.addModule(name);\n    if (name === 'toolbar') {\n      // @ts-expect-error\n      this.extendToolbar(module);\n    }\n    return module;\n  }\n  buildButtons(buttons, icons) {\n    Array.from(buttons).forEach(button => {\n      const className = button.getAttribute('class') || '';\n      className.split(/\\s+/).forEach(name => {\n        if (!name.startsWith('ql-')) return;\n        name = name.slice('ql-'.length);\n        if (icons[name] == null) return;\n        if (name === 'direction') {\n          // @ts-expect-error\n          button.innerHTML = icons[name][''] + icons[name].rtl;\n        } else if (typeof icons[name] === 'string') {\n          // @ts-expect-error\n          button.innerHTML = icons[name];\n        } else {\n          // @ts-expect-error\n          const value = button.value || '';\n          // @ts-expect-error\n          if (value != null && icons[name][value]) {\n            // @ts-expect-error\n            button.innerHTML = icons[name][value];\n          }\n        }\n      });\n    });\n  }\n  buildPickers(selects, icons) {\n    this.pickers = Array.from(selects).map(select => {\n      if (select.classList.contains('ql-align')) {\n        if (select.querySelector('option') == null) {\n          fillSelect(select, ALIGNS);\n        }\n        if (typeof icons.align === 'object') {\n          return new IconPicker(select, icons.align);\n        }\n      }\n      if (select.classList.contains('ql-background') || select.classList.contains('ql-color')) {\n        const format = select.classList.contains('ql-background') ? 'background' : 'color';\n        if (select.querySelector('option') == null) {\n          fillSelect(select, COLORS, format === 'background' ? '#ffffff' : '#000000');\n        }\n        return new ColorPicker(select, icons[format]);\n      }\n      if (select.querySelector('option') == null) {\n        if (select.classList.contains('ql-font')) {\n          fillSelect(select, FONTS);\n        } else if (select.classList.contains('ql-header')) {\n          fillSelect(select, HEADERS);\n        } else if (select.classList.contains('ql-size')) {\n          fillSelect(select, SIZES);\n        }\n      }\n      return new Picker(select);\n    });\n    const update = () => {\n      this.pickers.forEach(picker => {\n        picker.update();\n      });\n    };\n    this.quill.on(Emitter.events.EDITOR_CHANGE, update);\n  }\n}\nBaseTheme.DEFAULTS = merge({}, Theme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n        image() {\n          let fileInput = this.container.querySelector('input.ql-image[type=file]');\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute('accept', this.quill.uploader.options.mimetypes.join(', '));\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', () => {\n              const range = this.quill.getSelection(true);\n              this.quill.uploader.upload(range, fileInput.files);\n              fileInput.value = '';\n            });\n            this.container.appendChild(fileInput);\n          }\n          fileInput.click();\n        },\n        video() {\n          this.quill.theme.tooltip.edit('video');\n        }\n      }\n    }\n  }\n});\nclass BaseTooltip extends Tooltip {\n  constructor(quill, boundsContainer) {\n    super(quill, boundsContainer);\n    this.textbox = this.root.querySelector('input[type=\"text\"]');\n    this.listen();\n  }\n  listen() {\n    // @ts-expect-error Fix me later\n    this.textbox.addEventListener('keydown', event => {\n      if (event.key === 'Enter') {\n        this.save();\n        event.preventDefault();\n      } else if (event.key === 'Escape') {\n        this.cancel();\n        event.preventDefault();\n      }\n    });\n  }\n  cancel() {\n    this.hide();\n    this.restoreFocus();\n  }\n  edit() {\n    let mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'link';\n    let preview = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    this.root.classList.remove('ql-hidden');\n    this.root.classList.add('ql-editing');\n    if (this.textbox == null) return;\n    if (preview != null) {\n      this.textbox.value = preview;\n    } else if (mode !== this.root.getAttribute('data-mode')) {\n      this.textbox.value = '';\n    }\n    const bounds = this.quill.getBounds(this.quill.selection.savedRange);\n    if (bounds != null) {\n      this.position(bounds);\n    }\n    this.textbox.select();\n    this.textbox.setAttribute('placeholder', this.textbox.getAttribute(`data-${mode}`) || '');\n    this.root.setAttribute('data-mode', mode);\n  }\n  restoreFocus() {\n    this.quill.focus({\n      preventScroll: true\n    });\n  }\n  save() {\n    // @ts-expect-error Fix me later\n    let {\n      value\n    } = this.textbox;\n    switch (this.root.getAttribute('data-mode')) {\n      case 'link':\n        {\n          const {\n            scrollTop\n          } = this.quill.root;\n          if (this.linkRange) {\n            this.quill.formatText(this.linkRange, 'link', value, Emitter.sources.USER);\n            delete this.linkRange;\n          } else {\n            this.restoreFocus();\n            this.quill.format('link', value, Emitter.sources.USER);\n          }\n          this.quill.root.scrollTop = scrollTop;\n          break;\n        }\n      case 'video':\n        {\n          value = extractVideoUrl(value);\n        }\n      // eslint-disable-next-line no-fallthrough\n      case 'formula':\n        {\n          if (!value) break;\n          const range = this.quill.getSelection(true);\n          if (range != null) {\n            const index = range.index + range.length;\n            this.quill.insertEmbed(index,\n            // @ts-expect-error Fix me later\n            this.root.getAttribute('data-mode'), value, Emitter.sources.USER);\n            if (this.root.getAttribute('data-mode') === 'formula') {\n              this.quill.insertText(index + 1, ' ', Emitter.sources.USER);\n            }\n            this.quill.setSelection(index + 2, Emitter.sources.USER);\n          }\n          break;\n        }\n      default:\n    }\n    // @ts-expect-error Fix me later\n    this.textbox.value = '';\n    this.hide();\n  }\n}\nfunction extractVideoUrl(url) {\n  let match = url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/) || url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n  if (match) {\n    return `${match[1] || 'https'}://www.youtube.com/embed/${match[2]}?showinfo=0`;\n  }\n  // eslint-disable-next-line no-cond-assign\n  if (match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/)) {\n    return `${match[1] || 'https'}://player.vimeo.com/video/${match[2]}/`;\n  }\n  return url;\n}\nfunction fillSelect(select, values) {\n  let defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  values.forEach(value => {\n    const option = document.createElement('option');\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', String(value));\n    }\n    select.appendChild(option);\n  });\n}\nexport { BaseTooltip, BaseTheme as default };\n//# sourceMappingURL=base.js.map", "import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport { Range } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nconst TOOLBAR_CONFIG = [['bold', 'italic', 'link'], [{\n  header: 1\n}, {\n  header: 2\n}, 'blockquote']];\nclass BubbleTooltip extends BaseTooltip {\n  static TEMPLATE = ['<span class=\"ql-tooltip-arrow\"></span>', '<div class=\"ql-tooltip-editor\">', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-close\"></a>', '</div>'].join('');\n  constructor(quill, bounds) {\n    super(quill, bounds);\n    this.quill.on(Emitter.events.EDITOR_CHANGE, (type, range, oldRange, source) => {\n      if (type !== Emitter.events.SELECTION_CHANGE) return;\n      if (range != null && range.length > 0 && source === Emitter.sources.USER) {\n        this.show();\n        // Lock our width so we will expand beyond our offsetParent boundaries\n        this.root.style.left = '0px';\n        this.root.style.width = '';\n        this.root.style.width = `${this.root.offsetWidth}px`;\n        const lines = this.quill.getLines(range.index, range.length);\n        if (lines.length === 1) {\n          const bounds = this.quill.getBounds(range);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n        } else {\n          const lastLine = lines[lines.length - 1];\n          const index = this.quill.getIndex(lastLine);\n          const length = Math.min(lastLine.length() - 1, range.index + range.length - index);\n          const indexBounds = this.quill.getBounds(new Range(index, length));\n          if (indexBounds != null) {\n            this.position(indexBounds);\n          }\n        }\n      } else if (document.activeElement !== this.textbox && this.quill.hasFocus()) {\n        this.hide();\n      }\n    });\n  }\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root.querySelector('.ql-close').addEventListener('click', () => {\n      this.root.classList.remove('ql-editing');\n    });\n    this.quill.on(Emitter.events.SCROLL_OPTIMIZE, () => {\n      // Let selection be restored by toolbar handlers before repositioning\n      setTimeout(() => {\n        if (this.root.classList.contains('ql-hidden')) return;\n        const range = this.quill.getSelection();\n        if (range != null) {\n          const bounds = this.quill.getBounds(range);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n        }\n      }, 1);\n    });\n  }\n  cancel() {\n    this.show();\n  }\n  position(reference) {\n    const shift = super.position(reference);\n    const arrow = this.root.querySelector('.ql-tooltip-arrow');\n    // @ts-expect-error\n    arrow.style.marginLeft = '';\n    if (shift !== 0) {\n      // @ts-expect-error\n      arrow.style.marginLeft = `${-1 * shift - arrow.offsetWidth / 2}px`;\n    }\n    return shift;\n  }\n}\nclass BubbleTheme extends BaseTheme {\n  constructor(quill, options) {\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-bubble');\n  }\n  extendToolbar(toolbar) {\n    // @ts-expect-error\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n    if (toolbar.container != null) {\n      this.tooltip.root.appendChild(toolbar.container);\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n    }\n  }\n}\nBubbleTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value) {\n          if (!value) {\n            this.quill.format('link', false, Quill.sources.USER);\n          } else {\n            // @ts-expect-error\n            this.quill.theme.tooltip.edit();\n          }\n        }\n      }\n    }\n  }\n});\nexport { BubbleTooltip, BubbleTheme as default };\n//# sourceMappingURL=bubble.js.map", "import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport LinkBlot from '../formats/link.js';\nimport { Range } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nconst TOOLBAR_CONFIG = [[{\n  header: ['1', '2', '3', false]\n}], ['bold', 'italic', 'underline', 'link'], [{\n  list: 'ordered'\n}, {\n  list: 'bullet'\n}], ['clean']];\nclass SnowTooltip extends BaseTooltip {\n  static TEMPLATE = ['<a class=\"ql-preview\" rel=\"noopener noreferrer\" target=\"_blank\" href=\"about:blank\"></a>', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-action\"></a>', '<a class=\"ql-remove\"></a>'].join('');\n  preview = this.root.querySelector('a.ql-preview');\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root.querySelector('a.ql-action').addEventListener('click', event => {\n      if (this.root.classList.contains('ql-editing')) {\n        this.save();\n      } else {\n        // @ts-expect-error Fix me later\n        this.edit('link', this.preview.textContent);\n      }\n      event.preventDefault();\n    });\n    // @ts-expect-error Fix me later\n    this.root.querySelector('a.ql-remove').addEventListener('click', event => {\n      if (this.linkRange != null) {\n        const range = this.linkRange;\n        this.restoreFocus();\n        this.quill.formatText(range, 'link', false, Emitter.sources.USER);\n        delete this.linkRange;\n      }\n      event.preventDefault();\n      this.hide();\n    });\n    this.quill.on(Emitter.events.SELECTION_CHANGE, (range, oldRange, source) => {\n      if (range == null) return;\n      if (range.length === 0 && source === Emitter.sources.USER) {\n        const [link, offset] = this.quill.scroll.descendant(LinkBlot, range.index);\n        if (link != null) {\n          this.linkRange = new Range(range.index - offset, link.length());\n          const preview = LinkBlot.formats(link.domNode);\n          // @ts-expect-error Fix me later\n          this.preview.textContent = preview;\n          // @ts-expect-error Fix me later\n          this.preview.setAttribute('href', preview);\n          this.show();\n          const bounds = this.quill.getBounds(this.linkRange);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n          return;\n        }\n      } else {\n        delete this.linkRange;\n      }\n      this.hide();\n    });\n  }\n  show() {\n    super.show();\n    this.root.removeAttribute('data-mode');\n  }\n}\nclass SnowTheme extends BaseTheme {\n  constructor(quill, options) {\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-snow');\n  }\n  extendToolbar(toolbar) {\n    if (toolbar.container != null) {\n      toolbar.container.classList.add('ql-snow');\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n      // @ts-expect-error\n      this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n      if (toolbar.container.querySelector('.ql-link')) {\n        this.quill.keyboard.addBinding({\n          key: 'k',\n          shortKey: true\n        }, (_range, context) => {\n          toolbar.handlers.link.call(toolbar, !context.format.link);\n        });\n      }\n    }\n  }\n}\nSnowTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value) {\n          if (value) {\n            const range = this.quill.getSelection();\n            if (range == null || range.length === 0) return;\n            let preview = this.quill.getText(range);\n            if (/^\\S+@\\S+\\.\\S+$/.test(preview) && preview.indexOf('mailto:') !== 0) {\n              preview = `mailto:${preview}`;\n            }\n            // @ts-expect-error\n            const {\n              tooltip\n            } = this.quill.theme;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false, Quill.sources.USER);\n          }\n        }\n      }\n    }\n  }\n});\nexport default SnowTheme;\n//# sourceMappingURL=snow.js.map", "import Quill, { Parchment, Range } from './core.js';\nimport { AlignClass, AlignStyle } from './formats/align.js';\nimport { DirectionAttribute, DirectionClass, DirectionStyle } from './formats/direction.js';\nimport Indent from './formats/indent.js';\nimport Blockquote from './formats/blockquote.js';\nimport Header from './formats/header.js';\nimport List from './formats/list.js';\nimport { BackgroundClass, BackgroundStyle } from './formats/background.js';\nimport { ColorClass, ColorStyle } from './formats/color.js';\nimport { FontClass, FontStyle } from './formats/font.js';\nimport { SizeClass, SizeStyle } from './formats/size.js';\nimport Bold from './formats/bold.js';\nimport Italic from './formats/italic.js';\nimport Link from './formats/link.js';\nimport Script from './formats/script.js';\nimport Strike from './formats/strike.js';\nimport Underline from './formats/underline.js';\nimport Formula from './formats/formula.js';\nimport Image from './formats/image.js';\nimport Video from './formats/video.js';\nimport CodeBlock, { Code as InlineCode } from './formats/code.js';\nimport Syntax from './modules/syntax.js';\nimport Table from './modules/table.js';\nimport Toolbar from './modules/toolbar.js';\nimport Icons from './ui/icons.js';\nimport Picker from './ui/picker.js';\nimport ColorPicker from './ui/color-picker.js';\nimport IconPicker from './ui/icon-picker.js';\nimport Tooltip from './ui/tooltip.js';\nimport BubbleTheme from './themes/bubble.js';\nimport SnowTheme from './themes/snow.js';\nQuill.register({\n  'attributors/attribute/direction': DirectionAttribute,\n  'attributors/class/align': AlignClass,\n  'attributors/class/background': BackgroundClass,\n  'attributors/class/color': ColorClass,\n  'attributors/class/direction': DirectionClass,\n  'attributors/class/font': FontClass,\n  'attributors/class/size': SizeClass,\n  'attributors/style/align': AlignStyle,\n  'attributors/style/background': BackgroundStyle,\n  'attributors/style/color': ColorStyle,\n  'attributors/style/direction': DirectionStyle,\n  'attributors/style/font': FontStyle,\n  'attributors/style/size': SizeStyle\n}, true);\nQuill.register({\n  'formats/align': AlignClass,\n  'formats/direction': DirectionClass,\n  'formats/indent': Indent,\n  'formats/background': BackgroundStyle,\n  'formats/color': ColorStyle,\n  'formats/font': FontClass,\n  'formats/size': SizeClass,\n  'formats/blockquote': Blockquote,\n  'formats/code-block': CodeBlock,\n  'formats/header': Header,\n  'formats/list': List,\n  'formats/bold': Bold,\n  'formats/code': InlineCode,\n  'formats/italic': Italic,\n  'formats/link': Link,\n  'formats/script': Script,\n  'formats/strike': Strike,\n  'formats/underline': Underline,\n  'formats/formula': Formula,\n  'formats/image': Image,\n  'formats/video': Video,\n  'modules/syntax': Syntax,\n  'modules/table': Table,\n  'modules/toolbar': Toolbar,\n  'themes/bubble': BubbleTheme,\n  'themes/snow': SnowTheme,\n  'ui/icons': Icons,\n  'ui/picker': Picker,\n  'ui/icon-picker': IconPicker,\n  'ui/color-picker': ColorPicker,\n  'ui/tooltip': Tooltip\n}, true);\nexport { Module } from './core.js';\nexport { Parchment, Range };\nexport default Quill;\n//# sourceMappingURL=quill.js.map", "import type { RGBColor } from './type'\r\n\r\n/** 实现十六进制颜色转RGB颜色，包括透明度 */\r\nexport function HEXToRGB(color: string): RGBColor {\r\n  // 移除可能存在的 '#' 前缀\r\n  let hex = color.replace(/^#/, '')\r\n  let [r, g, b] = [0, 0, 0]\r\n\r\n  if (hex.length === 3) {\r\n    const [r10, g10, b10] = [hex[0]!, hex[1]!, hex[2]!]\r\n    hex = `${r10}${r10}${g10}${g10}${b10}${b10}`\r\n  }\r\n\r\n  r = parseInt(hex.slice(0, 2), 16)\r\n  g = parseInt(hex.slice(2, 4), 16)\r\n  b = parseInt(hex.slice(4, 6), 16)\r\n\r\n  return [r, g, b]\r\n}\r\n\r\n/**\r\n * 混合两个颜色，并返回混合结果的十六进制表示。\r\n * @param color1 - 第一个颜色，格式为`#RRGGBB`。\r\n * @param color2 - 第二个颜色，格式为`#RRGGBB`。\r\n * @param ratio - 颜色混合的比例，取值范围为0到1。\r\n * @returns 混合结果的十六进制表示。\r\n */\r\nexport function mixColor(\r\n  color1: `#${string}`,\r\n  color2: `#${string}`,\r\n  ratio: number\r\n) {\r\n  if (ratio > 1) throw new Error('ratio的值在0-1之间')\r\n  const color1RGB = HEXToRGB(color1)\r\n  const color2RGB = HEXToRGB(color2)\r\n\r\n  const color1Ratio = 1 - ratio\r\n\r\n  return (\r\n    '#' +\r\n    color1RGB\r\n      .map((n, i) => {\r\n        const hex = Math.floor(\r\n          color1Ratio * n + color2RGB[i]! * ratio\r\n        ).toString(16)\r\n        return hex.length === 1 ? '0' + hex : hex\r\n      })\r\n      .join('')\r\n  )\r\n}\r\n", "import { reactive, watchEffect } from 'vue'\r\nimport type { Theme } from './type'\r\nimport { mixColor } from './helper'\r\nimport { kebabCase } from 'cat-kit/fe'\r\nimport { withUnit } from '@ui/utils'\r\n\r\nfunction defineBySize(variable: Record<'small' | 'default' | 'large', number>) {\r\n  return variable\r\n}\r\n\r\nexport const theme = reactive<Theme>({\r\n  color: {\r\n    primary: '#0ea5e9',\r\n    success: '#4caf50',\r\n    warning: '#ffc107',\r\n    danger: '#f44336',\r\n    info: '#009688',\r\n    disabled: '#f5f7fa',\r\n    default: '#f1f5f9'\r\n  },\r\n\r\n  bgColor: {\r\n    bottom: '#fdfdfd',\r\n    middle: '#fefefe',\r\n    top: '#ffffff',\r\n    hover: '#f5f7fa',\r\n    black: '#000000'\r\n  },\r\n\r\n  border: {\r\n    color: '#dcdfe6',\r\n    width: 1,\r\n    style: 'solid'\r\n  },\r\n\r\n  textColor: {\r\n    title: '#303133',\r\n    main: '#606266',\r\n    placeholder: '#a8abb2',\r\n    second: '#979797',\r\n    assist: '#c0c4cc',\r\n    disabled: '#a8abb2',\r\n    white: '#fff'\r\n  },\r\n\r\n  radius: defineBySize({\r\n    small: 2,\r\n    default: 4,\r\n    large: 8\r\n  }),\r\n\r\n  formComponentHeight: defineBySize({\r\n    small: 24,\r\n    default: 32,\r\n    large: 40\r\n  }),\r\n\r\n  menuHeight: defineBySize({\r\n    small: 32,\r\n    default: 40,\r\n    large: 48\r\n  }),\r\n\r\n  fontFamily:\r\n    'Inter, \"Roboto\", \"Segoe UI\", -apple-system, BlinkMacSystemFont, \"Microsoft YaHei\", \"PingFang SC\", sans-serif',\r\n\r\n  fontSizeTitle: defineBySize({\r\n    small: 16,\r\n    default: 16,\r\n    large: 18\r\n  }),\r\n\r\n  fontSizeMain: defineBySize({\r\n    small: 12,\r\n    default: 14,\r\n    large: 16\r\n  }),\r\n\r\n  fontSizeAssist: defineBySize({\r\n    small: 12,\r\n    default: 12,\r\n    large: 14\r\n  }),\r\n\r\n  shadow: {\r\n    color: '#ccc',\r\n    x: 0,\r\n    y: 0,\r\n    blur: 4,\r\n    spread: 0\r\n  },\r\n\r\n  tag: defineBySize({\r\n    small: 20,\r\n    default: 24,\r\n    large: 28\r\n  }),\r\n\r\n  gap: defineBySize({\r\n    small: 6,\r\n    default: 8,\r\n    large: 12\r\n  }),\r\n\r\n  breakpoint: {\r\n    xs: 600,\r\n    sm: 960,\r\n    md: 1280,\r\n    lg: 1920\r\n  }\r\n})\r\n\r\nfunction renderThemeColor(color: Theme['color']) {\r\n  const types = Object.keys(color) as (keyof Theme['color'])[]\r\n  const rates = [1, 3, 5, 7, 9]\r\n\r\n  const varsText = types\r\n    .map(type => {\r\n      let colorKey = `--color-${type}`\r\n      let colorValue = color[type]! as `#${string}`\r\n\r\n      const rateColors = rates\r\n        .map(rate => {\r\n          const light = `${colorKey}-light-${rate}: ${mixColor(\r\n            colorValue,\r\n            '#fff',\r\n            rate / 10\r\n          )}`\r\n          const dark = `${colorKey}-dark-${rate}: ${mixColor(\r\n            colorValue,\r\n            '#000',\r\n            rate / 10\r\n          )}`\r\n          return `${light};${dark}`\r\n        })\r\n        .join(';')\r\n\r\n      return `${colorKey}: ${colorValue};${rateColors}`\r\n    })\r\n    .join(';')\r\n\r\n  return varsText\r\n}\r\n\r\nfunction renderOtherTheme(\r\n  theme: Record<string, any>,\r\n  themeRules: string[] = [],\r\n  parentKey = '-'\r\n) {\r\n  Object.keys(theme).forEach(key => {\r\n    const value = theme[key]\r\n    const varKey = `${parentKey.startsWith('-') ? parentKey : kebabCase(parentKey)}-${kebabCase(key)}`\r\n    if (typeof value === 'object') {\r\n      renderOtherTheme(value, themeRules, varKey)\r\n    } else {\r\n      themeRules.push(`${varKey}: ${withUnit(value, 'px')}`)\r\n    }\r\n  })\r\n\r\n  return themeRules.join(';')\r\n}\r\n\r\nfunction renderShadow() {\r\n  const k = (v: string) => `var(--shadow-${v})`\r\n  return `--shadow: ${k('x')} ${k('y')} ${k('blur')} ${k('spread')} ${k('color')}`\r\n}\r\n\r\nfunction renderBorder() {\r\n  const k = (v: string) => `var(--border-${v})`\r\n  return `--border:${k('width')} ${k('style')} ${k('color')}`\r\n}\r\n\r\nfunction renderBGColorAlpha() {\r\n  const bgs = Object.keys(theme.bgColor)\r\n  return bgs\r\n    .map(type => {\r\n      return `--bg-color-${type}-alpha: ${theme.bgColor[type]}cc`\r\n    })\r\n    .join(';')\r\n}\r\n\r\n/** 加载主题 */\r\nfunction loadTheme() {\r\n  // 主题色\r\n  const { color, ...rest } = theme\r\n\r\n  const ruleText = [\r\n    renderThemeColor(color),\r\n    renderOtherTheme(rest),\r\n    renderShadow(),\r\n    renderBorder(),\r\n    renderBGColorAlpha()\r\n  ].join(';')\r\n\r\n  const themeID = 'ultra-ui-theme'\r\n\r\n  let style = document.getElementById(themeID)\r\n  if (!style) {\r\n    style = document.createElement('style')\r\n    style.id = themeID\r\n    style.innerText = `:root { ${ruleText}; }`\r\n    document.head.appendChild(style)\r\n  } else {\r\n    style.innerText = `:root { ${ruleText}; }`\r\n  }\r\n}\r\n\r\nwatchEffect(() => {\r\n  loadTheme()\r\n})\r\n", "<template>\r\n  <div :class=\"cls.e('header')\">\r\n    <div>\r\n      <u-icon @click=\"handlePreYear\" title=\"上一年\">\r\n        <DArrowLeft />\r\n      </u-icon>\r\n      <u-icon @click=\"handlePreMonth\" title=\"上个月\">\r\n        <ArrowLeft />\r\n      </u-icon>\r\n    </div>\r\n\r\n    <div>\r\n      <span :class=\"cls.e('header-year')\" @click=\"state.panel = 'year'\">\r\n        {{ state.panelDate.year }}\r\n      </span>\r\n      <span :class=\"cls.e('header-month')\" @click=\"state.panel = 'month'\">\r\n        {{ state.panelDate.month }}月\r\n      </span>\r\n    </div>\r\n\r\n    <div>\r\n      <u-icon @click=\"handleNextMonth\" title=\"下个月\">\r\n        <ArrowRight />\r\n      </u-icon>\r\n      <u-icon @click=\"handleNextYear\" title=\"下一年\">\r\n        <DArrowRight />\r\n      </u-icon>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { UIcon } from '@ui/components'\r\nimport { useDate } from '../use-date'\r\nimport { ArrowLeft, ArrowRight, DArrowLeft, DArrowRight } from 'icon-ultra'\r\n\r\ndefineOptions({\r\n  name: 'DatePickerDayHeader'\r\n})\r\n\r\nconst {\r\n  state,\r\n  cls,\r\n  handlePreYear,\r\n  handlePreMonth,\r\n  handleNextYear,\r\n  handleNextMonth\r\n} = useDate('inject')\r\n</script>\r\n", "<template>\r\n  <div :class=\"cls.e('header')\">\r\n    <u-icon @click=\"handlePreYear\" title=\"上一年\">\r\n      <DArrowLeft />\r\n    </u-icon>\r\n\r\n    <span :class=\"cls.e('header-year')\" @click=\"state.panel = 'year'\">\r\n      {{ state.panelDate.year }}\r\n    </span>\r\n\r\n    <u-icon @click=\"handleNextYear\" title=\"下一年\">\r\n      <DArrowRight />\r\n    </u-icon>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { UIcon } from '@ui/components'\r\nimport { useDate } from '../use-date'\r\nimport { DArrowLeft, DArrowRight } from 'icon-ultra'\r\n\r\ndefineOptions({\r\n  name: 'DatePickerMonthHeader'\r\n})\r\n\r\nconst { state, cls, handlePreYear, handleNextYear } = useDate('inject')\r\n</script>\r\n", "<template>\r\n  <div :class=\"cls.e('header')\">\r\n    <u-icon @click=\"handlePreTenYears\" title=\"上个十年\">\r\n      <DArrowLeft />\r\n    </u-icon>\r\n\r\n    <span> {{ startYear }} ~ {{ endYear }} </span>\r\n\r\n    <u-icon @click=\"handleNextTenYears\" title=\"下个十年\">\r\n      <DArrowRight />\r\n    </u-icon>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { UIcon } from '@ui/components'\r\nimport { useDate } from '../use-date'\r\nimport { DArrowLeft, DArrowRight } from 'icon-ultra'\r\nimport { computed } from 'vue'\r\n\r\ndefineOptions({\r\n  name: 'DatePickerMonthHeader'\r\n})\r\n\r\nconst { state, cls, handlePreTenYears, handleNextTenYears } = useDate('inject')\r\n\r\nconst startYear = computed(() => {\r\n  return state.panelDate.year - (state.panelDate.year % 10) + 1\r\n})\r\n\r\nconst endYear = computed(() => {\r\n  return startYear.value + 9\r\n})\r\n</script>\r\n", "<template>\r\n  <template v-if=\"state.panel === 'day'\">\r\n    <DayHeader />\r\n    <DayPanel />\r\n  </template>\r\n\r\n  <template v-if=\"state.panel === 'year'\">\r\n    <YearHeader />\r\n    <YearPanel />\r\n  </template>\r\n\r\n  <template v-if=\"state.panel === 'month'\">\r\n    <MonthHeader />\r\n    <MonthPanel />\r\n  </template>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport DayPanel from './panels/day.vue'\r\nimport MonthPanel from './panels/month.vue'\r\nimport YearPanel from './panels/year.vue'\r\nimport DayHeader from './headers/day.vue'\r\nimport MonthHeader from './headers/month.vue'\r\nimport YearHeader from './headers/year.vue'\r\nimport { useDate } from './use-date'\r\n\r\ndefineOptions({\r\n  name: 'DatePickerPanel',\r\n  inheritAttrs: false\r\n})\r\n\r\nconst { state } = useDate('inject')\r\n</script>\r\n", "<template>\r\n  <u-dropdown\r\n    :class=\"className\"\r\n    trigger=\"click\"\r\n    :content-class=\"[cls.e('panel'), cls.em('panel', size)]\"\r\n    width=\"auto\"\r\n    ref=\"dropdownRef\"\r\n    @update:visible=\"$event && updatePanelDate()\"\r\n    :disabled=\"disabled\"\r\n    v-if=\"!readonly\"\r\n  >\r\n    <template #trigger>\r\n      <u-input\r\n        :size=\"size\"\r\n        native-readonly\r\n        :placeholder=\"placeholder\"\r\n        :model-value=\"modelValue\"\r\n        @update:model-value=\"v => emit('update:modelValue', v)\"\r\n      >\r\n        <template #suffix>\r\n          <u-icon :class=\"cls.e('icon')\"><Calendar /></u-icon>\r\n        </template>\r\n      </u-input>\r\n    </template>\r\n\r\n    <template #content>\r\n      <DatePickerPanel />\r\n    </template>\r\n  </u-dropdown>\r\n\r\n  <span v-else>\r\n    {{ modelValue || FORM_EMPTY_CONTENT }}\r\n  </span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type {\r\n  DatePickerEmits,\r\n  DatePickerProps\r\n} from '@ui/types/components/date-picker'\r\nimport { bem } from '@ui/utils'\r\nimport { UDropdown, type DropdownExposed } from '../dropdown'\r\nimport { UInput } from '../input'\r\nimport { UIcon } from '../icon'\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\nimport { computed, shallowRef } from 'vue'\r\nimport { Calendar } from 'icon-ultra'\r\nimport DatePickerPanel from './date-picker-panel.vue'\r\nimport { FORM_EMPTY_CONTENT } from '@ui/shared'\r\nimport { useDate } from './use-date'\r\n\r\ndefineOptions({\r\n  name: 'DatePicker'\r\n})\r\n\r\nconst props = withDefaults(defineProps<DatePickerProps>(), {\r\n  placeholder: '选择日期',\r\n  type: 'date',\r\n  disabled: undefined,\r\n  readonly: undefined\r\n})\r\n\r\nconst emit = defineEmits<DatePickerEmits>()\r\n\r\nconst cls = bem('date-picker')\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled, readonly } = useFormFallbackProps(\r\n  [formProps ?? {}, props],\r\n  {\r\n    size: 'default',\r\n    disabled: false,\r\n    readonly: false\r\n  }\r\n)\r\n\r\nconst className = computed(() => {\r\n  return [cls.b, cls.m(size.value)]\r\n})\r\n\r\nconst dropdownRef = shallowRef<DropdownExposed>()\r\n\r\nconst { updatePanelDate } = useDate('provide', {\r\n  props,\r\n  emit,\r\n  closeDropdown: () => dropdownRef.value?.close()\r\n})\r\n</script>\r\n", "type Active =\r\n  | boolean\r\n  | ((active: boolean) => boolean)\r\n  | ((active: boolean) => Promise<boolean>)\r\n\r\ntype ToggleReturn = [{ value: boolean }, (active: Active) => void]\r\n/**\r\n * 创建一个toggle函数\r\n * @param initial 初始值\r\n * @param onChange 值变化时的回调\r\n * @returns\r\n */\r\nexport function createToggle(\r\n  initial = false,\r\n  onChange?: (active: boolean) => void\r\n): ToggleReturn {\r\n  const state = {\r\n    value: initial\r\n  }\r\n\r\n  function toggle(active: Active) {\r\n    if (typeof active === 'boolean') {\r\n      state.value = active\r\n      return onChange?.(state.value)\r\n    }\r\n\r\n    const result = active(state.value)\r\n\r\n    if (result instanceof Promise) {\r\n      result.then(toggle)\r\n    } else {\r\n      toggle(result)\r\n    }\r\n  }\r\n\r\n  return [state, toggle]\r\n}\r\n", "import { isRef, watch, onBeforeUnmount, computed } from 'vue'\r\nimport type { Returned, CssTransitionOptions } from './type'\r\nimport { createToggle, nextFrame } from '@ui/utils'\r\n\r\n/**\r\n * 使用css过渡\r\n * @param options 过渡选项\r\n */\r\nexport function useCssTransition(options: CssTransitionOptions): Returned {\r\n  const {\r\n    name,\r\n    target,\r\n    afterEnter,\r\n    afterLeave,\r\n    enterCanceled,\r\n    leaveCanceled,\r\n    keepEnterTo = false\r\n  } = options\r\n\r\n  const getDom = (): HTMLElement | undefined =>\r\n    isRef(target) ? target.value : target\r\n\r\n  const classes = computed(() => {\r\n    const _name = typeof name === 'string' ? name : name.value\r\n    return {\r\n      /** 进入前的类 */\r\n      enterFrom: `${_name}-enter-from`,\r\n      /** 进入后最终的类 */\r\n      enterTo: `${_name}-enter-to`,\r\n      /** 【进入动画】持续时的类 */\r\n      enterActive: `${_name}-enter-active`,\r\n      /** 离开前的类 */\r\n      leaveFrom: `${_name}-leave-from`,\r\n      /** 离开类 */\r\n      leaveTo: `${_name}-leave-to`,\r\n      /** 【离开动画】持续时的类 */\r\n      leaveActive: `${_name}-leave-active`\r\n    }\r\n  })\r\n\r\n  /** 开始进入动画 */\r\n  const startTransitionIn = () => {\r\n    const { enterActive, enterTo, enterFrom } = classes.value\r\n    const dom = getDom()\r\n\r\n    dom?.classList.add(enterFrom)\r\n    dom?.classList.add(enterActive)\r\n\r\n    nextFrame(() => {\r\n      dom?.classList.remove(enterFrom)\r\n      dom?.classList.add(enterTo)\r\n    })\r\n  }\r\n\r\n  /** 开始离开动画 */\r\n  const startTransitionOut = () => {\r\n    const { leaveTo, leaveActive, leaveFrom, enterTo } = classes.value\r\n    const dom = getDom()\r\n\r\n    // 标记动画进入离开状态\r\n    if (keepEnterTo) {\r\n      dom?.classList.remove(enterTo)\r\n    }\r\n    dom?.classList.add(leaveFrom, leaveActive)\r\n\r\n    // 在下一帧移除动画运动目标状态恢复原点\r\n    nextFrame(() => {\r\n      dom?.classList.remove(leaveFrom)\r\n      dom?.classList.add(leaveTo)\r\n    })\r\n  }\r\n\r\n  const transitionEndHandler = (e: TransitionEvent) => {\r\n    e.stopPropagation()\r\n\r\n    const { leaveActive, enterActive, enterTo, leaveTo } = classes.value\r\n    const dom = getDom()\r\n    // 激活状态，移除enter-active类\r\n    if (active.value) {\r\n      if (keepEnterTo) {\r\n        dom?.classList.remove(enterActive)\r\n      } else {\r\n        dom?.classList.remove(enterActive, enterTo)\r\n      }\r\n      afterEnter?.()\r\n    } else {\r\n      dom?.classList.remove(leaveActive, leaveTo)\r\n      afterLeave?.()\r\n    }\r\n  }\r\n\r\n  const transitionCancelHandler = (e: TransitionEvent) => {\r\n    e.stopPropagation()\r\n\r\n    const dom = getDom()\r\n\r\n    if (dom !== e.target) return\r\n\r\n    const { leaveActive, enterActive } = classes.value\r\n\r\n    // 激活状态，移除enter-active类\r\n    if (active.value) {\r\n      dom?.classList.remove(enterActive)\r\n      enterCanceled?.()\r\n    } else {\r\n      dom?.classList.remove(leaveActive)\r\n      leaveCanceled?.()\r\n    }\r\n  }\r\n\r\n  const [active, toggle] = createToggle(false, active => {\r\n    active ? startTransitionIn() : startTransitionOut()\r\n  })\r\n\r\n  /** 添加事件 */\r\n  const addEvent = (el?: HTMLElement) => {\r\n    el?.addEventListener('transitioncancel', transitionCancelHandler)\r\n    el?.addEventListener('transitionend', transitionEndHandler)\r\n  }\r\n\r\n  /** 移除事件 */\r\n  const removeEvent = (el?: HTMLElement) => {\r\n    el?.removeEventListener('transitioncancel', transitionCancelHandler)\r\n    el?.removeEventListener('transitionend', transitionEndHandler)\r\n  }\r\n\r\n  if (isRef(target)) {\r\n    watch(target, (target, oldTarget) => {\r\n      target ? addEvent(target) : removeEvent(oldTarget)\r\n    })\r\n  } else if (target) {\r\n    addEvent(target)\r\n  }\r\n\r\n  onBeforeUnmount(() => {\r\n    const dom = getDom()\r\n    removeEvent(dom)\r\n  })\r\n\r\n  return {\r\n    toggle,\r\n    enter() {\r\n      toggle(true)\r\n    },\r\n    leave() {\r\n      toggle(false)\r\n    }\r\n  }\r\n}\r\n", "import { watch, onBeforeUnmount } from 'vue'\r\n\r\n/**\r\n * 监听过渡\r\n * @param domGetter 元素获取函数\r\n * @param config 配置\r\n * @returns\r\n */\r\nexport function watchTransition(\r\n  domGetter: () => HTMLElement | undefined,\r\n  config: {\r\n    styleKeys: string[]\r\n    onEnd: (dom: HTMLElement) => void\r\n    onCancel: (dom: HTMLElement) => void\r\n  }\r\n) {\r\n  const runCallback = (e: TransitionEvent, cb: (el: HTMLElement) => void) => {\r\n    e.stopPropagation()\r\n    if (\r\n      e.target !== domGetter() ||\r\n      !config.styleKeys.includes(e.propertyName)\r\n    ) {\r\n      return\r\n    }\r\n\r\n    cb(e.target as HTMLElement)\r\n  }\r\n\r\n  const transitionEndHandler = (e: TransitionEvent) => {\r\n    if (!domGetter()) return\r\n    runCallback(e, config.onEnd)\r\n  }\r\n  const transitionCancelHandler = (e: TransitionEvent) => {\r\n    if (!domGetter()) return\r\n    runCallback(e, config.onCancel)\r\n  }\r\n  const addEvent = (el: HTMLElement) => {\r\n    el.addEventListener('transitionend', transitionEndHandler, false)\r\n    // el.addEventListener('transitioncancel', transitionCancelHandler, false)\r\n  }\r\n\r\n  const removeEvent = (el?: HTMLElement) => {\r\n    el?.removeEventListener('transitionend', transitionEndHandler)\r\n    el?.removeEventListener('transitioncancel', transitionCancelHandler)\r\n  }\r\n\r\n  watch(\r\n    domGetter,\r\n    (target, oldTarget) => {\r\n      removeEvent(oldTarget)\r\n      target && addEvent(target)\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  onBeforeUnmount(() => {\r\n    removeEvent(domGetter())\r\n  })\r\n}\r\n", "import { isRef, watch, type CSSProperties } from 'vue'\r\nimport type { Returned, StyleTransitionOptions } from './type'\r\nimport { createToggle, nextFrame, setStyles } from '@ui/utils'\r\nimport { watchTransition } from './utils'\r\n\r\nexport function useStyleTransition(options: StyleTransitionOptions): Returned {\r\n  const {\r\n    // enterFrom,\r\n    // leaveTo,\r\n    enterTo,\r\n    enterActive,\r\n    leaveActive,\r\n    target,\r\n    afterEnter,\r\n    afterLeave,\r\n    enterCanceled,\r\n    leaveCanceled\r\n  } = options\r\n\r\n  const getDom = (): HTMLElement | undefined =>\r\n    isRef(target) ? target.value : target\r\n\r\n  /** 进入动画前的初始状态 */\r\n  const transitionOriginStyle: CSSProperties = {}\r\n\r\n  /** 获取过渡样式的初始样式 */\r\n  const getOriginStyles = (styles: CSSProperties) => {\r\n    return Object.fromEntries(\r\n      Object.keys(styles).map(key => {\r\n        return [key, transitionOriginStyle[key]]\r\n      })\r\n    )\r\n  }\r\n  // 监听dom并获取dom在进入动画之前的样式\r\n  // ...Object.keys(enterFrom ?? {}),\r\n  // ...Object.keys(leaveTo ?? {}),\r\n  watch(\r\n    () => getDom(),\r\n    dom => {\r\n      if (dom) {\r\n        const map = dom.attributeStyleMap\r\n        ~[...Object.keys(enterTo), ...Object.keys(enterActive)].forEach(key => {\r\n          transitionOriginStyle[key] = map.get(key)\r\n        })\r\n      } else {\r\n        Object.keys(transitionOriginStyle).forEach(key => {\r\n          delete transitionOriginStyle[key]\r\n        })\r\n      }\r\n    },\r\n    {\r\n      immediate: true\r\n    }\r\n  )\r\n\r\n  /**\r\n   * 添加过渡进入时并持续时的样式\r\n   * @param dom 元素\r\n   */\r\n  const addEnterActive = (dom: HTMLElement) => {\r\n    setStyles(dom, enterActive)\r\n  }\r\n\r\n  /**\r\n   * 移除过渡进入时并持续时的样式\r\n   * @param dom 元素\r\n   */\r\n  const removeEnterActive = (dom: HTMLElement) => {\r\n    setStyles(dom, getOriginStyles(enterActive))\r\n  }\r\n\r\n  /**\r\n   * 添加过渡离开并持续时的样式\r\n   * @param dom 元素\r\n   */\r\n  const addLeaveActive = (dom: HTMLElement) => {\r\n    setStyles(dom, leaveActive)\r\n  }\r\n\r\n  /**\r\n   * 移除过渡离开并持续时的样式\r\n   * @param dom 元素\r\n   */\r\n  const removeLeaveActive = (dom: HTMLElement) => {\r\n    setStyles(dom, getOriginStyles(leaveActive))\r\n  }\r\n\r\n  /**\r\n   * 添加过渡目标样式\r\n   * @param dom 元素\r\n   */\r\n  // const addEnterFromStyle = (dom: HTMLElement) => {\r\n  //   enterFrom && setStyles(dom, enterFrom)\r\n  // }\r\n\r\n  /**\r\n   * 移除过渡目标样式\r\n   * @param dom 元素\r\n   */\r\n  // const removeEnterFromStyle = (dom: HTMLElement) => {\r\n  //   if (!enterFrom) return\r\n\r\n  //   const canRemovedStyles = {}\r\n\r\n  //   for (const key in enterFrom) {\r\n  //     if (key in enterTo) continue\r\n  //     canRemovedStyles[key] = enterFrom[key]\r\n  //   }\r\n\r\n  //   setStyles(dom, getOriginStyles(canRemovedStyles))\r\n  // }\r\n  /**\r\n   * 添加过渡目标样式\r\n   * @param dom 元素\r\n   */\r\n  const addEnterToStyle = (dom: HTMLElement) => {\r\n    setStyles(dom, enterTo)\r\n  }\r\n\r\n  /**\r\n   * 移除过渡目标样式\r\n   * @param dom 元素\r\n   */\r\n  const removeEnterToStyle = (dom: HTMLElement) => {\r\n    setStyles(dom, getOriginStyles(enterTo))\r\n  }\r\n\r\n  /** 开始进入动画 */\r\n  const startEnter = () => {\r\n    const dom = getDom()\r\n    if (!dom) return\r\n    addEnterActive(dom)\r\n    // 在下一帧插入动画运动目标状态\r\n    nextFrame(() => {\r\n      addEnterToStyle(dom)\r\n    })\r\n  }\r\n\r\n  /** 开始离开动画 */\r\n  const startLeave = () => {\r\n    const dom = getDom()\r\n    if (!dom) return\r\n\r\n    // 标记动画进入离开状态\r\n    addLeaveActive(dom)\r\n\r\n    // 在下一帧移除动画运动目标状态恢复原状或者应用新的状态\r\n    nextFrame(() => {\r\n      removeEnterToStyle(dom)\r\n    })\r\n  }\r\n\r\n  const [active, toggle] = createToggle(false, active => {\r\n    active ? startEnter() : startLeave()\r\n  })\r\n\r\n  watchTransition(getDom, {\r\n    styleKeys: Object.keys(enterTo),\r\n    onCancel(el) {\r\n      // 激活状态，移除enter-active类\r\n      if (active.value) {\r\n        removeEnterActive(el)\r\n        enterCanceled?.()\r\n      } else {\r\n        removeLeaveActive(el)\r\n        leaveCanceled?.()\r\n      }\r\n    },\r\n\r\n    onEnd(el) {\r\n      if (active.value) {\r\n        removeEnterActive(el)\r\n        // removeEnterFromStyle(el)\r\n        afterEnter?.()\r\n      } else {\r\n        removeLeaveActive(el)\r\n\r\n        afterLeave?.()\r\n      }\r\n    }\r\n  })\r\n\r\n  return {\r\n    toggle,\r\n    enter: () => toggle(true),\r\n    leave: () => toggle(false)\r\n  }\r\n}\r\n", "import type {\r\n  Returned,\r\n  CssTransitionOptions,\r\n  StyleTransitionOptions\r\n} from './type'\r\nimport { useCssTransition } from './use-css-transition'\r\nimport { useStyleTransition } from './use-style-transition'\r\n\r\n/**\r\n * 使用CSS类过渡\r\n * @param type 过渡类型\r\n * @param options 过渡选项\r\n */\r\nexport function useTransition(\r\n  type: 'css',\r\n  options: CssTransitionOptions\r\n): Returned\r\n/**\r\n * 使用style样式过渡\r\n * @param type 过渡类型\r\n * @param options 过渡选项\r\n */\r\nexport function useTransition(\r\n  type: 'style',\r\n  options: StyleTransitionOptions\r\n): Returned\r\nexport function useTransition(type: string, options: any): Returned {\r\n  if (type === 'css') {\r\n    return useCssTransition(options)\r\n  }\r\n  return useStyleTransition(options)\r\n}\r\n", "import { useTransition } from '@ui/compositions'\r\nimport { type BEM, removeStyles, setStyles } from '@ui/utils'\r\nimport { shallowRef, type ShallowRef } from 'vue'\r\n\r\ninterface Options {\r\n  cls: BEM<'dialog'>\r\n  dialogRef: ShallowRef<HTMLDivElement | undefined>\r\n}\r\n\r\ninterface Returned {\r\n  /** 是否为最大状态 */\r\n  maximized: ShallowRef<boolean>\r\n  /** 切换最大状态 */\r\n  toggleMaximize: (maxim: boolean) => void\r\n}\r\n\r\n// 最大化过程\r\n// 1. 先设置一个高度才会有过渡动画\r\n// 2. 在下一个帧应用最大化时的类名\r\n// 3. 在进入动画结束时移除高度\r\n\r\nexport function useMaximum(options: Options): Returned {\r\n  const { dialogRef } = options\r\n\r\n  const maximized = shallowRef(false)\r\n\r\n  const maximizeTransition = useTransition('css', {\r\n    target: dialogRef,\r\n    name: 'dialog-maximize',\r\n    keepEnterTo: true,\r\n    afterLeave() {\r\n      dialogRef.value && removeStyles(dialogRef.value, ['height'])\r\n    }\r\n  })\r\n\r\n  /** 切换最大化 */\r\n  const toggleMaximize = (maxim: boolean): void => {\r\n    maximized.value = maxim\r\n    const dom = dialogRef.value\r\n    if (!dom) return\r\n    if (maxim) {\r\n      // 先设置一个高度才会有过渡动画\r\n      setStyles(dom, { height: `${dom.offsetHeight}px` })\r\n      maximizeTransition.enter()\r\n    } else {\r\n      maximizeTransition.leave()\r\n    }\r\n  }\r\n\r\n  return {\r\n    maximized,\r\n    toggleMaximize\r\n  }\r\n}\r\n", "<template>\r\n  <Teleport to=\"body\">\r\n    <transition name=\"fade\" @after-leave=\"emit('closed')\">\r\n      <div\r\n        v-if=\"visible || opened\"\r\n        v-show=\"visible\"\r\n        :class=\"[cls.e('overlay'), bem.is('modal', modal)]\"\r\n        ref=\"overlayRef\"\r\n        @mousedown=\"modal && close()\"\r\n        @keyup.esc=\"close\"\r\n        tabindex=\"0\"\r\n      >\r\n        <div\r\n          v-bind=\"$attrs\"\r\n          :class=\"className\"\r\n          ref=\"dialogRef\"\r\n          @mousedown.stop=\"handleIncreaseZIndex\"\r\n        >\r\n          <section\r\n            :class=\"headerCls\"\r\n            ref=\"headerRef\"\r\n            @transitionend.stop\r\n            @transitioncancel.stop\r\n          >\r\n            <div :class=\"cls.e('title')\" @mousedown.stop>\r\n              <slot name=\"header\">\r\n                {{ header || title }}\r\n              </slot>\r\n            </div>\r\n\r\n            <div :class=\"cls.e('buttons')\" @mousedown.stop>\r\n              <u-icon\r\n                v-if=\"maximized\"\r\n                :class=\"cls.e('btn-recover')\"\r\n                @click=\"toggleMaximize(false)\"\r\n                title=\"还原\"\r\n              >\r\n                <Recover />\r\n              </u-icon>\r\n              <u-icon\r\n                v-else\r\n                :class=\"cls.e('btn-maximize')\"\r\n                @click=\"toggleMaximize(true)\"\r\n                title=\"最大化\"\r\n              >\r\n                <Maximum />\r\n              </u-icon>\r\n              <u-icon :class=\"cls.e('btn-close')\" @click=\"close\" title=\"关闭\">\r\n                <Close />\r\n              </u-icon>\r\n            </div>\r\n          </section>\r\n\r\n          <u-scroll\r\n            tag=\"section\"\r\n            :class=\"cls.e('body')\"\r\n            ref=\"bodyRef\"\r\n            @transitionend.stop\r\n            @transitioncancel.stop\r\n          >\r\n            <slot />\r\n          </u-scroll>\r\n\r\n          <section ref=\"footerRef\" :class=\"footerCls\" v-if=\"$slots.footer\">\r\n            <slot name=\"footer\" />\r\n          </section>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n  </Teleport>\r\n\r\n  <!-- 触发 -->\r\n  <UNodeRender\r\n    @click=\"visible = !visible\"\r\n    :content=\"getTriggerNode()\"\r\n    :class=\"cls.b\"\r\n    ref=\"triggerRef\"\r\n  />\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { type VNode, shallowRef, watch, nextTick, computed, provide } from 'vue'\r\nimport type { DialogProps, DialogEmits } from '@ui/types/components/dialog'\r\nimport {\r\n  bem,\r\n  extractNormalVNodes,\r\n  nextFrame,\r\n  setStyles,\r\n  zIndex\r\n} from '@ui/utils'\r\nimport { useDrag, useFallbackProps, useTransition } from '@ui/compositions'\r\nimport { UIcon } from '../icon'\r\nimport { UScroll, type ScrollExposed } from '../scroll'\r\nimport { Close, Maximum, Recover } from 'icon-ultra'\r\nimport { useMaximum } from './use-maximum'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\nimport { DialogDIKey } from './di'\r\nimport { UNodeRender } from '../node-render'\r\n\r\ndefineOptions({\r\n  name: 'Dialog',\r\n  inheritAttrs: false\r\n})\r\n\r\nconst props = withDefaults(defineProps<DialogProps>(), {\r\n  modal: true,\r\n  modelValue: true\r\n})\r\nconst emit = defineEmits<DialogEmits>()\r\nconst slots = defineSlots<{\r\n  footer?(): VNode[] | undefined\r\n  trigger?: () => any\r\n}>()\r\n\r\nconst cls = bem('dialog')\r\nconst blurCls = bem.is('background-blur')\r\nconst headerCls = [cls.e('header'), blurCls]\r\nconst footerCls = [cls.e('footer'), blurCls]\r\n\r\nconst { size } = useFallbackProps([props], { size: 'default' as ComponentSize })\r\n\r\nconst overlayRef = shallowRef<HTMLDivElement>()\r\n\r\n/** 弹框模板引用 */\r\nconst dialogRef = shallowRef<HTMLDivElement>()\r\n\r\n/** 弹框头部模板引用 */\r\nconst headerRef = shallowRef<HTMLDivElement>()\r\n\r\n/** 弹框body模板引用 */\r\nconst bodyRef = shallowRef<ScrollExposed>()\r\n\r\n/** 弹框footer模板引用 */\r\nconst footerRef = shallowRef<HTMLDivElement>()\r\n\r\nconst visible = defineModel<boolean>({\r\n  default: false\r\n})\r\n\r\nfunction getTriggerNode() {\r\n  const nodes = slots.trigger?.()\r\n  if (!nodes?.length) return null\r\n\r\n  const node = extractNormalVNodes(nodes)[0]\r\n  return node\r\n}\r\n\r\nconst dialogTransition = useTransition('style', {\r\n  target: dialogRef,\r\n\r\n  enterTo: {\r\n    transform: 'scale3d(1, 1, 1) translate3d(0, 0, 0)'\r\n  },\r\n\r\n  enterActive: {\r\n    transition: 'transform .25s cubic-bezier(0.76, 0, 0.44, 1.35)'\r\n  },\r\n  leaveActive: {\r\n    transition: 'transform .25s cubic-bezier(0.76, 0, 0.44, 1.35)'\r\n  }\r\n})\r\n\r\nconst { toggleMaximize, maximized } = useMaximum({\r\n  dialogRef,\r\n  cls\r\n})\r\n\r\nconst className = computed(() => {\r\n  return [cls.b, cls.m(size.value)]\r\n})\r\n\r\n/** 是否弹出过 */\r\nlet opened = false\r\n\r\nwatch(visible, v => {\r\n  if (!v) {\r\n    dialogTransition.leave()\r\n    nextFrame(() => {\r\n      dialogRef.value &&\r\n        setStyles(dialogRef.value, {\r\n          transform: 'scale3d(0.5, 0.5, 1) translate3d(0, 0, 0)'\r\n        })\r\n    })\r\n    return\r\n  }\r\n  if (!opened) opened = true\r\n\r\n  translated.x = 0\r\n  translated.y = 0\r\n\r\n  nextTick(() => {\r\n    overlayRef.value && setStyles(overlayRef.value, { zIndex: zIndex() })\r\n\r\n    dialogRef.value &&\r\n      setStyles(dialogRef.value, {\r\n        transform: 'scale3d(0.5, 0.5, 1) translate3d(0, 0, 0)'\r\n      })\r\n    // 先等overlay层动画开始再开始dialog过渡,否则过渡效果不会产生\r\n    nextFrame(() => {\r\n      dialogTransition.enter()\r\n    })\r\n  })\r\n})\r\n\r\n/** dialog位移的位置 */\r\nconst translated = {\r\n  x: 0,\r\n  y: 0\r\n}\r\n\r\n/** 更新弹框位置 */\r\nconst updateDialogTransform = (x: number, y: number) => {\r\n  const dom = dialogRef.value\r\n  if (!dom) return\r\n  setStyles(dom, { transform: `translate3d(${x}px, ${y}px, 0)` })\r\n}\r\n\r\n// 运用拖拽\r\nuseDrag({\r\n  target: headerRef,\r\n\r\n  onDragStart() {\r\n    handleIncreaseZIndex()\r\n  },\r\n\r\n  onDrag(x, y) {\r\n    if (maximized.value) return\r\n    updateDialogTransform(translated.x + x, translated.y + y)\r\n  },\r\n\r\n  onDragEnd(x, y) {\r\n    if (maximized.value) return\r\n    translated.x += x\r\n    translated.y += y\r\n\r\n    // 字体模糊的bug修正\r\n    if (translated.x % 2 !== 0) {\r\n      translated.x += x < 0 ? 1 : -1\r\n    }\r\n    if (translated.y % 2 !== 0) {\r\n      translated.y += y < 0 ? 1 : -1\r\n    }\r\n    updateDialogTransform(translated.x, translated.y)\r\n  }\r\n})\r\n\r\nfunction handleIncreaseZIndex() {\r\n  if (props.modal) return\r\n  setStyles(overlayRef.value!, { zIndex: zIndex() })\r\n}\r\n\r\n/** 关闭 */\r\nconst close = () => {\r\n  visible.value = false\r\n}\r\n\r\nprovide(DialogDIKey, {\r\n  visible\r\n})\r\n\r\ndefineExpose({\r\n  close\r\n})\r\n</script>\r\n\r\n<script lang=\"ts\">\r\nexport default {\r\n  inheritAttrs: false\r\n}\r\n</script>\r\n", "<template>\r\n  <component :is=\"tag\" :class=\"cls.b\" @click.stop=\"handleClickPicker\">\r\n    <input\r\n      :multiple=\"multiple\"\r\n      :class=\"cls.e('native')\"\r\n      type=\"file\"\r\n      :accept=\"accept\"\r\n      hidden\r\n      placeholder=\"选择文件\"\r\n      ref=\"fileRef\"\r\n      @change=\"handleChange\"\r\n    />\r\n    <slot />\r\n  </component>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type {\r\n  UploaderProps,\r\n  UploaderEmits\r\n} from '@ui/types/components/file-picker'\r\nimport { bem } from '@ui/utils'\r\nimport { shallowRef } from 'vue'\r\n\r\ndefineOptions({\r\n  name: 'FilePicker'\r\n})\r\n\r\nconst props = withDefaults(defineProps<UploaderProps>(), {\r\n  tag: 'div',\r\n  multiple: false\r\n})\r\n\r\nconst emit = defineEmits<UploaderEmits>()\r\n\r\nconst cls = bem('file-picker')\r\n\r\nconst fileRef = shallowRef<HTMLInputElement>()\r\n\r\nconst handleChange = (e: Event) => {\r\n  const target = e.target as HTMLInputElement\r\n  emit('pick', Array.prototype.slice.call(target.files) as File[])\r\n  target.value = ''\r\n}\r\n\r\nfunction handleClickPicker() {\r\n  if (props.disabled) return\r\n  fileRef.value?.click()\r\n}\r\n</script>\r\n", "<template>\r\n  <Teleport to=\"body\">\r\n    <div\r\n      :class=\"cls.b\"\r\n      @mouseenter=\"handleMouseEnter\"\r\n      @mouseleave=\"handleMouseLeave\"\r\n      ref=\"floatButtonRef\"\r\n    >\r\n      <u-button\r\n        v-for=\"(item, index) of items\"\r\n        :key=\"item.key\"\r\n        :class=\"[cls.e('item'), bem.is('first', index === 0)]\"\r\n        circle\r\n        :size=\"size\"\r\n        :type=\"item.type ?? 'primary'\"\r\n        ref=\"itemsRef\"\r\n        :style=\"{\r\n          transitionDelay: index * 0.1 + 's'\r\n        }\"\r\n        @transitionend=\"handleTransitionEnd(index, $event)\"\r\n        @click=\"emit('click', item.key)\"\r\n        :title=\"item.name ?? item.key\"\r\n      >\r\n        <u-icon v-if=\"item.icon\"> <component :is=\"item.icon\" /> </u-icon>\r\n        <span v-else>{{ item.name?.[0] ?? item.key[0] }}</span>\r\n      </u-button>\r\n    </div>\r\n  </Teleport>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type {\r\n  FloatButtonProps,\r\n  FloatButtonEmits\r\n} from '@ui/types/components/float-button'\r\nimport { bem, removeStyles, setStyles } from '@ui/utils'\r\nimport { UIcon } from '../icon'\r\nimport { shallowRef } from 'vue'\r\nimport { UButton, type ButtonExposed } from '../button'\r\n\r\ndefineOptions({\r\n  name: 'FloatButton'\r\n})\r\n\r\ndefineProps<FloatButtonProps>()\r\n\r\nconst emit = defineEmits<FloatButtonEmits>()\r\n\r\nconst cls = bem('float-button')\r\nconst hoveredCls = bem.is('hovered')\r\n\r\nconst floatButtonRef = shallowRef<HTMLElement>()\r\nconst itemsRef = shallowRef<ButtonExposed[]>()\r\n\r\nconst hovered = shallowRef(false)\r\n\r\nconst handleMouseEnter = () => {\r\n  hovered.value = true\r\n\r\n  itemsRef.value?.forEach(item => {\r\n    setStyles(item.el!, { display: 'flex' })\r\n  })\r\n\r\n  requestAnimationFrame(() => {\r\n    requestAnimationFrame(() => {\r\n      itemsRef.value?.forEach(item => {\r\n        item.el!.classList.add(hoveredCls)\r\n      })\r\n    })\r\n  })\r\n}\r\nconst handleMouseLeave = () => {\r\n  hovered.value = false\r\n  itemsRef.value?.forEach(item => {\r\n    item.el!.classList.remove(hoveredCls)\r\n  })\r\n}\r\n\r\n/**\r\n * 动画结束回调\r\n * @param index 发生的元素索引\r\n * @param e 事件\r\n */\r\nconst handleTransitionEnd = (index: number, e: TransitionEvent) => {\r\n  if (index !== 1 || hovered.value) return\r\n\r\n  itemsRef.value?.forEach(item => {\r\n    removeStyles(item.el!, ['display'])\r\n  })\r\n}\r\n</script>\r\n", "import type { ValidateRule } from '@ui/types/utils/form/validate'\r\n\r\ninterface FormModelItem<Val = unknown> extends ValidateRule {\r\n  value?: Val\r\n}\r\n\r\n/**\r\n * 定义表单项\r\n * @param item 表单项\r\n * @returns\r\n */\r\nexport function formField<Val = unknown>(\r\n  item?: FormModelItem<Val>\r\n): FormModelItem<Val> {\r\n  if (!item) {\r\n    return {}\r\n  }\r\n\r\n  return item\r\n}\r\n", "import type { Undef } from '@ui/types/helper'\r\nimport type {\r\n  ValidateRule,\r\n  Data,\r\n  ValidatorConfig,\r\n  PresetRule\r\n} from '@ui/types/utils/form/validate'\r\nimport { getChainValue } from 'cat-kit/fe'\r\n\r\nconst isEmpty = (value: any): value is null | undefined => {\r\n  return value === null || value === undefined\r\n}\r\n\r\nconst presetRules: Record<PresetRule, (value: string) => string | undefined> = {\r\n  email(v) {\r\n    const re = /^([\\w\\_\\-]+)@([\\w\\-]+[\\.]?)*[\\w]+\\.[a-zA-Z]{2,10}$/\r\n    if (!re.test(v)) {\r\n      return '邮箱格式不正确'\r\n    }\r\n  },\r\n  phone(v) {\r\n    const re = /^\\d{11}$/\r\n    if (!re.test(v)) {\r\n      return '手机号格式不正确'\r\n    }\r\n  },\r\n  num(v) {\r\n    const re = /^\\d+$/\r\n    if (!re.test(v)) {\r\n      return '数字格式不正确'\r\n    }\r\n  },\r\n  url(v) {\r\n    const re =\r\n      /^(ftp|https?)\\:\\/\\/([\\w\\_\\-]+)\\.([\\w\\-]+[\\.]?)*[\\w]+\\.[a-zA-Z]{2,10}(.*)/\r\n    if (!re.test(v)) {\r\n      return '链接格式不正确'\r\n    }\r\n  },\r\n\r\n  idCard(v) {\r\n    const re = /^(\\d{6})(\\d{4})(\\d{2})(\\d{2})(\\d{3})([0-9]|X)$/\r\n    if (!re.test(v)) {\r\n      return '身份证格式不正确'\r\n    }\r\n  }\r\n}\r\n\r\n/** 预设规则 */\r\nconst ruleTypes = {\r\n  required(value: any, required: ValidateRule['required']): Undef<string> {\r\n    if (required === false) return\r\n\r\n    const errMsg = typeof required === 'string' ? required : '该项不能为空'\r\n    if (isEmpty(value)) return errMsg\r\n\r\n    if (Array.isArray(value) && !value.length) return errMsg\r\n    if (typeof value === 'string' && !value) return errMsg\r\n  },\r\n  min(value: any, rule: ValidateRule['min']): Undef<string> {\r\n    if (isEmpty(value)) return\r\n    let _rule = Array.isArray(rule) ? rule[0] : rule!\r\n    let errMsg = Array.isArray(rule) ? rule[1] : `该项必须大于等于${_rule}`\r\n    if (typeof value !== 'number') return `${value}不是一个数字`\r\n    if (value < _rule) return errMsg\r\n  },\r\n  max(value: any, rule: ValidateRule['max']): Undef<string> {\r\n    if (isEmpty(value)) return\r\n    let _rule = Array.isArray(rule) ? rule[0] : rule!\r\n    let errMsg = Array.isArray(rule) ? rule[1] : `该项必须小于等于${_rule}`\r\n    if (typeof value !== 'number') return `${value}不是一个数字`\r\n    if (value > _rule) return errMsg\r\n  },\r\n\r\n  minLen(value: any, rule: ValidateRule['minLen']): Undef<string> {\r\n    if (isEmpty(value)) return\r\n    let _rule = Array.isArray(rule) ? rule[0] : rule!\r\n    let errMsg = Array.isArray(rule) ? rule[1] : `该项长度必须大于等于${_rule}`\r\n    if (!Array.isArray(value) && typeof value !== 'string')\r\n      return `${value}不是一个字符串或数组`\r\n    if (value.length < _rule) return errMsg\r\n  },\r\n  maxLen(value: any, rule: ValidateRule['maxLen']): Undef<string> {\r\n    if (isEmpty(value)) return\r\n    let _rule = Array.isArray(rule) ? rule[0] : rule!\r\n    let errMsg = Array.isArray(rule) ? rule[1] : `该项长度必须小于等于:${_rule}`\r\n    if (!Array.isArray(value) && typeof value !== 'string')\r\n      return `${value}不是一个字符串或数组`\r\n    if (value.length > _rule) return errMsg\r\n  },\r\n  match(value: any, rule: ValidateRule['match']): Undef<string> {\r\n    if (isEmpty(value) || value === '') return\r\n    if (typeof rule === 'string') {\r\n      if (!rule) return\r\n      rule = new RegExp(rule)\r\n    }\r\n    let _rule = Array.isArray(rule) ? rule[0] : rule!\r\n    let errMsg = Array.isArray(rule) ? rule[1] : `该项不匹配正则:${_rule}`\r\n    if (typeof value !== 'string') return `${value}不是一个字符串`\r\n    if (!_rule.test(value)) return errMsg\r\n  },\r\n  preset(value: any, rule: ValidateRule['preset']): Undef<string> {\r\n    if (isEmpty(value) || value === '' || !rule) return\r\n    if (typeof value !== 'string') return `${value}不是一个字符串`\r\n    const ruleValidator = presetRules[rule]\r\n    return ruleValidator(value)\r\n  }\r\n}\r\n/**  */\r\nexport class Validator<\r\n  Rules extends Record<string, ValidateRule> = Record<string, ValidateRule>,\r\n  Field extends keyof Rules = keyof Rules\r\n> {\r\n  protected rules: Rules\r\n\r\n  private config?: ValidatorConfig\r\n\r\n  constructor(rules: Rules, config?: ValidatorConfig) {\r\n    this.rules = rules\r\n    if (config) {\r\n      this.config = config\r\n    }\r\n  }\r\n\r\n  /** 是否存在规则 */\r\n  private get existRules() {\r\n    for (const _ in this.rules) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * 校验单条数据\r\n   * @param data 数据\r\n   */\r\n  private async validateSingleData(\r\n    data: Record<any, any>,\r\n    fields?: Field | Field[]\r\n  ): Promise<{ [key in Field]?: string[] }> {\r\n    const fieldErrors: { [key in Field]?: string[] } = {}\r\n\r\n    if (!this.existRules) return fieldErrors\r\n\r\n    const lazy = this.config?.lazy ?? true\r\n\r\n    fields = fields\r\n      ? Array.isArray(fields)\r\n        ? fields\r\n        : [fields]\r\n      : (Object.keys(this.rules) as Field[])\r\n\r\n    // 懒校验，当有一个规则不通过，剩下的规则不再校验\r\n    if (lazy) {\r\n      // 校验字段\r\n      for (let i = 0; i < fields.length; i++) {\r\n        const field = fields[i]!\r\n        const errors = await this.validateValueLazy(data, field)\r\n        if (errors.length === 0) continue\r\n        fieldErrors[field] = errors\r\n      }\r\n      return fieldErrors\r\n    } else {\r\n      // 校验字段\r\n      for (let i = 0; i < fields.length; i++) {\r\n        const field = fields[i]!\r\n        const errors = await this.validateValue(data, field)\r\n        if (errors.length === 0) continue\r\n        fieldErrors[field] = errors\r\n      }\r\n\r\n      return fieldErrors\r\n    }\r\n  }\r\n\r\n  private async validateValue(data: Record<any, any>, field: Field) {\r\n    const rules = this.rules[field]!\r\n    const value = getChainValue(data, field as string)\r\n\r\n    const { validator, required, ...normalRules } = rules\r\n\r\n    let errors: string[] = []\r\n\r\n    // 必填要先去校验\r\n    if (required) {\r\n      const err = ruleTypes.required(value, required)\r\n      err && errors.push(err)\r\n    }\r\n\r\n    // 校验规则\r\n    for (const ruleKey in normalRules) {\r\n      const validate = ruleTypes[ruleKey]\r\n      if (!validate) continue\r\n      const err = validate(value, normalRules[ruleKey])\r\n      err && errors.push(err)\r\n    }\r\n\r\n    // 自定义校验\r\n    if (validator) {\r\n      const err = await validator(value, data)\r\n      err && errors.push(err)\r\n    }\r\n\r\n    return errors\r\n  }\r\n\r\n  private async validateValueLazy(\r\n    data: Record<any, any>,\r\n    field: Field\r\n  ): Promise<string[]> {\r\n    const rules = this.rules[field]\r\n    const value = getChainValue(data, field as string)\r\n    let errors: string[] = []\r\n\r\n    if (!rules) return errors\r\n\r\n    const { validator, required, ...normalRules } = rules\r\n\r\n    // 必填要先去校验\r\n    if (required) {\r\n      const err = ruleTypes.required(value, required)\r\n      if (err) {\r\n        errors.push(err)\r\n        return errors\r\n      }\r\n    }\r\n\r\n    // 校验规则\r\n    for (const ruleKey in normalRules) {\r\n      const validate = ruleTypes[ruleKey]\r\n      if (!validate) continue\r\n\r\n      const err = validate(value, normalRules[ruleKey])\r\n\r\n      if (err) {\r\n        errors.push(err)\r\n        return errors\r\n      }\r\n    }\r\n\r\n    // 自定义校验最火校验\r\n    if (validator) {\r\n      const err = await validator(value, data)\r\n      if (err) {\r\n        errors.push(err)\r\n        return errors\r\n      }\r\n    }\r\n\r\n    return errors\r\n  }\r\n\r\n  /**\r\n   * 校验多条数据\r\n   * @param field 需要校验的字段\r\n   */\r\n  private async validateManyData(\r\n    data: Data,\r\n    field?: Field | Field[]\r\n  ): Promise<{ [key in Field]?: string[] }> {\r\n    let i = 0\r\n    while (i < data.length) {\r\n      const item = data[i]!\r\n      const fieldErrors = await this.validateSingleData(item, field)\r\n      if (Object.keys(fieldErrors).length > 0) {\r\n        return fieldErrors\r\n      }\r\n      i++\r\n    }\r\n\r\n    return {}\r\n  }\r\n\r\n  /**\r\n   * 校验\r\n   * @param data 数据\r\n   * @param fields 字段\r\n   * @returns\r\n   */\r\n  async validate(\r\n    data: Data,\r\n    fields?: Field | Field[]\r\n  ): Promise<{ [key in Field]?: string[] }> {\r\n    return Array.isArray(data)\r\n      ? this.validateManyData(data, fields)\r\n      : this.validateSingleData(data, fields)\r\n  }\r\n}\r\n", "function createMiddleProxy(\r\n  o: Record<string, any>,\r\n  handler?: {\r\n    set?: (field: string, val: any) => void\r\n    get?: (field: string) => any\r\n    changed?: (fields: string[]) => void\r\n  },\r\n  options?: {\r\n    weakMap?: WeakMap<Record<string, any>, any>\r\n    parentsField?: string\r\n    changedFields?: string[]\r\n  }\r\n) {\r\n  let { weakMap, parentsField, changedFields = [] } = options || {}\r\n  if (!weakMap) {\r\n    weakMap = new WeakMap()\r\n  }\r\n\r\n  return new Proxy(o, {\r\n    set(target, field: string, val) {\r\n      const changedField = parentsField ? `${parentsField}.${field}` : field\r\n      handler?.set?.(changedField, val)\r\n      target[field] = val\r\n\r\n      changedFields.push(changedField)\r\n      Promise.resolve().then(() => {\r\n        if (!changedFields.length) return\r\n        handler?.changed?.([...changedFields])\r\n        changedFields.splice(0)\r\n      })\r\n\r\n      return true\r\n    },\r\n\r\n    get(target, field: string) {\r\n      handler?.get?.(field)\r\n\r\n      const val = target[field]\r\n      if (val !== null && typeof val === 'object') {\r\n        if (weakMap.has(val)) return weakMap.get(val)\r\n        const valProxy = createMiddleProxy(val, handler, {\r\n          weakMap,\r\n          parentsField: parentsField ? `${parentsField}.${field}` : field,\r\n          changedFields\r\n        })\r\n        weakMap.set(val, valProxy)\r\n\r\n        return valProxy\r\n      }\r\n\r\n      return val\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 中间代理对象, 用于vue的reactive和shallowReactive方法的中间层\r\n * @param o 代理对象\r\n * @param config 代理配置\r\n * @returns\r\n */\r\nexport function middleProxy<O extends Record<string, any>>(\r\n  o: O,\r\n  handler?: {\r\n    set?: (field: string, val: any) => void\r\n    get?: (field: string) => any\r\n    changed?: (fields: string[]) => void\r\n  }\r\n): O {\r\n  return createMiddleProxy(o, handler) as O\r\n}\r\n", "import type {\r\n  FormModelItem,\r\n  ModelData,\r\n  ModelRules,\r\n  DataSettingConfig,\r\n  IFormModel\r\n} from '@ui/types/components/form'\r\nimport { middleProxy, Validator } from '@ui/utils'\r\nimport { getChainValue, setChainValue } from 'cat-kit/fe'\r\nimport { reactive, shallowReactive, watch, type Reactive } from 'vue'\r\n\r\n/**\r\n * 表单模型\r\n */\r\nexport class FormModel<\r\n  Fields extends Record<string, FormModelItem> = Record<string, FormModelItem>\r\n> implements IFormModel<Fields>\r\n{\r\n  /** 表单数据 */\r\n  data!: ModelData<Fields>\r\n\r\n  /** 表单规则 */\r\n  readonly fields: Fields\r\n\r\n  /** 所有的键 */\r\n  readonly allKeys: string[]\r\n\r\n  /**\r\n   * 不同表单存在的字段key,\r\n   * 在全量校验时防止对隐藏的字段进行校验从而无法通过\r\n   */\r\n  formKeys = new Map<number, (keyof Fields)[]>()\r\n\r\n  /** 初始数据 */\r\n  private readonly initialData: ModelData<Fields>\r\n\r\n  readonly errors = shallowReactive<Map<keyof Fields, string[] | undefined>>(\r\n    new Map()\r\n  )\r\n\r\n  private validator: Validator<ModelRules<Fields>>\r\n\r\n  /**\r\n   * 是否在表单值更新时校验\r\n   */\r\n  private validateOnFieldChange = true\r\n\r\n  private modelChangeCallback: Set<(fields: string, val: any) => void> =\r\n    new Set()\r\n\r\n  constructor(fields: Fields) {\r\n    this.fields = fields\r\n    const rawData = {} as ModelData<Fields>\r\n    const allKeys: string[] = []\r\n\r\n    for (const key in fields) {\r\n      const fieldItem = fields[key]!\r\n      allKeys.push(key)\r\n      const { value } = fieldItem\r\n      let v = value\r\n\r\n      if (typeof value === 'function') {\r\n        watch(value, v => {\r\n          setChainValue(this.initialData, key, v)\r\n        })\r\n        v = value()\r\n      }\r\n\r\n      setChainValue(rawData, key, v)\r\n    }\r\n\r\n    this.allKeys = allKeys\r\n    this.initialData = JSON.parse(JSON.stringify(rawData))\r\n\r\n    this.setProxyData(reactive(rawData))\r\n\r\n    this.validator = new Validator(this.fields)\r\n\r\n    return shallowReactive(this)\r\n  }\r\n\r\n  /**\r\n   * 设置响应式值\r\n   * @param proxyData 响应式的值\r\n   */\r\n  setProxyData(proxyData: ModelData<Fields> | Reactive<ModelData<Fields>>) {\r\n    const data = middleProxy(proxyData, {\r\n      set: (field, val) => {\r\n        this.modelChangeCallback.forEach(cb => cb(field, val))\r\n      },\r\n      changed: fields => {\r\n        if (!this.validateOnFieldChange) {\r\n          this.validateOnFieldChange = true\r\n          return\r\n        }\r\n        this.validate(fields)\r\n      }\r\n    })\r\n\r\n    this.data = data as ModelData<Fields>\r\n  }\r\n\r\n  private getValidateFields(fields?: keyof Fields | (keyof Fields)[]) {\r\n    if (!fields) {\r\n      if (this.formKeys.size) {\r\n        let _fields: (keyof Fields)[] = []\r\n        this.formKeys.forEach(fields => {\r\n          _fields = _fields.concat(fields)\r\n        })\r\n        return _fields\r\n      } else {\r\n        return this.allKeys\r\n      }\r\n    }\r\n\r\n    if (!Array.isArray(fields)) {\r\n      return [fields]\r\n    }\r\n    return fields\r\n  }\r\n\r\n  /**\r\n   * 模型校验\r\n   * @param fields 需要校验的字段, 不传则校验所有字段\r\n   * @returns\r\n   */\r\n  async validate(fields?: keyof Fields | (keyof Fields)[]): Promise<boolean> {\r\n    const { errors, validator, data } = this\r\n\r\n    const results = await validator.validate(\r\n      data,\r\n      this.getValidateFields(fields)\r\n    )\r\n\r\n    // 全量校验\r\n    if (!fields) {\r\n      errors.clear()\r\n\r\n      for (const field in results) {\r\n        errors.set(field, results[field])\r\n      }\r\n    }\r\n    // 局部校验\r\n    else {\r\n      ~(Array.isArray(fields) ? fields : [fields]).forEach(field => {\r\n        const errs = results[field]\r\n        if (errs?.length) {\r\n          errors.set(field, errs)\r\n        } else {\r\n          errors.delete(field)\r\n        }\r\n      })\r\n    }\r\n\r\n    if (errors.size > 0) {\r\n      return Promise.reject(false)\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 重置数据\r\n   * @param fields 需要重置的字段\r\n   */\r\n  resetData(keys?: keyof Fields | (keyof Fields)[]): void {\r\n    if (typeof keys === 'string') {\r\n      keys = [keys]\r\n    } else if (Array.isArray(keys)) {\r\n    } else {\r\n      keys = this.allKeys\r\n    }\r\n\r\n    this.clearValidate()\r\n\r\n    this.validateOnFieldChange = false\r\n\r\n    keys.forEach(field => {\r\n      setChainValue(\r\n        this.data,\r\n        field as string,\r\n        getChainValue(this.initialData, field as string)\r\n      )\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 设置值\r\n   * @param formData 表单值\r\n   * @param options 配置\r\n   */\r\n  setData(\r\n    formData: Partial<ModelData<Fields> & Record<string, any>>,\r\n    config?: DataSettingConfig\r\n  ) {\r\n    const { validate = true } = config || {}\r\n\r\n    if (!validate) {\r\n      this.validateOnFieldChange = false\r\n    }\r\n\r\n    this.allKeys.forEach(key => {\r\n      const value = getChainValue(formData, key)\r\n      if (value !== undefined) {\r\n        setChainValue(this.data, key, value)\r\n      }\r\n    })\r\n  }\r\n\r\n  /** 清除校验 */\r\n  clearValidate(): void {\r\n    this.errors.clear()\r\n  }\r\n\r\n  /**\r\n   * 监听值变更\r\n   * @param cb 回调\r\n   */\r\n  onChange(cb: (field: keyof Fields, val: any) => void) {\r\n    this.modelChangeCallback.add(cb)\r\n  }\r\n\r\n  /** 关闭监听值变更 */\r\n  offChange(cb: (field: keyof Fields, val: any) => void) {\r\n    this.modelChangeCallback.delete(cb)\r\n  }\r\n}\r\n", "import type {\r\n  FormModelItem,\r\n  DataSettingConfig\r\n} from '@ui/types/components/form'\r\nimport { Validator } from '@ui/utils'\r\nimport { getChainValue, setChainValue } from 'cat-kit/fe'\r\nimport { isReactive, reactive, shallowReactive, watch } from 'vue'\r\n\r\n/**\r\n * 动态表单模型\r\n */\r\nexport class DynamicFormModel {\r\n  /** 表单数据 */\r\n  private _data: Record<string, any> = reactive({})\r\n\r\n  set data(v: Record<string, any>) {\r\n    if (!isReactive(v)) {\r\n      console.error(`data不是一个响应式对象`)\r\n      return\r\n    }\r\n    this._data = v\r\n    this.watchData()\r\n  }\r\n\r\n  get data() {\r\n    return this._data\r\n  }\r\n\r\n  /** 表单规则 */\r\n  readonly fields: Record<string, FormModelItem> = shallowReactive({})\r\n\r\n  private validator: Validator\r\n\r\n  /**\r\n   * 不同表单对应的key\r\n   */\r\n  formKeys = new Map<number, string[]>()\r\n\r\n  readonly errors = shallowReactive<Map<string, string[] | undefined>>(\r\n    new Map()\r\n  )\r\n\r\n  /**\r\n   * 是否在表单值更新时校验\r\n   */\r\n  private validateOnFieldChange = true\r\n\r\n  private modelChangeCallback: Set<(fields: string, val: any) => void> =\r\n    new Set()\r\n\r\n  private _allKeys: string[] = []\r\n\r\n  /** 所有的键 */\r\n  get allKeys() {\r\n    return this._allKeys\r\n  }\r\n\r\n  private getAllKeys() {\r\n    this._allKeys = Object.keys(this.fields)\r\n  }\r\n\r\n  /** 初始数据 */\r\n  private readonly initialData: Record<string, any> = {}\r\n\r\n  /**\r\n   * 变更前的值\r\n   */\r\n  private readonly oldData: Record<string, any> = {}\r\n\r\n  constructor(fields?: Record<string, FormModelItem>) {\r\n    this.append(fields ?? {})\r\n    this.validator = new Validator(this.fields)\r\n    this.getAllKeys()\r\n    this.watchData()\r\n  }\r\n\r\n  private watchData() {\r\n    const { oldData } = this\r\n    watch(this.data, data => {\r\n      let changedKeys: string[] = []\r\n\r\n      this.allKeys.forEach(key => {\r\n        const oldVal = getChainValue(oldData, key)\r\n        const newVal = getChainValue(data, key)\r\n        if (oldVal !== newVal) {\r\n          this.modelChangeCallback.forEach(cb => cb(key, newVal))\r\n          changedKeys.push(key)\r\n          setChainValue(oldData, key, newVal)\r\n        }\r\n      })\r\n\r\n      if (this.validateOnFieldChange) {\r\n        this.validate(changedKeys)\r\n      } else {\r\n        this.validateOnFieldChange = true\r\n      }\r\n    })\r\n  }\r\n\r\n  append(fields: Record<string, FormModelItem>) {\r\n    for (const key in fields) {\r\n      this.add(key, fields[key] ?? {})\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 添加字段\r\n   * @param field 字段\r\n   * @param item 字段配置项\r\n   */\r\n  add(field: string, item: FormModelItem) {\r\n    this.fields[field] = item\r\n    const { value } = item\r\n    const v = typeof value === 'function' ? value() : value\r\n    /** 这是有bug的 */\r\n    if (v !== undefined) {\r\n      this.initialData[field] = JSON.parse(JSON.stringify(v))\r\n    }\r\n    setChainValue(this.data, field, v)\r\n    setChainValue(this.oldData, field, v)\r\n    this.getAllKeys()\r\n  }\r\n\r\n  /**\r\n   * 移除字段\r\n   * @param field 字段\r\n   */\r\n  delete(field: string) {\r\n    delete this.fields[field]\r\n    this.getAllKeys()\r\n  }\r\n\r\n  /**\r\n   * 监听值变更\r\n   * @param cb 回调\r\n   */\r\n  onChange(cb: (field: string, val: any) => void) {\r\n    this.modelChangeCallback.add(cb)\r\n  }\r\n\r\n  offChange(cb: (field: string, val: any) => void) {\r\n    this.modelChangeCallback.delete(cb)\r\n  }\r\n\r\n  async validate(fields?: string | string[]): Promise<boolean> {\r\n    const { errors, validator, data } = this\r\n\r\n    const results = await validator.validate(\r\n      data,\r\n      this.getValidateFields(fields)\r\n    )\r\n\r\n    // 设置错误提示\r\n    if (!fields) {\r\n      errors.clear()\r\n      for (const field in results) {\r\n        errors.set(field, results[field])\r\n      }\r\n    } else {\r\n      ~(Array.isArray(fields) ? fields : [fields]).forEach(field => {\r\n        const errs = results[field]\r\n        if (errs?.length) {\r\n          errors.set(field, errs)\r\n        } else {\r\n          errors.delete(field)\r\n        }\r\n      })\r\n    }\r\n\r\n    return errors.size > 0 ? false : true\r\n  }\r\n\r\n  private getValidateFields(fields?: string | string[]) {\r\n    if (!fields) {\r\n      if (this.formKeys.size) {\r\n        let _fields: string[] = []\r\n        this.formKeys.forEach(fields => {\r\n          _fields = _fields.concat(fields)\r\n        })\r\n        return _fields\r\n      } else {\r\n        return this.allKeys\r\n      }\r\n    }\r\n\r\n    if (!Array.isArray(fields)) {\r\n      return [fields]\r\n    }\r\n    return fields\r\n  }\r\n\r\n  /**\r\n   * 重置数据\r\n   * @param fields 需要重置的字段\r\n   */\r\n  resetData(keys?: string | string[]): void {\r\n    if (typeof keys === 'string') {\r\n      keys = [keys]\r\n    } else if (Array.isArray(keys)) {\r\n    } else {\r\n      keys = this.allKeys\r\n    }\r\n\r\n    this.clearValidate()\r\n\r\n    this.validateOnFieldChange = false\r\n\r\n    keys.forEach(field => {\r\n      setChainValue(\r\n        this.data,\r\n        field as string,\r\n        getChainValue(this.initialData, field as string)\r\n      )\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 设置值\r\n   * @param formData 表单值\r\n   * @param options 配置\r\n   */\r\n  setData(formData: Record<string, any>, config?: DataSettingConfig) {\r\n    const { validate = true } = config || {}\r\n\r\n    if (!validate) {\r\n      this.validateOnFieldChange = false\r\n    }\r\n\r\n    this.allKeys.forEach(key => {\r\n      const value = getChainValue(formData, key)\r\n      if (value !== undefined) {\r\n        setChainValue(this.data, key, value)\r\n      }\r\n    })\r\n  }\r\n\r\n  clearValidate() {\r\n    this.errors.clear()\r\n  }\r\n}\r\n", "<template>\r\n  <div :class=\"cls.b\"></div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { GanttChartProps } from '@ui/types/components/gantt-chart'\r\nimport { bem } from '@ui/utils'\r\n\r\ndefineOptions({\r\n  name: 'GanttChart'\r\n})\r\n\r\ndefineProps<GanttChartProps>()\r\n\r\nconst cls = bem('gantt-chart')\r\n</script>\r\n", "import type {\r\n  GroupInputEmits,\r\n  GroupInputProps\r\n} from '@ui/types/components/group-input'\r\nimport { createIncrease } from '@ui/utils'\r\nimport { isReactive, nextTick, shallowReactive, shallowRef, watch } from 'vue'\r\n\r\ninterface Options {\r\n  props: GroupInputProps\r\n  emit: GroupInputEmits\r\n}\r\n\r\nexport function useGroupItems(options: Options) {\r\n  const { props, emit } = options\r\n\r\n  const id = createIncrease(1)\r\n\r\n  const items = shallowRef<{ id: number; data: Record<string, any> }[]>([])\r\n\r\n  function createItem(data: Record<string, any>) {\r\n    return {\r\n      data: isReactive(data) ? data : shallowReactive(data),\r\n      id: id()\r\n    }\r\n  }\r\n\r\n  let changedByEvent = false\r\n  let changedByModelValue = false\r\n  function runByEvent(cb: () => void) {\r\n    changedByEvent = true\r\n    cb()\r\n    nextTick(() => {\r\n      changedByEvent = false\r\n    })\r\n  }\r\n\r\n  watch(\r\n    () => props.modelValue,\r\n    modelValue => {\r\n      if (changedByEvent) return\r\n      changedByModelValue = true\r\n      items.value = modelValue?.map(createItem) ?? []\r\n      nextTick(() => {\r\n        changedByModelValue = false\r\n      })\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  watch(items, items => {\r\n    if (changedByModelValue) return\r\n    emit(\r\n      'update:modelValue',\r\n      items.map(item => item.data)\r\n    )\r\n  })\r\n\r\n  return {\r\n    items,\r\n    createItem,\r\n    runByEvent\r\n  }\r\n}\r\n", "<template>\r\n  <ul :class=\"[cls.b, cls.m(size)]\" v-if=\"!readonly\">\r\n    <li v-if=\"isEmpty && creatable\">\r\n      <u-button\r\n        style=\"width: 100%\"\r\n        :icon=\"Plus\"\r\n        @click=\"handleAdd(0)\"\r\n        :size=\"size\"\r\n      >\r\n        新增\r\n      </u-button>\r\n    </li>\r\n    <li\r\n      v-for=\"(item, index) of items\"\r\n      :key=\"item.id\"\r\n      :class=\"cls.e('item')\"\r\n      :style=\"itemStyle\"\r\n    >\r\n      <slot v-bind=\"{ item: item.data, index }\" />\r\n      <span :class=\"cls.e('actions')\">\r\n        <u-button\r\n          :icon=\"Minus\"\r\n          circle\r\n          :disabled=\"disabled\"\r\n          :size=\"size\"\r\n          @click=\"handleRemove(index)\"\r\n        />\r\n        <u-button\r\n          :icon=\"Plus\"\r\n          circle\r\n          :disabled=\"disabled\"\r\n          :size=\"size\"\r\n          @click=\"handleAdd(index)\"\r\n        />\r\n      </span>\r\n    </li>\r\n  </ul>\r\n\r\n  <template v-else-if=\"items?.length\">\r\n    <ul :class=\"[cls.b, cls.m(size)]\">\r\n      <li v-for=\"item of items\" :key=\"item.id\" :class=\"cls.e('item')\">\r\n        <span v-for=\"v in item.data\">{{ v }}</span>\r\n      </li>\r\n    </ul>\r\n  </template>\r\n\r\n  <span v-else>{{ FORM_EMPTY_CONTENT }}</span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup generic=\"GroupItem extends Record<string, any>\">\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\nimport type {\r\n  GroupInputEmits,\r\n  GroupInputProps\r\n} from '@ui/types/components/group-input'\r\nimport { bem } from '@ui/utils'\r\nimport { Minus, Plus } from 'icon-ultra'\r\nimport { useGroupItems } from './use-group-items'\r\nimport { computed } from 'vue'\r\nimport { UButton } from '../button'\r\nimport { FORM_EMPTY_CONTENT } from '@ui/shared'\r\n\r\ndefineOptions({\r\n  name: 'GroupInput'\r\n})\r\n\r\nconst props = withDefaults(defineProps<GroupInputProps<GroupItem>>(), {\r\n  modelValue: () => [],\r\n  disabled: undefined,\r\n  readonly: undefined,\r\n  creatable: true\r\n})\r\n\r\nconst emit = defineEmits<GroupInputEmits>()\r\n\r\nconst cls = bem('group-input')\r\n\r\nconst { formProps } = useFormComponent()\r\nconst { disabled, size, readonly } = useFormFallbackProps(\r\n  [formProps ?? {}, props],\r\n  {\r\n    size: 'default',\r\n    disabled: false,\r\n    readonly: false\r\n  }\r\n)\r\n\r\nconst { items, createItem, runByEvent } = useGroupItems({\r\n  props,\r\n  emit\r\n})\r\n\r\nconst isEmpty = computed(() => {\r\n  return !items.value.length\r\n})\r\n\r\nfunction handleAdd(index: number) {\r\n  runByEvent(() => {\r\n    items.value = [\r\n      ...items.value.slice(0, index + 1),\r\n      createItem({}),\r\n      ...items.value.slice(index + 1)\r\n    ]\r\n  })\r\n}\r\n\r\nfunction handleRemove(index: number) {\r\n  runByEvent(() => {\r\n    items.value = [\r\n      ...items.value.slice(0, index),\r\n      ...items.value.slice(index + 1)\r\n    ]\r\n  })\r\n}\r\n</script>\r\n", "<template>\r\n  <ul :class=\"[cls.b, cls.m(size)]\">\r\n    <li\r\n      v-for=\"(_, index) in length\"\r\n      :key=\"index\"\r\n      tabindex=\"0\"\r\n      @keydown=\"onKeydown($event, valueArray[index]!, index)\"\r\n      @focus=\"focus(index)\"\r\n      @blur=\"index === position && (blur = true)\"\r\n      ref=\"items\"\r\n      :class=\"[cls.e('item'), bem.is('focus', index === position && !blur)]\"\r\n    >\r\n      <span :class=\"cls.em('item', 'text')\" v-if=\"valueArray[index]\">\r\n        {{ valueArray[index] }}\r\n      </span>\r\n\r\n      <span :class=\"cls.em('item', 'cursor')\" v-else-if=\"index === position\"></span>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, ref, getCurrentInstance } from 'vue'\r\nimport type {\r\n  GridInputProps,\r\n  GridInputEmits,\r\n  GridInputExposed\r\n} from '@ui/types/components/grid-input'\r\nimport { bem } from '@ui/utils'\r\nimport { useFallbackProps } from '@ui/compositions'\r\n\r\ndefineOptions({\r\n  name: 'GridInput'\r\n})\r\n\r\nconst emit = defineEmits<GridInputEmits>()\r\n\r\nconst props = withDefaults(defineProps<GridInputProps>(), {\r\n  length: 6,\r\n  zero: false,\r\n  separator: '-'\r\n})\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default'\r\n})\r\n\r\nconst cls = bem('grid-input')\r\n\r\nconst _numberReg = computed(() => (props.zero ? /^[0-9]$/ : /^[1-9]$/))\r\n\r\nconst valueArray = ref<string[]>([])\r\n\r\nconst position = ref<number>(-1)\r\n\r\nconst blur = ref<boolean>(false)\r\n\r\nconst instance = getCurrentInstance()\r\n\r\nconst focus = async (index?: number) => {\r\n  if (index === undefined) {\r\n    focus(position.value)\r\n    return\r\n  }\r\n  if (index !== 0 && index > valueArray.value.length) {\r\n    index = valueArray.value.length\r\n  }\r\n  position.value = index\r\n  let dom = (instance?.refs.items as any)[index]\r\n  dom?.focus()\r\n  blur.value = false\r\n}\r\n\r\nconst changeValue = (value: string, index: number) => {\r\n  if (position.value === props.length) return\r\n  const currentValue = valueArray.value[index]\r\n\r\n  if (currentValue) {\r\n    valueArray.value.splice(index, 1, value)\r\n  } else if (index === valueArray.value.length) {\r\n    valueArray.value.push(value)\r\n  } else {\r\n    return\r\n  }\r\n  position.value++\r\n  focus()\r\n\r\n  emit('input', valueArray.value.filter((v) => v).join(props.separator))\r\n}\r\n\r\nconst baseOperation = {\r\n  Backspace: (value: string, index: number) => {\r\n    if (value) {\r\n      valueArray.value.splice(index, 1)\r\n    } else if (index - 1 >= 0) {\r\n      valueArray.value.splice(index - 1, 1)\r\n    }\r\n    if (index !== 0) {\r\n      focus(index - 1)\r\n    }\r\n    emit('input', valueArray.value.filter((v) => v).join(props.separator))\r\n  },\r\n  ArrowLeft: (value: string, index: number) => {\r\n    if (index === 0) return\r\n    focus(index - 1)\r\n  },\r\n  ArrowRight: (value: string, index: number) => {\r\n    if (index === valueArray.value.length) return\r\n    focus(index + 1)\r\n  }\r\n}\r\n\r\nconst onKeydown = (e: any, value: string, index: number) => {\r\n  if (_numberReg.value.test(e.key)) {\r\n    changeValue(e.key, index)\r\n    return\r\n  }\r\n  baseOperation[e.key](value, index)\r\n}\r\n\r\nconst clear = () => {\r\n  while (valueArray.value.length) {\r\n    valueArray.value.pop()\r\n  }\r\n}\r\n\r\ndefineExpose<GridInputExposed>({ clear })\r\n</script>\r\n", "<template>\r\n  <u-scroll tag=\"ul\" :class=\"[cls.b, cls.m(size)]\">\r\n    <slot v-for=\"(item, index) of data\" v-bind=\"{ item, index }\" />\r\n  </u-scroll>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { ListProps } from '@ui/types/components/list'\r\nimport { bem } from '@ui/utils'\r\nimport { UScroll } from '../scroll'\r\nimport { useFallbackProps } from '@ui/compositions'\r\nimport type { ComponentSize } from '@ui/types'\r\n\r\ndefineOptions({\r\n  name: 'List'\r\n})\r\n\r\nconst props = withDefaults(defineProps<ListProps>(), {})\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst cls = bem('list')\r\n</script>\r\n", "<template>\r\n  <li :class=\"cls.b\">\r\n    <slot />\r\n  </li>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { bem } from '@ui/utils'\r\n\r\ndefineOptions({\r\n  name: 'ListItem'\r\n})\r\n\r\nconst cls = bem('list-item')\r\n</script>\r\n", "import type { BEM } from '@ui/utils'\r\nimport type { InjectionKey } from 'vue'\r\nimport type { MenuProps, MenuEmits } from '@ui/types/components/menu'\r\n\r\nexport interface MenuContext {\r\n  cls: BEM<'menu', 'u-'>\r\n  menuProps: MenuProps\r\n  menuEmit: MenuEmits\r\n  expandedPath: Set<string>\r\n}\r\n\r\nexport const MenuDIKey: InjectionKey<MenuContext> = Symbol('MenuDIKey')\r\n", "<template>\r\n  <li\r\n    :class=\"[\r\n      cls.e('item'),\r\n      bem.is('active', active),\r\n      bem.is('disabled', menu.disabled ?? false)\r\n    ]\"\r\n    v-ripple=\"!menu.disabled ? cls.e('ripple') : false\"\r\n    :style=\"{\r\n      paddingLeft: `${depth * 20 + 8}px`\r\n    }\"\r\n    ref=\"itemRef\"\r\n    @click=\"menuEmit('item-click', menu)\"\r\n  >\r\n    <!-- 图标 -->\r\n    <template v-if=\"menu.icon\">\r\n      <u-icon :class=\"cls.e('item-icon')\" v-if=\"typeof menu.icon !== 'string'\">\r\n        <component :is=\"menu.icon\" />\r\n      </u-icon>\r\n\r\n      <img :src=\"menu.icon\" v-else :class=\"cls?.e('item-icon')\" alt=\"icon\" />\r\n    </template>\r\n\r\n    <!-- 文本 -->\r\n    <span :class=\"cls.e('item-title')\">\r\n      {{ menu.title }}\r\n    </span>\r\n\r\n    <span :class=\"cls.e('item-expand')\"></span>\r\n  </li>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, inject, shallowRef, watch } from 'vue'\r\nimport { MenuDIKey } from './di'\r\nimport type { MenuItem } from '@ui/types/components/menu'\r\nimport { bem } from '@ui/utils'\r\nimport { UIcon } from '../icon'\r\nimport { vRipple } from '@ui/directives'\r\n\r\ndefineOptions({\r\n  name: 'MenuItem'\r\n})\r\n\r\nconst props = defineProps<{\r\n  menu: MenuItem\r\n  depth: number\r\n}>()\r\n\r\nconst { cls, menuProps, menuEmit } = inject(MenuDIKey)!\r\n\r\nconst itemRef = shallowRef<HTMLElement>()\r\n\r\nconst active = computed(() => {\r\n  return menuProps.currentPath === props.menu.path\r\n})\r\n\r\nwatch([active, itemRef], ([active, itemRef]) => {\r\n  active &&\r\n    itemRef &&\r\n    itemRef.scrollIntoView({\r\n      block: 'nearest'\r\n    })\r\n})\r\n</script>\r\n", "export function getKey(index: number, parentKey: string) {\r\n  return `${parentKey}-${index}`\r\n}\r\n", "import { removeStyles, setStyles } from '@ui/utils'\r\n\r\nexport function useMenuTransition() {\r\n  // cubic-bezier(0.25, 1, 0.5, 1)\r\n  const enterTransition = 'height 0.3s ease'\r\n  const leaveTransition = enterTransition\r\n\r\n  function enter(el: HTMLElement) {\r\n    // 插入时获取高度\r\n    const height = el.offsetHeight\r\n    setStyles(el as HTMLElement, {\r\n      height: 0,\r\n      transition: enterTransition\r\n    })\r\n\r\n    requestAnimationFrame(() => {\r\n      setStyles(el, {\r\n        height: `${height}px`\r\n      })\r\n    })\r\n  }\r\n\r\n  function afterEnter(el: HTMLElement) {\r\n    removeStyles(el, ['transition', 'height'])\r\n  }\r\n\r\n  function beforeLeave(el: HTMLElement) {\r\n    setStyles(el, {\r\n      height: el.offsetHeight + 'px',\r\n      transition: leaveTransition\r\n    })\r\n  }\r\n\r\n  function leave(el: HTMLElement) {\r\n    setStyles(el, {\r\n      height: 0\r\n    })\r\n  }\r\n\r\n  function afterLeave(el: HTMLElement) {\r\n    removeStyles(el, ['transition', 'height'])\r\n  }\r\n\r\n  return {\r\n    enter,\r\n    afterEnter,\r\n    beforeLeave,\r\n    leave,\r\n    afterLeave\r\n  }\r\n}\r\n", "<template>\r\n  <li :class=\"cls.e('sub')\">\r\n    <div\r\n      :class=\"cls.e('sub-content')\"\r\n      @click=\"handleToggleExpand\"\r\n      :style=\"{\r\n        paddingLeft: 8 + depth * 20 + 'px'\r\n      }\"\r\n    >\r\n      <!-- 图标 -->\r\n      <template v-if=\"menu.icon\">\r\n        <u-icon :class=\"cls.e('sub-icon')\" v-if=\"typeof menu.icon !== 'string'\">\r\n          <component :is=\"menu.icon\" />\r\n        </u-icon>\r\n\r\n        <img :src=\"menu.icon\" v-else :class=\"cls?.e('sub-icon')\" alt=\"icon\" />\r\n      </template>\r\n\r\n      <template v-if=\"!menuProps.collapsed || depth !== 0\">\r\n        <!-- 文本 -->\r\n        <span :class=\"cls.e('sub-title')\">\r\n          {{ menu.title }}\r\n        </span>\r\n\r\n        <!-- 展开图标 -->\r\n        <u-icon :class=\"[cls.e('sub-expand'), bem.is('expanded', expanded)]\">\r\n          <ArrowRight />\r\n        </u-icon>\r\n      </template>\r\n    </div>\r\n\r\n    <!-- @vue-ignore -->\r\n    <transition\r\n      @enter=\"enter\"\r\n      @after-enter=\"afterEnter\"\r\n      @leave=\"leave\"\r\n      @before-leave=\"beforeLeave\"\r\n      @after-leave=\"afterLeave\"\r\n    >\r\n      <ul :class=\"cls.e('sub-list')\" v-show=\"expanded\">\r\n        <template\r\n          v-for=\"(child, index) of menu.children!\"\r\n          :key=\"getKey(index, parentKey)\"\r\n        >\r\n          <UMenuItem\r\n            v-if=\"!child.children?.length\"\r\n            :menu=\"child\"\r\n            :depth=\"depth + 1\"\r\n          />\r\n          <MenuSub\r\n            v-else\r\n            :menu=\"child\"\r\n            :parent-key=\"getKey(index, parentKey)\"\r\n            :depth=\"depth + 1\"\r\n          />\r\n        </template>\r\n      </ul>\r\n    </transition>\r\n  </li>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, inject } from 'vue'\r\nimport { MenuDIKey } from './di'\r\nimport { ArrowRight } from 'icon-ultra'\r\nimport { UIcon } from '../icon'\r\nimport type { MenuItem } from '@ui/types/components/menu'\r\nimport UMenuItem from './menu-item.vue'\r\nimport { getKey } from './helper'\r\nimport { useMenuTransition } from './use-menu-transition'\r\nimport { bem } from '@ui/utils'\r\n\r\ndefineOptions({\r\n  name: 'MenuSub'\r\n})\r\n\r\nconst props = defineProps<{\r\n  menu: MenuItem\r\n  parentKey: string\r\n  depth: number\r\n}>()\r\n\r\nconst { cls, expandedPath, menuProps } = inject(MenuDIKey)!\r\n\r\nconst { enter, afterEnter, beforeLeave, leave, afterLeave } =\r\n  useMenuTransition()\r\n\r\nconst expanded = computed(() => expandedPath.has(props.menu.path))\r\n\r\nfunction handleToggleExpand() {\r\n  const { menu } = props\r\n  expandedPath.has(menu.path)\r\n    ? expandedPath.delete(menu.path)\r\n    : expandedPath.add(menu.path)\r\n}\r\n</script>\r\n", "<template>\r\n  <!-- <div> -->\r\n  <div>\r\n    <u-tip\r\n      v-if=\"depth === 0\"\r\n      direction=\"right\"\r\n      alignment=\"center\"\r\n      :trigger=\"trigger\"\r\n      ref=\"tipRef\"\r\n      hide-arrow\r\n    >\r\n      <li\r\n        :class=\"[\r\n          cls.e('item'),\r\n          bem.is('active', active),\r\n          bem.is('disabled', menu.disabled ?? false)\r\n        ]\"\r\n        v-ripple=\"!menu.disabled ? cls.e('ripple') : false\"\r\n        ref=\"itemRef\"\r\n        @click=\"handleMenuItemClick(menu)\"\r\n      >\r\n        <!-- 收缩 -->\r\n        <template v-if=\"menu.icon\">\r\n          <u-icon\r\n            :class=\"cls.e('item-icon')\"\r\n            v-if=\"typeof menu.icon !== 'string'\"\r\n          >\r\n            <component :is=\"menu.icon\" />\r\n          </u-icon>\r\n\r\n          <img\r\n            :src=\"menu.icon\"\r\n            v-else\r\n            :class=\"cls?.e('item-icon')\"\r\n            alt=\"icon\"\r\n          />\r\n        </template>\r\n\r\n        <span :class=\"cls.e('item-expand')\" v-if=\"depth !== 0\">\r\n          {{ menu.title }}\r\n        </span>\r\n      </li>\r\n\r\n      <template #content>\r\n        {{ menu.title }}\r\n      </template>\r\n    </u-tip>\r\n\r\n    <li\r\n      v-else\r\n      :class=\"[\r\n        cls.e('item'),\r\n        bem.is('active', active),\r\n        bem.is('disabled', menu.disabled ?? false)\r\n      ]\"\r\n      v-ripple=\"!menu.disabled ? cls.e('ripple') : false\"\r\n      ref=\"itemRef\"\r\n      @click=\"handleMenuItemClick(menu)\"\r\n    >\r\n      <!-- 收缩 -->\r\n      <template v-if=\"menu.icon\">\r\n        <u-icon\r\n          :class=\"cls.e('item-icon')\"\r\n          v-if=\"typeof menu.icon !== 'string'\"\r\n        >\r\n          <component :is=\"menu.icon\" />\r\n        </u-icon>\r\n\r\n        <img :src=\"menu.icon\" v-else :class=\"cls?.e('item-icon')\" alt=\"icon\" />\r\n      </template>\r\n\r\n      <span :class=\"cls.e('item-expand')\" v-if=\"depth !== 0\">\r\n        {{ menu.title }}\r\n      </span>\r\n    </li>\r\n  </div>\r\n  <!-- </div> -->\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, inject, shallowRef, watch } from 'vue'\r\nimport { MenuDIKey } from './di'\r\nimport type { MenuItem } from '@ui/types/components/menu'\r\nimport { bem } from '@ui/utils'\r\nimport { UIcon } from '../icon'\r\nimport { UTip } from '../tip'\r\nimport { vRipple } from '@ui/directives'\r\n\r\ndefineOptions({\r\n  name: 'MenuItem'\r\n})\r\n\r\nconst props = defineProps<{\r\n  menu: MenuItem\r\n  depth: number\r\n}>()\r\n\r\nconst { cls, menuProps, menuEmit } = inject(MenuDIKey)!\r\n\r\nconst itemRef = shallowRef<HTMLElement>()\r\n\r\nconst active = computed(() => {\r\n  return menuProps.currentPath === props.menu.path\r\n})\r\n\r\nwatch([active, itemRef], ([active, itemRef]) => {\r\n  active &&\r\n    itemRef &&\r\n    itemRef.scrollIntoView({\r\n      block: 'nearest'\r\n    })\r\n})\r\n\r\nconst trigger = shallowRef<'hover' | 'click'>('hover')\r\n\r\nconst tipRef = shallowRef()\r\n\r\nconst handleMenuItemClick = (menu: MenuItem) => {\r\n  menuEmit('item-click', menu)\r\n}\r\n\r\n// watch(\r\n//   () => props.depth,\r\n//   val => {\r\n//     console.log(val, 'val')\r\n//   }\r\n// )\r\n</script>\r\n", "<template>\r\n  <!-- 收缩状态 -->\r\n  <div @mouseenter=\"handleToggleExpand\">\r\n    <u-tip\r\n      :direction=\"direction\"\r\n      :alignment=\"alignment\"\r\n      hide-arrow\r\n      :trigger=\"trigger\"\r\n    >\r\n      <li :class=\"[cls.e('sub')]\" style=\"width: 100%\">\r\n        <div :class=\"cls.e('sub-content')\">\r\n          <!-- 图标 -->\r\n          <div>\r\n            <template v-if=\"menu.icon\">\r\n              <u-icon\r\n                :class=\"cls.e('sub-icon')\"\r\n                v-if=\"typeof menu.icon !== 'string'\"\r\n              >\r\n                <component :is=\"menu.icon\" />\r\n              </u-icon>\r\n\r\n              <img\r\n                :src=\"menu.icon\"\r\n                v-else\r\n                :class=\"cls?.e('sub-icon')\"\r\n                alt=\"icon\"\r\n              />\r\n            </template>\r\n            <template v-if=\"!menuProps.collapsed || depth !== 0\">\r\n              <!-- 文本 -->\r\n              <span :class=\"cls.e('sub-title')\">\r\n                {{ menu.title }}\r\n              </span>\r\n\r\n              <!-- 展开图标 -->\r\n              <u-icon\r\n                :class=\"[cls.e('sub-expand'), bem.is('expanded', expanded)]\"\r\n              >\r\n                <ArrowRight />\r\n              </u-icon>\r\n            </template>\r\n          </div>\r\n        </div>\r\n      </li>\r\n\r\n      <template #content>\r\n        <!-- @vue-ignore -->\r\n        <transition\r\n          @enter=\"enter\"\r\n          @after-enter=\"afterEnter\"\r\n          @leave=\"leave\"\r\n          @before-leave=\"beforeLeave\"\r\n          @after-leave=\"afterLeave\"\r\n        >\r\n          <ul :class=\"cls.e('sub-list')\" v-show=\"expanded\">\r\n            <template\r\n              v-for=\"(child, index) of menu.children!\"\r\n              :key=\"getKey(index, parentKey)\"\r\n            >\r\n              <UMenuItemCollapsed\r\n                v-if=\"!child.children?.length\"\r\n                :menu=\"child\"\r\n                :depth=\"depth + 1\"\r\n              />\r\n\r\n              <MenuSubCollapsed\r\n                v-else\r\n                :menu=\"child\"\r\n                :parent-key=\"getKey(index, parentKey)\"\r\n                :depth=\"depth + 1\"\r\n              />\r\n            </template>\r\n          </ul>\r\n        </transition>\r\n      </template>\r\n    </u-tip>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, inject, shallowRef } from 'vue'\r\nimport { MenuDIKey } from './di'\r\nimport { ArrowRight } from 'icon-ultra'\r\nimport { UIcon } from '../icon'\r\nimport { UTip } from '../tip'\r\nimport type { MenuItem } from '@ui/types/components/menu'\r\nimport UMenuItemCollapsed from './menu-item-collapsed.vue'\r\nimport { getKey } from './helper'\r\nimport { useMenuTransition } from './use-menu-transition'\r\nimport { bem } from '@ui/utils'\r\nimport type { TipAlign, TipDirection } from '@ui/types'\r\n\r\ndefineOptions({\r\n  name: 'MenuSubCollapsed'\r\n})\r\n\r\nconst props = defineProps<{\r\n  menu: MenuItem\r\n  parentKey: string\r\n  depth: number\r\n  collapsed?: boolean\r\n}>()\r\n\r\nconst { cls, expandedPath, menuProps } = inject(MenuDIKey)!\r\n\r\nconst { enter, afterEnter, beforeLeave, leave, afterLeave } =\r\n  useMenuTransition()\r\n\r\nconst expanded = computed(() => expandedPath.has(props.menu.path))\r\n\r\nconst direction = shallowRef<TipDirection>('right')\r\nconst alignment = shallowRef<TipAlign>('center')\r\nconst trigger = shallowRef<'hover' | 'click'>('hover')\r\n\r\nfunction handleToggleExpand() {\r\n  const { menu } = props\r\n\r\n  expandedPath.add(menu.path)\r\n}\r\n</script>\r\n", "<template>\r\n  <u-scroll\r\n    tag=\"ul\"\r\n    :class=\"[cls.b, cls.m(size), bem.is('collapsed', collapsed)]\"\r\n  >\r\n    <template v-if=\"!collapsed\">\r\n      <template v-for=\"(menu, index) of menus\" :key=\"String(index)\">\r\n        <UMenuSub\r\n          v-if=\"menu.children?.length\"\r\n          :menu=\"menu\"\r\n          :parent-key=\"String(index)\"\r\n          :depth=\"0\"\r\n        />\r\n        <UMenuItem v-else :menu=\"menu\" :key=\"String(index)\" :depth=\"0\" />\r\n      </template>\r\n    </template>\r\n\r\n    <template v-else>\r\n      <template v-for=\"(menu, index) of menus\" :key=\"String(index)\">\r\n        <UMenuSubCollapsed\r\n          v-if=\"menu.children?.length\"\r\n          :menu=\"menu\"\r\n          :parent-key=\"String(index)\"\r\n          :depth=\"0\"\r\n        />\r\n        <UMenuItemCollapsed\r\n          v-else\r\n          :menu=\"menu\"\r\n          :key=\"String(index)\"\r\n          :depth=\"0\"\r\n        />\r\n      </template>\r\n    </template>\r\n  </u-scroll>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { MenuEmits, MenuProps } from '@ui/types/components/menu'\r\nimport { bem } from '@ui/utils'\r\nimport { computed, provide, shallowReactive, watch } from 'vue'\r\nimport { MenuDIKey } from './di'\r\nimport { useFallbackProps } from '@ui/compositions'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\nimport UMenuSub from './menu-sub.vue'\r\nimport UMenuItem from './menu-item.vue'\r\nimport UMenuSubCollapsed from './menu-sub-collapsed.vue'\r\nimport UMenuItemCollapsed from './menu-item-collapsed.vue'\r\nimport { UScroll } from '../scroll'\r\nimport { Forest, TreeNode } from 'cat-kit/fe'\r\n\r\ndefineOptions({\r\n  name: 'Menu'\r\n})\r\n\r\nconst props = withDefaults(defineProps<MenuProps>(), {\r\n  expand: false,\r\n  activeIndex: '',\r\n  collapsed: false,\r\n  uniqueOpened: false\r\n})\r\n\r\nconst emit = defineEmits<MenuEmits>()\r\n\r\nconst cls = bem('menu')\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst expandedPath = shallowReactive(new Set<string>())\r\n\r\nclass MenuNode<Data extends Record<string, any>> extends TreeNode<Data> {\r\n  override parent: MenuNode<Data> | null = null\r\n  override children?: MenuNode<Data>[]\r\n}\r\nconst menuForest = computed(() => {\r\n  return props.menus ? Forest.create(props.menus, MenuNode) : null\r\n})\r\n\r\nwatch(\r\n  [() => props.currentPath, () => menuForest.value],\r\n  ([currentPath, menuForest]) => {\r\n    if (!currentPath || !menuForest) return\r\n    menuForest.dft(item => {\r\n      if (item.data.path === currentPath) {\r\n        let parent = item.parent\r\n        while (parent?.data?.path) {\r\n          expandedPath.add(parent.data.path)\r\n          parent = parent.parent\r\n        }\r\n        return false\r\n      }\r\n    })\r\n  },\r\n  {\r\n    immediate: true\r\n  }\r\n)\r\n\r\nprovide(MenuDIKey, {\r\n  cls,\r\n  menuProps: props,\r\n  menuEmit: emit,\r\n  expandedPath\r\n})\r\n</script>\r\n", "<template>\r\n  <div></div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup></script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n", "import type { InjectionKey } from 'vue'\r\n\r\nexport const MultiSelectDIKey: InjectionKey<{\r\n  /** 选项类 */\r\n  optionClass: string\r\n  /** 波纹类 */\r\n  rippleClass: string\r\n}> = Symbol('MultiSelectDIKey')\r\n", "<template>\r\n  <li\r\n    :class=\"optionClass\"\r\n    v-ripple=\"disabled ? false : rippleClass\"\r\n    @click=\"!disabled && emit('check', !checked)\"\r\n    :ref=\"measureElement\"\r\n  >\r\n    <u-checkbox\r\n      :model-value=\"checked\"\r\n      @update:model-value=\"emit('check', $event)\"\r\n      @click.stop\r\n      :disabled=\"disabled\"\r\n    />\r\n\r\n    <slot />\r\n  </li>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { inject } from 'vue'\r\nimport { MultiSelectDIKey } from './di'\r\nimport { vRipple } from '@ui/directives'\r\nimport { UCheckbox } from '../checkbox'\r\n\r\ndefineOptions({\r\n  name: 'MultiSelectOption'\r\n})\r\n\r\nconst { disabled = false } = defineProps<{\r\n  option: Record<string, any>\r\n  disabled?: boolean\r\n  checked: boolean\r\n  measureElement?: (el: any) => void\r\n}>()\r\n\r\nconst emit = defineEmits<{\r\n  (e: 'check', checked: boolean): void\r\n}>()\r\n\r\nconst { optionClass, rippleClass } = inject(MultiSelectDIKey)!\r\n</script>\r\n", "import { debounce } from 'cat-kit/fe'\r\nimport { computed, shallowRef, watch } from 'vue'\r\n\r\ninterface Options<O extends Record<string, any>> {\r\n  props: {\r\n    options?: O[] | ((qs: string) => Promise<O[]> | O[])\r\n    labelKey: string\r\n    valueKey: string\r\n  }\r\n}\r\nexport function useOptions<O extends Record<string, any>>(o: Options<O>) {\r\n  const { props } = o\r\n\r\n  /** 筛选 */\r\n  const queryString = shallowRef('')\r\n\r\n  const remoteOptions = shallowRef<O[]>([])\r\n  const filteredOptions = shallowRef<O[]>([])\r\n\r\n  /** 已过滤的选项 */\r\n  const options = computed(() => {\r\n    const { options } = props\r\n\r\n    if (!options) return []\r\n\r\n    if (typeof options === 'function') return remoteOptions.value\r\n\r\n    return filteredOptions.value\r\n  })\r\n\r\n  watch(\r\n    [queryString, () => props.options],\r\n    debounce(async ([qs, propsOptions]) => {\r\n      if (typeof propsOptions === 'function') {\r\n        const options = await propsOptions(qs)\r\n        remoteOptions.value = options\r\n      } else {\r\n        const { labelKey } = props\r\n\r\n        if (!qs) {\r\n          filteredOptions.value = propsOptions ?? []\r\n          return\r\n        }\r\n        filteredOptions.value =\r\n          propsOptions?.filter(item => item[labelKey].includes(qs)) ?? []\r\n      }\r\n    }, 200),\r\n    {\r\n      immediate: true\r\n    }\r\n  )\r\n\r\n  return {\r\n    queryString,\r\n    options\r\n  }\r\n}\r\n", "<template>\r\n  <u-dropdown\r\n    v-if=\"!readonly\"\r\n    trigger=\"click\"\r\n    min-width=\"200px\"\r\n    ref=\"dropdownRef\"\r\n    :class=\"[cls.b, cls.m(size), bem.is('disabled', disabled)]\"\r\n    :content-class=\"[cls.e('panel'), cls.em('panel', size)]\"\r\n    @mouseenter=\"hovered = true\"\r\n    @mouseleave=\"hovered = false\"\r\n    :disabled=\"disabled\"\r\n  >\r\n    <!-- 触发 -->\r\n    <template #trigger>\r\n      <span :class=\"cls.e('placeholder')\" v-show=\"!model?.length\">\r\n        {{ placeholder }}\r\n      </span>\r\n\r\n      <div v-if=\"model?.length\" :class=\"cls.e('tags')\">\r\n        <u-tag\r\n          v-for=\"option of tags\"\r\n          :key=\"option[valueKey]\"\r\n          :closable=\"!disabled\"\r\n          @close=\"handleClose(option)\"\r\n        >\r\n          {{ option[labelKey] }}\r\n        </u-tag>\r\n        <u-tag v-if=\"restTag\"> {{ restTag }}+ </u-tag>\r\n      </div>\r\n\r\n      <transition name=\"zoom-in\" mode=\"out-in\">\r\n        <u-icon\r\n          v-if=\"clearable && model?.length && hovered && !disabled\"\r\n          :class=\"cls.e('clear')\"\r\n          @click.stop=\"handleClear\"\r\n        >\r\n          <Close />\r\n        </u-icon>\r\n\r\n        <u-icon :class=\"cls.e('arrow')\" v-else><ArrowDown /></u-icon>\r\n      </transition>\r\n    </template>\r\n\r\n    <!-- 下拉内容 -->\r\n    <template #content>\r\n      <!-- 多选栏 -->\r\n      <div :class=\"cls.e('content-header')\">\r\n        <u-checkbox\r\n          :model-value=\"allChecked\"\r\n          :indeterminate=\"indeterminate\"\r\n          @update:model-value=\"handleCheckAll\"\r\n          :disabled=\"max !== undefined\"\r\n        >\r\n          全选\r\n        </u-checkbox>\r\n\r\n        <span>\r\n          已选 {{ model?.length }}/{{ max ?? options?.length ?? 0 }}\r\n        </span>\r\n      </div>\r\n\r\n      <!-- 过滤器 -->\r\n      <div v-if=\"filterable\" :class=\"cls.e('content-filter')\">\r\n        <u-input placeholder=\"输入关键字进行过滤\" v-model=\"queryString\">\r\n          <template #suffix>\r\n            <u-icon><Search /></u-icon>\r\n          </template>\r\n        </u-input>\r\n      </div>\r\n\r\n      <!-- 多选列表 -->\r\n      <u-scroll\r\n        tag=\"ul\"\r\n        :class=\"[cls.e('options')]\"\r\n        ref=\"scrollRef\"\r\n        v-if=\"options.length\"\r\n        :content-class=\"[\r\n          cls.e('options-wrap'),\r\n          bem.is('virtual', virtualEnabled)\r\n        ]\"\r\n        :content-style=\"{\r\n          height: virtualEnabled ? withUnit(totalHeight, 'px') : undefined\r\n        }\"\r\n      >\r\n        <template v-if=\"virtualEnabled\">\r\n          <u-multi-select-option\r\n            v-for=\"{ option, index, key, label, offset } of virtualOptions\"\r\n            :option=\"option\"\r\n            :disabled=\"isDisabled(option)\"\r\n            :key=\"key\"\r\n            :style=\"{ transform: `translateY(${offset}px)` }\"\r\n            @check=\"handleCheck(option, $event)\"\r\n            :checked=\"checkedSet.has(option)\"\r\n            :data-index=\"index\"\r\n            :measure-element=\"measureElement\"\r\n          >\r\n            <slot v-bind=\"{ option, index }\">\r\n              {{ label }}\r\n            </slot>\r\n          </u-multi-select-option>\r\n        </template>\r\n\r\n        <template v-else>\r\n          <u-multi-select-option\r\n            v-for=\"(option, index) of options\"\r\n            :option=\"option\"\r\n            :disabled=\"isDisabled(option)\"\r\n            :key=\"getChainValue(option, valueKey)\"\r\n            @check=\"handleCheck(option, $event)\"\r\n            :checked=\"checkedSet.has(option)\"\r\n          >\r\n            <slot v-bind=\"{ option, index }\">\r\n              {{ getChainValue(option, labelKey) }}\r\n            </slot>\r\n          </u-multi-select-option>\r\n        </template>\r\n      </u-scroll>\r\n\r\n      <div v-else :class=\"cls.e('empty')\">\r\n        <UEmpty />\r\n      </div>\r\n    </template>\r\n  </u-dropdown>\r\n\r\n  <div v-else-if=\"model?.length\" :class=\"[cls.m(size), cls.e('readonly-tags')]\">\r\n    <div :class=\"cls.e('tags')\">\r\n      <u-tag v-for=\"option of tags\" :key=\"option[valueKey]\">\r\n        {{ option[labelKey] }}\r\n      </u-tag>\r\n    </div>\r\n  </div>\r\n\r\n  <span v-else>\r\n    {{ FORM_EMPTY_CONTENT }}\r\n  </span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup generic=\"Option extends Record<string, any>\">\r\nimport {\r\n  computed,\r\n  shallowRef,\r\n  shallowReactive,\r\n  watch,\r\n  provide,\r\n  nextTick\r\n} from 'vue'\r\nimport type {\r\n  MultiSelectEmits,\r\n  MultiSelectProps\r\n} from '@ui/types/components/multi-select'\r\nimport { bem, withUnit } from '@ui/utils'\r\nimport { UTag } from '../tag'\r\nimport {\r\n  useFormComponent,\r\n  useFormFallbackProps,\r\n  useVirtual\r\n} from '@ui/compositions'\r\nimport { UCheckbox } from '../checkbox'\r\nimport { UDropdown, type DropdownExposed } from '../dropdown'\r\nimport { UScroll, type ScrollExposed } from '../scroll'\r\nimport { UInput } from '../input'\r\nimport { UIcon } from '../icon'\r\nimport { UEmpty } from '../empty'\r\nimport { ArrowDown, Search, Close } from 'icon-ultra'\r\nimport UMultiSelectOption from './multi-select-option.vue'\r\nimport { MultiSelectDIKey } from './di'\r\nimport { useOptions } from '../select/use-options'\r\nimport { FORM_EMPTY_CONTENT } from '@ui/shared'\r\nimport { getChainValue } from 'cat-kit/fe'\r\n\r\ndefineOptions({\r\n  name: 'MultiSelect'\r\n})\r\n\r\nconst props = withDefaults(defineProps<MultiSelectProps<Option>>(), {\r\n  labelKey: 'label',\r\n  valueKey: 'value',\r\n  placeholder: '请选择',\r\n  clearable: true,\r\n  visibilityLimit: 3,\r\n  disabled: undefined,\r\n  readonly: undefined\r\n})\r\n\r\nconst emit = defineEmits<MultiSelectEmits<Option>>()\r\n\r\nconst cls = bem('multi-select')\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled, readonly } = useFormFallbackProps(\r\n  [formProps ?? {}, props],\r\n  {\r\n    size: 'default',\r\n    disabled: false,\r\n    readonly: false\r\n  }\r\n)\r\n\r\nconst scrollRef = shallowRef<ScrollExposed>()\r\n\r\nconst hovered = shallowRef(false)\r\n\r\nconst { options, queryString } = useOptions({\r\n  props\r\n})\r\n\r\nconst { totalHeight, virtualList, virtualEnabled, measureElement } = useVirtual(\r\n  {\r\n    virtualThreshold: 80,\r\n    estimateSize: () => 40,\r\n    count: computed(() => options.value.length),\r\n    scrollEl: computed(() => scrollRef.value?.containerRef ?? null)\r\n  }\r\n)\r\n\r\nconst virtualOptions = computed(() => {\r\n  const { valueKey, labelKey } = props\r\n  const _options = options.value\r\n  return virtualList.value.map(v => {\r\n    const option = _options[v.index]!\r\n    const val = getChainValue(option, valueKey)\r\n    return {\r\n      option,\r\n      index: v.index,\r\n      val,\r\n      key: v.key,\r\n      offset: v.start,\r\n      label: getChainValue(option, labelKey)\r\n    }\r\n  })\r\n})\r\n\r\nconst filterable = computed(() => {\r\n  return props.filterable || typeof props.options === 'function'\r\n})\r\n\r\nconst model = defineModel<Array<string | number>>()\r\n\r\nconst checkedSet = shallowReactive<Set<Option>>(new Set())\r\nconst allChecked = computed(() => {\r\n  return checkedSet.size === options.value.length\r\n})\r\nconst indeterminate = computed(() => {\r\n  return checkedSet.size > 0 && !allChecked.value\r\n})\r\n\r\nconst optionsMap = computed(() => {\r\n  const { valueKey } = props\r\n  return new Map<string | number, Option>(\r\n    options.value.map(option => [option[valueKey], option])\r\n  )\r\n})\r\n\r\nconst dropdownRef = shallowRef<DropdownExposed>()\r\n\r\n// 当model是通过checkedSet改变而更新时不触发model watch处理函数\r\nlet modelIsChangedBySet = false\r\nlet setIsChangedByModel = false\r\nwatch(\r\n  [model, optionsMap],\r\n  ([model, optionsMap]) => {\r\n    // 由用户手动勾选的不会触发\r\n    if (modelIsChangedBySet) return\r\n\r\n    setIsChangedByModel = true\r\n    checkedSet.clear()\r\n\r\n    if (optionsMap.size && model?.length) {\r\n      model.forEach(v => {\r\n        const option = optionsMap.get(v)\r\n        option && checkedSet.add(option)\r\n      })\r\n    }\r\n\r\n    nextTick(() => {\r\n      setIsChangedByModel = false\r\n    })\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nwatch(checkedSet, () => {\r\n  if (setIsChangedByModel) return\r\n\r\n  const { valueKey } = props\r\n  modelIsChangedBySet = true\r\n  const checkedArr = Array.from(checkedSet)\r\n  model.value = checkedArr.map(option => option[valueKey])\r\n  emit('change', checkedArr)\r\n  nextTick(() => {\r\n    modelIsChangedBySet = false\r\n  })\r\n})\r\n\r\nconst tags = computed(() => {\r\n  let tags: Option[] = []\r\n  let { visibilityLimit } = props\r\n  if (visibilityLimit < 0) {\r\n    visibilityLimit = 0\r\n  }\r\n\r\n  // 禁用时，显示全部\r\n  if (disabled.value || readonly.value) {\r\n    visibilityLimit = model.value?.length ?? 0\r\n  }\r\n\r\n  model.value?.slice(0, visibilityLimit).forEach(k => {\r\n    const option = optionsMap.value.get(k)\r\n    option && tags.push(option)\r\n  })\r\n\r\n  return tags\r\n})\r\n\r\nconst restTag = computed(() => {\r\n  return (model.value?.length ?? 0) - tags.value.length\r\n})\r\n\r\nconst handleCheck = (option: Option, checked: boolean) => {\r\n  if (checked) {\r\n    checkedSet.add(option)\r\n  } else {\r\n    checkedSet.delete(option)\r\n  }\r\n}\r\n\r\n/** 全选 */\r\nconst handleCheckAll = (checked: boolean) => {\r\n  if (checked) {\r\n    options.value.forEach(option => checkedSet.add(option))\r\n  } else {\r\n    checkedSet.clear()\r\n  }\r\n}\r\n\r\n/** 清除选项 */\r\nconst handleClear = () => {\r\n  model.value = []\r\n  checkedSet.clear()\r\n}\r\n\r\nconst handleClose = (option: Option) => {\r\n  checkedSet.delete(option)\r\n}\r\n\r\nconst isDisabled = (option: Option) => {\r\n  const { max } = props\r\n  return max !== undefined && checkedSet.size >= max && !checkedSet.has(option)\r\n}\r\n\r\nconst optionClass = cls.e('option')\r\nconst rippleClass = cls.e('ripple')\r\n\r\nprovide(MultiSelectDIKey, {\r\n  optionClass,\r\n  rippleClass\r\n})\r\n</script>\r\n", "import type { InjectionKey, ShallowRef, VNode } from 'vue'\r\nimport type { TreeEmit, TreeProps, TreeNode } from '@ui/types/components/tree'\r\nimport type { BEM } from '@ui/utils'\r\n\r\nexport interface TreeSlotsScope<\r\n  DataItem extends Record<string, any> = Record<string, any>\r\n> {\r\n  node: TreeNode<DataItem>\r\n  data: DataItem\r\n}\r\n\r\nexport interface TreeConText {\r\n  /** 树组件属性 */\r\n  treeProps: TreeProps\r\n  /** BEM */\r\n  cls: BEM<'tree'>\r\n  /** 单选选中的节点 */\r\n  selected: ShallowRef<Record<string, any> | undefined>\r\n  /** 多选的节点 */\r\n  checked: Set<any>\r\n  /** 隐藏的节点 */\r\n  hiddenNodes: Set<TreeNode<Record<string, any>>>\r\n  /** 选择事件 */\r\n  handleSelect: (data: TreeNode<Record<string, any>>) => void\r\n  /** 多选事件 */\r\n  handleCheck: (node: TreeNode<Record<string, any>>, check: boolean) => void\r\n  /** 获取树的作用域插槽节点 */\r\n  getTreeSlotsNode: (ctx: TreeSlotsScope) => VNode[] | string | undefined\r\n  /** 树事件 */\r\n  treeEmit: TreeEmit<Record<string, any>>\r\n  /** 获取碾平后的节点 */\r\n  getFlattedNodes: (\r\n    filter?: (node: TreeNode<Record<string, any>>) => boolean\r\n  ) => void\r\n}\r\n\r\n/** 树依赖注入key */\r\nexport const TreeDIKey: InjectionKey<TreeConText> = Symbol('TreeDIKey')\r\n", "<template>\r\n  <div\r\n    :class=\"[\r\n      cls.e('node'),\r\n      bem.is('expanded', node.expanded),\r\n      bem.is('disabled', node.disabled)\r\n    ]\"\r\n    :style=\"{\r\n      paddingLeft: withUnit(node.depth * 20 - 20, 'px')\r\n    }\"\r\n    @click=\"handleClick\"\r\n    @contextmenu=\"treeEmit('node-contextmenu', $event, node)\"\r\n    :ref=\"measureElement\"\r\n  >\r\n    <u-icon\r\n      v-if=\"!node.isLeaf\"\r\n      :class=\"cls.e('expand-icon')\"\r\n      @click.stop=\"toggleExpand\"\r\n    >\r\n      <ArrowRight />\r\n    </u-icon>\r\n    <i v-else :class=\"cls.e('icon-placeholder')\"> </i>\r\n\r\n    <div\r\n      :class=\"cls.e('node-content')\"\r\n      v-ripple=\"\r\n        (treeProps.checkable || treeProps.selectable) && !node.disabled\r\n          ? cls.e('ripple')\r\n          : false\r\n      \"\r\n    >\r\n      <u-checkbox\r\n        v-if=\"treeProps.checkable\"\r\n        :model-value=\"node.checked\"\r\n        :indeterminate=\"node.indeterminate\"\r\n        @update:model-value=\"handleCheck(node, $event)\"\r\n        :disabled=\"node.disabled\"\r\n        @click.stop\r\n        :class=\"cls.e('checkbox')\"\r\n      />\r\n\r\n      <u-node-render :content=\"getTreeSlotsNode({ node, data: node.data })\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { TreeDIKey } from './di'\r\nimport { inject } from 'vue'\r\nimport { bem, withUnit } from '@ui/utils'\r\nimport { UIcon } from '../icon'\r\nimport { ArrowRight } from 'icon-ultra'\r\nimport type { TreeNodeProps } from '@ui/types/components/tree'\r\nimport UCheckbox from '../checkbox/checkbox.vue'\r\nimport { UNodeRender } from '../node-render'\r\nimport { vRipple } from '@ui/directives'\r\n\r\ndefineOptions({\r\n  name: 'TreeNode'\r\n})\r\n\r\nconst props = defineProps<TreeNodeProps>()\r\n\r\nconst {\r\n  treeProps,\r\n  treeEmit,\r\n  cls,\r\n  getTreeSlotsNode,\r\n  getFlattedNodes,\r\n  handleCheck,\r\n  handleSelect\r\n} = inject(TreeDIKey)!\r\n\r\nfunction toggleExpand() {\r\n  const { node } = props\r\n  node.expanded = !node.expanded\r\n  getFlattedNodes()\r\n\r\n  treeEmit('expand', node)\r\n}\r\n\r\nconst handleClick = () => {\r\n  const { node } = props\r\n  treeEmit('node-click', node)\r\n\r\n  treeProps.selectable && handleSelect(node)\r\n  treeProps.expandOnClickNode && toggleExpand()\r\n  treeProps.checkable &&\r\n    !node.disabled &&\r\n    !treeProps.expandOnClickNode &&\r\n    handleCheck(node, !node.checked)\r\n}\r\n</script>\r\n", "import { nextTick, shallowRef, watch, type ComputedRef } from 'vue'\r\nimport type { TreeEmit, TreeProps } from '@ui/types/components/tree'\r\nimport type { TreeNode } from './tree-node'\r\n\r\ninterface Options<DataItem extends Record<string, any>> {\r\n  emit: TreeEmit<DataItem>\r\n  props: TreeProps<DataItem>\r\n  nodeDict: ComputedRef<Map<any, TreeNode<DataItem>>>\r\n}\r\n\r\n/**\r\n * 单选\r\n */\r\nexport function useSelect<DataItem extends Record<string, any>>(\r\n  options: Options<DataItem>\r\n) {\r\n  const { emit, props, nodeDict } = options\r\n  const selected = shallowRef<DataItem>()\r\n\r\n  let changedByEvent = false\r\n  watch(\r\n    [() => props.selected, nodeDict],\r\n    ([s]) => {\r\n      if (changedByEvent) return\r\n\r\n      selected.value = s ? nodeDict.value.get(s)?.data : undefined\r\n      emit('selected-synced', selected.value)\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  const handleSelect = (node: TreeNode<DataItem>) => {\r\n    changedByEvent = true\r\n    if (node.disabled) return\r\n    selected.value = node.data === selected.value ? undefined : node.data\r\n\r\n    emit('update:selected', selected.value?.[props.valueKey!], selected.value, node)\r\n\r\n    nextTick(() => {\r\n      changedByEvent = false\r\n    })\r\n  }\r\n\r\n  return {\r\n    selected,\r\n    handleSelect\r\n  }\r\n}\r\n", "import type { TreeEmit, TreeProps } from '@ui/types/components/tree'\r\nimport { nextTick, shallowReactive, watch, type ComputedRef } from 'vue'\r\nimport type { TreeNode } from './tree-node'\r\nimport { Tree } from 'cat-kit/fe'\r\n\r\ninterface Options<DataItem extends Record<string, any>> {\r\n  emit: TreeEmit<DataItem>\r\n  props: TreeProps<DataItem>\r\n  nodeDict: ComputedRef<Map<any, TreeNode<DataItem>>>\r\n}\r\n\r\nexport function useCheck<DataItem extends Record<string, any>>(\r\n  options: Options<DataItem>\r\n) {\r\n  const { emit, props, nodeDict } = options\r\n\r\n  const checked = shallowReactive(new Set<DataItem>())\r\n\r\n  /**\r\n   * 模型值是否由事件触发\r\n   */\r\n  let modelChangedByEvent = false\r\n  /**\r\n   * 集合是否由模型变更时而触发。\r\n   */\r\n  let checkedSetChangeByModel = false\r\n\r\n  watch(\r\n    [() => props.checked, nodeDict],\r\n    ([c, nodeDict], [oc]) => {\r\n      // 事件已经触发模型变更了，所以不再进行下面的计算\r\n      if (modelChangedByEvent || !props.checkable) return\r\n\r\n      if (!nodeDict.size) return\r\n\r\n      checkedSetChangeByModel = true\r\n      // 不适用checked.clear()来\r\n      // 减少checked操作次数提升性能\r\n\r\n      oc?.forEach(v => {\r\n        const node = nodeDict.get(v)\r\n        if (node) {\r\n          node.checked = false\r\n          checked.delete(node.data)\r\n        }\r\n      })\r\n      c?.forEach(v => {\r\n        const node = nodeDict.get(v)\r\n        if (node) {\r\n          checked.add(node.data)\r\n          node.checked = true\r\n        }\r\n      })\r\n\r\n      nextTick(() => {\r\n        checkedSetChangeByModel = false\r\n      })\r\n    },\r\n    { immediate: true }\r\n  )\r\n\r\n  watch(checked, c => {\r\n    // 由于模型的变更，所以不再进行下面的计算\r\n    if (checkedSetChangeByModel) return\r\n\r\n    modelChangedByEvent = true\r\n    const checkedArr = Array.from(c)\r\n\r\n    emit(\r\n      'update:checked',\r\n      checkedArr.map(item => item[props.valueKey!]),\r\n      checkedArr\r\n    )\r\n\r\n    nextTick(() => {\r\n      modelChangedByEvent = false\r\n    })\r\n  })\r\n\r\n  function handleCheck(node: TreeNode<DataItem>, check: boolean) {\r\n    const { checkStrictly } = props\r\n    if (check) {\r\n      Tree.dft(node, node => {\r\n        if (node.disabled) return\r\n        node.checked = true\r\n        checked.add(node.data)\r\n      })\r\n\r\n      if (!checkStrictly) {\r\n        let parent = node.parent\r\n        while (parent && parent.depth > 0) {\r\n          parent.checked = parent.children!.every(child => child.checked)\r\n          if (!parent.checked) {\r\n            parent.indeterminate = true\r\n          } else {\r\n            parent.indeterminate = false\r\n            checked.add(parent.data)\r\n          }\r\n\r\n          parent = parent.parent\r\n        }\r\n      }\r\n    } else {\r\n      Tree.dft(node, node => {\r\n        node.checked = false\r\n        node.indeterminate = false\r\n        checked.delete(node.data)\r\n      })\r\n\r\n      if (!checkStrictly) {\r\n        let parent = node.parent\r\n        while (parent && parent.depth > 0) {\r\n          parent.checked = false\r\n          checked.delete(parent.data)\r\n\r\n          parent.indeterminate =\r\n            parent.children!.some(child => child.indeterminate) ||\r\n            parent.children!.some(child => child.checked)\r\n\r\n          parent = parent.parent\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    checked,\r\n    handleCheck\r\n  }\r\n}\r\n", "import { TreeNode as _TreeNode, getChainValue } from 'cat-kit/fe'\r\nimport { shallowReactive } from 'vue'\r\n\r\nexport class TreeNode<\r\n  Val extends Record<string, any> = Record<string, any>\r\n> extends _TreeNode<Val> {\r\n  override parent: TreeNode<Val> | null = null\r\n\r\n  override children?: TreeNode<Val>[] = undefined\r\n\r\n  expanded = false\r\n  loading = false\r\n  loaded = false\r\n  /** 多选是否选中 */\r\n  checked = false\r\n  indeterminate = false\r\n  disabled = false\r\n  visible = true\r\n\r\n  get parentExpanded() {\r\n    if (!this.parent) return true\r\n    return this.parent.expanded || this.depth === 1\r\n  }\r\n\r\n  labelKey: string\r\n  valueKey: string\r\n\r\n  constructor(params: {\r\n    data: Val\r\n    index: number\r\n    parent?: any\r\n    labelKey: string\r\n    valueKey: string\r\n  }) {\r\n    const { data, index, parent, labelKey, valueKey } = params\r\n    super(data, index)\r\n    if (parent) {\r\n      this.parent = parent\r\n    }\r\n    this.labelKey = labelKey\r\n    this.valueKey = valueKey\r\n\r\n    return shallowReactive(this)\r\n  }\r\n\r\n  get label(): string {\r\n    return String(getChainValue(this.data, this.labelKey))\r\n  }\r\n\r\n  get key(): string | number {\r\n    return getChainValue(this.data, this.valueKey)\r\n  }\r\n}\r\n", "<template>\r\n  <u-scroll\r\n    :class=\"className\"\r\n    ref=\"scrollRef\"\r\n    :content-style=\"{\r\n      height: virtualEnabled ? withUnit(totalHeight, 'px') : undefined\r\n    }\"\r\n    :content-class=\"[cls.e('wrap'), bem.is('virtual', virtualEnabled)]\"\r\n  >\r\n    <template v-if=\"virtualEnabled\">\r\n      <UTreeNode\r\n        v-for=\"{ node, key, offset, index } of virtualNodes\"\r\n        :node=\"node\"\r\n        :key=\"key\"\r\n        :class=\"bem.is('selected', node.data === selected)\"\r\n        :data-index=\"index\"\r\n        :measure-element=\"measureElement\"\r\n        :style=\"{\r\n          transform: `translateY(${offset}px)`\r\n        }\"\r\n      />\r\n    </template>\r\n    <template v-else>\r\n      <UTreeNode\r\n        v-for=\"node of nodes\"\r\n        :node=\"node\"\r\n        :key=\"node.key\"\r\n        :class=\"bem.is('selected', node.data === selected)\"\r\n      />\r\n    </template>\r\n\r\n    <div :class=\"cls.e('empty')\" v-if=\"!nodes.length\">\r\n      <UEmpty />\r\n    </div>\r\n  </u-scroll>\r\n</template>\r\n\r\n<script lang=\"ts\" setup generic=\"DataItem extends Record<string, any>\">\r\nimport { bem, withUnit } from '@ui/utils'\r\nimport type {\r\n  TreeProps,\r\n  TreeEmit,\r\n  _TreeExposed\r\n} from '@ui/types/components/tree'\r\nimport { computed, provide, shallowRef, useSlots, watch, type VNode } from 'vue'\r\nimport { TreeDIKey, type TreeConText, type TreeSlotsScope } from './di'\r\nimport UTreeNode from './tree-node.vue'\r\nimport { Forest } from 'cat-kit/fe'\r\nimport { TreeNode } from './tree-node'\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\nimport { useSelect } from './use-select'\r\nimport { useCheck } from './use-check'\r\nimport { UEmpty } from '../empty'\r\nimport { useVirtual } from '@ui/compositions'\r\nimport { UScroll, type ScrollExposed } from '../scroll'\r\n\r\ndefineOptions({\r\n  name: 'Tree'\r\n})\r\n\r\nconst props = withDefaults(defineProps<TreeProps<DataItem>>(), {\r\n  labelKey: 'label',\r\n  valueKey: 'value',\r\n  childrenKey: 'children',\r\n  expandOnClickNode: false,\r\n  checkStrictly: false,\r\n  data: () => []\r\n})\r\n\r\nconst emit = defineEmits<TreeEmit<DataItem>>()\r\n\r\nconst cls = bem('tree')\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size } = useFormFallbackProps([formProps ?? {}, props], {\r\n  size: 'default'\r\n})\r\n\r\nconst scrollRef = shallowRef<ScrollExposed>()\r\n\r\nconst className = computed(() => {\r\n  return [\r\n    cls.b,\r\n    cls.m(size.value),\r\n    bem.is('selectable', props.selectable),\r\n    bem.is('checkable', props.checkable)\r\n  ]\r\n})\r\n\r\ndefineSlots<{\r\n  default: (props: TreeSlotsScope<DataItem>) => any\r\n}>()\r\n\r\nconst slots = useSlots()\r\n\r\nconst getTreeSlotsNode = (\r\n  ctx: TreeSlotsScope\r\n): VNode[] | string | undefined => {\r\n  return (props.slots?.default ?? slots.default)?.(ctx) ?? ctx.node.label\r\n}\r\n\r\n/** 森林 */\r\nconst forest = computed(() => {\r\n  const { disabledNode } = props\r\n  return Forest.create(props.data, {\r\n    createNode: disabledNode\r\n      ? (data, index) => {\r\n          const node = new TreeNode({\r\n            data,\r\n            index,\r\n            valueKey: props.valueKey,\r\n            labelKey: props.labelKey\r\n          })\r\n          if (data) {\r\n            node.disabled = disabledNode(data, node) ?? false\r\n          }\r\n\r\n          return node\r\n        }\r\n      : (data, index) => {\r\n          const node = new TreeNode({\r\n            data,\r\n            index,\r\n            valueKey: props.valueKey,\r\n            labelKey: props.labelKey\r\n          })\r\n          return node\r\n        }\r\n  })\r\n})\r\n\r\n/** 默认选中 */\r\nwatch(\r\n  [() => props.expandAll, forest],\r\n  ([expandAll, forest]) => {\r\n    expandAll &&\r\n      forest.dft(node => {\r\n        node.expanded = true\r\n      })\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nconst nodes = shallowRef<TreeNode<DataItem>[]>([])\r\n\r\n/**\r\n * 节点的字典，key为指定的valueKey的值\r\n */\r\nconst nodeDict = computed(() => {\r\n  const dict = new Map<string | number, TreeNode<DataItem>>()\r\n\r\n  forest.value.dft(node => {\r\n    dict.set(node.key, node)\r\n  })\r\n\r\n  return dict\r\n})\r\n\r\n/** 获取碾平后的节点 */\r\nfunction getFlattedNodes() {\r\n  const _nodes: TreeNode<DataItem>[] = []\r\n\r\n  forest.value.dft(node => {\r\n    if (!node.parentExpanded) return false\r\n    node.visible && _nodes.push(node)\r\n  })\r\n\r\n  nodes.value = _nodes\r\n}\r\n\r\nwatch(\r\n  forest,\r\n  () => {\r\n    getFlattedNodes()\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\n/**\r\n * 回溯缓存\r\n * @description\r\n * 在每一次过滤时，对每个节点的所有祖先节点进行堆入和展开，\r\n * 但这样的代价是巨大的，时间成本为O(nlog(n)). 因此使用一个回溯缓存来减少回溯的次数,\r\n * 该缓存堆入节点的父节点，如果该父节点已经被堆入则不再进行堆入\r\n */\r\nconst traceCache = new Set<TreeNode<DataItem>>()\r\nconst hiddenNodes = new Set<TreeNode<DataItem>>()\r\n\r\nfunction defaultFilter(node: TreeNode<DataItem>, qs: string) {\r\n  if (!qs) return true\r\n  return node.label.includes(qs)\r\n}\r\n\r\n/**\r\n * 显示回溯\r\n * @param node 节点\r\n */\r\nfunction trace(node: TreeNode<DataItem>) {\r\n  node.visible = true\r\n  let parent = node.parent\r\n\r\n  while (parent && parent.depth !== 0 && !traceCache.has(parent)) {\r\n    traceCache.add(parent)\r\n    parent.expanded = true\r\n    parent.visible = true\r\n    parent = parent.parent\r\n  }\r\n\r\n  // 非叶子节点将自身堆入\r\n  if (!node.isLeaf) {\r\n    traceCache.add(node)\r\n  }\r\n}\r\n\r\nfunction filter(\r\n  filterMethod: string | ((node: TreeNode<DataItem>) => boolean)\r\n) {\r\n  traceCache.clear()\r\n\r\n  if (typeof filterMethod === 'string') {\r\n    forest.value.dft(node => {\r\n      if (defaultFilter(node, filterMethod)) {\r\n        trace(node)\r\n      } else {\r\n        node.visible = false\r\n      }\r\n    })\r\n  } else {\r\n    forest.value.dft(node => {\r\n      if (filterMethod(node)) {\r\n        trace(node)\r\n      } else {\r\n        node.visible = false\r\n      }\r\n    })\r\n  }\r\n\r\n  getFlattedNodes()\r\n}\r\n\r\nconst { handleSelect, selected } = useSelect<DataItem>({\r\n  props,\r\n  emit,\r\n  nodeDict\r\n})\r\n\r\nconst { checked, handleCheck } = useCheck<DataItem>({\r\n  props,\r\n  emit,\r\n  nodeDict\r\n})\r\n\r\nconst { totalHeight, virtualList, scrollTo, virtualEnabled, measureElement } =\r\n  useVirtual({\r\n    count: computed(() => nodes.value.length),\r\n    estimateSize: () => 40,\r\n    gap: 2,\r\n    virtualThreshold: 80,\r\n    scrollEl: computed(() => scrollRef.value?.containerRef ?? null)\r\n  })\r\n\r\nconst virtualNodes = computed(() => {\r\n  const _nodes = nodes.value\r\n\r\n  return virtualList.value.map(item => {\r\n    const node = _nodes[item.index]!\r\n    return {\r\n      node,\r\n      key: node.key || item.key,\r\n      offset: item.start,\r\n      index: item.index\r\n    }\r\n  })\r\n})\r\n\r\nprovide(TreeDIKey, {\r\n  cls,\r\n  selected,\r\n  checked,\r\n  getFlattedNodes,\r\n  getTreeSlotsNode,\r\n  hiddenNodes,\r\n  treeEmit: emit as TreeEmit,\r\n  treeProps: props as TreeProps,\r\n  handleCheck: handleCheck as TreeConText['handleCheck'],\r\n  handleSelect: handleSelect as TreeConText['handleSelect']\r\n})\r\n\r\ndefineExpose<_TreeExposed<DataItem>>({\r\n  filter,\r\n  forest,\r\n  nodes,\r\n  checkNode: handleCheck,\r\n  selectNode: handleSelect,\r\n  checkAll(check: boolean) {\r\n    forest.value.nodes.forEach(node => {\r\n      handleCheck(node, check)\r\n    })\r\n  },\r\n  getSelected(): DataItem | undefined {\r\n    return selected.value\r\n  },\r\n  getChecked(): DataItem[] {\r\n    return Array.from(checked)\r\n  },\r\n  scrollTo,\r\n  scrollToSelected() {\r\n    scrollTo(nodes.value.findIndex(node => node.data === selected.value))\r\n  },\r\n  scrollToChecked() {\r\n    scrollTo(nodes.value.findLastIndex(node => checked.has(node.data)))\r\n  }\r\n})\r\n</script>\r\n", "<template>\r\n  <u-dropdown\r\n    v-if=\"!readonly\"\r\n    :class=\"[cls.b, cls.m(size), bem.is('disabled', disabled)]\"\r\n    trigger=\"click\"\r\n    :content-class=\"[cls.e('panel'), cls.em('panel', size)]\"\r\n    @mouseenter=\"hovered = true\"\r\n    @mouseleave=\"hovered = false\"\r\n    ref=\"dropdownRef\"\r\n    :min-width=\"minWidth\"\r\n  >\r\n    <template #trigger>\r\n      <!-- 默认展示 -->\r\n      <span :class=\"cls.e('placeholder')\" v-show=\"!tags.length\">\r\n        {{ placeholder }}\r\n      </span>\r\n\r\n      <!-- 选择的数据项 -->\r\n      <div v-if=\"tags.length\" :class=\"cls.e('tags')\">\r\n        <u-tag\r\n          v-for=\"(tag, index) in visibleTags\"\r\n          :key=\"tag[valueKey]\"\r\n          :closable=\"!disabled\"\r\n          @close=\"handleRemove(index)\"\r\n        >\r\n          {{ tag[labelKey] }}\r\n        </u-tag>\r\n        <u-tag v-if=\"hiddenCount > 0\">+{{ hiddenCount }}</u-tag>\r\n      </div>\r\n      <!-- 清空 icon -->\r\n      <transition name=\"zoom-in\" mode=\"out-in\">\r\n        <u-icon\r\n          v-if=\"showClear\"\r\n          :class=\"cls.e('clear')\"\r\n          @click.stop=\"handleClear\"\r\n        >\r\n          <Close />\r\n        </u-icon>\r\n\r\n        <!-- 下拉 icon -->\r\n        <u-icon :class=\"cls.e(`arrow`)\" v-else-if=\"!readonly\">\r\n          <ArrowDown />\r\n        </u-icon>\r\n      </transition>\r\n    </template>\r\n    <template #content>\r\n      <!-- 全选 -->\r\n      <div :class=\"[cls.e('content-header'), cls.m(size)]\">\r\n        <u-checkbox\r\n          :model-value=\"allChecked\"\r\n          :indeterminate=\"indeterminate\"\r\n          @update:model-value=\"handleCheckAll\"\r\n        >\r\n          全选\r\n        </u-checkbox>\r\n      </div>\r\n      <!-- 过滤器 -->\r\n      <div v-if=\"filterable\" :class=\"[cls.e('content-filter'), cls.m(size)]\">\r\n        <u-input placeholder=\"输入关键字进行过滤\" v-model=\"qs\">\r\n          <template #suffix>\r\n            <u-icon><Search /></u-icon>\r\n          </template>\r\n        </u-input>\r\n      </div>\r\n      <!-- 菜单列表 -->\r\n\r\n      <u-tree\r\n        v-bind=\"treeProps\"\r\n        v-model:checked=\"model\"\r\n        @update:checked=\"handleCheck\"\r\n        ref=\"treeRef\"\r\n        :class=\"cls.e('content-tree')\"\r\n        checkable\r\n        :data=\"data\"\r\n        :slots=\"slots\"\r\n      ></u-tree>\r\n    </template>\r\n  </u-dropdown>\r\n\r\n  <div v-else-if=\"model.length\" :class=\"[cls.m(size), cls.e('readonly-tags')]\">\r\n    <div :class=\"cls.e('tags')\">\r\n      <u-tag v-for=\"option of tags\" :key=\"option[valueKey]\">\r\n        {{ option[labelKey] }}\r\n      </u-tag>\r\n    </div>\r\n  </div>\r\n\r\n  <span v-else>{{ FORM_EMPTY_CONTENT }}</span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type {\r\n  MultiTreeSelectProps,\r\n  MultiTreeSelectEmits\r\n} from '@ui/types/components/multi-tree-select'\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\nimport { bem } from '@ui/utils'\r\nimport { UDropdown } from '../dropdown'\r\nimport { UTree, type TreeExposed } from '../tree'\r\nimport { UTag } from '../tag'\r\nimport { UIcon } from '../icon'\r\nimport { UInput } from '../input'\r\nimport { ArrowDown, Close, Search } from 'icon-ultra'\r\nimport { computed, nextTick, shallowRef, watch } from 'vue'\r\nimport { UCheckbox } from '../checkbox'\r\nimport { omit, Tree } from 'cat-kit/fe'\r\nimport { FORM_EMPTY_CONTENT } from '@ui/shared'\r\nimport type { TreeSlotsScope } from '../tree/di'\r\n\r\ndefineOptions({\r\n  name: 'MultiTreeSelect'\r\n})\r\n\r\nconst cls = bem('multi-tree-select')\r\n\r\nconst props = withDefaults(defineProps<MultiTreeSelectProps>(), {\r\n  labelKey: 'label',\r\n  valueKey: 'value',\r\n  placeholder: '请选择',\r\n  expandAll: true,\r\n  clearable: true,\r\n  disabled: undefined,\r\n  readonly: undefined,\r\n  filterable: false,\r\n  visibilityLimit: 3,\r\n  minWidth: '280px'\r\n})\r\n\r\nconst treeProps = computed(() => {\r\n  return omit(props, [\r\n    'tips',\r\n    'field',\r\n    'placeholder',\r\n    'disabled',\r\n    'label',\r\n    'readonly'\r\n  ])\r\n})\r\n\r\nconst emit = defineEmits<MultiTreeSelectEmits>()\r\n\r\nconst slots = defineSlots<{\r\n  default?: (props: TreeSlotsScope<Record<string, any>>) => any\r\n}>()\r\n\r\n/**过滤 */\r\nconst qs = shallowRef('')\r\nwatch(qs, qs => {\r\n  treeRef.value?.filter(qs)\r\n})\r\n\r\nconst model = defineModel<(string | number)[]>({\r\n  default: () => []\r\n})\r\n\r\nconst hovered = shallowRef(false)\r\n\r\nconst tags = shallowRef<Record<string, any>[]>([])\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled, readonly } = useFormFallbackProps([\r\n  formProps ?? {},\r\n  props\r\n])\r\n\r\nconst showClear = computed(() => {\r\n  return (\r\n    props.clearable && model.value?.length && hovered.value && !disabled.value\r\n  )\r\n})\r\n\r\nconst treeRef = shallowRef<TreeExposed<Record<string, any>>>()\r\n\r\nconst dropdownRef = shallowRef<InstanceType<typeof UDropdown>>()\r\n\r\nlet changedByEvent = false\r\n\r\nfunction markEvent() {\r\n  changedByEvent = true\r\n  nextTick(() => {\r\n    changedByEvent = false\r\n  })\r\n}\r\n\r\n/**是否全选 */\r\nconst allChecked = computed(() => {\r\n  return model.value?.length === treeRef.value?.forest.size\r\n})\r\n\r\n/**部分 */\r\nconst indeterminate = computed(() => {\r\n  return model.value.length! > 0 && !allChecked.value\r\n})\r\n\r\n/** 全选*/\r\nconst handleCheckAll = (checked: boolean) => {\r\n  treeRef.value?.checkAll(checked)\r\n}\r\n\r\n/**选中 */\r\nconst handleCheck = (\r\n  checked: (string | number)[],\r\n  checkedData: Record<string, any>[]\r\n) => {\r\n  markEvent()\r\n  tags.value = checkedData\r\n  emit('change', checkedData!)\r\n}\r\n\r\n/**删除 */\r\nconst handleRemove = (index: number) => {\r\n  markEvent()\r\n  tags.value = tags.value.filter((_, i) => i !== index)\r\n  model.value = model.value.filter((_, i) => i !== index)\r\n  emit('change', tags.value)\r\n}\r\n\r\n/**清空 */\r\nconst handleClear = () => {\r\n  markEvent()\r\n  tags.value = []\r\n  model.value = []\r\n  emit('clear')\r\n}\r\n\r\nconst keyDicts = shallowRef(new Map<string | number, Record<string, any>>())\r\n\r\nwatch(\r\n  () => props.data,\r\n  data => {\r\n    if (!data?.length) {\r\n      keyDicts.value = new Map()\r\n    } else {\r\n      const newDict = new Map()\r\n      data.forEach(item => {\r\n        Tree.dft(\r\n          item,\r\n          v => {\r\n            newDict.set(v[props.valueKey], v)\r\n          },\r\n          props.childrenKey\r\n        )\r\n      })\r\n      keyDicts.value = newDict\r\n    }\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nwatch(\r\n  [keyDicts, model],\r\n  ([keyDicts, model]) => {\r\n    if (changedByEvent) return\r\n\r\n    if (!keyDicts.size || !model.length) {\r\n      tags.value = []\r\n      return\r\n    }\r\n\r\n    tags.value = model.filter(v => keyDicts.has(v)).map(v => keyDicts.get(v)!)\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nwatch(treeRef, treeRef => {\r\n  if (treeRef && model.value !== undefined) {\r\n    nextTick(() => {\r\n      treeRef.scrollToChecked()\r\n    })\r\n  }\r\n})\r\n\r\nconst limit = () => {\r\n  let { visibilityLimit } = props\r\n\r\n  if (visibilityLimit < 0) {\r\n    visibilityLimit = 0\r\n  }\r\n  if (disabled.value || readonly.value) {\r\n    visibilityLimit = model.value?.length ?? 0\r\n  }\r\n  return visibilityLimit\r\n}\r\n\r\nconst visibleTags = computed(() => {\r\n  if (tags.value.length > limit()) {\r\n    return tags.value.slice(0, limit())\r\n  }\r\n  return tags.value\r\n})\r\n\r\nconst hiddenCount = computed(() => {\r\n  if (tags.value.length > limit()) {\r\n    return tags.value.length - limit()\r\n  }\r\n  return 0\r\n})\r\n</script>\r\n", "<template>\r\n  {{ formatted }}\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, reactive, watch } from 'vue'\r\nimport type { NumberProps } from '@ui/types/components/number'\r\nimport { Tween, n } from 'cat-kit/fe'\r\n\r\ndefineOptions({\r\n  name: 'Number'\r\n})\r\n\r\nconst props = withDefaults(defineProps<NumberProps>(), {\r\n  duration: 800,\r\n  format: 'decimal',\r\n  precision: 0\r\n})\r\n\r\nconst number = reactive({\r\n  value: 0\r\n})\r\n\r\nconst tween = computed(() =>\r\n  props.tween\r\n    ? new Tween(number, {\r\n        duration: props.duration,\r\n        easingFunction: Tween.easing.easeInOutQuad\r\n      })\r\n    : null\r\n)\r\n\r\nconst formatter = computed(() => {\r\n  return n.formatter({\r\n    currency: props.format === 'currency' ? 'CNY' : undefined,\r\n    style: props.format,\r\n    precision: props.precision\r\n  })\r\n})\r\n\r\nconst formatted = computed(() => {\r\n  return formatter.value.format(number.value)\r\n})\r\n\r\nwatch(\r\n  () => props.value,\r\n  () => {\r\n    props.tween\r\n      ? tween.value?.to({ value: props.value })\r\n      : (number.value = props.value)\r\n  },\r\n  { immediate: true }\r\n)\r\n</script>\r\n", "<template>\r\n  <u-input\r\n    v-if=\"!readonly\"\r\n    ref=\"inputRef\"\r\n    :class=\"className\"\r\n    :model-value=\"displayed\"\r\n    v-bind=\"inputProps\"\r\n    @update:model-value=\"handleUpdateModelValue\"\r\n    @change=\"handleChange\"\r\n    @keydown.stop=\"handleKeydown\"\r\n    @focus=\"handleFocus\"\r\n    @blur=\"handleBlur\"\r\n    :size=\"size\"\r\n    :readonly=\"readonly\"\r\n    :disabled=\"disabled\"\r\n  >\r\n    <template #suffix v-if=\"step !== undefined && step !== false\">\r\n      <div :class=\"cls.e('step')\">\r\n        <u-icon\r\n          @click=\"increase\"\r\n          v-ripple=\"!disabled && increasable\"\r\n          :class=\"bem.is('disabled', disabled || !increasable)\"\r\n        >\r\n          <ArrowUp />\r\n        </u-icon>\r\n        <u-icon\r\n          @click=\"decrease\"\r\n          v-ripple=\"!disabled && reducible\"\r\n          :class=\"bem.is('disabled', disabled || !reducible)\"\r\n        >\r\n          <ArrowDown />\r\n        </u-icon>\r\n      </div>\r\n    </template>\r\n  </u-input>\r\n\r\n  <span v-else>\r\n    {{ displayed || FORM_EMPTY_CONTENT }}\r\n  </span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type {\r\n  NumberInputEmits,\r\n  NumberInputProps\r\n} from '@ui/types/components/number-input'\r\nimport type { InputExposed } from '../input'\r\nimport { UInput } from '../input'\r\nimport { computed, shallowRef, watch } from 'vue'\r\nimport { n, Tween, obj, isUndef } from 'cat-kit/fe'\r\nimport { ArrowUp, ArrowDown } from 'icon-ultra'\r\nimport { UIcon } from '../icon'\r\nimport { bem } from '@ui/utils'\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\nimport { vRipple } from '@ui/directives'\r\nimport { FORM_EMPTY_CONTENT } from '@ui/shared'\r\n\r\ndefineOptions({\r\n  name: 'NumberInput'\r\n})\r\n\r\nconst props = withDefaults(defineProps<NumberInputProps>(), {\r\n  placeholder: '请输入',\r\n  clearable: true,\r\n  disabled: undefined,\r\n  readonly: undefined\r\n})\r\nconst emit = defineEmits<NumberInputEmits>()\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled, readonly } = useFormFallbackProps(\r\n  [formProps ?? {}, props],\r\n  {\r\n    size: 'default',\r\n    disabled: false,\r\n    readonly: false\r\n  }\r\n)\r\n\r\nconst inputProps = computed(() => {\r\n  return obj(props).pick(['clearable', 'disabled', 'placeholder', 'size'])\r\n})\r\n\r\nconst inputRef = shallowRef<InputExposed>()\r\n\r\nconst inputDom = computed(() => inputRef.value?.el)\r\n\r\nconst cls = bem('number-input')\r\n\r\nconst className = computed(() => {\r\n  return [cls.b, cls.m(size.value)]\r\n})\r\n\r\n/** 实际值 */\r\nconst model = defineModel<NumberInputProps['modelValue']>()\r\n\r\n// 展示值\r\nconst displayed = shallowRef('')\r\n\r\nconst focused = shallowRef(false)\r\n\r\n/** 步长 */\r\nconst stepVal = computed<number>(() => {\r\n  const { step } = props\r\n  if (step === undefined) return 1\r\n  return typeof step === 'boolean' ? 1 : step\r\n})\r\n\r\n/** 是否可增 */\r\nconst increasable = computed(() => {\r\n  const { max } = props\r\n  if (isUndef(max) || isUndef(model.value)) return true\r\n  return model.value < max\r\n})\r\n\r\n/** 是否可减 */\r\nconst reducible = computed(() => {\r\n  const { min } = props\r\n  if (isUndef(min) || isUndef(model.value)) return true\r\n  return model.value > min\r\n})\r\n\r\n/**\r\n * 获取展示值\r\n * @param num 实际值\r\n */\r\nfunction getDisplayed(num?: number): string {\r\n  if (!num && num !== 0) return ''\r\n\r\n  const {\r\n    currency,\r\n    precision,\r\n    minPrecision,\r\n    // 如果没有指定最大精度那么设置默认为值和步长值中的较大值\r\n    maxPrecision = Math.max(\r\n      String(model.value).split('.')[1]?.length ?? 0,\r\n      String(stepVal.value).split('.')[1]?.length ?? 0\r\n    )\r\n  } = props\r\n\r\n  return currency\r\n    ? n(num).currency('CNY', {\r\n        precision,\r\n        minPrecision,\r\n        maxPrecision\r\n      })\r\n    : n(num).fixed(\r\n        precision ?? {\r\n          minPrecision,\r\n          maxPrecision\r\n        }\r\n      )\r\n}\r\n\r\nwatch(\r\n  [model, focused, () => props.currency],\r\n  ([model, focused]) => {\r\n    if (focused) return\r\n    displayed.value = getDisplayed(model)\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\n/**\r\n * 解析展示值\r\n * @param str 展示值\r\n */\r\nfunction parseDisplayed(str: string): number | undefined {\r\n  if (!str) return undefined\r\n\r\n  // 将货币格式去掉再转化为数字\r\n  const number = +str.replace(/\\,/g, '')\r\n  const result = isNaN(number) ? model.value : number\r\n  if (result === undefined) return undefined\r\n\r\n  const { precision, maxPrecision, minPrecision } = props\r\n\r\n  return +n(result).fixed(\r\n    precision ?? {\r\n      minPrecision,\r\n      maxPrecision\r\n    }\r\n  )\r\n}\r\n\r\n/**\r\n * 获取有效值\r\n * @param val 值\r\n */\r\nfunction getValidValue<T extends undefined | number>(val: T): T {\r\n  if (val === undefined) return val\r\n  const { min, max } = props\r\n  if (min !== undefined && val < min) return min as T\r\n  if (max !== undefined && val > max) return max as T\r\n  return val\r\n}\r\n\r\nfunction handleUpdateModelValue(input: string): void {\r\n  const newVal = parseDisplayed(input)\r\n  model.value = getValidValue(newVal) ?? 0\r\n  displayed.value = input\r\n}\r\n\r\n/**\r\n * 处理输入值变化的函数, 该函数仅在输入框失去焦点时触发,\r\n * 主要用于在输入非数字的情况下的修正处理\r\n * @param input 输入的值\r\n */\r\nfunction handleChange() {\r\n  emit('change', model.value)\r\n}\r\n\r\nconst tween = new Tween(\r\n  { n: model.value ?? 0 },\r\n  {\r\n    onUpdate(state) {\r\n      const _rawInput = inputDom.value\r\n      if (!_rawInput) return\r\n      _rawInput.value = getDisplayed(state.n)\r\n    },\r\n    // 动画进行的过程值有可能被改变, 因此在onComplete中确保还原的是原本的值\r\n    onComplete() {\r\n      const _rawInput = inputDom.value\r\n      if (!_rawInput) return\r\n      _rawInput.value = getDisplayed(model.value)\r\n    }\r\n  }\r\n)\r\n\r\n/** 增 */\r\nfunction increase(): void {\r\n  if (disabled.value) return\r\n  const val = model.value ?? 0\r\n  tween.state.n = val\r\n  const target = getValidValue(n.plus(val, stepVal.value))\r\n  model.value = target\r\n\r\n  tween.to({ n: target })\r\n}\r\n\r\n/** 减 */\r\nfunction decrease(): void {\r\n  if (disabled.value) return\r\n  const val = model.value ?? 0\r\n  tween.state.n = val\r\n  const target = getValidValue(n.minus(val, stepVal.value))\r\n  model.value = target\r\n  tween.to({ n: target })\r\n}\r\n\r\nfunction handleKeydown(e: KeyboardEvent): void {\r\n  if (!props.step) return\r\n  if (e.key === 'ArrowUp') {\r\n    e.preventDefault()\r\n    return increase()\r\n  }\r\n  if (e.key === 'ArrowDown') {\r\n    e.preventDefault()\r\n    return decrease()\r\n  }\r\n}\r\n\r\nfunction handleFocus(): void {\r\n  focused.value = true\r\n\r\n  // 如果初始值和当前设置的精度不匹配则进行精度修正\r\n  if (model.value === undefined) return\r\n  const { precision, maxPrecision, minPrecision } = props\r\n\r\n  model.value = +n(model.value).fixed(\r\n    precision ?? {\r\n      maxPrecision,\r\n      minPrecision\r\n    }\r\n  )\r\n}\r\n\r\nfunction handleBlur(): void {\r\n  focused.value = false\r\n  model.value = props.modelValue\r\n}\r\n</script>\r\n", "<template>\r\n  <u-dropdown\r\n    v-if=\"!readonly\"\r\n    trigger=\"click\"\r\n    :class=\"[cls.b, bem.is('disabled', disabled)]\"\r\n    ref=\"dropdownRef\"\r\n    v-model:visible=\"dropdownVisible\"\r\n    :content-class=\"[cls.e('panel'), cls.em('panel', size)]\"\r\n    :disabled=\"disabled\"\r\n  >\r\n    <!-- 触发 -->\r\n    <template #trigger>\r\n      <u-input\r\n        :size=\"size\"\r\n        :disabled=\"disabled\"\r\n        :placeholder=\"placeholder\"\r\n        :clearable=\"clearable\"\r\n        :model-value=\"\r\n          selected ? (getChainValue(selected, labelKey) ?? label) : modelValue\r\n        \"\r\n        @clear=\"handleClear\"\r\n        native-readonly\r\n      >\r\n        <template #suffix>\r\n          <u-icon :class=\"cls.e('arrow')\"><ArrowDown /></u-icon>\r\n        </template>\r\n      </u-input>\r\n    </template>\r\n\r\n    <!-- 下拉内容 -->\r\n    <template #content>\r\n      <!-- 过滤器 -->\r\n      <div v-if=\"filterable\" :class=\"cls.e('content-filter')\">\r\n        <u-input placeholder=\"输入关键字进行搜索\" v-model=\"queryString\">\r\n          <template #suffix>\r\n            <u-icon><Search /></u-icon>\r\n          </template>\r\n        </u-input>\r\n      </div>\r\n\r\n      <!-- 单选列表 -->\r\n      <u-scroll\r\n        v-if=\"options.length\"\r\n        tag=\"ul\"\r\n        :class=\"cls.e('options')\"\r\n        ref=\"scrollRef\"\r\n        :content-class=\"[\r\n          cls.e('options-wrap'),\r\n          bem.is('virtual', virtualEnabled)\r\n        ]\"\r\n        :content-style=\"{\r\n          height: virtualEnabled ? withUnit(totalHeight, 'px') : undefined\r\n        }\"\r\n      >\r\n        <template v-if=\"virtualEnabled\">\r\n          <!-- @vue-ignore -->\r\n          <li\r\n            v-for=\"{ option, index, val, label, key, offset } of virtualOptions\"\r\n            :class=\"[optionClass, bem.is('selected', val === model)]\"\r\n            @click=\"handleSelect(option)\"\r\n            v-ripple=\"cls.e('ripple')\"\r\n            :key=\"key\"\r\n            :style=\"{\r\n              transform: `translateY(${offset}px)`\r\n            }\"\r\n            :data-index=\"index\"\r\n            :ref=\"measureElement\"\r\n          >\r\n            <slot v-bind=\"{ option, index }\">\r\n              {{ label }}\r\n            </slot>\r\n          </li>\r\n        </template>\r\n\r\n        <template v-else>\r\n          <li\r\n            v-for=\"(option, index) of options\"\r\n            :class=\"[\r\n              optionClass,\r\n              bem.is('selected', getChainValue(option, valueKey) === model)\r\n            ]\"\r\n            @click=\"handleSelect(option)\"\r\n            v-ripple=\"cls.e('ripple')\"\r\n            :key=\"getChainValue(option, valueKey)\"\r\n          >\r\n            <slot v-bind=\"{ option, index }\">\r\n              {{ getChainValue(option, labelKey) }}\r\n            </slot>\r\n          </li>\r\n        </template>\r\n      </u-scroll>\r\n\r\n      <div v-else :class=\"cls.e('empty')\">\r\n        <UEmpty />\r\n      </div>\r\n    </template>\r\n  </u-dropdown>\r\n\r\n  <span v-else>{{ label || selected?.[labelKey] || FORM_EMPTY_CONTENT }}</span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup generic=\"Option extends Record<string, any>\">\r\nimport { computed, nextTick, shallowRef, watch } from 'vue'\r\nimport type {\r\n  SelectEmits,\r\n  SelectProps,\r\n  _SelectExposed\r\n} from '@ui/types/components/select'\r\nimport { bem, withUnit } from '@ui/utils'\r\nimport {\r\n  useFormComponent,\r\n  useFormFallbackProps,\r\n  useVirtual\r\n} from '@ui/compositions'\r\nimport { UDropdown, type DropdownExposed } from '../dropdown'\r\nimport { UScroll, type ScrollExposed } from '../scroll'\r\nimport { UInput } from '../input'\r\nimport { UIcon } from '../icon'\r\nimport { ArrowDown, Search } from 'icon-ultra'\r\nimport { vRipple } from '@ui/directives'\r\nimport { useOptions } from './use-options'\r\nimport { UEmpty } from '../empty'\r\nimport { FORM_EMPTY_CONTENT } from '@ui/shared'\r\nimport { getChainValue } from 'cat-kit/fe'\r\n\r\ndefineOptions({\r\n  name: 'Select'\r\n})\r\n\r\nconst props = withDefaults(defineProps<SelectProps<Option>>(), {\r\n  labelKey: 'label',\r\n  valueKey: 'value',\r\n  placeholder: '请选择',\r\n  clearable: true,\r\n  disabled: undefined,\r\n  readonly: undefined\r\n})\r\n\r\nconst emit = defineEmits<SelectEmits<Option>>()\r\n\r\nconst cls = bem('select')\r\n\r\nconst optionClass = cls.e('option')\r\n\r\nconst { formProps } = useFormComponent()\r\nconst { size, disabled, readonly } = useFormFallbackProps(\r\n  [formProps ?? {}, props],\r\n  {\r\n    size: 'default',\r\n    disabled: false,\r\n    readonly: false\r\n  }\r\n)\r\n\r\nconst model = defineModel<string | number>()\r\nconst label = defineModel('text')\r\nconst selected = shallowRef<Record<string, any>>()\r\n\r\nconst dropdownRef = shallowRef<DropdownExposed>()\r\nconst scrollRef = shallowRef<ScrollExposed>()\r\n\r\nconst filterable = computed(() => {\r\n  return props.filterable || typeof props.options === 'function'\r\n})\r\n\r\nconst { queryString, options } = useOptions({\r\n  props\r\n})\r\n\r\nlet modelIsChangedBySelected = false\r\nlet setIsChangedByModel = false\r\nwatch(\r\n  [model, options],\r\n  ([modelValue, options]) => {\r\n    if (!options?.length || modelIsChangedBySelected) return\r\n    setIsChangedByModel = true\r\n    if (modelValue !== undefined) {\r\n      const { valueKey } = props\r\n      selected.value = options.find(option => option[valueKey] === modelValue)\r\n    } else {\r\n      selected.value = undefined\r\n    }\r\n    setIsChangedByModel = false\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nwatch(selected, selected => {\r\n  if (setIsChangedByModel) return\r\n\r\n  modelIsChangedBySelected = true\r\n\r\n  model.value = selected?.[props.valueKey] ?? ''\r\n  label.value = selected?.[props.labelKey] ?? ''\r\n\r\n  modelIsChangedBySelected = false\r\n})\r\n\r\nconst { virtualList, totalHeight, virtualEnabled, scrollTo, measureElement } =\r\n  useVirtual({\r\n    count: computed(() => options.value.length),\r\n    virtualThreshold: 80,\r\n    scrollEl: computed(() => scrollRef.value?.containerRef ?? null),\r\n    gap: 2,\r\n    estimateSize: () => 40\r\n  })\r\n\r\nconst virtualOptions = computed(() => {\r\n  const _options = options.value\r\n  const { labelKey, valueKey } = props\r\n  return virtualList.value.map(item => {\r\n    const option = _options[item.index]!\r\n    return {\r\n      option,\r\n      index: item.index,\r\n      label: getChainValue(option, labelKey),\r\n      val: getChainValue(option, valueKey),\r\n      key: item.key,\r\n      offset: item.start\r\n    }\r\n  })\r\n})\r\n\r\nwatch(scrollRef, scroll => {\r\n  if (scroll && model.value !== undefined) {\r\n    nextTick(() => {\r\n      if (virtualEnabled.value) {\r\n        const index = virtualList.value.find(\r\n          option => option === selected.value\r\n        )?.index\r\n        index !== undefined && scrollTo(index)\r\n      } else {\r\n        scrollRef.value?.contentRef\r\n          ?.getElementsByClassName('is-selected')[0]\r\n          ?.scrollIntoView()\r\n      }\r\n    })\r\n  }\r\n})\r\n\r\nconst dropdownVisible = shallowRef(false)\r\n\r\nwatch(dropdownVisible, v => {\r\n  if (!v) {\r\n    queryString.value = ''\r\n  }\r\n})\r\n\r\n/** 单选 */\r\nconst handleSelect = (option: Option) => {\r\n  selected.value = option\r\n  dropdownRef.value?.close()\r\n  emit('change', option)\r\n}\r\n\r\n/** 清除选项 */\r\nconst handleClear = () => {\r\n  selected.value = undefined\r\n}\r\n</script>\r\n", "<template>\r\n  <div :class=\"[cls.b, cls.m(size)]\" ref=\"paginatorRef\">\r\n    <div>共 {{ total }} 条</div>\r\n\r\n    <u-select\r\n      :class=\"cls.e('size-select')\"\r\n      :model-value=\"currentSize\"\r\n      @update:model-value=\"handleUpdateSize\"\r\n      size=\"small\"\r\n      :options=\"sizeOptions\"\r\n      :clearable=\"false\"\r\n    />\r\n\r\n    <ul :class=\"[cls.e('pages')]\" v-if=\"!simple\">\r\n      <li\r\n        :class=\"[cls.e('btn'), bem.is('disabled', preDisabled)]\"\r\n        @click=\"handleJumpToFirst\"\r\n        @mouseenter=\"hovered.first = true\"\r\n        @mouseleave=\"hovered.first = false\"\r\n        v-ripple=\"!preDisabled\"\r\n      >\r\n        <span v-if=\"hovered.first\">1</span>\r\n        <UIcon v-else><DArrowLeft /></UIcon>\r\n      </li>\r\n\r\n      <li\r\n        :class=\"[cls.e('btn'), bem.is('disabled', pageNumber === 1)]\"\r\n        @click=\"handleJumpToPrev\"\r\n        v-ripple=\"!preDisabled\"\r\n      >\r\n        <UIcon><ArrowLeft /></UIcon>\r\n      </li>\r\n\r\n      <li\r\n        v-for=\"num in pageNumbers\"\r\n        :key=\"num\"\r\n        :class=\"[cls.e('btn'), bem.is('active', pageNumber === num)]\"\r\n        @click=\"handleChangePageNumber(num)\"\r\n        v-ripple\r\n      >\r\n        {{ num }}\r\n      </li>\r\n\r\n      <li\r\n        :class=\"[cls.e('btn'), bem.is('disabled', nextDisabled)]\"\r\n        @click=\"handleJumpToNext\"\r\n        v-ripple=\"!nextDisabled\"\r\n      >\r\n        <UIcon><ArrowRight /></UIcon>\r\n      </li>\r\n      <li\r\n        :class=\"[cls.e('btn'), bem.is('disabled', nextDisabled)]\"\r\n        @click=\"handleJumpToLast\"\r\n        @mouseenter=\"hovered.last = true\"\r\n        @mouseleave=\"hovered.last = false\"\r\n        v-ripple=\"!nextDisabled\"\r\n      >\r\n        <span v-if=\"hovered.last\">{{ totalPages }}</span>\r\n        <UIcon v-else><DArrowRight /></UIcon>\r\n      </li>\r\n    </ul>\r\n\r\n    <div :class=\"cls.e('jumper')\">\r\n      <span>前往</span>\r\n      <u-number-input\r\n        :class=\"cls.e('page-input')\"\r\n        size=\"small\"\r\n        :min=\"1\"\r\n        :max=\"totalPages\"\r\n        :precision=\"0\"\r\n        :model-value=\"pageNumber\"\r\n        :clearable=\"false\"\r\n        @keyup.enter=\"handleKeyEnter\"\r\n        @change=\"pageNumber = $event!\"\r\n      />\r\n      <span>/ {{ totalPages }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type {\r\n  PaginatorProps,\r\n  PaginatorEmits,\r\n  _PaginatorExposed\r\n} from '@ui/types/components/paginator'\r\nimport { bem } from '@ui/utils'\r\nimport { useConfig, useFallbackProps } from '@ui/compositions'\r\nimport { computed, reactive, shallowRef, watch } from 'vue'\r\nimport { ArrowLeft, ArrowRight, DArrowLeft, DArrowRight } from 'icon-ultra'\r\nimport { UNumberInput } from '../number-input'\r\nimport { USelect } from '../select'\r\nimport { UIcon } from '../icon'\r\nimport { vRipple } from '@ui/directives'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\nimport { n } from 'cat-kit/fe'\r\n\r\ndefineOptions({\r\n  name: 'Paginator'\r\n})\r\n\r\nconst { config } = useConfig()\r\n\r\nconst props = withDefaults(defineProps<PaginatorProps>(), {\r\n  total: 0\r\n})\r\n\r\ndefineEmits<PaginatorEmits>()\r\n\r\nconst cls = bem('paginator')\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst pageNumber = defineModel('pageNumber', {\r\n  default: 1\r\n})\r\n\r\nconst pageSize = defineModel<number>('pageSize')\r\n\r\nconst handleUpdateSize = (value?: number) => {\r\n  pageSize.value = value\r\n}\r\n\r\nfunction handleChangePageNumber(num: number) {\r\n  if (pageNumber.value === num) return\r\n\r\n  pageNumber.value = num\r\n}\r\n\r\nwatch(pageSize, () => {\r\n  pageNumber.value = 1\r\n})\r\n\r\nconst currentSize = computed(() => {\r\n  return pageSize.value ?? config.paginator.pageSize\r\n})\r\n\r\n/** 完整页码 */\r\nconst totalPages = computed(() => {\r\n  return Math.ceil(props.total / currentSize.value)\r\n})\r\n\r\nconst sizeOptions = computed(() => {\r\n  return (props.pageSizeOptions ?? config.paginator.pageSizeOptions).map(\r\n    value => {\r\n      return { label: `${value}条`, value }\r\n    }\r\n  )\r\n})\r\n\r\n/** 做多显示5个页码 */\r\nconst pageNumbers = computed(() => {\r\n  const startPageNum = n(pageNumber.value - 2).range(\r\n    1,\r\n    Math.max(totalPages.value - 4, 1)\r\n  )\r\n\r\n  return Array.from({ length: Math.min(totalPages.value, 5) }).map(\r\n    (_, index) => startPageNum + index\r\n  )\r\n})\r\n\r\nconst preDisabled = computed(() => {\r\n  return pageNumber.value <= 1\r\n})\r\nconst nextDisabled = computed(() => {\r\n  return pageNumber.value >= totalPages.value\r\n})\r\n\r\nfunction handleJumpToFirst() {\r\n  if (preDisabled.value) return\r\n  pageNumber.value = 1\r\n}\r\nfunction handleJumpToLast() {\r\n  if (nextDisabled.value) return\r\n  pageNumber.value = totalPages.value\r\n}\r\nfunction handleJumpToPrev() {\r\n  if (preDisabled.value) return\r\n  pageNumber.value -= 1\r\n}\r\nfunction handleJumpToNext() {\r\n  if (nextDisabled.value) return\r\n  pageNumber.value += 1\r\n}\r\n\r\nfunction handleKeyEnter(e: KeyboardEvent) {\r\n  const target = e.target as HTMLInputElement\r\n  const val = +target.value\r\n  if (!isNaN(val) && val > 0 && val <= totalPages.value) {\r\n    pageNumber.value = val\r\n  }\r\n}\r\n\r\n/** 鼠标停留位置 */\r\nconst hovered = reactive({\r\n  first: false,\r\n  last: false\r\n})\r\n\r\nconst paginatorRef = shallowRef<HTMLElement>()\r\n\r\ndefineExpose<_PaginatorExposed>({\r\n  el: paginatorRef\r\n})\r\n</script>\r\n", "<template>\r\n  <u-input\r\n    :class=\"cls.b\"\r\n    :model-value=\"passwordText\"\r\n    @native:input=\"handleUpdatePwd\"\r\n    @update:model-value=\"!$event && handleClear()\"\r\n    @suffix:click=\"toggleVisible\"\r\n  >\r\n    <template #suffix>\r\n      <Transition name=\"fade\">\r\n        <UIcon :class=\"cls.e('visibility-toggle')\" :size=\"14\">\r\n          <Hide v-if=\"pwdVisible\" />\r\n          <View v-else />\r\n        </UIcon>\r\n      </Transition>\r\n    </template>\r\n  </u-input>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { PasswordInputProps } from '@ui/types/components/password-input'\r\nimport { bem } from '@ui/utils'\r\nimport { UInput } from '../input'\r\nimport { UIcon } from '../icon'\r\nimport { View, Hide } from 'icon-ultra'\r\nimport { computed, nextTick, shallowRef } from 'vue'\r\n\r\ndefineOptions({\r\n  name: 'PasswordInput'\r\n})\r\n\r\ndefineProps<PasswordInputProps>()\r\n\r\nconst cls = bem('password-input')\r\n\r\nconst model = defineModel<string>()\r\n\r\nconst passwordChar = '●'\r\n\r\nconst handleUpdatePwd = (e: Event): void => {\r\n  const target = e.target as HTMLInputElement\r\n  const val = target.value\r\n  if (!val) {\r\n    model.value = val\r\n    return\r\n  }\r\n\r\n  // 字符从无到有\r\n  if (!model.value) {\r\n    model.value = val\r\n    return\r\n  }\r\n\r\n  const pointIndex = target.selectionStart!\r\n  let inputChar = pointIndex === 0 ? '' : val[pointIndex - 1]!\r\n  if (inputChar === passwordChar) inputChar = ''\r\n\r\n  // 光标右侧字符数量（当前字符长度减去光标位置）\r\n  const rightLen = val.length - pointIndex\r\n  // 光标左侧字符数量 （当光标前的字符是刚刚输入的，则为这个字符前的所有的字符，否则为光标前的所有赐福）\r\n  const leftLen = inputChar === '' ? pointIndex : pointIndex - 1\r\n\r\n  const leftVal = model.value.slice(0, leftLen)\r\n  const rightVal = rightLen === 0 ? '' : model.value.slice(-rightLen)\r\n\r\n  model.value = leftVal + inputChar + rightVal\r\n\r\n  nextTick(() => {\r\n    target.selectionStart = pointIndex\r\n    target.selectionEnd = pointIndex\r\n  })\r\n}\r\n\r\nconst handleClear = (): void => {\r\n  model.value = ''\r\n}\r\n\r\nconst pwdVisible = shallowRef(false)\r\n\r\nconst passwordText = computed<string | undefined>(() => {\r\n  if (pwdVisible.value) return model.value\r\n  return model.value ? passwordChar.repeat(model.value.length) : ''\r\n})\r\n\r\nconst toggleVisible = () => {\r\n  pwdVisible.value = !pwdVisible.value\r\n}\r\n</script>\r\n", "<template>\r\n  <div :class=\"className\">\r\n    <!-- 条形进度条 -->\r\n    <div :class=\"cls.e('bar-wrap')\" v-if=\"!circle\">\r\n      <div :class=\"cls.e('bar')\" :style=\"{ width: percentage + '%' }\">\r\n        <slot v-bind=\"{ percentage, type }\">{{ percentage }}%</slot>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 环形进度条 -->\r\n    <div\r\n      v-else\r\n      :class=\"cls.e('circle')\"\r\n      :style=\"{ height: withUnit(size, 'px'), width: withUnit(size, 'px') }\"\r\n    >\r\n      <svg viewBox=\"0 0 100 100\">\r\n        <circle\r\n          cx=\"50\"\r\n          cy=\"50\"\r\n          :r=\"r\"\r\n          fill=\"none\"\r\n          stroke=\"#f5f8fa\"\r\n          stroke-width=\"8\"\r\n        />\r\n        <circle\r\n          :class=\"cls.e('circle-ring')\"\r\n          cx=\"50\"\r\n          cy=\"50\"\r\n          :r=\"r\"\r\n          fill=\"none\"\r\n          :stroke=\"stroke\"\r\n          stroke-width=\"8\"\r\n          :stroke-dasharray=\"dashArray\"\r\n          :stroke-dashoffset=\"offset\"\r\n          :stroke-linecap=\"percentage === 0 ? undefined : 'round'\"\r\n        />\r\n      </svg>\r\n\r\n      <div :class=\"cls.e('circle-content')\">\r\n        <slot v-bind=\"{ percentage, type }\"> {{ percentage }}% </slot>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { ProgressProps } from '@ui/types/components/progress'\r\nimport { bem, withUnit } from '@ui/utils'\r\nimport { computed } from 'vue'\r\nimport { n } from 'cat-kit/fe'\r\nimport type { ColorType } from '@ui/types'\r\n\r\ndefineOptions({\r\n  name: 'Progress'\r\n})\r\n\r\nconst props = withDefaults(defineProps<ProgressProps>(), {\r\n  type: 'primary',\r\n  circle: false\r\n})\r\n\r\ndefineSlots<{\r\n  default: (props: {\r\n    /** 进度百分比 */\r\n    percentage: number\r\n    /** 样式类型 */\r\n    type: ColorType\r\n  }) => any\r\n}>()\r\n\r\nconst cls = bem('progress')\r\n\r\nconst percentage = computed(() => {\r\n  return n(props.percentage ?? 0).range(0, 100)\r\n})\r\n\r\nconst type = computed<ColorType>(() => {\r\n  const { type } = props\r\n  return typeof type === 'function' ? type(percentage.value) : type\r\n})\r\n\r\nconst className = computed(() => {\r\n  return [cls.b, bem.is('circle', props.circle), cls.m(type.value)]\r\n})\r\n\r\n/** 描边 */\r\nconst stroke = computed(() => {\r\n  return `var(--color-${type.value})`\r\n})\r\n\r\nconst r = 44\r\nconst c = 2 * Math.PI * r\r\nconst offset = c / 4\r\n\r\n/** 圆周 */\r\nconst dashArray = computed(() => {\r\n  const dashLen = (c * percentage.value) / 100\r\n  return `${dashLen}, ${c - dashLen}`\r\n})\r\n</script>\r\n", "<template>\r\n  <label :class=\"classList\">\r\n    <!-- radio框 -->\r\n    <section :class=\"cls.e('button')\">\r\n      <input\r\n        type=\"radio\"\r\n        :class=\"cls.e('native')\"\r\n        :value=\"value\"\r\n        v-model=\"model\"\r\n        :disabled=\"disabled\"\r\n        hidden\r\n      />\r\n\r\n      <transition name=\"zoom-in\">\r\n        <span :class=\"cls.e('inner')\" v-if=\"radioChecked\"></span>\r\n      </transition>\r\n    </section>\r\n\r\n    <span :class=\"cls.e('label')\">\r\n      <slot>{{ label }}</slot>\r\n    </span>\r\n  </label>\r\n</template>\r\n\r\n<script lang=\"ts\" setup generic=\"Val extends number | string | boolean\">\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\nimport type { RadioProps, RadioEmits } from '@ui/types/components/radio'\r\nimport { bem } from '@ui/utils'\r\nimport { computed } from 'vue'\r\n\r\ndefineOptions({\r\n  name: 'Radio'\r\n})\r\n\r\nconst model = defineModel<Val>()\r\n\r\nconst emit = defineEmits<RadioEmits>()\r\n\r\nconst props = withDefaults(defineProps<RadioProps<Val>>(), {\r\n  disabled: undefined\r\n})\r\n\r\nconst cls = bem('radio')\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled } = useFormFallbackProps([formProps ?? {}, props], {\r\n  size: 'default',\r\n  disabled: false\r\n})\r\n\r\nconst radioChecked = computed(() => model.value === props.value)\r\n\r\nconst classList = computed(() => {\r\n  return [\r\n    cls.b,\r\n    cls.m(size.value),\r\n    bem.is('disabled', disabled.value),\r\n    bem.is('checked', radioChecked.value)\r\n  ]\r\n})\r\n</script>\r\n", "<template>\r\n  <div :class=\"[cls.b, bem.is('block', block)]\" v-if=\"!readonly\">\r\n    <u-radio\r\n      v-for=\"item of items\"\r\n      :key=\"item[valueKey]\"\r\n      :value=\"item[valueKey]\"\r\n      @update:model-value=\"handleUpdate($event as Val, item)\"\r\n      :model-value=\"model\"\r\n      :disabled=\"disabledItem?.(item) || disabled\"\r\n      :size=\"size\"\r\n    >\r\n      {{ item[labelKey] }}\r\n    </u-radio>\r\n  </div>\r\n\r\n  <span v-else>\r\n    {{\r\n      items.find(item => item[valueKey] === model)?.[labelKey] ||\r\n      FORM_EMPTY_CONTENT\r\n    }}\r\n  </span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup generic=\"Val extends number | string | boolean\">\r\nimport type {\r\n  RadioGroupProps,\r\n  RadioGroupEmits\r\n} from '@ui/types/components/radio-group'\r\nimport { bem } from '@ui/utils'\r\nimport URadio from '../radio/radio.vue'\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\nimport { FORM_EMPTY_CONTENT } from '@ui/shared'\r\n\r\ndefineOptions({\r\n  name: 'RadioGroup'\r\n})\r\n\r\nconst props = withDefaults(defineProps<RadioGroupProps<Val>>(), {\r\n  labelKey: 'label',\r\n  valueKey: 'value',\r\n  disabled: undefined,\r\n  readonly: undefined\r\n})\r\n\r\nconst model = defineModel<Val>()\r\n\r\nconst emit = defineEmits<RadioGroupEmits<Val>>()\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled, readonly } = useFormFallbackProps(\r\n  [formProps ?? {}, props],\r\n  {\r\n    size: 'default',\r\n    disabled: false,\r\n    readonly: false\r\n  }\r\n)\r\n\r\nconst cls = bem('radio-group')\r\n\r\nconst handleUpdate = (\r\n  value: Val,\r\n  item: Record<string, string | number | boolean>\r\n) => {\r\n  model.value = value\r\n  emit('change', item)\r\n}\r\n</script>\r\n", "import type { SliderEmits, SliderProps } from '@ui/types/components/slider'\r\nimport type { BEM } from '@ui/utils'\r\nimport type { ComputedRef, InjectionKey, ModelRef, ShallowRef } from 'vue'\r\n\r\nexport interface SliderContext {\r\n  cls: BEM<'slider'>\r\n  runwayRef: ShallowRef<HTMLElement | undefined>\r\n  sliderSize: ShallowRef<number>\r\n  emit: SliderEmits\r\n  sliderProps: SliderProps\r\n  model: ModelRef<number | number[] | undefined>\r\n  disabled: ComputedRef<boolean>\r\n  setSliderBarSize: ({ x, y }: { x: number; y: number }) => void\r\n}\r\n\r\nexport const sliderContextKey: InjectionKey<SliderContext> =\r\n  Symbol('sliderContextKey')\r\n", "import { computed, type ShallowRef } from 'vue'\r\nimport type { SliderProps } from '..'\r\n\r\ninterface Options {\r\n  sliderProps: SliderProps\r\n  sliderSize: ShallowRef<number>\r\n}\r\n\r\nexport const useStops = (options: Options) => {\r\n  const { sliderProps, sliderSize } = options\r\n  /** 断点位置(px) */\r\n  let stops = computed(() => {\r\n    if (sliderProps.step === 0) {\r\n      console.error('step不应该为0')\r\n      return []\r\n    }\r\n\r\n    const stopCount = (sliderProps.max! - sliderProps.min!) / sliderProps.step!\r\n    const stepWidth =\r\n      (sliderSize.value * sliderProps.step!) /\r\n      (sliderProps.max! - sliderProps.min!)\r\n\r\n    const result = Array.from<number>({ length: stopCount }).map(\r\n      (_, index) => index * stepWidth\r\n    )\r\n\r\n    return result\r\n  })\r\n\r\n  /** 断点就位 */\r\n  let getStopStyle = (position: number) => {\r\n    return sliderProps.vertical\r\n      ? { bottom: `${position}px` }\r\n      : { left: `${position}px` }\r\n  }\r\n\r\n  /**\r\n   * 在步长模式下 更新按钮位置\r\n   * @param 当前位置\r\n   */\r\n  const setStepButtonPosition = (newPosition: number): number => {\r\n    const positions = [...stops.value, sliderSize.value]\r\n\r\n    // 计算 newPosition 和数组中每个位置的距离\r\n    const distances = positions.map(position => {\r\n      return Math.abs(newPosition - position)\r\n    })\r\n\r\n    // 找到最小距离的位置\r\n    const minDistance = Math.min(...distances)\r\n    const nearestPositionIndex = distances.indexOf(minDistance)\r\n\r\n    // 返回离新位置最近的值\r\n    return positions[nearestPositionIndex] ?? 0\r\n  }\r\n\r\n  return { stops, getStopStyle, setStepButtonPosition }\r\n}\r\n", "<template>\r\n  <div :style=\"warpStyles\" ref=\"slideButtonRef\" :class=\"cls.e('button-wrap')\">\r\n    <div :class=\"cls.e('button')\" />\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport {\r\n  computed,\r\n  inject,\r\n  nextTick,\r\n  shallowReactive,\r\n  shallowRef,\r\n  watch\r\n} from 'vue'\r\nimport { sliderContextKey } from './di'\r\nimport { useDrag } from '@ui/compositions'\r\nimport type {\r\n  SliderButtonEmits,\r\n  SliderButtonTransform\r\n} from '@ui/types/components/slider'\r\nimport { useStops } from './use-stops'\r\n\r\nlet injected = inject(sliderContextKey)!\r\n\r\nlet { cls, sliderSize, sliderProps, disabled, setSliderBarSize } = injected\r\n\r\nconst buttonValue = defineModel<number>()\r\n\r\nconst { setStepButtonPosition } = useStops({ sliderProps, sliderSize })\r\n\r\nlet slideButtonRef = shallowRef<HTMLDivElement>()\r\n\r\nlet emit = defineEmits<SliderButtonEmits>()\r\n\r\nconst transform = shallowReactive<SliderButtonTransform>({\r\n  x: 0,\r\n  y: 0\r\n})\r\n\r\nconst currentTransform = {\r\n  x: 0,\r\n  y: 0\r\n}\r\n\r\nwatch(transform, transform => {\r\n  setSliderBarSize(transform)\r\n})\r\n\r\n/** button的位移距离 */\r\nconst warpStyles = computed(() => {\r\n  return {\r\n    transform: `translate(${transform.x}px, ${transform.y}px)`\r\n  }\r\n})\r\n\r\n/** 百分比 */\r\nconst percentage = shallowRef(0)\r\n\r\n/** 是否拖拽 */\r\nlet isDragging = false\r\n\r\nwatch([percentage, sliderSize], ([p, sliderSize]) => {\r\n  if (!sliderSize) return\r\n  if (isDragging) {\r\n    const { min, max } = sliderProps\r\n    buttonValue.value = Math.round(min! + (max! - min!) * p)\r\n  } else {\r\n    if (sliderProps.vertical) {\r\n      transform.y = -p * sliderSize\r\n      currentTransform.y = transform.y\r\n    } else {\r\n      transform.x = p * sliderSize\r\n      currentTransform.x = transform.x\r\n    }\r\n  }\r\n\r\n  /** 拖拽结束之后的事件 */\r\n  emit('dragEnd', buttonValue.value!)\r\n\r\n  if (!sliderProps.range) return\r\n\r\n  if (sliderProps.vertical) {\r\n    emit('dragPosition', transform.y)\r\n  } else {\r\n    emit('dragPosition', transform.x)\r\n  }\r\n})\r\n\r\nwatch(\r\n  buttonValue,\r\n  value => {\r\n    percentage.value =\r\n      ((value as number) - sliderProps.min!) /\r\n      (sliderProps.max! - sliderProps.min!)\r\n  },\r\n  {\r\n    immediate: true\r\n  }\r\n)\r\n\r\nuseDrag({\r\n  target: slideButtonRef,\r\n  onDragStart(e) {\r\n    isDragging = true\r\n  },\r\n  onDrag(x, y, e) {\r\n    if (disabled.value) return\r\n\r\n    const { vertical } = sliderProps\r\n    let newPosition = vertical ? currentTransform.y + y : currentTransform.x + x\r\n\r\n    if (vertical) {\r\n      if (newPosition > 0) {\r\n        newPosition = 0\r\n      } else if (newPosition < -sliderSize.value) {\r\n        newPosition = -sliderSize.value\r\n      }\r\n    } else {\r\n      if (newPosition < 0) {\r\n        newPosition = 0\r\n      } else if (newPosition > sliderSize.value) {\r\n        newPosition = sliderSize.value\r\n      }\r\n    }\r\n\r\n    if (sliderProps.vertical) {\r\n      transform.y = newPosition\r\n    } else {\r\n      transform.x = newPosition\r\n    }\r\n\r\n    /** step */\r\n    if (sliderProps.step && sliderProps.step > 0) {\r\n      if (sliderProps.vertical) {\r\n        transform.y = -setStepButtonPosition(Math.abs(newPosition))\r\n      } else {\r\n        transform.x = setStepButtonPosition(newPosition)\r\n      }\r\n    }\r\n\r\n    if (!sliderProps.range) return\r\n\r\n    if (sliderProps.vertical) {\r\n      emit('dragPosition', transform.y)\r\n    } else {\r\n      emit('dragPosition', transform.x)\r\n    }\r\n  },\r\n\r\n  onDragEnd(x, y, e) {\r\n    currentTransform.x = transform.x\r\n    currentTransform.y = transform.y\r\n\r\n    /** 算出百分比 */\r\n    percentage.value = sliderProps.vertical\r\n      ? -currentTransform.y / sliderSize.value\r\n      : currentTransform.x / sliderSize.value\r\n\r\n    nextTick(() => {\r\n      isDragging = false\r\n    })\r\n  }\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n", "import { useResizeObserver } from '@ui/compositions'\r\nimport type { SliderProps } from '@ui/types/components/slider'\r\nimport { ref, shallowReactive, shallowRef, type ShallowRef } from 'vue'\r\n\r\nexport const useSlide = (\r\n  props: SliderProps,\r\n  sliderSize: ShallowRef<number>\r\n) => {\r\n  /** 第一个值的位置 */\r\n  let onePosition = ref(0)\r\n  /** 第二个值的位置 */\r\n  let twoPosition = ref(0)\r\n\r\n  /** 范围最小值 */\r\n  let minValue = ref(0)\r\n  /** 范围最大值 */\r\n  let maxValue = ref(0)\r\n\r\n  const runwayRef = shallowRef<HTMLElement>()\r\n\r\n  /** 根据页面实时响应 */\r\n  useResizeObserver({\r\n    targets: runwayRef,\r\n    onResize([entry]) {\r\n      // console.log(entry)\r\n      // const rect = entry!.target.getBoundingClientRect()\r\n      if (props.vertical) {\r\n        sliderSize.value = runwayRef.value?.offsetHeight!\r\n        // rect.height\r\n      } else {\r\n        // rect.width\r\n        sliderSize.value = runwayRef.value?.offsetWidth!\r\n      }\r\n    }\r\n  })\r\n\r\n  const barStyles = shallowReactive({\r\n    width: props.vertical ? '100%' : '0%',\r\n    height: '100%',\r\n    left: `0px`,\r\n    bottom: `0px`\r\n  })\r\n\r\n  /** 更新bar的大小 */\r\n  const updateSliderBarSize = ({ x, y }) => {\r\n    if (props.range) {\r\n      /** 最小的按钮的位置 */\r\n      let minPosition = Math.min(onePosition.value, twoPosition.value)\r\n      /** 最大按钮的位置 */\r\n      let maxPosition = Math.max(onePosition.value, twoPosition.value)\r\n\r\n      if (props.vertical) {\r\n        barStyles.bottom = `${-maxPosition}px`\r\n        barStyles.height = `${maxPosition - minPosition}px`\r\n      } else {\r\n        barStyles.left = `${minPosition}px`\r\n        barStyles.width = `${maxPosition - minPosition}px`\r\n      }\r\n    } else {\r\n      if (props.vertical) {\r\n        barStyles.height = `${-y}px`\r\n        barStyles.width = `100%`\r\n      } else {\r\n        barStyles.height = `100%`\r\n        barStyles.width = `${x}px`\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    onePosition,\r\n    twoPosition,\r\n    barStyles,\r\n    minValue,\r\n    maxValue,\r\n    runwayRef,\r\n    updateSliderBarSize\r\n  }\r\n}\r\n", "<template>\r\n  <div\r\n    v-if=\"!readonly\"\r\n    :class=\"className\"\r\n    ref=\"sliderRef\"\r\n    :style=\"vertical ? { height: `${height}px` } : undefined\"\r\n  >\r\n    <!-- 跑道 -->\r\n    <div ref=\"runwayRef\" :class=\"runwayClass\" @mousedown=\"handleSetPosition\">\r\n      <!-- 拖动覆盖条 -->\r\n      <div :class=\"cls.e('bar')\" :style=\"barStyles\" />\r\n      <!-- 手柄 -->\r\n      <slider-button\r\n        v-model=\"onePercentageValue\"\r\n        @dragPosition=\"handleSetOneToPxChange\"\r\n        @dragEnd=\"handleDragEnd\"\r\n      />\r\n\r\n      <slider-button\r\n        v-model=\"twoPercentageValue\"\r\n        v-if=\"range\"\r\n        @dragPosition=\"handleSetTwoToPxChange\"\r\n        @dragEnd=\"handleDragEnd\"\r\n      />\r\n\r\n      <!-- 断点 -->\r\n      <template v-if=\"showStops\">\r\n        <div\r\n          v-for=\"(item, key) in stops\"\r\n          :key=\"key\"\r\n          :class=\"cls.e('stop')\"\r\n          :style=\"getStopStyle(item)\"\r\n        />\r\n      </template>\r\n    </div>\r\n  </div>\r\n\r\n  <div v-else>\r\n    {{ model }}\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { SliderProps, SliderEmits } from '@ui/types/components/slider'\r\nimport { bem } from '@ui/utils'\r\nimport { computed, nextTick, provide, ref, shallowRef, watch } from 'vue'\r\nimport { sliderContextKey } from './di'\r\nimport SliderButton from './button.vue'\r\nimport { useSlide } from './use-slide'\r\nimport { useStops } from './use-stops'\r\nimport { isArray } from 'cat-kit/fe'\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\n\r\ndefineOptions({\r\n  name: 'Slider'\r\n})\r\n\r\nconst props = withDefaults(defineProps<SliderProps>(), {\r\n  min: 0,\r\n  max: 100,\r\n  step: 0,\r\n  vertical: false,\r\n  height: 300,\r\n  range: false,\r\n  disabled: undefined\r\n})\r\n\r\nconst emit = defineEmits<SliderEmits>()\r\n\r\nconst cls = bem('slider')\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled, readonly } = useFormFallbackProps([\r\n  formProps ?? {},\r\n  props\r\n])\r\n\r\nconst className = computed(() => {\r\n  return [\r\n    cls.b,\r\n    cls.m(size.value),\r\n    bem.is('vertical', props.vertical),\r\n    bem.is('disabled', disabled.value)\r\n  ]\r\n})\r\n\r\n/** slider大小 */\r\nconst sliderSize = shallowRef(0)\r\n\r\nconst sliderRef = shallowRef<HTMLElement>()\r\n\r\nconst {\r\n  barStyles,\r\n  onePosition,\r\n  twoPosition,\r\n  updateSliderBarSize,\r\n  runwayRef,\r\n  minValue,\r\n  maxValue\r\n} = useSlide(props, sliderSize)\r\n\r\nconst { stops, getStopStyle, setStepButtonPosition } = useStops({\r\n  sliderProps: props,\r\n  sliderSize\r\n})\r\n\r\nconst runwayClass = computed(() => {\r\n  return [cls.e('runway')]\r\n})\r\n\r\nconst model = defineModel<number[] | number>()\r\n\r\n/** 第一个百分比的值 */\r\nlet onePercentageValue = ref(0)\r\n/** 第二个百分比的值 */\r\nlet twoPercentageValue = ref(0)\r\n\r\nconst handleSetOneToPxChange = (value: number) => {\r\n  onePosition.value = value\r\n}\r\n\r\nconst handleSetTwoToPxChange = (value: number) => {\r\n  twoPosition.value = value\r\n}\r\n\r\nwatch(\r\n  () => model.value,\r\n  _ => {\r\n    if (props.range && isArray(model.value)) {\r\n      onePercentageValue.value = model.value[0]!\r\n      twoPercentageValue.value = model.value[1]!\r\n    } else {\r\n      onePercentageValue.value = model.value as number\r\n    }\r\n  },\r\n  {\r\n    immediate: true\r\n  }\r\n)\r\n\r\nwatch(\r\n  () => [sliderRef.value, props.min],\r\n  _ => {\r\n    if (!model.value) {\r\n      model.value = props.range ? [props.min, props.min] : props.min ?? 0\r\n    }\r\n  }\r\n)\r\n\r\n/** 放下 */\r\nconst handleDragEnd = async (value: number) => {\r\n  await nextTick()\r\n\r\n  if (props.range && isArray(model.value)) {\r\n    /** 最小值 */\r\n    minValue.value = Math.min(\r\n      onePercentageValue.value!,\r\n      twoPercentageValue.value!\r\n    )\r\n\r\n    /** 最大值*/\r\n    maxValue.value = Math.max(\r\n      onePercentageValue.value!,\r\n      twoPercentageValue.value!\r\n    )\r\n    model.value = [minValue.value, maxValue.value]\r\n  } else {\r\n    model.value = onePercentageValue.value\r\n  }\r\n}\r\n\r\n/** 点击更改位置 */\r\nconst handleSetPosition = (e: MouseEvent) => {\r\n  /** disabled初始值是undefined所以!! */\r\n  if (!!props.disabled) return\r\n\r\n  let percentage = shallowRef(0)\r\n  let buttonValue = shallowRef(0)\r\n  let x = e.offsetX\r\n  let y = e.offsetY\r\n\r\n  if (props.step && props.step > 0) {\r\n    if (props.vertical) {\r\n      y = setStepButtonPosition(Math.abs(y))\r\n    } else {\r\n      x = setStepButtonPosition(x)\r\n    }\r\n  }\r\n\r\n  percentage.value = props.vertical\r\n    ? -(y - sliderSize.value) / sliderSize.value\r\n    : x / sliderSize.value\r\n\r\n  buttonValue.value = Math.round(\r\n    props.min! + (props.max! - props.min!) * percentage.value\r\n  )\r\n\r\n  if (props.range) {\r\n    // 计算one和two与buttonValue的差值的绝对值\r\n    let diffOne = Math.abs(onePercentageValue.value - buttonValue.value)\r\n    let diffTwo = Math.abs(twoPercentageValue.value - buttonValue.value)\r\n\r\n    // 判断哪个变量更接近buttonValue，然后将该变量设为buttonValue\r\n    if (diffOne <= diffTwo) {\r\n      onePercentageValue.value = buttonValue.value\r\n    } else {\r\n      twoPercentageValue.value = buttonValue.value\r\n    }\r\n\r\n    model.value = [onePercentageValue.value, twoPercentageValue.value]\r\n  } else {\r\n    model.value = buttonValue.value\r\n  }\r\n}\r\n\r\nprovide(sliderContextKey, {\r\n  sliderProps: props,\r\n  disabled: disabled,\r\n  runwayRef,\r\n  sliderSize,\r\n  model,\r\n  cls,\r\n  emit,\r\n  setSliderBarSize: updateSliderBarSize\r\n})\r\n</script>\r\n", "<template>\r\n  <ol :class=\"[cls.b, cls.e(direction!), cls.m(size)]\">\r\n    <li\r\n      :class=\"[\r\n        cls.e('step'),\r\n        bem.is('readonly', readonly),\r\n        bem.is(processStatus!, active === item.key),\r\n        bem.is(finishStatus!, index < currentIndex)\r\n      ]\"\r\n      v-for=\"(item, index) in items\"\r\n      @click=\"readonly ? void 0 : stepClick(item)\"\r\n    >\r\n      <div :class=\"[cls.e('icon'), bem.is(direction)]\">\r\n        <div\r\n          :class=\"[\r\n            cls.em('icon', 'line'),\r\n            bem.is(processStatus!, active === item.key),\r\n            bem.is(finishStatus!, index < currentIndex)\r\n          ]\"\r\n          v-if=\"index !== 0\"\r\n        ></div>\r\n        <div :class=\"cls.em('icon', 'placeholder')\" v-else></div>\r\n        <component\r\n          v-if=\"slots.icon\"\r\n          :is=\"icons[index]\"\r\n          :class=\"[cls.em('icon', 'number')]\"\r\n        ></component>\r\n        <div v-else :class=\"[cls.em('icon', 'number')]\">\r\n          <UIcon v-if=\"index < currentIndex\"><Check /></UIcon>\r\n          <span v-else>{{ index + 1 }}</span>\r\n        </div>\r\n        <div\r\n          :class=\"[\r\n            cls.em('icon', 'line'),\r\n            bem.is(processStatus!, index === currentIndex - 1),\r\n            bem.is(finishStatus!, index < currentIndex - 1)\r\n          ]\"\r\n          v-if=\"index !== items.length - 1\"\r\n        ></div>\r\n        <div :class=\"cls.em('icon', 'placeholder')\" v-else></div>\r\n      </div>\r\n\r\n      <div :class=\"[cls.e('description')]\">\r\n        <component v-if=\"slots.desc && descs[index]\" :is=\"descs[index]\"></component>\r\n        <span v-else>{{ item.label }}</span>\r\n      </div>\r\n    </li>\r\n  </ol>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { useSlots, computed } from 'vue'\r\nimport type { StepsProps, StepsEmits, StepItem } from '@ui/types/components/steps'\r\nimport { bem } from '@ui/utils'\r\nimport { useFallbackProps } from '@ui/compositions'\r\nimport { Check } from 'icon-ultra'\r\nimport { UIcon } from '../icon'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\n\r\ndefineOptions({\r\n  name: 'Steps'\r\n})\r\n\r\nconst slots = useSlots()\r\n/** 图标位插槽 */\r\nconst icons = computed(() => {\r\n  return slots.icon ? slots.icon()[0]?.children || [] : []\r\n})\r\n/** 描述位插槽 */\r\nconst descs = computed(() => {\r\n  return slots.desc ? slots.desc()[0]?.children || [] : []\r\n})\r\n/** 当前活动序号 */\r\nconst currentIndex = computed(() => {\r\n  return props.active\r\n    ? props.items.findIndex((item) => item.key === props.active)\r\n    : props.items.length + 1\r\n})\r\n\r\nconst props = withDefaults(defineProps<StepsProps>(), {\r\n  direction: 'horizontal',\r\n  readonly: true,\r\n  processStatus: 'default',\r\n  finishStatus: 'success'\r\n})\r\n\r\nconst emit = defineEmits<StepsEmits>()\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst cls = bem('steps')\r\n/** 点击步骤切换活动序号 */\r\nconst stepClick = (item: StepItem) => {\r\n  emit('stepClick', item)\r\n  emit('update:active', item.key)\r\n}\r\n</script>\r\n", "export { default as USteps } from './steps.vue'\r\n\r\nexport type {\r\n  StepsProps,\r\n  StepsEmits,\r\n  StepsExposed\r\n} from '@ui/types/components/steps'\r\n\r\nimport type { StepItem } from '@ui/types/components/steps'\r\n\r\nexport function defineSteps(items: StepItem[]) {\r\n  return items\r\n}\r\n", "<template>\r\n  <div :class=\"[cls.b, cls.m(position!), cls.m(size)]\">\r\n    <ul :class=\"[cls.e('header'), cls.em('header', position!)]\" ref=\"headerRef\">\r\n      <li\r\n        v-for=\"(item, index) in tabItems\"\r\n        :key=\"item.key\"\r\n        :class=\"[\r\n          cls.e('header-item'),\r\n          bem.is('active', model === item.key),\r\n          bem.is('disabled', item.disabled === true)\r\n        ]\"\r\n        @click.stop=\"handleClick(item, index)\"\r\n        v-ripple=\"item.disabled ? false : cls.e('ripple')\"\r\n      >\r\n        <slot :name=\"`name:${item.key}`\">\r\n          {{ item.name }}\r\n        </slot>\r\n\r\n        <template v-if=\"editable\">\r\n          <u-icon\r\n            v-if=\"!item.disabled\"\r\n            :class=\"cls.e('close')\"\r\n            @click.stop=\"handleClose(item, index)\"\r\n            @mousedown.stop\r\n          >\r\n            <Close />\r\n          </u-icon>\r\n          <i v-else :class=\"cls.e('close-placeholder')\"></i>\r\n        </template>\r\n      </li>\r\n\r\n      <li\r\n        v-if=\"editable\"\r\n        :class=\"[cls.e('header-item'), cls.e('add')]\"\r\n        @click=\"handleAdd\"\r\n      >\r\n        <u-icon>\r\n          <Plus />\r\n        </u-icon>\r\n      </li>\r\n\r\n      <li v-else :class=\"cls.e('marker')\" :style=\"markStyle\"></li>\r\n    </ul>\r\n\r\n    <transition name=\"fade\" mode=\"out-in\">\r\n      <KeepAlive v-if=\"keepAlive\">\r\n        <component :key=\"model\" :is=\"renderSlots()\" />\r\n      </KeepAlive>\r\n      <component v-else :key=\"model\" :is=\"renderSlots()\" />\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { TabItem, TabsProps, TabsEmits } from '@ui/types/components/tabs'\r\nimport { bem } from '@ui/utils'\r\nimport {\r\n  computed,\r\n  createVNode,\r\n  nextTick,\r\n  shallowRef,\r\n  watch,\r\n  type CSSProperties\r\n} from 'vue'\r\nimport { Close, Plus } from 'icon-ultra'\r\nimport { useFallbackProps } from '@ui/compositions'\r\nimport { UIcon } from '../icon'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\nimport { UScroll } from '../scroll'\r\nimport { vRipple } from '@ui/directives'\r\n\r\ndefineOptions({\r\n  name: 'Tabs'\r\n})\r\n\r\nconst props = withDefaults(defineProps<TabsProps>(), {\r\n  position: 'top'\r\n})\r\n\r\nconst emit = defineEmits<TabsEmits>()\r\n\r\nconst slots = defineSlots<{\r\n  [key: string]: (props: { key: string }) => any\r\n  [key: `name:${string}`]: () => any\r\n}>()\r\n\r\nconst { size } = useFallbackProps([props], {\r\n  size: 'default' as ComponentSize\r\n})\r\n\r\nconst tabItems = computed(() => {\r\n  return props.items\r\n})\r\n\r\nconst cls = bem('tabs')\r\n\r\nconst headerRef = shallowRef<HTMLElement>()\r\n\r\n/** 当前活动标签 */\r\nconst index = shallowRef(-1)\r\nconst model = defineModel<string>()\r\n\r\nconst markStyle = shallowRef<CSSProperties>({})\r\n\r\nwatch(\r\n  [index, () => props.position, () => props.editable],\r\n  async ([index, position, editable]) => {\r\n    await nextTick()\r\n    if (index === -1 || editable) return\r\n\r\n    const headerEl = headerRef.value!\r\n\r\n    const headerRect = headerEl.getBoundingClientRect()\r\n    const el = headerEl.children[index]! as HTMLLIElement\r\n    const { offsetWidth, offsetHeight } = el\r\n\r\n    const rect = el.getBoundingClientRect()\r\n\r\n    if (position === 'top' || position === 'bottom') {\r\n      markStyle.value = {\r\n        width: offsetWidth + 'px',\r\n        transform: `translate3d(${rect.left - headerRect.left}px, 0, 0)`\r\n      }\r\n    } else {\r\n      markStyle.value = {\r\n        height: offsetHeight + 'px',\r\n        transform: `translate3d(0, ${rect.top - headerRect.top}px, 0)`\r\n      }\r\n    }\r\n  }\r\n)\r\n\r\nlet changedByEvent = false\r\nwatch(\r\n  model,\r\n  model => {\r\n    if (changedByEvent) return\r\n    index.value = props.items.findIndex(item => item.key === model)\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nconst handleClick = (item: TabItem, _index: number) => {\r\n  if (item.disabled) return\r\n  changedByEvent = true\r\n  index.value = _index\r\n  model.value = item.key\r\n  nextTick(() => {\r\n    changedByEvent = false\r\n  })\r\n}\r\n\r\nconst renderSlots = () => {\r\n  const key = model.value\r\n  if (!key) return null\r\n  const nodes = slots[key]?.({ key })\r\n  if (Array.isArray(nodes)) {\r\n    return createVNode(\r\n      UScroll,\r\n      { class: cls.e('content') },\r\n      { default: () => nodes }\r\n    )\r\n  }\r\n  return nodes\r\n}\r\n\r\n/** 关闭标签 */\r\nconst handleClose = (item: TabItem, index: number) => {\r\n  const { items } = props\r\n  if (model.value === item.key) {\r\n    model.value = (items[index + 1] ?? items[index - 1])!.key\r\n  }\r\n\r\n  emit('update:items', [...items.slice(0, index), ...items.slice(index + 1)])\r\n\r\n  emit('delete', item, index)\r\n}\r\n\r\nconst handleAdd = () => {\r\n  emit('create')\r\n}\r\n</script>\r\n", "// TODO: 在多种场景下, 比较KMP算法, BM算法, two-way算法是否比正则更快\r\n\r\ninterface HighlightChunk {\r\n  text: string\r\n  highlight: boolean\r\n}\r\n\r\nconst escapeRegexp = (term: string): string =>\r\n  term.replace(/[|\\\\{}()[\\]^$+*?.-]/g, (char: string) => `\\\\${char}`)\r\n\r\n/**\r\n * 获取文本高亮片段\r\n * @param string 字符串\r\n * @param substrings 需要匹配的字串列表\r\n */\r\nexport function getHighlightChunks(str: string, substrings: string[]): HighlightChunk[] {\r\n  const _substrings = substrings\r\n    .filter(s => !!s)\r\n    .map(s => escapeRegexp(s.trim()))\r\n  const re = new RegExp(`(${_substrings.join('|')})`, 'gi')\r\n  return str\r\n    .split(re)\r\n    .filter(Boolean)\r\n    .map(text => ({ text, highlight: re.test(text) }))\r\n}\r\n", "<template>\r\n  <p :class=\"classList\" :style=\"style\">\r\n    <UNodeRender :content=\"getTextVNode()\" ref=\"aa\" />\r\n  </p>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport {\r\n  type CSSProperties,\r\n  type VNode,\r\n  computed,\r\n  useSlots,\r\n  h,\r\n  createTextVNode\r\n} from 'vue'\r\nimport type { TextProps } from '@ui/types/components/text'\r\nimport { bem, withUnit, isTextNode, getHighlightChunks } from '@ui/utils'\r\nimport { UNodeRender } from '../node-render'\r\n\r\ndefineOptions({\r\n  name: 'Text'\r\n})\r\n\r\nconst props = withDefaults(defineProps<TextProps>(), {\r\n  as: 'content'\r\n})\r\n\r\nconst cls = bem('text')\r\n\r\nconst classList = computed(() => {\r\n  return [\r\n    cls.b,\r\n    bem.is(props.as),\r\n    bem.is('bold', props.bold),\r\n    bem.is('italic', props.italic)\r\n  ]\r\n})\r\n\r\nconst style = computed(() => {\r\n  const style: CSSProperties = {\r\n    fontSize: withUnit(props.fontSize, 'px')\r\n  }\r\n  const { deleted, underline } = props\r\n  if (deleted) {\r\n    style.textDecoration = 'line-through'\r\n  }\r\n  if (underline) {\r\n    style.textDecoration = 'underline'\r\n  }\r\n\r\n  return style\r\n})\r\n\r\nconst slots = useSlots()\r\nconst getTextVNode = () => {\r\n  const nodes = slots.default?.()\r\n  if (!nodes?.length) return undefined\r\n\r\n  // 只允许渲染文本\r\n  const textNodes = nodes.filter(node => isTextNode(node))\r\n\r\n  const { highlight } = props\r\n\r\n  if (!highlight) {\r\n    return textNodes\r\n  }\r\n\r\n  return textNodes.reduce((nodes, textNode) => {\r\n    const chunks = getHighlightChunks(\r\n      textNode.children as string,\r\n      Array.isArray(highlight) ? highlight : [highlight]\r\n    )\r\n\r\n    chunks.forEach(chunk => {\r\n      if (chunk.highlight) {\r\n        nodes.push(h('mark', chunk.text))\r\n      } else {\r\n        nodes.push(createTextVNode(chunk.text))\r\n      }\r\n    })\r\n\r\n    return nodes\r\n  }, [] as VNode[])\r\n}\r\n</script>\r\n", "import type { InjectionKey } from 'vue'\r\nimport type { TextEditorProps } from '.'\r\n\r\nexport const TextEditorDIKey: InjectionKey<{\r\n  textEditorProps: TextEditorProps\r\n}> = Symbol('TableDIKey')\r\n", "<template>\r\n  <div id=\"bar\" :class=\"cls.e('bar')\" ref=\"barRef\">\r\n    <select class=\"ql-size\">\r\n      <option value=\"small\">小</option>\r\n      <option selected>正常</option>\r\n      <option value=\"large\">大</option>\r\n      <option value=\"huge\">嘎嘎大</option>\r\n    </select>\r\n\r\n    <UTip\r\n      :content=\"item.content\"\r\n      v-for=\"item in injected.textEditorProps.toolbar ?? [\r\n        { content: '加粗', bar: 'bold' },\r\n        { content: '斜体', bar: 'italic' },\r\n        { content: '下划线', bar: 'underline' },\r\n        { content: '上传图片', bar: 'image' },\r\n        { content: '插入链接', bar: 'link' },\r\n        { content: '代码块', bar: 'code-block' },\r\n        { content: '清除格式', bar: 'clean' }\r\n      ]\"\r\n    >\r\n      <button :class=\"`ql-${item.bar}`\" />\r\n    </UTip>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { bem } from '@ui/utils'\r\nimport { inject, shallowRef } from 'vue'\r\nimport { UTip } from '../tip'\r\nimport { TextEditorDIKey } from './di'\r\n\r\nconst barRef = shallowRef()\r\n\r\nconst cls = bem('text-editor')\r\n\r\nconst injected = inject(TextEditorDIKey)!\r\n\r\n// const customButton = document.querySelector('#custom-button')\r\n\r\n// customButton!.addEventListener('click', function () {\r\n//   console.log('Clicked!')\r\n// })\r\n\r\ndefineExpose({\r\n  barRef\r\n})\r\n</script>\r\n", "<template>\r\n  <div :class=\"className\">\r\n    <Bar ref=\"barRef\" />\r\n\r\n    <div :class=\"cls.e('hover')\" :style=\"`height: ${height}`\" ref=\"editorRef\" />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\nimport type {\r\n  TextEditorProps,\r\n  TextEditorEmits\r\n} from '@ui/types/components/text-editor'\r\nimport { bem } from '@ui/utils'\r\nimport Quill from 'quill'\r\nimport type { Delta, QuillOptions, Op } from 'quill/core'\r\nimport {\r\n  onMounted,\r\n  shallowRef,\r\n  ref,\r\n  watch,\r\n  computed,\r\n  nextTick,\r\n  onBeforeUnmount,\r\n  provide\r\n} from 'vue'\r\nimport Bar from './bar.vue'\r\nimport { TextEditorDIKey } from './di'\r\n\r\ndefineOptions({\r\n  name: 'TextEditor'\r\n})\r\n\r\nconst emit = defineEmits<TextEditorEmits>()\r\n\r\nconst props = withDefaults(defineProps<TextEditorProps>(), {\r\n  disabled: undefined,\r\n  toolbar: undefined,\r\n  placeholder: '请输入'\r\n})\r\n\r\nprovide(TextEditorDIKey, {\r\n  textEditorProps: props\r\n})\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled, readonly } = useFormFallbackProps([\r\n  formProps ?? {},\r\n  props\r\n])\r\n\r\n/** 类名 */\r\nconst className = computed(() => {\r\n  return [\r\n    cls.b,\r\n    cls.m(size.value),\r\n    bem.is('disabled', disabled.value),\r\n    bem.is('readonly', readonly.value)\r\n  ]\r\n})\r\n\r\nconst cls = bem('text-editor')\r\n\r\nconst editorRef = shallowRef<HTMLElement>()\r\n\r\nconst barRef = shallowRef<InstanceType<typeof Bar>>()\r\n\r\nlet options: QuillOptions\r\n\r\nlet quill: Quill | null = null\r\n\r\nconst stamp = ref<string>('')\r\n\r\nconst getOptions = () => {\r\n  options = {\r\n    modules: {\r\n      toolbar: barRef.value?.barRef\r\n    },\r\n    // readOnly: readonly.value,\r\n    theme: 'snow',\r\n    placeholder:\r\n      disabled.value || readonly.value ? undefined : props.placeholder\r\n  }\r\n}\r\n\r\n/** 因为没有所以设定一个重新渲染的变量 */\r\nlet reRendering = ref(true)\r\n\r\n/** 等待barRef加载出来 */\r\nnextTick(() => {\r\n  getOptions()\r\n})\r\n\r\n/** 创建textEditor实例 */\r\nconst createTextEditor = async () => {\r\n  destroy()\r\n  await nextTick()\r\n  reRendering.value = true\r\n\r\n  nextTick(() => {\r\n    console.log(options, 'options')\r\n    quill = new Quill(editorRef.value!, options)\r\n\r\n    quill.on('text-change', update)\r\n\r\n    /** 禁用 */\r\n    if (disabled.value || readonly.value) {\r\n      quill.enable(false)\r\n    } else {\r\n      quill.enable(true)\r\n    }\r\n\r\n    quill.updateContents(props.modelValue!)\r\n\r\n    // 双向绑定标志\r\n    stamp.value = `${new Date().getTime()}${Math.random()}`\r\n  })\r\n}\r\n\r\n/** 销毁quill实例 */\r\nconst destroy = () => {\r\n  if (quill) {\r\n    // const theme: any = quill?.theme\r\n\r\n    // theme.modules?.toolbar?.container?.remove()\r\n\r\n    // theme.modules?.clipboard?.container?.remove()\r\n\r\n    reRendering.value = false\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  createTextEditor()\r\n})\r\n\r\nwatch(\r\n  () => [disabled.value, readonly.value],\r\n  () => {\r\n    createTextEditor()\r\n  }\r\n)\r\n\r\n/** 调用富文本方法 */\r\nconst quillRef = () => {\r\n  return quill\r\n}\r\n\r\n/** 赋值方法 */\r\nconst setValue = (value: Delta | Op[]) => {\r\n  quill?.update()\r\n  return quill?.updateContents(value)\r\n}\r\n\r\n/** 获取toolbar */\r\nconst getModelBar = () => {\r\n  return quill?.getModule('toolbar')\r\n}\r\n\r\n/** 更新data的值 */\r\nconst update = (_, __, ___: 'user' | 'api') => {\r\n  const contents = quill?.getContents()\r\n\r\n  emit('update:modelValue', { value: contents, stamp: stamp.value })\r\n}\r\n\r\nonBeforeUnmount(() => {\r\n  quill?.off('text-change', update)\r\n  quill?.history.clear()\r\n  destroy()\r\n})\r\n\r\nwatch([() => props.modelValue, () => quill], ([val, qui]) => {\r\n  if (qui && val?.['stamp'] !== stamp.value) {\r\n    qui.setContents(val?.['value'])\r\n  }\r\n})\r\n\r\ndefineExpose({ quillRef, setValue, getModelBar })\r\n</script>\r\n", "import { setStyles } from '@ui/utils'\r\nimport { nextTick } from 'vue'\r\n\r\nexport function calcTextareaHeight(el: HTMLTextAreaElement) {\r\n  setStyles(el, {\r\n    height: 'auto'\r\n  })\r\n  nextTick(() => {\r\n    const { scrollHeight } = el\r\n\r\n    setStyles(el, {\r\n      overflow: 'hidden',\r\n      height: scrollHeight + 'px'\r\n    })\r\n  })\r\n}\r\n", "<template>\r\n  <div\r\n    v-if=\"!readonly\"\r\n    :class=\"textareaClass\"\r\n    @mouseenter=\"hovered = true\"\r\n    @mouseleave=\"hovered = false\"\r\n  >\r\n    <textarea\r\n      :class=\"cls.e('native')\"\r\n      :placeholder=\"placeholder\"\r\n      v-model=\"model\"\r\n      :maxlength=\"maxlength\"\r\n      :rows=\"rows\"\r\n      :cols=\"cols\"\r\n      @input=\"handleInput\"\r\n      @focus=\"handleFocus\"\r\n      @blur=\"handleBlur\"\r\n      @change=\"handleChange\"\r\n      :disabled=\"disabled\"\r\n      :readonly=\"nativeReadonly\"\r\n      ref=\"textareaRef\"\r\n    />\r\n    <span v-if=\"props.maxlength && props.showCount\" :class=\"cls.m('count')\">\r\n      {{ initNum }}/{{ props.maxlength }}\r\n    </span>\r\n    <Transition name=\"zoom-in\" mode=\"out-in\">\r\n      <u-icon\r\n        v-if=\"props.clearable && model! && hovered && !disabled && !readonly\"\r\n        :class=\"cls.m('clear')\"\r\n        @click.stop=\"handleClear\"\r\n      >\r\n        <Close />\r\n      </u-icon>\r\n    </Transition>\r\n  </div>\r\n\r\n  <span v-else style=\"white-space: pre-wrap\">\r\n    {{ model || FORM_EMPTY_CONTENT }}\r\n  </span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type {\r\n  TextareaProps,\r\n  TextareaEmits\r\n} from '@ui/types/components/textarea'\r\nimport { bem } from '@ui/utils'\r\nimport { computed, ref, shallowRef, watch } from 'vue'\r\nimport { UIcon } from '../icon'\r\nimport { Close } from 'icon-ultra'\r\nimport {\r\n  useFocus,\r\n  useFormComponent,\r\n  useFormFallbackProps\r\n} from '@ui/compositions'\r\nimport type { ComponentSize } from '@ui/types/component-common'\r\nimport { calcTextareaHeight } from './utils'\r\nimport { FORM_EMPTY_CONTENT } from '@ui/shared'\r\n\r\ndefineOptions({\r\n  name: 'Textarea'\r\n})\r\n\r\nconst props = withDefaults(defineProps<TextareaProps>(), {\r\n  placeholder: '请输入',\r\n  resize: true,\r\n  clearable: true,\r\n  disabled: undefined,\r\n  readonly: undefined,\r\n  autosize: false\r\n})\r\n\r\nconst cls = bem('textarea')\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled, readonly } = useFormFallbackProps(\r\n  [formProps ?? {}, props],\r\n  {\r\n    size: 'default' as ComponentSize,\r\n    disabled: false,\r\n    readonly: false\r\n  }\r\n)\r\n\r\nconst emit = defineEmits<TextareaEmits>()\r\n\r\nconst textareaRef = ref<HTMLTextAreaElement | null>(null)\r\n\r\nconst model = defineModel<string>()\r\n\r\nconst hovered = shallowRef(false)\r\n\r\nconst { focus, handleBlur, handleFocus } = useFocus(focused => {\r\n  focused ? emit('focus') : emit('blur')\r\n})\r\n\r\nconst textareaClass = computed(() => {\r\n  return [\r\n    cls.b,\r\n    cls.m(size.value),\r\n    bem.is('resize-none', !props.resize),\r\n    bem.is('disabled', disabled.value),\r\n    bem.is('readonly', readonly.value),\r\n    bem.is('focus', focus.value),\r\n    cls.m('more')\r\n  ]\r\n})\r\n\r\nconst handleInput = (e: Event) => {\r\n  const value = (e.target as HTMLTextAreaElement).value\r\n  if (value.length > props.maxlength!) {\r\n    // 如果输入的字符数超过了最大长度，截取字符串到最大长度\r\n    const truncatedValue = value.slice(0, props.maxlength)\r\n    emit('update:modelValue', truncatedValue)\r\n  } else {\r\n    // 如果没有超过最大长度，则正常更新模型值\r\n    emit('update:modelValue', value)\r\n  }\r\n}\r\n\r\nconst initNum = computed(() => {\r\n  if (!props.maxlength) return 0\r\n  return props.maxlength - (model.value?.length ?? 0)\r\n})\r\n\r\nconst handleClear = () => {\r\n  model.value = ''\r\n  emit('clear')\r\n}\r\n\r\nconst handleChange = (e: Event) => {\r\n  emit('change', (e.target as HTMLTextAreaElement).value)\r\n}\r\n\r\nwatch(\r\n  [model, textareaRef],\r\n  ([model, textareaRef]) => {\r\n    if(!textareaRef) return\r\n    if(!props.autosize) return\r\n    calcTextareaHeight(textareaRef)\r\n  },\r\n  { immediate: true }\r\n)\r\n</script>\r\n", "import type { BEM } from '@ui/utils'\r\nimport type { InjectionKey } from 'vue'\r\n\r\nexport const ThemeDIKey: InjectionKey<{\r\n  cls: BEM<'theme', 'u-'>\r\n}> = Symbol('ThemeDIKey')\r\n", "<template>\r\n  <div :class=\"cls.e('group')\">\r\n    <div :class=\"cls.e('group-title')\">\r\n      {{ title }}\r\n    </div>\r\n\r\n    <div :class=\"cls.e('group-content')\">\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { inject } from 'vue'\r\nimport { ThemeDIKey } from './di'\r\n\r\ndefineProps<{\r\n  title: string\r\n}>()\r\n\r\nconst { cls } = inject(ThemeDIKey)!\r\n</script>\r\n", "<template>\r\n  <div :class=\"cls.e('group-item')\">\r\n    <label :class=\"cls.e('group-label')\">\r\n      {{ label }}\r\n    </label>\r\n\r\n    <div :class=\"cls.e('group-item-content')\">\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { inject } from 'vue'\r\nimport { ThemeDIKey } from './di'\r\n\r\ndefineProps<{\r\n  label: string\r\n}>()\r\n\r\nconst { cls } = inject(ThemeDIKey)!\r\n</script>\r\n", "<template>\r\n  <div :class=\"cls.b\">\r\n    <theme-group title=\"主题色\">\r\n      <theme-item label=\"品牌\"></theme-item>\r\n      <theme-item label=\"默认\"></theme-item>\r\n      <theme-item label=\"成功\"></theme-item>\r\n      <theme-item label=\"失败\"></theme-item>\r\n      <theme-item label=\"警告\"></theme-item>\r\n      <theme-item label=\"信息\"></theme-item>\r\n    </theme-group>\r\n\r\n    <theme-group title=\"背景色\">\r\n      <theme-item label=\"底层\"></theme-item>\r\n      <theme-item label=\"中层\"></theme-item>\r\n      <theme-item label=\"顶层\"></theme-item>\r\n      <theme-item label=\"禁用\"></theme-item>\r\n      <theme-item label=\"悬浮\"></theme-item>\r\n    </theme-group>\r\n\r\n    <theme-group title=\"边框\">\r\n      <theme-item label=\"宽度\">\r\n        <u-number-input\r\n          v-model=\"theme.border.width\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n        />\r\n      </theme-item>\r\n      <theme-item label=\"样式\"></theme-item>\r\n      <theme-item label=\"颜色\"></theme-item>\r\n    </theme-group>\r\n    <theme-group title=\"圆角\">\r\n      <theme-item label=\"小\">\r\n        <u-number-input\r\n          v-model=\"theme.radius.small\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n        />\r\n      </theme-item>\r\n      <theme-item label=\"中\"\r\n        ><u-number-input\r\n          v-model=\"theme.radius.default\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"大\"\r\n        ><u-number-input\r\n          v-model=\"theme.radius.large\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n    </theme-group>\r\n    <theme-group title=\"表单组件高度\">\r\n      <theme-item label=\"小\"\r\n        ><u-number-input\r\n          v-model=\"theme.formComponentHeight.small\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"中\"\r\n        ><u-number-input\r\n          v-model=\"theme.formComponentHeight.default\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"大\"\r\n        ><u-number-input\r\n          v-model=\"theme.formComponentHeight.large\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n    </theme-group>\r\n    <theme-group title=\"菜单高度\">\r\n      <theme-item label=\"小\"\r\n        ><u-number-input\r\n          v-model=\"theme.menuHeight.small\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"中\"\r\n        ><u-number-input\r\n          v-model=\"theme.menuHeight.default\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"大\"\r\n        ><u-number-input\r\n          v-model=\"theme.menuHeight.large\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n    </theme-group>\r\n    <theme-group title=\"标签尺寸\">\r\n      <theme-item label=\"小\">\r\n        <u-number-input\r\n          v-model=\"theme.tag.small\"\r\n          :step=\"1\"\r\n          :min=\"0\"\r\n          :clearable=\"false\"\r\n        />\r\n      </theme-item>\r\n      <theme-item label=\"中\">\r\n        <u-number-input\r\n          v-model=\"theme.tag.default\"\r\n          :min=\"0\"\r\n          :clearable=\"false\"\r\n          :step=\"1\"\r\n        />\r\n      </theme-item>\r\n      <theme-item label=\"大\"\r\n        ><u-number-input\r\n          v-model=\"theme.tag.large\"\r\n          :step=\"1\"\r\n          :min=\"0\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n    </theme-group>\r\n    <theme-group title=\"字体族\"> </theme-group>\r\n    <theme-group title=\"文字颜色\"> </theme-group>\r\n    <theme-group title=\"标题字体大小\">\r\n      <theme-item label=\"小\"\r\n        ><u-number-input\r\n          v-model=\"theme.fontSizeTitle.small\"\r\n          :min=\"14\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"中\"\r\n        ><u-number-input\r\n          v-model=\"theme.fontSizeTitle.default\"\r\n          :min=\"14\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"大\"\r\n        ><u-number-input\r\n          v-model=\"theme.fontSizeTitle.large\"\r\n          :min=\"14\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n    </theme-group>\r\n    <theme-group title=\"正文字体大小\">\r\n      <theme-item label=\"小\"\r\n        ><u-number-input\r\n          v-model=\"theme.fontSizeMain.small\"\r\n          :min=\"12\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"中\"\r\n        ><u-number-input\r\n          v-model=\"theme.fontSizeMain.default\"\r\n          :min=\"12\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"大\"\r\n        ><u-number-input\r\n          v-model=\"theme.fontSizeMain.large\"\r\n          :min=\"12\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n    </theme-group>\r\n    <theme-group title=\"辅助字体大小\">\r\n      <theme-item label=\"小\"\r\n        ><u-number-input\r\n          v-model=\"theme.fontSizeAssist.small\"\r\n          :min=\"12\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"中\"\r\n        ><u-number-input\r\n          v-model=\"theme.fontSizeAssist.default\"\r\n          :min=\"12\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"大\"\r\n        ><u-number-input\r\n          v-model=\"theme.fontSizeAssist.large\"\r\n          :min=\"12\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n    </theme-group>\r\n    <theme-group title=\"阴影\">\r\n      <theme-item label=\"水平偏移\"\r\n        ><u-number-input :step=\"1\" v-model=\"theme.shadow.x\" :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"垂直偏移\"\r\n        ><u-number-input :step=\"1\" v-model=\"theme.shadow.y\" :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"模糊半径\"\r\n        ><u-number-input\r\n          v-model=\"theme.shadow.blur\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"扩散半径\"\r\n        ><u-number-input\r\n          v-model=\"theme.shadow.spread\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"颜色\"></theme-item>\r\n    </theme-group>\r\n    <theme-group title=\"间距\">\r\n      <theme-item label=\"小\"\r\n        ><u-number-input\r\n          v-model=\"theme.gap.small\"\r\n          :step=\"1\"\r\n          :min=\"0\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"中\"\r\n        ><u-number-input\r\n          v-model=\"theme.gap.default\"\r\n          :min=\"0\"\r\n          :step=\"1\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n      <theme-item label=\"大\"\r\n        ><u-number-input\r\n          v-model=\"theme.gap.large\"\r\n          :step=\"1\"\r\n          :min=\"0\"\r\n          :clearable=\"false\"\r\n      /></theme-item>\r\n    </theme-group>\r\n    <theme-group title=\"断点\"> </theme-group>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { theme } from '@ui/styles/theme'\r\nimport { bem } from '@ui/utils'\r\nimport { ThemeDIKey } from './di'\r\nimport { provide } from 'vue'\r\nimport ThemeGroup from './group.vue'\r\nimport ThemeItem from './group-item.vue'\r\nimport { UNumberInput } from '../number-input'\r\n\r\ndefineOptions({\r\n  name: 'Theme'\r\n})\r\n\r\nconst cls = bem('theme')\r\n\r\nprovide(ThemeDIKey, {\r\n  cls\r\n})\r\n</script>\r\n", "<template>\r\n  <u-dropdown\r\n    v-if=\"!readonly\"\r\n    :class=\"[cls.b, bem.is('disabled', disabled)]\"\r\n    trigger=\"click\"\r\n    :content-class=\"[cls.e('panel'), cls.em('panel', size)]\"\r\n    ref=\"dropdownRef\"\r\n    :min-width=\"minWidth\"\r\n  >\r\n    <template #trigger>\r\n      <u-input\r\n        :size=\"size\"\r\n        :disabled=\"disabled\"\r\n        :placeholder=\"placeholder\"\r\n        :clearable=\"clearable\"\r\n        :model-value=\"text ?? (model ? label : undefined)\"\r\n        @clear=\"handleClear\"\r\n        native-readonly\r\n      >\r\n        <template #suffix>\r\n          <u-icon :class=\"cls.e('arrow')\"><ArrowDown /></u-icon>\r\n        </template>\r\n      </u-input>\r\n    </template>\r\n    <template #content>\r\n      <!-- 过滤器 -->\r\n      <div v-if=\"filterable\" :class=\"[cls.e('content-filter'), cls.m(size)]\">\r\n        <u-input placeholder=\"输入关键字进行过滤\" v-model=\"qs\">\r\n          <template #suffix>\r\n            <u-icon><Search /></u-icon>\r\n          </template>\r\n        </u-input>\r\n      </div>\r\n      <!-- 菜单列表 -->\r\n\r\n      <u-tree\r\n        v-bind=\"treeProps\"\r\n        :selected=\"model\"\r\n        @update:selected=\"handleSelect\"\r\n        ref=\"treeRef\"\r\n        selectable\r\n        :class=\"cls.e('content-tree')\"\r\n        :slots=\"slots\"\r\n      />\r\n    </template>\r\n  </u-dropdown>\r\n\r\n  <span v-else>{{ text || label || FORM_EMPTY_CONTENT }}</span>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type {\r\n  TreeSelectProps,\r\n  TreeSelectEmits\r\n} from '@ui/types/components/tree-select'\r\nimport { useFormComponent, useFormFallbackProps } from '@ui/compositions'\r\nimport { bem } from '@ui/utils'\r\nimport { UDropdown } from '../dropdown'\r\nimport { UTree, type TreeExposed } from '../tree'\r\nimport { UInput } from '../input'\r\nimport { UIcon } from '../icon'\r\nimport { ArrowDown, Search } from 'icon-ultra'\r\nimport { computed, nextTick, shallowRef, watch } from 'vue'\r\nimport { Tree, getChainValue, omit } from 'cat-kit/fe'\r\nimport { FORM_EMPTY_CONTENT } from '@ui/shared'\r\nimport type { TreeSlotsScope } from '../tree/di'\r\n\r\ndefineOptions({\r\n  name: 'TreeSelect'\r\n})\r\n\r\nconst cls = bem('tree-select')\r\n\r\nconst props = withDefaults(defineProps<TreeSelectProps>(), {\r\n  labelKey: 'label',\r\n  valueKey: 'value',\r\n  placeholder: '请选择',\r\n  expandAll: true,\r\n  clearable: true,\r\n  disabled: undefined,\r\n  readonly: undefined,\r\n  filterable: false,\r\n  minWidth: '250px'\r\n})\r\n\r\nconst treeProps = computed(() => {\r\n  return omit(props, [\r\n    'tips',\r\n    'field',\r\n    'placeholder',\r\n    'disabled',\r\n    'label',\r\n    'readonly'\r\n  ])\r\n})\r\n\r\nconst emit = defineEmits<TreeSelectEmits>()\r\n\r\nconst slots = defineSlots<{\r\n  default?: (props: TreeSlotsScope<Record<string, any>>) => any\r\n}>()\r\n\r\n/**过滤 */\r\nconst qs = shallowRef('')\r\nwatch(qs, qs => {\r\n  treeRef.value?.filter(qs)\r\n})\r\n\r\nconst model = defineModel<string | number>()\r\n\r\nconst label = shallowRef<string>()\r\n\r\nconst { formProps } = useFormComponent()\r\n\r\nconst { size, disabled, readonly } = useFormFallbackProps([\r\n  formProps ?? {},\r\n  props\r\n])\r\n\r\nconst treeRef = shallowRef<TreeExposed<Record<string, any>>>()\r\n\r\nconst dropdownRef = shallowRef<InstanceType<typeof UDropdown>>()\r\n\r\n/**清空 */\r\nconst handleClear = () => {\r\n  model.value = ''\r\n  label.value = undefined\r\n  emit('clear')\r\n  emit('change', '', undefined)\r\n  emit('update:text', '')\r\n}\r\n\r\nlet changedByEvent = false\r\nwatch(\r\n  [() => props.data, model],\r\n  ([data, model]) => {\r\n    if (changedByEvent) return\r\n    if (!data?.length || model === undefined) {\r\n      label.value = undefined\r\n      model = undefined\r\n      return\r\n    }\r\n\r\n    let founded = false\r\n    data.some(item => {\r\n      Tree.dft(item, v => {\r\n        if (v[props.valueKey] === model) {\r\n          label.value = v[props.labelKey]\r\n          founded = true\r\n          return false\r\n        }\r\n      })\r\n\r\n      return founded\r\n    })\r\n  },\r\n  {\r\n    immediate: true\r\n  }\r\n)\r\n\r\nconst handleSelect = (\r\n  selected?: string | number,\r\n  selectedData?: Record<string, any>\r\n) => {\r\n  changedByEvent = true\r\n  nextTick(() => {\r\n    changedByEvent = false\r\n  })\r\n\r\n  model.value = selected ?? ''\r\n\r\n  if (selectedData) {\r\n    label.value = getChainValue(selectedData, props.labelKey)\r\n  } else {\r\n    label.value = ''\r\n  }\r\n\r\n  emit('change', selected, selectedData)\r\n  emit('update:text', label.value)\r\n  dropdownRef.value?.close()\r\n}\r\n\r\nwatch(treeRef, treeRef => {\r\n  if (treeRef && model.value !== undefined) {\r\n    nextTick(() => {\r\n      treeRef.scrollToSelected()\r\n    })\r\n  }\r\n})\r\n</script>\r\n", "<template>\r\n  <Teleport v-if=\"appendToBody\" to=\"body\">\r\n    <div\r\n      :class=\"cls.b\"\r\n      ref=\"watermarkRef\"\r\n      :style=\"{\r\n        zIndex: zIndex()\r\n      }\"\r\n    ></div>\r\n  </Teleport>\r\n\r\n  <div\r\n    v-else\r\n    :class=\"cls.b\"\r\n    ref=\"watermarkRef\"\r\n    :style=\"{\r\n      zIndex: zIndex()\r\n    }\"\r\n  >\r\n    <slot />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { WatermarkProps } from '@ui/types/components/watermark'\r\nimport { bem, setStyles, zIndex } from '@ui/utils'\r\nimport { onBeforeUnmount, onMounted, reactive, ref } from 'vue'\r\nimport type { WatermarkEmits } from '.'\r\nimport { debounce } from 'cat-kit/fe'\r\n\r\ndefineOptions({\r\n  name: 'Watermark'\r\n})\r\nconst cls = bem('watermark')\r\nconst props = withDefaults(defineProps<WatermarkProps>(), {\r\n  route: -30,\r\n  fontSize: 60\r\n})\r\ndefineEmits<WatermarkEmits>()\r\n\r\nconst watermarkRef = ref<HTMLDivElement>()\r\n\r\nconst watermark = reactive({\r\n  fontColor: 'rgba(0,0,0,.1)',\r\n  fontFamily: 'Arial',\r\n  image: props.image\r\n})\r\n\r\nconst setWatermark = debounce(async () => {\r\n  const str = props.text\r\n  const container = watermarkRef.value\r\n\r\n  if (container === undefined || !str) return\r\n\r\n  // 创建canvas\r\n  let canvas: HTMLCanvasElement | null = document.createElement('canvas')\r\n\r\n  // 创建canvs画布\r\n  let ctx = canvas.getContext('2d')!\r\n  // 字体\r\n  ctx.font = `${props.fontSize}px ${watermark.fontFamily}`\r\n\r\n  const textWidth = ctx.measureText(str).width\r\n  canvas = document.createElement('canvas')\r\n  canvas.width = textWidth\r\n  canvas.height = textWidth\r\n  ctx = canvas.getContext('2d')!\r\n  // 字体\r\n  ctx.font = `${props.fontSize}px ${watermark.fontFamily}`\r\n  ctx = canvas.getContext('2d')!\r\n  // 字体颜色\r\n  ctx.fillStyle = watermark.fontColor\r\n  // 对齐方式\r\n  ctx.textAlign = 'left'\r\n  // 文本基线\r\n  ctx.textBaseline = 'top'\r\n\r\n  // 逆时旋转\r\n  ctx.translate(textWidth / 2, textWidth / 2)\r\n  ctx.rotate((props.route * Math.PI) / 180)\r\n  ctx.translate(-textWidth / 2, -textWidth / 2)\r\n  // 编制文字\r\n  ctx.fillText(str, 0, (textWidth - props.fontSize) / 2)\r\n\r\n  setStyles(container, {\r\n    background: `url(${canvas.toDataURL('image/png')}) repeat`\r\n  })\r\n\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n  canvas = null\r\n}, 150)\r\n\r\nwindow.addEventListener('resize', setWatermark)\r\nonBeforeUnmount(() => {\r\n  window.removeEventListener('resize', setWatermark)\r\n})\r\n\r\nonMounted(() => {\r\n  setWatermark()\r\n})\r\n</script>\r\n"],
  "mappings": "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",
  "names": ["NAME_SPACE", "CLS_PREFIX", "FORM_EMPTY_CONTENT", "makeBEM", "prefix", "bem", "name", "b", "block", "e", "m", "is", "condition", "bem", "makeBEM", "CLS_PREFIX", "getScrollParents", "el", "parents", "parent", "observerElMap", "observer", "entry", "fn", "observeEl", "cb", "unobserveEl", "str", "s", "p", "n", "_a", "v", "int", "i", "q", "m", "__publicField", "_Dater", "date", "re", "_Tree", "Node", "data", "index", "node", "_Tween", "_a", "p", "c2", "arr", "arr", "s", "_", "__publicField", "s", "arr", "i", "_a", "dft", "s", "obj", "i", "v", "o", "o", "p", "i", "v2", "_WebStorage", "__privateAdd", "__publicField", "__privateSet", "__privateGet", "v", "_WebCache", "withUnit", "value", "unit", "setStyles", "el", "styles", "key", "kebabCase", "removeStyles", "props", "props", "__props", "cls", "bem", "style", "computed", "withUnit", "createIncrease", "initial", "value", "uid", "createIncrease", "targets", "shallowReactive", "documentClickHandler", "event", "el", "handler", "eventAdded", "addEvent", "removeEvent", "watch", "vClickOutside", "binding", "id", "nextFrame", "cb", "cls", "bem", "clsWrap", "duration", "transitionEndHandler", "e", "rippleWrap", "parentEl", "showRipple", "el", "config", "domRect", "centerX", "centerY", "rippleClass", "parentRect", "edgeA", "edgeB", "radius", "diameter", "rippleEl", "_duration", "_rippleClass", "setStyles", "nextFrame", "handleMousedown", "registerEvents", "binding", "unregisterEvents", "vRipple", "registered", "state", "reactive", "watch", "size", "oldSize", "deepSet", "original", "extend", "key", "val", "targetVal", "isObj", "useConfig", "readonly", "conf", "useFallbackProps", "propsList", "fallbackProps", "config", "useConfig", "result", "key", "defaultValue", "ref", "computed", "i", "props", "useFormFallbackProps", "props", "__props", "size", "useFallbackProps", "emit", "__emit", "cls", "bem", "classList", "computed", "ripple", "handleClick", "e", "buttonRef", "shallowRef", "__expose", "E", "ActionDIKey", "zIndex", "createIncrease", "isTextNode", "node", "Text", "isFragment", "Fragment", "isTemplate", "node", "isVNode", "extractNormalVNodes", "nodes", "results", "createTextVNode", "isFragment", "shallowComputed", "getter", "result", "shallowRef", "watch", "value", "min", "max", "round", "createCoords", "v", "oppositeSideMap", "oppositeAlignmentMap", "clamp", "start", "value", "end", "evaluate", "param", "getSide", "placement", "getAlignment", "getOppositeAxis", "axis", "getAxisLength", "getSideAxis", "getAlignmentAxis", "getAlignmentSides", "rects", "rtl", "alignment", "alignmentAxis", "length", "mainAlignmentSide", "getOppositePlacement", "getExpandedPlacements", "oppositePlacement", "getOppositeAlignmentPlacement", "getSideList", "side", "isStart", "lr", "rl", "tb", "bt", "getOppositeAxisPlacements", "flipAlignment", "direction", "list", "expandPaddingObject", "padding", "getPaddingObject", "rectToClientRect", "rect", "x", "y", "width", "height", "computeCoordsFromPlacement", "_ref", "reference", "floating", "sideAxis", "alignLength", "isVertical", "commonX", "commonY", "commonAlign", "coords", "computePosition", "config", "strategy", "middleware", "platform", "validMiddleware", "statefulPlacement", "middlewareData", "resetCount", "i", "name", "fn", "nextX", "nextY", "data", "reset", "detectOverflow", "state", "options", "_await$platform$isEle", "elements", "boundary", "rootBoundary", "elementContext", "altBoundary", "paddingObject", "element", "clippingClientRect", "offsetParent", "offsetScale", "elementClientRect", "arrow", "arrowDimensions", "isYAxis", "minProp", "maxProp", "clientProp", "endDiff", "startDiff", "arrowOffsetParent", "clientSize", "centerToReference", "largestPossiblePadding", "minPadding", "maxPadding", "min$1", "center", "offset", "shouldAddOffset", "alignmentOffset", "flip", "_middlewareData$arrow", "_middlewareData$flip", "initialPlacement", "checkMainAxis", "checkCrossAxis", "specifiedFallbackPlacements", "fallbackStrategy", "fallbackAxisSideDirection", "detectOverflowOptions", "initialSideAxis", "isBasePlacement", "fallbackPlacements", "hasFallbackAxisSideDirection", "placements", "overflow", "overflows", "overflowsData", "sides", "_middlewareData$flip2", "_overflowsData$filter", "nextIndex", "nextPlacement", "resetPlacement", "d", "a", "b", "_overflowsData$filter2", "currentSideAxis", "acc", "convertValueToCoords", "mainAxisMulti", "crossAxisMulti", "rawValue", "mainAxis", "crossAxis", "_middlewareData$offse", "diffCoords", "shift", "limiter", "mainAxisCoord", "crossAxisCoord", "minSide", "maxSide", "limitedCoords", "hasWindow", "getNodeName", "node", "isNode", "getWindow", "_node$ownerDocument", "getDocumentElement", "isElement", "isHTMLElement", "isShadowRoot", "isOverflowElement", "overflowX", "overflowY", "display", "getComputedStyle", "isTableElement", "isTopLayer", "selector", "isContainingBlock", "elementOrCss", "webkit", "isWebKit", "css", "getContainingBlock", "currentNode", "getParentNode", "isLastTraversableNode", "getNodeScroll", "result", "getNearestOverflowAncestor", "parentNode", "getOverflowAncestors", "traverseIframes", "_node$ownerDocument2", "scrollableAncestor", "isBody", "win", "frameElement", "getFrameElement", "getCssDimensions", "hasOffset", "offsetWidth", "offsetHeight", "shouldFallback", "unwrapElement", "getScale", "domElement", "$", "noOffsets", "getVisualOffsets", "shouldAddVisualOffsets", "isFixed", "floatingOffsetParent", "getBoundingClientRect", "includeScale", "isFixedStrategy", "clientRect", "scale", "visualOffsets", "offsetWin", "currentWin", "currentIFrame", "iframeScale", "iframeRect", "left", "top", "convertOffsetParentRelativeRectToViewportRelativeRect", "documentElement", "topLayer", "scroll", "offsets", "isOffsetParentAnElement", "offsetRect", "getClientRects", "getWindowScrollBarX", "leftScroll", "getDocumentRect", "html", "body", "getViewportRect", "visualViewport", "visualViewportBased", "getInnerBoundingClientRect", "getClientRectFromClippingAncestor", "clippingAncestor", "hasFixedPositionAncestor", "stopNode", "getClippingElementAncestors", "cache", "cachedResult", "el", "currentContainingBlockComputedStyle", "elementIsFixed", "computedStyle", "currentNodeIsContaining", "ancestor", "getClippingRect", "clippingAncestors", "firstClippingAncestor", "clippingRect", "accRect", "getDimensions", "getRectRelativeToOffsetParent", "htmlX", "htmlY", "htmlRect", "isStaticPositioned", "getTrueOffsetParent", "polyfill", "rawOffsetParent", "getOffsetParent", "svgOffsetParent", "getElementRects", "getOffsetParentFn", "getDimensionsFn", "floatingDimensions", "isRTL", "offset$1", "shift$1", "flip$1", "arrow$1", "mergedOptions", "platformWithCache", "computePosition$1", "usePop", "triggerRef", "contentRef", "arrowRef", "arrowSize", "onTriggerPositionChange", "onAfterUpdate", "onBeforeUpdate", "arrowPlacementDict", "getMaybeRefValue", "isRef", "update", "_direction", "_alignment", "position", "setStyles", "arrowX", "arrowY", "arrowPlacement", "size", "arrowRadius", "watch", "scrollParents", "addScrollEvents", "getScrollParents", "removeScrollEvents", "addResizeEvents", "observeEl", "removeResizeEvents", "unobserveEl", "onBeforeUnmount", "TipNestDIKey", "UNodeRender", "defineComponent", "content", "$slots", "$attrs", "$props", "_a", "isVNode", "mergeProps", "props", "__props", "cls", "bem", "slots", "useSlots", "size", "useFallbackProps", "contentClass", "computed", "fixed", "className", "triggerRef", "shallowRef", "contentRef", "arrowRef", "visible", "getTriggerNode", "nodes", "_a", "extractNormalVNodes", "childrenTips", "shallowReactive", "anyChildrenVisible", "tip", "provide", "TipNestDIKey", "addChild", "removeChild", "inject", "eventsHandlers", "trigger", "handlers", "open", "close", "handleClickOutside", "e", "_b", "closeTimer", "triggerDom", "shallowComputed", "usePop", "toRef", "externalNode", "config", "onBeforeUnmount", "__expose", "t", "FormComponentDIKey", "useFormComponent", "props", "provide", "context", "inject", "emit", "__emit", "cls", "bem", "tipRef", "shallowRef", "formProps", "useFormComponent", "size", "useFormFallbackProps", "confirm", "_a", "cancel", "props", "__props", "emit", "__emit", "cls", "bem", "ctx", "inject", "ActionDIKey", "handleConfirm", "props", "__props", "cls", "bem", "slots", "_useSlots", "getSlotsNodes", "nodes", "default", "extractedNodes", "extractNormalVNodes", "filter", "node", "type", "name", "normalNodes", "slice", "max", "hiddenNodes", "dropdown", "length", "_createVNode", "UTip", "e", "content", "UButton", "_createTextVNode", "UIcon", "ArrowDown", "props", "__props", "slots", "_useSlots", "cls", "bem", "triggerRef", "shallowRef", "contentRef", "realTrigger", "visible", "_useModel", "closeTimer", "stopClose", "open", "trigger", "virtual", "real", "close", "handleClickOutside", "e", "_a", "update", "usePop", "triggerEl", "contentEl", "setStyles", "eventsHandlers", "computed", "disabled", "handlers", "__expose", "t", "useDrag", "options", "target", "onDragStart", "onDrag", "onDragEnd", "originX", "originY", "offsetX", "offsetY", "onselectstart", "handleMousedown", "e", "_a", "handleMousemove", "handleMouseup", "watch", "dom", "oldDom", "onBeforeUnmount", "ScrollDIKey", "props", "__props", "emit", "__emit", "size", "shallowRef", "offset", "currentOffset", "trackSize", "cls", "inject", "ScrollDIKey", "dragging", "className", "computed", "bem", "style", "domRef", "getDragOffset", "x", "y", "useDrag", "newOffset", "maxOffset", "__expose", "_size", "_offset", "e", "r", "unobserve", "targets", "observer", "target", "useResizeObserver", "options", "onResize", "watch", "val", "oldVal", "onBeforeUnmount", "minSize", "fe", "props", "__props", "emit", "__emit", "cls", "bem", "className", "computed", "style", "withUnit", "contentRef", "shallowRef", "scrollRef", "containerRef", "barX", "barY", "trackSize", "useResizeObserver", "entries", "clientHeight", "clientWidth", "_a", "_b", "updateBar", "entry", "scrollHeight", "scrollTop", "scrollWidth", "scrollLeft", "barYHeight", "barYTop", "barXWidth", "barXLeft", "_c", "_d", "handleDragX", "debounce", "offset", "size", "container", "handleDragY", "handleScroll", "scrollToLeft", "left", "scrollToTop", "top", "scrollTo", "position", "provide", "ScrollDIKey", "__expose", "e", "t", "useFocus", "cb", "focus", "ref", "props", "__props", "emit", "__emit", "model", "_useModel", "inst", "getCurrentInstance", "cls", "bem", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "focus", "handleBlur", "handleFocus", "useFocus", "focused", "inputClass", "computed", "b", "m", "value", "is", "prefixClass", "e", "vnode", "suffixClass", "isComposing", "handleCompositionStart", "handleCompositionEnd", "handleInput", "inputVal", "target", "pattern", "test", "nextTick", "handlePrefixClick", "handleSuffixClick", "clearModelValue", "hovered", "ref", "handleMouseEnter", "handleMouseLeave", "handleChange", "el", "shallowRef", "generateModel", "prefix", "__expose", "n", "x", "useSuggestions", "options", "model", "props", "remoteSuggestions", "shallowRef", "filteredSuggestions", "appendedSuggestions", "suggestions", "computed", "cachedSuggestion", "watch", "debounce", "v", "propsSuggestions", "item", "n", "props", "__props", "emit", "__emit", "model", "_useModel", "cls", "bem", "optionClass", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "dropdownRef", "shallowRef", "scrollRef", "watch", "scroll", "li", "suggestions", "appendedSuggestions", "cachedSuggestion", "useSuggestions", "handleSelect", "option", "_a", "saveCache", "handleSelectCachedOption", "cachedOption", "dropdownVisible", "cls", "bem", "props", "__props", "size", "useFallbackProps", "badgeValue", "computed", "classList", "supRef", "shallowRef", "setPosition", "width", "height", "setStyles", "watch", "nextTick", "onMounted", "s", "n", "LayoutDIKey", "props", "__props", "emit", "__emit", "cls", "inject", "LayoutDIKey", "className", "computed", "bem", "resizerRef", "shallowRef", "offset", "offsets", "shallowReactive", "currentOffset", "useDrag", "x", "y", "__expose", "_offset", "o", "n", "props", "__props", "cls", "bem", "templateCols", "ref", "watchEffect", "cols", "style", "computed", "rows", "gap", "resizable", "withUnit", "containerRef", "shallowRef", "resizerRefs", "resizerOffsets", "getResizeOffsets", "container", "_", "index", "dom", "watch", "nextTick", "useResizeObserver", "r", "i", "prevSize", "nextSize", "handleStartResize", "rect", "_b", "_a", "handleResize", "offset", "provide", "LayoutDIKey", "e", "t", "DialogDIKey", "useEdit", "options", "props", "emit", "tableRef", "state", "shallowReactive", "insertIndexes", "shallowRef", "watch", "v", "changedByUserInput", "row", "_a", "_b", "nextTick", "changeCb", "field", "val", "setChainValue", "model", "oldModel", "quickEdit", "childrenKey", "computed", "insert", "item", "data", "isReactive", "parent", "Forest", "children", "last", "getInsertData", "safeRun", "runCreate", "cb", "handleCreate", "handleInsertToPrev", "handleInsertToNext", "handleInsertChild", "runWithLoading", "fn", "args", "error", "handleSave", "saveMethod", "result", "key", "getChainValue", "handleDelete", "deleteMethod", "handleClose", "BatchEditDIKey", "useComponentProps", "props", "defineComponent", "componentProps", "slots", "attrs", "mergeNodesProps", "nodes", "extractNormalVNodes", "_a", "i", "node", "key", "_props", "isRef", "tagProps", "acc", "cur", "createVNode", "CardDIKey", "props", "__props", "cls", "bem", "size", "useFormFallbackProps", "classList", "computed", "styles", "withUnit", "provide", "CardDIKey", "__expose", "p", "z", "injected", "inject", "CardDIKey", "cls", "classList", "computed", "ret", "e", "u", "TableDIKey", "useModel", "options", "props", "propName", "emit", "local", "defaultValue", "shallow", "_value", "r", "shallowRef", "ref", "value", "watch", "v", "TableRowNode", "TreeNode", "options", "__super", "args", "__publicField", "data", "index", "uid", "isReactive", "shallowReactive", "useRows", "options", "props", "emit", "rows", "shallowRef", "rowForest", "uid", "currentRow", "useModel", "watch", "row", "oldRow", "forest", "rowDicts", "tempRowDicts", "getRowUID", "rowData", "getChainValue", "createRow", "data", "index", "existRow", "TableRowNode", "getRows", "result", "i", "dataItem", "getRowForest", "ret", "Forest", "val", "tree", "getFlattedRows", "_a", "node", "toggleTreeRowExpand", "allExpanded", "toggleAllTreeRowExpand", "handleRowClick", "getRowByData", "defineTableColumns", "columns", "commonProps", "col", "Tree", "node", "key", "ColumnNode", "TreeNode", "val", "index", "shallowReactive", "__publicField", "reactive", "useColumns", "options", "props", "createCheckColumn", "createSelectColumn", "colgroupRef", "toggleAllTreeRowExpand", "cls", "preColumns", "computed", "selectable", "checkable", "showIndex", "row", "columnForest", "shallowRef", "renderExpandAll", "createVNode", "UButton", "e", "UIcon", "ArrowRight", "watch", "tree", "fixedOnLeft", "unfixed", "fixedOnRight", "column", "last", "sortedColumns", "firstColumn", "oldNameRender", "ctx", "oldNodes", "result", "Forest", "data", "leftAcc", "_", "i", "colNode", "rightAcc", "headers", "currentLayer", "layerDepth", "_a", "parent", "sum", "allColumns", "expandColumn", "forest", "_columns", "updateStylesOfColumns", "debounce", "colgroup", "acc", "colIndex", "rightColumns", "defineComponent", "name", "setup", "cls", "columnConfig", "getHeaderSlotsNode", "getCellClass", "inject", "TableDIKey", "headers", "_createVNode", "e", "bem", "is", "value", "length", "map", "header", "headerIndex", "column", "key", "keySuffix", "leafs", "children", "undefined", "left", "withUnit", "style", "right", "getCellClass", "inject", "TableDIKey", "_isSlot", "s", "Object", "prototype", "toString", "call", "_isVNode", "defineComponent", "name", "props", "row", "type", "required", "setup", "cls", "columnConfig", "getColumnSlotsNode", "toggleTreeRowExpand", "getCellCtx", "handleRowClick", "tableProps", "measureElement", "inject", "TableDIKey", "columns", "expandColumn", "_expandColumn", "value", "expandCell", "expandCtx", "cellSpan", "mergeCell", "colspan", "rowspan", "_createVNode", "UTabelCell", "_mergeProps", "style", "left", "right", "key", "keySuffix", "default", "isLeaf", "e", "depth", "UButton", "stopPropagation", "UIcon", "ArrowRight", "bem", "is", "expanded", "onClick", "map", "column", "cellCtx", "cellNode", "cls", "bem", "cls", "rows", "virtualList", "columnConfig", "tableProps", "inject", "TableDIKey", "allColumns", "virtualRows", "computed", "item", "bodyRef", "shallowRef", "watch", "list", "setStyles", "_a", "t", "l", "cls", "columnConfig", "rows", "tableSlots", "getCellClass", "inject", "TableDIKey", "allColumns", "showSummary", "computed", "col", "computeSummary", "key", "sum", "i", "n", "getColumnSummaryNode", "column", "summary", "total", "memo", "getDeps", "fn", "opts", "deps", "result", "_a", "_b", "_c", "_d", "depTime", "newDeps", "dep", "index", "resultTime", "depEndTime", "resultEndTime", "resultFpsPercentage", "pad", "str", "num", "notUndefined", "value", "msg", "approxEqual", "a", "b", "debounce", "targetWindow", "ms", "timeoutId", "args", "defaultKeyExtractor", "defaultRangeExtractor", "range", "start", "end", "arr", "i", "observeElementRect", "instance", "cb", "element", "handler", "rect", "width", "height", "observer", "entries", "entry", "box", "addEventListenerOptions", "supportsScrollend", "observeElementOffset", "offset", "fallback", "createHandler", "isScrolling", "horizontal", "isRtl", "endHandler", "measureElement", "elementScroll", "adjustments", "behavior", "toOffset", "Virtualizer", "_ro", "get", "target", "opts2", "key", "sync", "d", "scrollElement", "cached", "measurements", "furthestMeasurementsFound", "furthestMeasurements", "m", "measurement", "previousFurthestMeasurement", "count", "paddingStart", "scrollMargin", "getItemKey", "enabled", "itemSizeCache", "item", "min", "furthestMeasurement", "measuredSize", "size", "lane", "outerSize", "scrollOffset", "calculateRange", "rangeExtractor", "overscan", "node", "attributeName", "indexStr", "prevNode", "itemSize", "delta", "indexes", "virtualItems", "k", "len", "findNearestBinarySearch", "align", "scrollSizeProp", "maxOffset", "initialAlign", "offsetAndAlign", "latestOffset", "low", "high", "getCurrentValue", "middle", "currentValue", "startIndex", "endIndex", "useVirtual", "options", "scrollEl", "estimateSize", "virtualThreshold", "gap", "computed", "defaultEstimateSize", "virtualList", "shallowRef", "totalHeight", "onChange", "v", "virtualizerOptions", "cleanup", "watch", "el", "onScopeDispose", "scrollTo", "cls", "bem", "props", "__props", "emit", "__emit", "formProps", "useFormComponent", "size", "useFormFallbackProps", "handleClose", "className", "computed", "type", "props", "__props", "cls", "bem", "model", "_useModel", "trueVal", "computed", "falseVal", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "className", "checked", "handleInput", "e", "target", "useCheck", "options", "rows", "rowForest", "props", "emit", "size", "cls", "checkedRows", "shallowRef", "selectedRow", "triggerCheckedRows", "triggerRef", "clearChecked", "row", "clearSelected", "watch", "changedByModel", "changedByEvent", "toRaw", "nextTick", "dicts", "setDicts", "mapEntries", "i", "checked", "rowKey", "checkable", "_", "__", "___", "oRows", "item", "getChainValue", "selected", "selectable", "allChecked", "computed", "rowSize", "_a", "_b", "handleCheckAllTree", "check", "handleCheckAllRows", "handleCheckAll", "handleCheckRow", "child", "getCheckboxColumnWidth", "checkboxClass", "checkboxClick", "e", "createCheckColumn", "checkboxNode", "createVNode", "UCheckbox", "ctx", "val", "handleSelect", "createSelectColumn", "width", "createTextVNode", "useTable", "options", "props", "cls", "slots", "useSlots", "ctx", "column", "render", "key", "slotsRender", "_a", "nameRender", "classList", "bem", "row", "rowData", "val", "getChainValue", "props", "__props", "emit", "__emit", "slots", "_useSlots", "cls", "bem", "size", "useFallbackProps", "colgroupRef", "shallowRef", "rows", "toggleTreeRowExpand", "allExpanded", "toggleAllTreeRowExpand", "rowForest", "handleRowClick", "getRowByData", "useRows", "createCheckColumn", "createSelectColumn", "clearChecked", "clearSelected", "useCheck", "columnConfig", "useColumns", "allColumns", "updateStylesOfColumns", "getColumnSlotsNode", "getHeaderSlotsNode", "getCellClass", "getCellCtx", "useTable", "scrollRef", "virtualCtx", "useVirtual", "computed", "_a", "virtualList", "totalHeight", "spaceHeight", "spaceRef", "watch", "setStyles", "tipRef", "provide", "TableDIKey", "__expose", "toRef", "t", "we", "fe", "cls", "state", "tableRef", "props", "emit", "featureSets", "handleCreate", "handleDelete", "handleInsertToNext", "handleInsertToPrev", "handleInsertChild", "inject", "BatchEditDIKey", "tableProps", "computed", "omit", "hasNot", "value", "v", "columns", "ButtonWrap", "useComponentProps", "handleUpdateCurrentRow", "row", "GridDIKey", "points", "getContainerBreakpoint", "width", "i", "point", "getBreakpointCols", "colConf", "breakpoint", "name", "level", "cols", "highLevelPoints", "pointName", "useResponsive", "options", "props", "gridRef", "emit", "gridItemsProps", "shallowReactive", "responsive", "computed", "currentBreakpoint", "shallowRef", "observer", "watch", "dom", "debounce", "entry", "target", "rect", "breakpoint", "getContainerBreakpoint", "equal", "onBeforeUnmount", "props", "__props", "emit", "__emit", "cls", "bem", "gridRef", "shallowRef", "currentBreakpoint", "gridItemsProps", "useResponsive", "watchEffect", "gap", "cols", "breakpoint", "style", "rowGap", "columnGap", "withUnit", "amount", "getBreakpointCols", "setStyles", "provide", "GridDIKey", "__expose", "e", "o", "FORM_ITEM_PROPS", "id", "createIncrease", "useNodeInterceptor", "options", "props", "slots", "useSlots", "formId", "getSlotsNodes", "model", "nodes", "_a", "flattedNodes", "extractNormalVNodes", "results", "fields", "i", "node", "type", "item", "pick", "onBeforeUnmount", "props", "__props", "cls", "bem", "currentBreakpoint", "gridItemsProps", "inject", "GridDIKey", "span", "computed", "breakpoint", "style", "watch", "e", "l", "o", "props", "__props", "cls", "bem", "formProps", "useFormComponent", "config", "useConfig", "size", "readonly", "useFallbackProps", "className", "computed", "b", "m", "value", "is", "errorTips", "join", "labelStyles", "width", "withUnit", "labelWidth", "form", "field", "model", "errors", "get", "fieldRequired", "required", "fields", "props", "__props", "model", "toRef", "cls", "bem", "breakpointCols", "useFormComponent", "getSlotsNodes", "useNodeInterceptor", "handleUpdateValue", "field", "value", "data", "setChainValue", "gridRef", "shallowRef", "__expose", "_a", "e", "s", "A", "props", "__props", "style", "computed", "injected", "inject", "CardDIKey", "cls", "c", "_", "cls", "props", "state", "insertIndexes", "handleSave", "handleClose", "inject", "BatchEditDIKey", "props", "__props", "emit", "__emit", "featureSets", "computed", "slots", "_useSlots", "cls", "bem", "tableRef", "shallowRef", "editCtx", "useEdit", "state", "handleClose", "provide", "BatchEditDIKey", "dialogCtx", "inject", "DialogDIKey", "watch", "visible", "cols", "defineBatchEditColumns", "columns", "props", "__props", "cls", "bem", "weekDays", "getMonthDays", "d", "disabledDate", "todayStr", "date", "currentMonthDays", "_", "i", "day", "preMonthDays", "nextMonthDays", "firstDayWeek", "nextMonthDaysAmount", "j", "getYearMonths", "year", "month", "ym", "getTenYears", "startYear", "model", "_useModel", "__props", "cls", "bem", "days", "computed", "getMonthDays", "props", "__props", "injected", "inject", "CardDIKey", "cls", "style", "computed", "withUnit", "props", "__props", "style", "computed", "injected", "inject", "CardDIKey", "cls", "a", "v", "CascadeDIKey", "useSelect", "options", "emit", "props", "nodeDict", "forest", "selected", "shallowReactive", "isEcho", "selectParentNodes", "node", "currentNode", "selectedNodes", "deselectSiblingNodes", "_a", "sibling", "watch", "modelValue", "nodes", "Tree", "item", "nextTick", "c", "selectedArr", "dataItem", "selectedNode", "parentNode", "useCheck", "options", "emit", "props", "nodeDict", "forest", "checked", "shallowReactive", "isEcho", "watch", "c", "oc", "key", "node", "nextTick", "checkedArr", "item", "handleCheck", "check", "checkStrictly", "Tree", "parent", "child", "props", "__props", "injected", "inject", "CascadeDIKey", "cls", "cascadeProps", "size", "close", "updatePosition", "handleSelect", "handleCheck", "cascade", "labelKey", "valueKey", "childrenKey", "multiple", "depthIndex", "ref", "parentNodes", "scrollRef", "shallowRef", "isEchoing", "shouldShowLevel", "level", "data", "addUniqueItem", "array", "item", "handleClick", "option", "nextTick", "initData", "_a", "node", "echo", "arr", "echoData", "index", "watch", "val", "scroll", "nextFrame", "e", "l", "injected", "inject", "CascadeDIKey", "cls", "cascadeProps", "cascadeMulti", "disabled", "readonly", "hovered", "size", "clear", "remove", "placeholder", "clearable", "limit", "visibilityLimit", "_a", "visibleTags", "computed", "hiddenCount", "handleRemove", "tag", "handleClear", "props", "__props", "injected", "inject", "CascadeDIKey", "cls", "size", "handleFilter", "getNodePath", "cascade", "qsClear", "close", "selectedIndex", "shallowRef", "filteredPaths", "computed", "node", "path", "handleClick", "data", "index", "watch", "val", "e", "l", "fe", "CascadeNode", "_CascadeNode", "params", "data", "index", "parent", "labelKey", "valueKey", "__publicField", "shallowReactive", "getChainValue", "cls", "bem", "emit", "__emit", "props", "__props", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "hovered", "shallowRef", "cascadeData", "qs", "forest", "computed", "options", "disabledNode", "Forest", "node", "nodeDict", "dict", "dropdownRef", "close", "_a", "open", "updatePosition", "handleSelect", "selected", "useSelect", "checked", "handleCheck", "useCheck", "separateByDepth", "result", "traverse", "child", "item", "a", "b", "key", "cascade", "watch", "option", "getNodePath", "path", "currentNode", "cascadeMulti", "paths", "p", "i", "clear", "remove", "tag", "del", "filterData", "qsClear", "provide", "CascadeDIKey", "filter", "nodePath", "e", "T", "f", "cls", "bem", "props", "__props", "emits", "__emit", "classList", "computed", "handleChange", "props", "__props", "model", "_useModel", "cls", "bem", "formProps", "useFormComponent", "size", "disabled", "useFormFallbackProps", "getCheckStatus", "item", "valueKey", "value", "handleUpdate", "checked", "_a", "v", "ContextMenuDIKey", "emit", "__emit", "cls", "inject", "ContextMenuDIKey", "loading", "shallowRef", "disabled", "computed", "__props", "handleClickMenu", "result", "_b", "_a", "props", "__props", "emit", "__emit", "size", "useFallbackProps", "cls", "bem", "contextMenuRef", "shallowRef", "visible", "computePosition", "position", "mousePosition", "x", "y", "positionY", "positionX", "objMap", "v", "withUnit", "style", "computed", "zIndex", "menus", "getMenuDisabled", "menu", "close", "loading", "handleClickStart", "handleClickEnd", "handleClickOutside", "provide", "ContextMenuDIKey", "t", "o", "node", "contextmenu", "options", "render", "createVNode", "MContextMenu", "diKey", "useDate", "type", "config", "inject", "props", "emit", "closeDropdown", "formats", "formatStr", "computed", "typePanels", "cls", "bem", "currentDate", "date", "state", "shallowReactive", "updatePanelDate", "_a", "panels", "watch", "v", "showNextPanel", "index", "handlePreYear", "handlePreMonth", "handleNextYear", "handleNextMonth", "handlePreTenYears", "handleNextTenYears", "ctx", "provide", "cls", "pickerProps", "state", "pickerEmit", "formatStr", "closeDropdown", "useDate", "days", "computed", "getMonthDays", "didDaySelect", "date", "fmtStr", "handleSelectDate", "day", "cls", "state", "pickerProps", "pickerEmit", "showNextPanel", "closeDropdown", "formatStr", "useDate", "months", "computed", "getYearMonths", "handleSelectMonth", "month", "date", "didMonthSelected", "cls", "state", "pickerProps", "pickerEmit", "showNextPanel", "closeDropdown", "formatStr", "useDate", "years", "computed", "getTenYears", "didYearSelected", "year", "handleSelectYear", "dateStr", "date", "props", "__props", "size", "useFallbackProps", "cls", "bem", "className", "computed", "loadingCls", "bem", "loadingContainerCls", "renderLoading", "el", "binding", "node", "createVNode", "LoadingComponent", "render", "removeLoading", "vLoading", "typeIcons", "InfoFilled", "QuestionFilled", "CircleCheckFilled", "WarningFilled", "CircleCloseFilled", "getTypeIcon", "type", "icon", "typeColors", "getTypeColor", "props", "__props", "emit", "__emit", "size", "useFallbackProps", "cls", "bem", "startTime", "timer", "restDuration", "close", "startClose", "onMounted", "suspendClose", "immediateClose", "emit", "__emit", "handleAfterLeave", "el", "handleClose", "i", "onClose", "messageTypes", "uid", "cls", "bem", "messageApp", "messages", "shallowReactive", "count", "closedCallbacks", "handleRemove", "id", "closeMessage", "index", "renderMessageBox", "createApp", "h", "UMessageBox", "container", "setStyles", "zIndex", "msg", "options", "onClosed", "messageOptions", "key", "message", "type", "config", "props", "__props", "size", "useFallbackProps", "cls", "bem", "visible", "ref", "onMounted", "close", "action", "ColorTypeArray", "MessageConfirm", "options", "container", "vm", "createVNode", "UMessageConfirm", "zIndex", "render", "type", "message", "onClose", "props", "__props", "type", "size", "useFallbackProps", "typeIcon", "computed", "InfoFilled", "QuestionFilled", "CircleCheckFilled", "WarningFilled", "CircleCloseFilled", "cls", "bem", "visible", "ref", "onMounted", "startTimer", "close", "customStyle", "timer", "clearTimer", "handleClick", "e", "__expose", "o", "v", "notificationQueue", "reactive", "length", "key", "count", "close", "id", "position", "userClose", "index", "vm", "offset", "temp", "i", "wrapper", "createWrapper", "options", "e", "innerCount", "innerOffset", "width", "height", "_a", "_b", "_c", "Notification", "container", "createVNode", "UNotification", "zIndex", "render", "freeGlobal", "freeSelf", "root", "Symbol", "objectProto", "hasOwnProperty", "nativeObjectToString", "symToStringTag", "getRawTag", "value", "isOwn", "tag", "unmasked", "result", "objectToString", "nullTag", "undefinedTag", "baseGetTag", "isObjectLike", "isArray", "isObject", "type", "identity", "asyncTag", "funcTag", "genTag", "proxyTag", "isFunction", "coreJsData", "maskSrcKey", "uid", "isMasked", "func", "funcProto", "funcToString", "toSource", "reRegExpChar", "reIsHostCtor", "reIsNative", "baseIsNative", "pattern", "getValue", "object", "key", "getNative", "WeakMap", "objectCreate", "baseCreate", "proto", "apply", "thisArg", "args", "copyArray", "source", "array", "index", "length", "HOT_COUNT", "HOT_SPAN", "nativeNow", "shortOut", "count", "lastCalled", "stamp", "remaining", "constant", "defineProperty", "baseSetToString", "string", "setToString", "arrayEach", "iteratee", "MAX_SAFE_INTEGER", "reIsUint", "isIndex", "baseAssignValue", "eq", "other", "assignValue", "objValue", "copyObject", "props", "customizer", "isNew", "newValue", "nativeMax", "overRest", "start", "transform", "otherArgs", "baseRest", "isLength", "isArrayLike", "isIterateeCall", "createAssigner", "assigner", "sources", "guard", "isPrototype", "Ctor", "baseTimes", "n", "argsTag", "baseIsArguments", "propertyIsEnumerable", "isArguments", "stubFalse", "freeExports", "freeModule", "moduleExports", "Buffer", "nativeIsBuffer", "isBuffer", "arrayTag", "boolTag", "dateTag", "errorTag", "mapTag", "numberTag", "objectTag", "regexpTag", "setTag", "stringTag", "weakMapTag", "arrayBufferTag", "dataViewTag", "float32Tag", "float64Tag", "int8Tag", "int16Tag", "int32Tag", "uint8Tag", "uint8ClampedTag", "uint16Tag", "uint32Tag", "typedArrayTags", "baseIsTypedArray", "baseUnary", "freeProcess", "nodeUtil", "types", "nodeIsTypedArray", "isTypedArray", "arrayLikeKeys", "inherited", "isArr", "isArg", "isBuff", "isType", "skipIndexes", "overArg", "arg", "nativeKeys", "baseKeys", "keys", "nativeKeysIn", "baseKeysIn", "isProto", "keysIn", "nativeCreate", "hashClear", "hashDelete", "HASH_UNDEFINED", "hashGet", "data", "hashHas", "hashSet", "Hash", "entries", "entry", "listCacheClear", "assocIndexOf", "arrayProto", "splice", "listCacheDelete", "lastIndex", "listCacheGet", "listCacheHas", "listCacheSet", "ListCache", "Map", "mapCacheClear", "isKeyable", "getMapData", "map", "mapCacheDelete", "mapCacheGet", "mapCacheHas", "mapCacheSet", "size", "MapCache", "arrayPush", "values", "offset", "getPrototype", "objectCtorString", "isPlainObject", "stackClear", "stackDelete", "stackGet", "stackHas", "LARGE_ARRAY_SIZE", "stackSet", "pairs", "Stack", "baseAssign", "baseAssignIn", "allocUnsafe", "cloneBuffer", "buffer", "isDeep", "arrayFilter", "predicate", "resIndex", "stubArray", "nativeGetSymbols", "getSymbols", "symbol", "copySymbols", "getSymbolsIn", "copySymbolsIn", "baseGetAllKeys", "keysFunc", "symbolsFunc", "getAllKeys", "getAllKeysIn", "DataView", "Promise", "Set", "promiseTag", "dataViewCtorString", "mapCtorString", "promiseCtorString", "setCtorString", "weakMapCtorString", "getTag", "ctorString", "initCloneArray", "Uint8Array", "cloneArrayBuffer", "arrayBuffer", "cloneDataView", "dataView", "reFlags", "cloneRegExp", "regexp", "symbolProto", "symbolValueOf", "cloneSymbol", "cloneTypedArray", "typedArray", "symbolTag", "initCloneByTag", "initCloneObject", "baseIsMap", "nodeIsMap", "isMap", "baseIsSet", "nodeIsSet", "isSet", "CLONE_DEEP_FLAG", "CLONE_FLAT_FLAG", "CLONE_SYMBOLS_FLAG", "cloneableTags", "baseClone", "bitmask", "stack", "isFlat", "isFull", "isFunc", "stacked", "subValue", "cloneDeep", "setCacheAdd", "setCacheHas", "SetCache", "arraySome", "cacheHas", "cache", "COMPARE_PARTIAL_FLAG", "COMPARE_UNORDERED_FLAG", "equalArrays", "equalFunc", "isPartial", "arrLength", "othLength", "arrStacked", "othStacked", "seen", "arrValue", "othValue", "compared", "othIndex", "mapToArray", "setToArray", "set", "equalByTag", "convert", "equalObjects", "objProps", "objLength", "othProps", "objStacked", "skipCtor", "objCtor", "othCtor", "baseIsEqualDeep", "objIsArr", "othIsArr", "objTag", "othTag", "objIsObj", "othIsObj", "isSameTag", "objIsWrapped", "othIsWrapped", "objUnwrapped", "othUnwrapped", "baseIsEqual", "createBaseFor", "fromRight", "iterable", "baseFor", "assignMergeValue", "isArrayLikeObject", "safeGet", "toPlainObject", "baseMergeDeep", "srcIndex", "mergeFunc", "srcValue", "isCommon", "isTyped", "baseMerge", "isEqual", "merge", "Scope", "Scope2", "Attributor", "attrName", "keyName", "options", "attributeBit", "node", "item", "_node", "ParchmentError", "message", "_Registry", "bubble", "parentNode", "scroll", "input", "match2", "blotClass", "blot", "query", "scope", "name", "definitions", "definition", "isBlot", "isAttr", "tagName", "Registry", "match", "prefix", "ClassAttributor", "ClassAttributor$1", "camelize", "parts", "rest", "part", "StyleAttributor", "StyleAttributor$1", "AttributorStore", "domNode", "attribute", "attributes", "classes", "styles", "attr", "target", "AttributorStore$1", "_ShadowBlot", "rawValue", "parent", "def", "ref", "_context", "replacement", "_force", "_mutations", "wrapper", "ShadowBlot", "_LeafBlot", "_domNode", "_inclusive", "LeafBlot", "LeafBlot$1", "LinkedList", "nodes", "next", "cur", "refNode", "curNode", "ret", "inclusive", "callback", "startNode", "curIndex", "curLength", "memo", "makeAttachedBlot", "found", "child", "_ParentBlot", "err", "childLength", "criteria", "descendants", "lengthLeft", "childIndex", "done", "childBlot", "refBlot", "refDomNode", "targetParent", "context", "position", "force", "after", "_length", "split", "mutations", "addedNodes", "removedNodes", "mutation", "a", "b", "ParentBlot", "ParentBlot$1", "obj1", "obj2", "prop", "_InlineBlot", "format", "formats", "InlineBlot", "InlineBlot$1", "_BlockBlot", "BlockBlot", "BlockBlot$1", "_ContainerBlot", "ContainerBlot", "ContainerBlot$1", "EmbedBlot", "_scroll", "EmbedBlot$1", "OBSERVER_CONFIG", "MAX_OPTIMIZE_ITERATIONS", "_ScrollBlot", "registry", "mutationsMap", "records", "mark", "markParent", "optimize", "i", "grandChild", "ScrollBlot", "ScrollBlot$1", "_TextBlot", "TextBlot", "TextBlot$1", "DIFF_DELETE", "DIFF_INSERT", "DIFF_EQUAL", "diff_main", "text1", "text2", "cursor_pos", "cleanup", "_fix_unicode", "editdiff", "find_cursor_edit_diff", "commonlength", "diff_commonPrefix", "commonprefix", "diff_commonSuffix", "commonsuffix", "diffs", "diff_compute_", "diff_cleanupMerge", "diff_cleanupSemantic", "longtext", "shorttext", "hm", "diff_halfMatch_", "text1_a", "text1_b", "text2_a", "text2_b", "mid_common", "diffs_a", "diffs_b", "diff_bisect_", "text1_length", "text2_length", "max_d", "v_offset", "v_length", "v1", "v2", "x", "delta", "front", "k1start", "k1end", "k2start", "k2end", "d", "k1", "k1_offset", "x1", "y1", "k2_offset", "x2", "diff_bisectSplit_", "k2", "y2", "y", "text1a", "text2a", "text1b", "text2b", "diffsb", "pointermin", "pointermax", "pointermid", "pointerstart", "is_surrogate_pair_start", "diff_commonOverlap_", "text_length", "best", "pointerend", "is_surrogate_pair_end", "diff_halfMatchI_", "seed", "j", "best_common", "best_longtext_a", "best_longtext_b", "best_shorttext_a", "best_shorttext_b", "prefixLength", "suffixLength", "hm1", "hm2", "changes", "equalities", "equalitiesLength", "lastequality", "pointer", "length_insertions1", "length_deletions1", "length_insertions2", "length_deletions2", "diff_cleanupSemanticLossless", "deletion", "insertion", "overlap_length1", "overlap_length2", "nonAlphaNumericRegex_", "whitespaceRegex_", "linebreakRegex_", "blanklineEndRegex_", "blanklineStartRegex_", "diff_cleanupSemanticScore_", "one", "two", "char1", "char2", "nonAlphaNumeric1", "nonAlphaNumeric2", "whitespace1", "whitespace2", "lineBreak1", "lineBreak2", "blankLine1", "blankLine2", "equality1", "edit", "equality2", "commonOffset", "commonString", "bestEquality1", "bestEdit", "bestEquality2", "bestScore", "score", "fix_unicode", "count_delete", "count_insert", "text_delete", "text_insert", "previous_equality", "ends_with_pair_start", "stray", "k", "starts_with_pair_end", "charCode", "str", "remove_empty_tuples", "tuples", "make_edit_splice", "before", "oldMiddle", "newMiddle", "oldText", "newText", "oldRange", "newRange", "oldLength", "newLength", "oldCursor", "oldBefore", "oldAfter", "maybeNewCursor", "editBefore", "newCursor", "newBefore", "newAfter", "oldPrefix", "newPrefix", "editAfter", "cursor", "oldSuffix", "newSuffix", "replaceRange", "diff", "diff_1", "global", "exports", "module", "addMapEntry", "pair", "addSetEntry", "arrayReduce", "accumulator", "initAccum", "isHostObject", "cloneMap", "cloneFunc", "cloneSet", "AttributeMap_1", "require$$0", "require$$1", "AttributeMap", "compose", "keepNull", "copy", "attrs", "invert", "base", "baseInverted", "priority", "Op_1", "Op", "op", "OpIterator", "Iterator", "ops", "nextOp", "opLength", "retOp", "t", "require$$2", "require$$3", "require$$4", "OpIterator_1", "require$$5", "NULL_CHARACTER", "getEmbedTypeAndData", "embedType", "Delta", "handler", "newOp", "lastOp", "passed", "failed", "initialValue", "elem", "end", "iter", "thisIter", "otherIter", "firstOther", "firstLeft", "thisOp", "otherOp", "action", "thisData", "otherData", "strings", "prep", "retDelta", "diffResult", "component", "newline", "line", "inverted", "baseIndex", "baseOp", "slice", "opData", "baseOpData", "transformedData", "nextType", "Break", "Text$1", "escapeText", "text", "s", "_Inline", "self", "selfIndex", "otherIndex", "__publicField", "Text", "Inline", "NEWLINE_LENGTH", "Block", "blockDelta", "lines", "block", "lineIndex", "head", "clone", "BlockEmbed", "blocks", "filter", "leaf", "bubbleFormats", "_Cursor", "selection", "range", "prevTextBlot", "prevTextLength", "nextTextBlot", "nextText", "textNode", "mergedTextBlot", "newTextNode", "remapOffset", "Cursor", "has", "Events", "EE", "fn", "once", "addListener", "emitter", "event", "listener", "evt", "clearEvent", "EventEmitter", "names", "events", "handlers", "l", "ee", "listeners", "a1", "a2", "a3", "a4", "a5", "len", "instances", "levels", "level", "debug", "method", "_len", "_key", "namespace", "ns", "logger", "newLevel", "EVENTS", "eventName", "quill", "Emitter", "_len2", "_key2", "_len3", "_key3", "_ref", "Range", "Selection", "native", "triggeredByTyping", "startOffset", "endNode", "endOffset", "nativeRange", "scrollLength", "nextLine", "side", "rect", "normalized", "contains", "positions", "indexes", "getPosition", "leafOffset", "lastRange", "descendant", "ASCII", "Editor", "normalizedDelta", "normalizeDelta", "deleteDelta", "splitOpLines", "isImplicitNewlinePrepended", "isImplicitNewlineAppended", "isInlineEmbed", "prependedLength", "addedLength", "leaves", "path", "lineFormats", "leafFormats", "blots", "combineFormats", "lineOffset", "lineLength", "convertHTML", "contents", "change", "embed", "suffix", "selectionInfo", "oldDelta", "textBlot", "oldValue", "CursorBlot", "relativeSelectionInfo", "shiftRange", "convertListHTML", "items", "lastIndent", "endTag", "getListType", "indent", "previousType", "isRoot", "outerHTML", "innerHTML", "combined", "merged", "combinedValue", "amount", "Module", "GUARD_TEXT", "Embed", "childNode", "prevLength", "Composition", "_Theme", "ModuleClass", "Theme", "getParentElement", "element", "getElementRect", "scaleX", "scaleY", "paddingValueToInt", "number", "getScrollDistance", "targetStart", "targetEnd", "scrollStart", "scrollEnd", "scrollPaddingStart", "scrollPaddingEnd", "scrollRectIntoView", "targetRect", "_a", "_b", "_c", "document", "current", "isDocumentBody", "bounding", "style", "scrollDistanceX", "scrollDistanceY", "scrollLeft", "scrollTop", "scrolledLeft", "scrolledTop", "MAX_REGISTER_ITERATIONS", "CORE_FORMATS", "createRegistryWithFormats", "sourceRegistry", "coreBlot", "iterations", "globalRegistry", "Parchment.Registry", "Parchment.ParentBlot", "_Quill", "limit", "overwrite", "container", "expandConfig", "html", "scrollBlotName", "Parchment.ScrollBlot", "modify", "className", "overload", "modifier", "enabled", "Parchment.Scope", "bounds", "containerBounds", "delete1", "applied", "delete2", "Parchment", "Quill", "resolveSelector", "selector", "expandModuleConfig", "config", "expanded", "omitUndefinedValuesFromOptions", "obj", "containerOrSelector", "theme", "quillModuleDefaults", "quillDefaults", "themeModuleDefaults", "themeDefaults", "userModuleOptions", "modules", "modulesWithDefaults", "_ref2", "moduleClass", "shift", "lengthOrSource", "pos", "Container", "isLine", "isUpdatable", "Scroll", "e", "first", "last", "renderBlocks", "shouldInsertNewlineChar", "insertInlineContents", "newlineCharLength", "lineEndIndex", "refBlotOffset", "renderBlock", "blockEmbed", "getLines", "blotIndex", "blotLength", "currentBlockDelta", "insert", "splitted", "blotName", "_ref3", "_ref4", "inlineContents", "AlignAttribute", "AlignClass", "AlignStyle", "ColorAttributor", "ColorClass", "ColorStyle", "BackgroundClass", "BackgroundStyle", "CodeBlockContainer", "CodeBlock", "Code", "DirectionAttribute", "DirectionClass", "DirectionStyle", "FontClass", "FontStyleAttributor", "FontStyle", "SizeClass", "SizeStyle", "SHORTKEY", "Keyboard", "binding", "keyBinding", "normalize", "singleBinding", "matches", "leafStart", "offsetStart", "leafEnd", "offsetEnd", "prefixText", "suffixText", "curContext", "prev", "curFormats", "prevFormats", "formatDelta", "nextFormats", "deleteRange", "defaultOptions", "makeFormatHandler", "makeCodeBlockHandler", "table", "row", "cell", "tableSide", "numLines", "makeEmbedArrowHandler", "makeTableArrowHandler", "TAB", "shiftKey", "up", "targetRow", "targetCell", "targetLine", "firstFormats", "lastFormats", "_table", "normalWeightRegexp", "blockTagNames", "isBlockElement", "normalizeEmptyLines", "doc", "br", "normalizeFontWeight", "fragment", "ignoreRegexp", "idRegexp", "indentRegexp", "parseListItem", "idMatch", "id", "indentMatch", "typeRegexp", "typeMatch", "normalizeListItem", "msoList", "ignored", "others", "listItems", "parsed", "childListItems", "ul", "listItem", "li", "NORMALIZERS", "msWord", "googleDocs", "normalizeExternalHTML", "CLIPBOARD_CONFIG", "matchText", "matchNewline", "matchBreak", "matchBlot", "matchAttributor", "matchStyles", "matchIndent", "matchList", "matchCodeBlock", "matchTable", "createMatchAlias", "matchIgnore", "ATTRIBUTE_ATTRIBUTORS", "STYLE_ATTRIBUTORS", "Clipboard", "matcher", "deltaEndsWith", "nodeMatches", "elementMatchers", "textMatchers", "traverse", "paste", "isCut", "urlList", "url", "_d", "_e", "files", "pastedDelta", "applyFormat", "newDelta", "endText", "isBetweenInlineElements", "preNodes", "isPre", "childrenDelta", "reducedDelta", "language", "composed", "list", "checkedAttr", "nextSibling", "_ref5", "replacer", "collapse", "replaced", "History", "transformRange", "dest", "inverseDelta", "changeDelta", "undoDelta", "undoRange", "timestamp", "transformStack", "stackItem", "getLastChangeIndex", "remoteDelta", "oldItem", "endsWithNewlineChange", "deleteLength", "changeIndex", "Uploader", "uploads", "file", "promises", "resolve", "reader", "images", "update", "image", "INSERT_TYPES", "Input", "staticRange", "getPlainTextFromInputEvent", "isMac", "TTL_FOR_VALID_SELECTION_CHANGE", "canMoveCaretBeforeUINode", "UINode", "isRTL", "IndentAttributor", "normalizedValue", "IndentClass", "Blockquote", "Header", "ListContainer", "ListItem", "ui", "listEventHandler", "Bold", "Italic", "Link", "sanitize", "protocols", "anchor", "protocol", "Script", "Strike", "Underline", "Formula", "formula", "ATTRIBUTES", "Image", "Video", "video", "TokenAttributor", "CodeToken", "SyntaxCodeBlock", "SyntaxCodeBlockContainer", "highlight", "forced", "retain", "codeBlock", "BreakBlot", "lib", "majorVersion", "Syntax", "select", "label", "option", "timer", "nodeText", "_TableCell", "tableId", "TableCell", "TableRow", "thisHead", "thisTail", "nextHead", "nextTail", "childFormats", "TableBody", "TableContainer", "rows", "maxColumns", "max", "column", "body", "Table", "columns", "old", "Toolbar", "addControls", "selected", "isActive", "addButton", "groups", "controls", "group", "control", "addSelect", "align", "alignLeftIcon", "alignCenterIcon", "alignRightIcon", "alignJustifyIcon", "backgroundIcon", "blockquoteIcon", "boldIcon", "cleanIcon", "codeIcon", "colorIcon", "directionLeftToRightIcon", "directionRightToLeftIcon", "formulaIcon", "headerIcon", "header2Icon", "header3Icon", "header4Icon", "header5Icon", "header6Icon", "italicIcon", "imageIcon", "indentIcon", "outdentIcon", "linkIcon", "listBulletIcon", "listCheckIcon", "listOrderedIcon", "subscriptIcon", "superscriptIcon", "strikeIcon", "tableIcon", "underlineIcon", "videoIcon", "Icons", "DropdownIcon", "optionsCounter", "toggleAriaAttribute", "Picker", "trigger", "ColorPicker", "colorLabel", "IconPicker", "icons", "isScrollable", "el", "overflowY", "Tooltip", "boundsContainer", "reference", "left", "top", "rootBounds", "height", "verticalShift", "ALIGNS", "COLORS", "FONTS", "HEADERS", "SIZES", "BaseTheme", "picker", "buttons", "button", "selects", "fillSelect", "fileInput", "BaseTooltip", "mode", "preview", "extractVideoUrl", "defaultValue", "TOOLBAR_CONFIG", "BubbleTooltip", "lastLine", "indexBounds", "arrow", "BubbleTheme", "toolbar", "SnowTooltip", "link", "LinkBlot", "SnowTheme", "_range", "tooltip", "Indent", "List", "InlineCode", "HEXToRGB", "color", "hex", "r", "g", "b", "r10", "g10", "b10", "mixColor", "color1", "color2", "ratio", "color1RGB", "color2RGB", "color1Ratio", "n", "i", "theme", "reactive", "renderThemeColor", "color", "types", "rates", "type", "colorKey", "colorValue", "rateColors", "rate", "light", "mixColor", "dark", "renderOtherTheme", "themeRules", "parentKey", "key", "value", "varKey", "kebabCase", "withUnit", "renderShadow", "k", "v", "renderBorder", "renderBGColorAlpha", "loadTheme", "rest", "ruleText", "themeID", "style", "watchEffect", "state", "cls", "handlePreYear", "handlePreMonth", "handleNextYear", "handleNextMonth", "useDate", "state", "cls", "handlePreYear", "handleNextYear", "useDate", "state", "cls", "handlePreTenYears", "handleNextTenYears", "useDate", "startYear", "computed", "endYear", "state", "useDate", "props", "__props", "emit", "__emit", "cls", "bem", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "className", "computed", "dropdownRef", "shallowRef", "updatePanelDate", "useDate", "_a", "createToggle", "initial", "onChange", "state", "toggle", "active", "result", "useCssTransition", "options", "name", "target", "afterEnter", "afterLeave", "enterCanceled", "leaveCanceled", "keepEnterTo", "getDom", "isRef", "classes", "computed", "_name", "startTransitionIn", "enterActive", "enterTo", "enterFrom", "dom", "nextFrame", "startTransitionOut", "leaveTo", "leaveActive", "leaveFrom", "transitionEndHandler", "e", "active", "transitionCancelHandler", "toggle", "createToggle", "addEvent", "el", "removeEvent", "watch", "oldTarget", "onBeforeUnmount", "watchTransition", "domGetter", "config", "runCallback", "e", "cb", "transitionEndHandler", "transitionCancelHandler", "addEvent", "el", "removeEvent", "watch", "target", "oldTarget", "onBeforeUnmount", "useStyleTransition", "options", "enterTo", "enterActive", "leaveActive", "target", "afterEnter", "afterLeave", "enterCanceled", "leaveCanceled", "getDom", "isRef", "transitionOriginStyle", "getOriginStyles", "styles", "key", "watch", "dom", "map", "addEnterActive", "setStyles", "removeEnterActive", "addLeaveActive", "removeLeaveActive", "addEnterToStyle", "removeEnterToStyle", "startEnter", "nextFrame", "startLeave", "active", "toggle", "createToggle", "watchTransition", "el", "useTransition", "type", "options", "useCssTransition", "useStyleTransition", "useMaximum", "options", "dialogRef", "maximized", "shallowRef", "maximizeTransition", "useTransition", "removeStyles", "maxim", "dom", "setStyles", "__default__", "Ue", "props", "__props", "emit", "__emit", "slots", "_useSlots", "cls", "bem", "blurCls", "headerCls", "footerCls", "size", "useFallbackProps", "overlayRef", "shallowRef", "dialogRef", "headerRef", "bodyRef", "footerRef", "visible", "_useModel", "getTriggerNode", "nodes", "_a", "extractNormalVNodes", "dialogTransition", "useTransition", "toggleMaximize", "maximized", "useMaximum", "className", "computed", "opened", "watch", "v", "nextFrame", "setStyles", "translated", "nextTick", "zIndex", "updateDialogTransform", "x", "y", "dom", "useDrag", "handleIncreaseZIndex", "close", "provide", "DialogDIKey", "__expose", "o", "e", "props", "__props", "emit", "__emit", "cls", "bem", "fileRef", "shallowRef", "handleChange", "e", "target", "handleClickPicker", "_a", "emit", "__emit", "cls", "bem", "hoveredCls", "floatButtonRef", "shallowRef", "itemsRef", "hovered", "handleMouseEnter", "_a", "item", "setStyles", "handleMouseLeave", "handleTransitionEnd", "index", "e", "removeStyles", "formField", "item", "isEmpty", "value", "presetRules", "v", "ruleTypes", "required", "errMsg", "rule", "_rule", "ruleValidator", "Validator", "rules", "config", "__publicField", "_", "data", "fields", "fieldErrors", "lazy", "_a", "i", "field", "errors", "getChainValue", "validator", "normalRules", "err", "ruleKey", "validate", "item", "createMiddleProxy", "o", "handler", "options", "weakMap", "parentsField", "changedFields", "target", "field", "val", "_a", "changedField", "valProxy", "middleProxy", "FormModel", "fields", "__publicField", "shallowReactive", "rawData", "allKeys", "key", "fieldItem", "value", "v", "watch", "setChainValue", "reactive", "Validator", "proxyData", "data", "middleProxy", "field", "val", "cb", "_fields", "errors", "validator", "results", "errs", "keys", "getChainValue", "formData", "config", "validate", "DynamicFormModel", "fields", "__publicField", "reactive", "shallowReactive", "Validator", "v", "isReactive", "oldData", "watch", "data", "changedKeys", "key", "oldVal", "getChainValue", "newVal", "cb", "setChainValue", "field", "item", "value", "errors", "validator", "results", "errs", "_fields", "keys", "formData", "config", "validate", "cls", "bem", "useGroupItems", "options", "props", "emit", "id", "createIncrease", "items", "shallowRef", "createItem", "data", "isReactive", "shallowReactive", "changedByEvent", "changedByModelValue", "runByEvent", "cb", "nextTick", "watch", "modelValue", "item", "props", "__props", "emit", "__emit", "cls", "bem", "formProps", "useFormComponent", "disabled", "size", "readonly", "useFormFallbackProps", "items", "createItem", "runByEvent", "useGroupItems", "isEmpty", "computed", "handleAdd", "index", "handleRemove", "emit", "__emit", "props", "__props", "size", "useFallbackProps", "cls", "bem", "_numberReg", "computed", "valueArray", "ref", "position", "blur", "instance", "getCurrentInstance", "focus", "index", "dom", "changeValue", "value", "v", "baseOperation", "onKeydown", "e", "__expose", "t", "props", "__props", "size", "useFallbackProps", "cls", "bem", "cls", "bem", "MenuDIKey", "props", "__props", "cls", "menuProps", "menuEmit", "inject", "MenuDIKey", "itemRef", "shallowRef", "active", "computed", "watch", "e", "i", "getKey", "index", "parentKey", "useMenuTransition", "enterTransition", "leaveTransition", "enter", "el", "height", "setStyles", "afterEnter", "removeStyles", "beforeLeave", "leave", "afterLeave", "props", "__props", "cls", "expandedPath", "menuProps", "inject", "MenuDIKey", "enter", "afterEnter", "beforeLeave", "leave", "afterLeave", "useMenuTransition", "expanded", "computed", "handleToggleExpand", "menu", "props", "__props", "cls", "menuProps", "menuEmit", "inject", "MenuDIKey", "itemRef", "shallowRef", "active", "computed", "watch", "trigger", "tipRef", "handleMenuItemClick", "menu", "props", "__props", "cls", "expandedPath", "menuProps", "inject", "MenuDIKey", "enter", "afterEnter", "beforeLeave", "leave", "afterLeave", "useMenuTransition", "expanded", "computed", "direction", "shallowRef", "alignment", "trigger", "handleToggleExpand", "menu", "props", "__props", "emit", "__emit", "cls", "bem", "size", "useFallbackProps", "expandedPath", "shallowReactive", "MenuNode", "TreeNode", "__publicField", "menuForest", "computed", "Forest", "watch", "currentPath", "item", "parent", "_a", "provide", "MenuDIKey", "s", "i", "fe", "_cache", "MultiSelectDIKey", "emit", "__emit", "optionClass", "rippleClass", "inject", "MultiSelectDIKey", "useOptions", "o", "props", "queryString", "shallowRef", "remoteOptions", "filteredOptions", "options", "computed", "watch", "debounce", "qs", "propsOptions", "labelKey", "item", "props", "__props", "emit", "__emit", "cls", "bem", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "scrollRef", "shallowRef", "hovered", "options", "queryString", "useOptions", "totalHeight", "virtualList", "virtualEnabled", "measureElement", "useVirtual", "computed", "_a", "virtualOptions", "valueKey", "labelKey", "_options", "v", "option", "val", "getChainValue", "filterable", "model", "_useModel", "checkedSet", "shallowReactive", "allChecked", "indeterminate", "optionsMap", "dropdownRef", "modelIsChangedBySet", "setIsChangedByModel", "watch", "nextTick", "checkedArr", "tags", "visibilityLimit", "_b", "k", "restTag", "handleCheck", "checked", "handleCheckAll", "handleClear", "handleClose", "isDisabled", "max", "optionClass", "rippleClass", "provide", "MultiSelectDIKey", "l", "t", "TreeDIKey", "props", "__props", "treeProps", "treeEmit", "cls", "getTreeSlotsNode", "getFlattedNodes", "handleCheck", "handleSelect", "inject", "TreeDIKey", "toggleExpand", "node", "handleClick", "useSelect", "options", "emit", "props", "nodeDict", "selected", "shallowRef", "changedByEvent", "watch", "s", "_a", "node", "nextTick", "useCheck", "options", "emit", "props", "nodeDict", "checked", "shallowReactive", "modelChangedByEvent", "checkedSetChangeByModel", "watch", "c", "oc", "v", "node", "nextTick", "checkedArr", "item", "handleCheck", "check", "checkStrictly", "Tree", "parent", "child", "TreeNode", "_TreeNode", "params", "data", "index", "parent", "labelKey", "valueKey", "__publicField", "shallowReactive", "getChainValue", "props", "__props", "emit", "__emit", "cls", "bem", "formProps", "useFormComponent", "size", "useFormFallbackProps", "scrollRef", "shallowRef", "className", "computed", "slots", "useSlots", "getTreeSlotsNode", "ctx", "_b", "_a", "forest", "disabledNode", "Forest", "node", "watch", "expandAll", "nodes", "nodeDict", "dict", "getFlattedNodes", "_nodes", "traceCache", "hiddenNodes", "defaultFilter", "qs", "trace", "filter", "filterMethod", "handleSelect", "selected", "useSelect", "checked", "handleCheck", "useCheck", "totalHeight", "virtualList", "scrollTo", "virtualEnabled", "measureElement", "useVirtual", "virtualNodes", "item", "provide", "TreeDIKey", "__expose", "check", "t", "e", "fe", "cls", "bem", "props", "__props", "treeProps", "computed", "omit", "emit", "__emit", "slots", "_useSlots", "qs", "shallowRef", "watch", "_a", "treeRef", "model", "_useModel", "hovered", "tags", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "showClear", "dropdownRef", "changedByEvent", "markEvent", "nextTick", "allChecked", "_b", "indeterminate", "handleCheckAll", "checked", "handleCheck", "checkedData", "handleRemove", "index", "_", "i", "handleClear", "keyDicts", "data", "newDict", "item", "Tree", "v", "limit", "visibilityLimit", "visibleTags", "hiddenCount", "props", "__props", "number", "reactive", "tween", "computed", "Tween", "formatter", "n", "formatted", "watch", "_a", "d", "c", "props", "__props", "emit", "__emit", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "inputProps", "computed", "obj", "inputRef", "shallowRef", "inputDom", "_a", "cls", "bem", "className", "model", "_useModel", "displayed", "focused", "stepVal", "step", "increasable", "max", "isUndef", "reducible", "min", "getDisplayed", "num", "currency", "precision", "minPrecision", "maxPrecision", "_b", "n", "watch", "parseDisplayed", "str", "number", "result", "getValidValue", "val", "handleUpdateModelValue", "input", "newVal", "handleChange", "tween", "Tween", "state", "_rawInput", "increase", "target", "decrease", "handleKeydown", "e", "handleFocus", "handleBlur", "props", "__props", "emit", "__emit", "cls", "bem", "optionClass", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "model", "_useModel", "label", "selected", "shallowRef", "dropdownRef", "scrollRef", "filterable", "computed", "queryString", "options", "useOptions", "modelIsChangedBySelected", "setIsChangedByModel", "watch", "modelValue", "valueKey", "a", "option", "virtualList", "totalHeight", "virtualEnabled", "scrollTo", "measureElement", "useVirtual", "_a", "virtualOptions", "_options", "labelKey", "item", "getChainValue", "scroll", "nextTick", "index", "_d", "_c", "_b", "dropdownVisible", "v", "handleSelect", "handleClear", "config", "useConfig", "props", "__props", "cls", "bem", "size", "useFallbackProps", "pageNumber", "_useModel", "pageSize", "handleUpdateSize", "value", "handleChangePageNumber", "num", "watch", "currentSize", "computed", "totalPages", "sizeOptions", "pageNumbers", "startPageNum", "n", "_", "index", "preDisabled", "nextDisabled", "handleJumpToFirst", "handleJumpToLast", "handleJumpToPrev", "handleJumpToNext", "handleKeyEnter", "e", "val", "hovered", "reactive", "paginatorRef", "shallowRef", "__expose", "l", "passwordChar", "D", "cls", "bem", "model", "_useModel", "__props", "handleUpdatePwd", "e", "target", "val", "pointIndex", "inputChar", "rightLen", "leftLen", "leftVal", "rightVal", "nextTick", "handleClear", "pwdVisible", "shallowRef", "passwordText", "computed", "toggleVisible", "r", "M", "props", "__props", "cls", "bem", "percentage", "computed", "n", "type", "className", "stroke", "c", "offset", "dashArray", "dashLen", "model", "_useModel", "__props", "props", "cls", "bem", "formProps", "useFormComponent", "size", "disabled", "useFormFallbackProps", "radioChecked", "computed", "classList", "props", "__props", "model", "_useModel", "emit", "__emit", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "cls", "bem", "handleUpdate", "value", "item", "sliderContextKey", "useStops", "options", "sliderProps", "sliderSize", "stops", "computed", "stopCount", "stepWidth", "_", "index", "position", "newPosition", "positions", "distances", "minDistance", "nearestPositionIndex", "injected", "inject", "sliderContextKey", "cls", "sliderSize", "sliderProps", "disabled", "setSliderBarSize", "buttonValue", "_useModel", "__props", "setStepButtonPosition", "useStops", "slideButtonRef", "shallowRef", "emit", "__emit", "transform", "shallowReactive", "currentTransform", "watch", "warpStyles", "computed", "percentage", "isDragging", "p", "min", "max", "value", "useDrag", "e", "x", "y", "vertical", "newPosition", "nextTick", "r", "i", "useSlide", "props", "sliderSize", "onePosition", "ref", "twoPosition", "minValue", "maxValue", "runwayRef", "shallowRef", "useResizeObserver", "entry", "_a", "_b", "barStyles", "shallowReactive", "x", "y", "minPosition", "maxPosition", "props", "__props", "emit", "__emit", "cls", "bem", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "className", "computed", "sliderSize", "shallowRef", "sliderRef", "barStyles", "onePosition", "twoPosition", "updateSliderBarSize", "runwayRef", "minValue", "maxValue", "useSlide", "stops", "getStopStyle", "setStepButtonPosition", "useStops", "runwayClass", "model", "_useModel", "onePercentageValue", "ref", "twoPercentageValue", "handleSetOneToPxChange", "value", "handleSetTwoToPxChange", "watch", "_", "isArray", "handleDragEnd", "nextTick", "handleSetPosition", "e", "percentage", "buttonValue", "x", "y", "diffOne", "diffTwo", "provide", "sliderContextKey", "a", "n", "A", "slots", "useSlots", "icons", "computed", "_a", "descs", "currentIndex", "props", "item", "__props", "emit", "__emit", "size", "useFallbackProps", "cls", "bem", "stepClick", "defineSteps", "items", "props", "__props", "emit", "__emit", "slots", "_useSlots", "size", "useFallbackProps", "tabItems", "computed", "cls", "bem", "headerRef", "shallowRef", "index", "model", "_useModel", "markStyle", "watch", "position", "editable", "nextTick", "headerEl", "headerRect", "el", "offsetWidth", "offsetHeight", "rect", "changedByEvent", "item", "handleClick", "_index", "renderSlots", "key", "nodes", "_a", "createVNode", "UScroll", "handleClose", "items", "handleAdd", "escapeRegexp", "term", "char", "getHighlightChunks", "str", "substrings", "_substrings", "s", "re", "text", "props", "__props", "cls", "bem", "classList", "computed", "style", "withUnit", "deleted", "underline", "slots", "useSlots", "getTextVNode", "nodes", "_a", "textNodes", "node", "isTextNode", "highlight", "textNode", "getHighlightChunks", "chunk", "h", "createTextVNode", "TextEditorDIKey", "barRef", "shallowRef", "cls", "bem", "injected", "inject", "TextEditorDIKey", "__expose", "C", "n", "emit", "__emit", "props", "__props", "provide", "TextEditorDIKey", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "className", "computed", "cls", "bem", "editorRef", "shallowRef", "barRef", "options", "quill", "stamp", "ref", "getOptions", "_a", "reRendering", "nextTick", "createTextEditor", "destroy", "Quill", "update", "onMounted", "watch", "quillRef", "setValue", "value", "getModelBar", "_", "__", "___", "contents", "onBeforeUnmount", "val", "qui", "__expose", "t", "n", "calcTextareaHeight", "el", "setStyles", "nextTick", "scrollHeight", "props", "__props", "cls", "bem", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "emit", "__emit", "textareaRef", "ref", "model", "_useModel", "hovered", "shallowRef", "focus", "handleBlur", "handleFocus", "useFocus", "focused", "textareaClass", "computed", "handleInput", "e", "value", "truncatedValue", "initNum", "_a", "handleClear", "handleChange", "watch", "calcTextareaHeight", "o", "p", "ThemeDIKey", "cls", "inject", "ThemeDIKey", "cls", "inject", "ThemeDIKey", "cls", "bem", "provide", "ThemeDIKey", "z", "a", "cls", "bem", "props", "__props", "treeProps", "computed", "omit", "emit", "__emit", "slots", "_useSlots", "qs", "shallowRef", "watch", "_a", "treeRef", "model", "_useModel", "label", "formProps", "useFormComponent", "size", "disabled", "readonly", "useFormFallbackProps", "dropdownRef", "handleClear", "changedByEvent", "data", "founded", "item", "Tree", "v", "handleSelect", "selected", "selectedData", "nextTick", "getChainValue", "l", "a", "R", "cls", "bem", "props", "__props", "watermarkRef", "ref", "watermark", "reactive", "setWatermark", "debounce", "str", "container", "canvas", "ctx", "textWidth", "setStyles", "onBeforeUnmount", "onMounted", "r", "s"]
}
